function p5(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function St(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T_={exports:{}},Jm={},k_={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),g5=Symbol.for("react.portal"),x5=Symbol.for("react.fragment"),y5=Symbol.for("react.strict_mode"),v5=Symbol.for("react.profiler"),b5=Symbol.for("react.provider"),j5=Symbol.for("react.context"),w5=Symbol.for("react.forward_ref"),N5=Symbol.for("react.suspense"),S5=Symbol.for("react.memo"),_5=Symbol.for("react.lazy"),ij=Symbol.iterator;function A5(e){return e===null||typeof e!="object"?null:(e=ij&&e[ij]||e["@@iterator"],typeof e=="function"?e:null)}var M_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D_=Object.assign,$_={};function El(e,t,r){this.props=e,this.context=t,this.refs=$_,this.updater=r||M_}El.prototype.isReactComponent={};El.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};El.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function I_(){}I_.prototype=El.prototype;function Ny(e,t,r){this.props=e,this.context=t,this.refs=$_,this.updater=r||M_}var Sy=Ny.prototype=new I_;Sy.constructor=Ny;D_(Sy,El.prototype);Sy.isPureReactComponent=!0;var oj=Array.isArray,L_=Object.prototype.hasOwnProperty,_y={current:null},R_={key:!0,ref:!0,__self:!0,__source:!0};function B_(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)L_.call(t,n)&&!R_.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ku,type:e,key:i,ref:o,props:s,_owner:_y.current}}function P5(e,t){return{$$typeof:Ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ay(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ku}function E5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var lj=/\/+/g;function jp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?E5(""+e.key):t.toString(36)}function Xd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ku:case g5:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jp(o,0):n,oj(s)?(r="",e!=null&&(r=e.replace(lj,"$&/")+"/"),Xd(s,t,r,"",function(u){return u})):s!=null&&(Ay(s)&&(s=P5(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(lj,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",oj(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jp(i,l);o+=Xd(i,t,r,c,s)}else if(c=A5(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jp(i,l++),o+=Xd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function md(e,t,r){if(e==null)return e;var n=[],s=0;return Xd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function C5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tn={current:null},Jd={transition:null},O5={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:_y};function F_(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:md,forEach:function(e,t,r){md(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return md(e,function(){t++}),t},toArray:function(e){return md(e,function(t){return t})||[]},only:function(e){if(!Ay(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ut.Component=El;ut.Fragment=x5;ut.Profiler=v5;ut.PureComponent=Ny;ut.StrictMode=y5;ut.Suspense=N5;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O5;ut.act=F_;ut.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=D_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_y.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)L_.call(t,c)&&!R_.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ku,type:e.type,key:s,ref:i,props:n,_owner:o}};ut.createContext=function(e){return e={$$typeof:j5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:b5,_context:e},e.Consumer=e};ut.createElement=B_;ut.createFactory=function(e){var t=B_.bind(null,e);return t.type=e,t};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:w5,render:e}};ut.isValidElement=Ay;ut.lazy=function(e){return{$$typeof:_5,_payload:{_status:-1,_result:e},_init:C5}};ut.memo=function(e,t){return{$$typeof:S5,type:e,compare:t===void 0?null:t}};ut.startTransition=function(e){var t=Jd.transition;Jd.transition={};try{e()}finally{Jd.transition=t}};ut.unstable_act=F_;ut.useCallback=function(e,t){return tn.current.useCallback(e,t)};ut.useContext=function(e){return tn.current.useContext(e)};ut.useDebugValue=function(){};ut.useDeferredValue=function(e){return tn.current.useDeferredValue(e)};ut.useEffect=function(e,t){return tn.current.useEffect(e,t)};ut.useId=function(){return tn.current.useId()};ut.useImperativeHandle=function(e,t,r){return tn.current.useImperativeHandle(e,t,r)};ut.useInsertionEffect=function(e,t){return tn.current.useInsertionEffect(e,t)};ut.useLayoutEffect=function(e,t){return tn.current.useLayoutEffect(e,t)};ut.useMemo=function(e,t){return tn.current.useMemo(e,t)};ut.useReducer=function(e,t,r){return tn.current.useReducer(e,t,r)};ut.useRef=function(e){return tn.current.useRef(e)};ut.useState=function(e){return tn.current.useState(e)};ut.useSyncExternalStore=function(e,t,r){return tn.current.useSyncExternalStore(e,t,r)};ut.useTransition=function(){return tn.current.useTransition()};ut.version="18.3.1";k_.exports=ut;var N=k_.exports;const H=St(N),T5=p5({__proto__:null,default:H},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k5=N,M5=Symbol.for("react.element"),D5=Symbol.for("react.fragment"),$5=Object.prototype.hasOwnProperty,I5=k5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L5={key:!0,ref:!0,__self:!0,__source:!0};function z_(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)$5.call(t,n)&&!L5.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:M5,type:e,key:i,ref:o,props:s,_owner:I5.current}}Jm.Fragment=D5;Jm.jsx=z_;Jm.jsxs=z_;T_.exports=Jm;var a=T_.exports,Lg={},V_={exports:{}},_n={},U_={exports:{}},W_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,R){var Q=$.length;$.push(R);e:for(;0<Q;){var ae=Q-1>>>1,oe=$[ae];if(0<s(oe,R))$[ae]=R,$[Q]=oe,Q=ae;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var R=$[0],Q=$.pop();if(Q!==R){$[0]=Q;e:for(var ae=0,oe=$.length,Z=oe>>>1;ae<Z;){var pe=2*(ae+1)-1,Ee=$[pe],Y=pe+1,J=$[Y];if(0>s(Ee,Q))Y<oe&&0>s(J,Ee)?($[ae]=J,$[Y]=Q,ae=Y):($[ae]=Ee,$[pe]=Q,ae=pe);else if(Y<oe&&0>s(J,Q))$[ae]=J,$[Y]=Q,ae=Y;else break e}}return R}function s($,R){var Q=$.sortIndex-R.sortIndex;return Q!==0?Q:$.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,m=3,g=!1,j=!1,h=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=$)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function S($){if(h=!1,v($),!j)if(r(c)!==null)j=!0,D(w);else{var R=r(u);R!==null&&O(S,R.startTime-$)}}function w($,R){j=!1,h&&(h=!1,p(P),P=-1),g=!0;var Q=m;try{for(v(R),d=r(c);d!==null&&(!(d.expirationTime>R)||$&&!A());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,m=d.priorityLevel;var oe=ae(d.expirationTime<=R);R=e.unstable_now(),typeof oe=="function"?d.callback=oe:d===r(c)&&n(c),v(R)}else n(c);d=r(c)}if(d!==null)var Z=!0;else{var pe=r(u);pe!==null&&O(S,pe.startTime-R),Z=!1}return Z}finally{d=null,m=Q,g=!1}}var b=!1,_=null,P=-1,C=5,M=-1;function A(){return!(e.unstable_now()-M<C)}function E(){if(_!==null){var $=e.unstable_now();M=$;var R=!0;try{R=_(!0,$)}finally{R?T():(b=!1,_=null)}}else b=!1}var T;if(typeof x=="function")T=function(){x(E)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=E,T=function(){I.postMessage(null)}}else T=function(){y(E,0)};function D($){_=$,b||(b=!0,T())}function O($,R){P=y(function(){$(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){j||g||(j=!0,D(w))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function($){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var Q=m;m=R;try{return $()}finally{m=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,R){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Q=m;m=$;try{return R()}finally{m=Q}},e.unstable_scheduleCallback=function($,R,Q){var ae=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ae+Q:ae):Q=ae,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Q+oe,$={id:f++,callback:R,priorityLevel:$,startTime:Q,expirationTime:oe,sortIndex:-1},Q>ae?($.sortIndex=Q,t(u,$),r(c)===null&&$===r(u)&&(h?(p(P),P=-1):h=!0,O(S,Q-ae))):($.sortIndex=oe,t(c,$),j||g||(j=!0,D(w))),$},e.unstable_shouldYield=A,e.unstable_wrapCallback=function($){var R=m;return function(){var Q=m;m=R;try{return $.apply(this,arguments)}finally{m=Q}}}})(W_);U_.exports=W_;var R5=U_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B5=N,Nn=R5;function je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H_=new Set,Uc={};function Ji(e,t){Go(e,t),Go(e+"Capture",t)}function Go(e,t){for(Uc[e]=t,e=0;e<t.length;e++)H_.add(t[e])}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,F5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cj={},uj={};function z5(e){return Rg.call(uj,e)?!0:Rg.call(cj,e)?!1:F5.test(e)?uj[e]=!0:(cj[e]=!0,!1)}function V5(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U5(e,t,r,n){if(t===null||typeof t>"u"||V5(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rn(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var kr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){kr[e]=new rn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];kr[t]=new rn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){kr[e]=new rn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){kr[e]=new rn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){kr[e]=new rn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){kr[e]=new rn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){kr[e]=new rn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){kr[e]=new rn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){kr[e]=new rn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Py=/[\-:]([a-z])/g;function Ey(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Py,Ey);kr[t]=new rn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Py,Ey);kr[t]=new rn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Py,Ey);kr[t]=new rn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){kr[e]=new rn(e,1,!1,e.toLowerCase(),null,!1,!1)});kr.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){kr[e]=new rn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cy(e,t,r,n){var s=kr.hasOwnProperty(t)?kr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(U5(t,r,s,n)&&(r=null),n||s===null?z5(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ls=B5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hd=Symbol.for("react.element"),uo=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),q_=Symbol.for("react.provider"),G_=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),ky=Symbol.for("react.memo"),ys=Symbol.for("react.lazy"),K_=Symbol.for("react.offscreen"),dj=Symbol.iterator;function Gl(e){return e===null||typeof e!="object"?null:(e=dj&&e[dj]||e["@@iterator"],typeof e=="function"?e:null)}var Qt=Object.assign,wp;function hc(e){if(wp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wp=t&&t[1]||""}return`
`+wp+e}var Np=!1;function Sp(e,t){if(!e||Np)return"";Np=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Np=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hc(e):""}function W5(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=Sp(e.type,!1),e;case 11:return e=Sp(e.type.render,!1),e;case 1:return e=Sp(e.type,!0),e;default:return""}}function Vg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fo:return"Fragment";case uo:return"Portal";case Bg:return"Profiler";case Oy:return"StrictMode";case Fg:return"Suspense";case zg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case G_:return(e.displayName||"Context")+".Consumer";case q_:return(e._context.displayName||"Context")+".Provider";case Ty:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ky:return t=e.displayName||null,t!==null?t:Vg(e.type)||"Memo";case ys:t=e._payload,e=e._init;try{return Vg(e(t))}catch{}}return null}function H5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vg(t);case 8:return t===Oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Y_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function q5(e){var t=Y_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pd(e){e._valueTracker||(e._valueTracker=q5(e))}function X_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Y_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function pf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var r=t.checked;return Qt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function fj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=qs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function J_(e,t){t=t.checked,t!=null&&Cy(e,"checked",t,!1)}function Wg(e,t){J_(e,t);var r=qs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Hg(e,t.type,qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Hg(e,t,r){(t!=="number"||pf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pc=Array.isArray;function Do(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+qs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(je(91));return Qt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(je(92));if(pc(r)){if(1<r.length)throw Error(je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:qs(r)}}function Z_(e,t){var r=qs(t.value),n=qs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function pj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Q_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Q_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gd,eA=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gd=gd||document.createElement("div"),gd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G5=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(e){G5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wc[t]=wc[e]})});function tA(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||wc.hasOwnProperty(e)&&wc[e]?(""+t).trim():t+"px"}function rA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=tA(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var K5=Qt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(e,t){if(t){if(K5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(je(62))}}function Yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function My(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jg=null,$o=null,Io=null;function gj(e){if(e=Ju(e)){if(typeof Jg!="function")throw Error(je(280));var t=e.stateNode;t&&(t=rh(t),Jg(e.stateNode,e.type,t))}}function nA(e){$o?Io?Io.push(e):Io=[e]:$o=e}function aA(){if($o){var e=$o,t=Io;if(Io=$o=null,gj(e),t)for(e=0;e<t.length;e++)gj(t[e])}}function sA(e,t){return e(t)}function iA(){}var _p=!1;function oA(e,t,r){if(_p)return e(t,r);_p=!0;try{return sA(e,t,r)}finally{_p=!1,($o!==null||Io!==null)&&(iA(),aA())}}function Hc(e,t){var r=e.stateNode;if(r===null)return null;var n=rh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(je(231,t,typeof r));return r}var Zg=!1;if(Ja)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Zg=!1}function Y5(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Nc=!1,gf=null,xf=!1,Qg=null,X5={onError:function(e){Nc=!0,gf=e}};function J5(e,t,r,n,s,i,o,l,c){Nc=!1,gf=null,Y5.apply(X5,arguments)}function Z5(e,t,r,n,s,i,o,l,c){if(J5.apply(this,arguments),Nc){if(Nc){var u=gf;Nc=!1,gf=null}else throw Error(je(198));xf||(xf=!0,Qg=u)}}function Zi(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function lA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xj(e){if(Zi(e)!==e)throw Error(je(188))}function Q5(e){var t=e.alternate;if(!t){if(t=Zi(e),t===null)throw Error(je(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return xj(s),e;if(i===n)return xj(s),t;i=i.sibling}throw Error(je(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(je(189))}}if(r.alternate!==n)throw Error(je(190))}if(r.tag!==3)throw Error(je(188));return r.stateNode.current===r?e:t}function cA(e){return e=Q5(e),e!==null?uA(e):null}function uA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=uA(e);if(t!==null)return t;e=e.sibling}return null}var dA=Nn.unstable_scheduleCallback,yj=Nn.unstable_cancelCallback,e4=Nn.unstable_shouldYield,t4=Nn.unstable_requestPaint,nr=Nn.unstable_now,r4=Nn.unstable_getCurrentPriorityLevel,Dy=Nn.unstable_ImmediatePriority,fA=Nn.unstable_UserBlockingPriority,yf=Nn.unstable_NormalPriority,n4=Nn.unstable_LowPriority,mA=Nn.unstable_IdlePriority,Zm=null,ba=null;function a4(e){if(ba&&typeof ba.onCommitFiberRoot=="function")try{ba.onCommitFiberRoot(Zm,e,void 0,(e.current.flags&128)===128)}catch{}}var aa=Math.clz32?Math.clz32:o4,s4=Math.log,i4=Math.LN2;function o4(e){return e>>>=0,e===0?32:31-(s4(e)/i4|0)|0}var xd=64,yd=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=gc(l):(i&=o,i!==0&&(n=gc(i)))}else o=r&~s,o!==0?n=gc(o):i!==0&&(n=gc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-aa(t),s=1<<r,n|=e[r],t&=~s;return n}function l4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function c4(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-aa(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=l4(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ex(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hA(){var e=xd;return xd<<=1,!(xd&4194240)&&(xd=64),e}function Ap(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-aa(t),e[t]=r}function u4(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-aa(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function $y(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-aa(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Nt=0;function pA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var gA,Iy,xA,yA,vA,tx=!1,vd=[],ks=null,Ms=null,Ds=null,qc=new Map,Gc=new Map,Ns=[],d4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vj(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Ms=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(t.pointerId)}}function Yl(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ju(t),t!==null&&Iy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function f4(e,t,r,n,s){switch(t){case"focusin":return ks=Yl(ks,e,t,r,n,s),!0;case"dragenter":return Ms=Yl(Ms,e,t,r,n,s),!0;case"mouseover":return Ds=Yl(Ds,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return qc.set(i,Yl(qc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Gc.set(i,Yl(Gc.get(i)||null,e,t,r,n,s)),!0}return!1}function bA(e){var t=wi(e.target);if(t!==null){var r=Zi(t);if(r!==null){if(t=r.tag,t===13){if(t=lA(r),t!==null){e.blockedOn=t,vA(e.priority,function(){xA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xg=n,r.target.dispatchEvent(n),Xg=null}else return t=Ju(r),t!==null&&Iy(t),e.blockedOn=r,!1;t.shift()}return!0}function bj(e,t,r){Zd(e)&&r.delete(t)}function m4(){tx=!1,ks!==null&&Zd(ks)&&(ks=null),Ms!==null&&Zd(Ms)&&(Ms=null),Ds!==null&&Zd(Ds)&&(Ds=null),qc.forEach(bj),Gc.forEach(bj)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,tx||(tx=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,m4)))}function Kc(e){function t(s){return Xl(s,e)}if(0<vd.length){Xl(vd[0],e);for(var r=1;r<vd.length;r++){var n=vd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ks!==null&&Xl(ks,e),Ms!==null&&Xl(Ms,e),Ds!==null&&Xl(Ds,e),qc.forEach(t),Gc.forEach(t),r=0;r<Ns.length;r++)n=Ns[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ns.length&&(r=Ns[0],r.blockedOn===null);)bA(r),r.blockedOn===null&&Ns.shift()}var Lo=ls.ReactCurrentBatchConfig,bf=!0;function h4(e,t,r,n){var s=Nt,i=Lo.transition;Lo.transition=null;try{Nt=1,Ly(e,t,r,n)}finally{Nt=s,Lo.transition=i}}function p4(e,t,r,n){var s=Nt,i=Lo.transition;Lo.transition=null;try{Nt=4,Ly(e,t,r,n)}finally{Nt=s,Lo.transition=i}}function Ly(e,t,r,n){if(bf){var s=rx(e,t,r,n);if(s===null)Ip(e,t,n,jf,r),vj(e,n);else if(f4(s,e,t,r,n))n.stopPropagation();else if(vj(e,n),t&4&&-1<d4.indexOf(e)){for(;s!==null;){var i=Ju(s);if(i!==null&&gA(i),i=rx(e,t,r,n),i===null&&Ip(e,t,n,jf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ip(e,t,n,null,r)}}var jf=null;function rx(e,t,r,n){if(jf=null,e=My(n),e=wi(e),e!==null)if(t=Zi(e),t===null)e=null;else if(r=t.tag,r===13){if(e=lA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jf=e,null}function jA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r4()){case Dy:return 1;case fA:return 4;case yf:case n4:return 16;case mA:return 536870912;default:return 16}default:return 16}}var As=null,Ry=null,Qd=null;function wA(){if(Qd)return Qd;var e,t=Ry,r=t.length,n,s="value"in As?As.value:As.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Qd=s.slice(e,1<n?1-n:void 0)}function ef(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bd(){return!0}function jj(){return!1}function An(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bd:jj,this.isPropagationStopped=jj,this}return Qt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bd)},persist:function(){},isPersistent:bd}),t}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},By=An(Cl),Xu=Qt({},Cl,{view:0,detail:0}),g4=An(Xu),Pp,Ep,Jl,Qm=Qt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(Pp=e.screenX-Jl.screenX,Ep=e.screenY-Jl.screenY):Ep=Pp=0,Jl=e),Pp)},movementY:function(e){return"movementY"in e?e.movementY:Ep}}),wj=An(Qm),x4=Qt({},Qm,{dataTransfer:0}),y4=An(x4),v4=Qt({},Xu,{relatedTarget:0}),Cp=An(v4),b4=Qt({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),j4=An(b4),w4=Qt({},Cl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N4=An(w4),S4=Qt({},Cl,{data:0}),Nj=An(S4),_4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=P4[e])?!!t[e]:!1}function Fy(){return E4}var C4=Qt({},Xu,{key:function(e){if(e.key){var t=_4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ef(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fy,charCode:function(e){return e.type==="keypress"?ef(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ef(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),O4=An(C4),T4=Qt({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sj=An(T4),k4=Qt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fy}),M4=An(k4),D4=Qt({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),$4=An(D4),I4=Qt({},Qm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),L4=An(I4),R4=[9,13,27,32],zy=Ja&&"CompositionEvent"in window,Sc=null;Ja&&"documentMode"in document&&(Sc=document.documentMode);var B4=Ja&&"TextEvent"in window&&!Sc,NA=Ja&&(!zy||Sc&&8<Sc&&11>=Sc),_j=" ",Aj=!1;function SA(e,t){switch(e){case"keyup":return R4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _A(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mo=!1;function F4(e,t){switch(e){case"compositionend":return _A(t);case"keypress":return t.which!==32?null:(Aj=!0,_j);case"textInput":return e=t.data,e===_j&&Aj?null:e;default:return null}}function z4(e,t){if(mo)return e==="compositionend"||!zy&&SA(e,t)?(e=wA(),Qd=Ry=As=null,mo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return NA&&t.locale!=="ko"?null:t.data;default:return null}}var V4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!V4[e.type]:t==="textarea"}function AA(e,t,r,n){nA(n),t=wf(t,"onChange"),0<t.length&&(r=new By("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var _c=null,Yc=null;function U4(e){LA(e,0)}function eh(e){var t=go(e);if(X_(t))return e}function W4(e,t){if(e==="change")return t}var PA=!1;if(Ja){var Op;if(Ja){var Tp="oninput"in document;if(!Tp){var Ej=document.createElement("div");Ej.setAttribute("oninput","return;"),Tp=typeof Ej.oninput=="function"}Op=Tp}else Op=!1;PA=Op&&(!document.documentMode||9<document.documentMode)}function Cj(){_c&&(_c.detachEvent("onpropertychange",EA),Yc=_c=null)}function EA(e){if(e.propertyName==="value"&&eh(Yc)){var t=[];AA(t,Yc,e,My(e)),oA(U4,t)}}function H4(e,t,r){e==="focusin"?(Cj(),_c=t,Yc=r,_c.attachEvent("onpropertychange",EA)):e==="focusout"&&Cj()}function q4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eh(Yc)}function G4(e,t){if(e==="click")return eh(t)}function K4(e,t){if(e==="input"||e==="change")return eh(t)}function Y4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var la=typeof Object.is=="function"?Object.is:Y4;function Xc(e,t){if(la(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rg.call(t,s)||!la(e[s],t[s]))return!1}return!0}function Oj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Tj(e,t){var r=Oj(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Oj(r)}}function CA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function OA(){for(var e=window,t=pf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pf(e.document)}return t}function Vy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function X4(e){var t=OA(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&CA(r.ownerDocument.documentElement,r)){if(n!==null&&Vy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Tj(r,i);var o=Tj(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var J4=Ja&&"documentMode"in document&&11>=document.documentMode,ho=null,nx=null,Ac=null,ax=!1;function kj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ax||ho==null||ho!==pf(n)||(n=ho,"selectionStart"in n&&Vy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ac&&Xc(Ac,n)||(Ac=n,n=wf(nx,"onSelect"),0<n.length&&(t=new By("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ho)))}function jd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var po={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},kp={},TA={};Ja&&(TA=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function th(e){if(kp[e])return kp[e];if(!po[e])return e;var t=po[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in TA)return kp[e]=t[r];return e}var kA=th("animationend"),MA=th("animationiteration"),DA=th("animationstart"),$A=th("transitionend"),IA=new Map,Mj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(e,t){IA.set(e,t),Ji(t,[e])}for(var Mp=0;Mp<Mj.length;Mp++){var Dp=Mj[Mp],Z4=Dp.toLowerCase(),Q4=Dp[0].toUpperCase()+Dp.slice(1);Js(Z4,"on"+Q4)}Js(kA,"onAnimationEnd");Js(MA,"onAnimationIteration");Js(DA,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js($A,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eM=new Set("cancel close invalid load scroll toggle".split(" ").concat(xc));function Dj(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Z5(n,t,void 0,e),e.currentTarget=null}function LA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Dj(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Dj(s,l,u),i=c}}}if(xf)throw e=Qg,xf=!1,Qg=null,e}function Bt(e,t){var r=t[cx];r===void 0&&(r=t[cx]=new Set);var n=e+"__bubble";r.has(n)||(RA(t,e,2,!1),r.add(n))}function $p(e,t,r){var n=0;t&&(n|=4),RA(r,e,n,t)}var wd="_reactListening"+Math.random().toString(36).slice(2);function Jc(e){if(!e[wd]){e[wd]=!0,H_.forEach(function(r){r!=="selectionchange"&&(eM.has(r)||$p(r,!1,e),$p(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wd]||(t[wd]=!0,$p("selectionchange",!1,t))}}function RA(e,t,r,n){switch(jA(t)){case 1:var s=h4;break;case 4:s=p4;break;default:s=Ly}r=s.bind(null,t,r,e),s=void 0,!Zg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ip(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=wi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}oA(function(){var u=i,f=My(r),d=[];e:{var m=IA.get(e);if(m!==void 0){var g=By,j=e;switch(e){case"keypress":if(ef(r)===0)break e;case"keydown":case"keyup":g=O4;break;case"focusin":j="focus",g=Cp;break;case"focusout":j="blur",g=Cp;break;case"beforeblur":case"afterblur":g=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=wj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=y4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=M4;break;case kA:case MA:case DA:g=j4;break;case $A:g=$4;break;case"scroll":g=g4;break;case"wheel":g=L4;break;case"copy":case"cut":case"paste":g=N4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Sj}var h=(t&4)!==0,y=!h&&e==="scroll",p=h?m!==null?m+"Capture":null:m;h=[];for(var x=u,v;x!==null;){v=x;var S=v.stateNode;if(v.tag===5&&S!==null&&(v=S,p!==null&&(S=Hc(x,p),S!=null&&h.push(Zc(x,S,v)))),y)break;x=x.return}0<h.length&&(m=new g(m,j,null,r,f),d.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==Xg&&(j=r.relatedTarget||r.fromElement)&&(wi(j)||j[Za]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(j=r.relatedTarget||r.toElement,g=u,j=j?wi(j):null,j!==null&&(y=Zi(j),j!==y||j.tag!==5&&j.tag!==6)&&(j=null)):(g=null,j=u),g!==j)){if(h=wj,S="onMouseLeave",p="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(h=Sj,S="onPointerLeave",p="onPointerEnter",x="pointer"),y=g==null?m:go(g),v=j==null?m:go(j),m=new h(S,x+"leave",g,r,f),m.target=y,m.relatedTarget=v,S=null,wi(f)===u&&(h=new h(p,x+"enter",j,r,f),h.target=v,h.relatedTarget=y,S=h),y=S,g&&j)t:{for(h=g,p=j,x=0,v=h;v;v=so(v))x++;for(v=0,S=p;S;S=so(S))v++;for(;0<x-v;)h=so(h),x--;for(;0<v-x;)p=so(p),v--;for(;x--;){if(h===p||p!==null&&h===p.alternate)break t;h=so(h),p=so(p)}h=null}else h=null;g!==null&&$j(d,m,g,h,!1),j!==null&&y!==null&&$j(d,y,j,h,!0)}}e:{if(m=u?go(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var w=W4;else if(Pj(m))if(PA)w=K4;else{w=q4;var b=H4}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=G4);if(w&&(w=w(e,u))){AA(d,w,r,f);break e}b&&b(e,m,u),e==="focusout"&&(b=m._wrapperState)&&b.controlled&&m.type==="number"&&Hg(m,"number",m.value)}switch(b=u?go(u):window,e){case"focusin":(Pj(b)||b.contentEditable==="true")&&(ho=b,nx=u,Ac=null);break;case"focusout":Ac=nx=ho=null;break;case"mousedown":ax=!0;break;case"contextmenu":case"mouseup":case"dragend":ax=!1,kj(d,r,f);break;case"selectionchange":if(J4)break;case"keydown":case"keyup":kj(d,r,f)}var _;if(zy)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else mo?SA(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(NA&&r.locale!=="ko"&&(mo||P!=="onCompositionStart"?P==="onCompositionEnd"&&mo&&(_=wA()):(As=f,Ry="value"in As?As.value:As.textContent,mo=!0)),b=wf(u,P),0<b.length&&(P=new Nj(P,e,null,r,f),d.push({event:P,listeners:b}),_?P.data=_:(_=_A(r),_!==null&&(P.data=_)))),(_=B4?F4(e,r):z4(e,r))&&(u=wf(u,"onBeforeInput"),0<u.length&&(f=new Nj("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=_))}LA(d,t)})}function Zc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function wf(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hc(e,r),i!=null&&n.unshift(Zc(e,i,s)),i=Hc(e,t),i!=null&&n.push(Zc(e,i,s))),e=e.return}return n}function so(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $j(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Hc(r,i),c!=null&&o.unshift(Zc(r,c,l))):s||(c=Hc(r,i),c!=null&&o.push(Zc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var tM=/\r\n?/g,rM=/\u0000|\uFFFD/g;function Ij(e){return(typeof e=="string"?e:""+e).replace(tM,`
`).replace(rM,"")}function Nd(e,t,r){if(t=Ij(t),Ij(e)!==t&&r)throw Error(je(425))}function Nf(){}var sx=null,ix=null;function ox(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lx=typeof setTimeout=="function"?setTimeout:void 0,nM=typeof clearTimeout=="function"?clearTimeout:void 0,Lj=typeof Promise=="function"?Promise:void 0,aM=typeof queueMicrotask=="function"?queueMicrotask:typeof Lj<"u"?function(e){return Lj.resolve(null).then(e).catch(sM)}:lx;function sM(e){setTimeout(function(){throw e})}function Lp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Kc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Kc(t)}function $s(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Rj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),ma="__reactFiber$"+Ol,Qc="__reactProps$"+Ol,Za="__reactContainer$"+Ol,cx="__reactEvents$"+Ol,iM="__reactListeners$"+Ol,oM="__reactHandles$"+Ol;function wi(e){var t=e[ma];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Za]||r[ma]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Rj(e);e!==null;){if(r=e[ma])return r;e=Rj(e)}return t}e=r,r=e.parentNode}return null}function Ju(e){return e=e[ma]||e[Za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function go(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(je(33))}function rh(e){return e[Qc]||null}var ux=[],xo=-1;function Zs(e){return{current:e}}function Vt(e){0>xo||(e.current=ux[xo],ux[xo]=null,xo--)}function It(e,t){xo++,ux[xo]=e.current,e.current=t}var Gs={},Ur=Zs(Gs),dn=Zs(!1),Ri=Gs;function Ko(e,t){var r=e.type.contextTypes;if(!r)return Gs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function fn(e){return e=e.childContextTypes,e!=null}function Sf(){Vt(dn),Vt(Ur)}function Bj(e,t,r){if(Ur.current!==Gs)throw Error(je(168));It(Ur,t),It(dn,r)}function BA(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(je(108,H5(e)||"Unknown",s));return Qt({},r,n)}function _f(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gs,Ri=Ur.current,It(Ur,e),It(dn,dn.current),!0}function Fj(e,t,r){var n=e.stateNode;if(!n)throw Error(je(169));r?(e=BA(e,t,Ri),n.__reactInternalMemoizedMergedChildContext=e,Vt(dn),Vt(Ur),It(Ur,e)):Vt(dn),It(dn,r)}var Ra=null,nh=!1,Rp=!1;function FA(e){Ra===null?Ra=[e]:Ra.push(e)}function lM(e){nh=!0,FA(e)}function Qs(){if(!Rp&&Ra!==null){Rp=!0;var e=0,t=Nt;try{var r=Ra;for(Nt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ra=null,nh=!1}catch(s){throw Ra!==null&&(Ra=Ra.slice(e+1)),dA(Dy,Qs),s}finally{Nt=t,Rp=!1}}return null}var yo=[],vo=0,Af=null,Pf=0,Mn=[],Dn=0,Bi=null,Ba=1,Fa="";function fi(e,t){yo[vo++]=Pf,yo[vo++]=Af,Af=e,Pf=t}function zA(e,t,r){Mn[Dn++]=Ba,Mn[Dn++]=Fa,Mn[Dn++]=Bi,Bi=e;var n=Ba;e=Fa;var s=32-aa(n)-1;n&=~(1<<s),r+=1;var i=32-aa(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ba=1<<32-aa(t)+s|r<<s|n,Fa=i+e}else Ba=1<<i|r<<s|n,Fa=e}function Uy(e){e.return!==null&&(fi(e,1),zA(e,1,0))}function Wy(e){for(;e===Af;)Af=yo[--vo],yo[vo]=null,Pf=yo[--vo],yo[vo]=null;for(;e===Bi;)Bi=Mn[--Dn],Mn[Dn]=null,Fa=Mn[--Dn],Mn[Dn]=null,Ba=Mn[--Dn],Mn[Dn]=null}var jn=null,bn=null,qt=!1,Qn=null;function VA(e,t){var r=In(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function zj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jn=e,bn=$s(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jn=e,bn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bi!==null?{id:Ba,overflow:Fa}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=In(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,jn=e,bn=null,!0):!1;default:return!1}}function dx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fx(e){if(qt){var t=bn;if(t){var r=t;if(!zj(e,t)){if(dx(e))throw Error(je(418));t=$s(r.nextSibling);var n=jn;t&&zj(e,t)?VA(n,r):(e.flags=e.flags&-4097|2,qt=!1,jn=e)}}else{if(dx(e))throw Error(je(418));e.flags=e.flags&-4097|2,qt=!1,jn=e}}}function Vj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jn=e}function Sd(e){if(e!==jn)return!1;if(!qt)return Vj(e),qt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ox(e.type,e.memoizedProps)),t&&(t=bn)){if(dx(e))throw UA(),Error(je(418));for(;t;)VA(e,t),t=$s(t.nextSibling)}if(Vj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){bn=$s(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}bn=null}}else bn=jn?$s(e.stateNode.nextSibling):null;return!0}function UA(){for(var e=bn;e;)e=$s(e.nextSibling)}function Yo(){bn=jn=null,qt=!1}function Hy(e){Qn===null?Qn=[e]:Qn.push(e)}var cM=ls.ReactCurrentBatchConfig;function Zl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(je(309));var n=r.stateNode}if(!n)throw Error(je(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(je(284));if(!r._owner)throw Error(je(290,e))}return e}function _d(e,t){throw e=Object.prototype.toString.call(t),Error(je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uj(e){var t=e._init;return t(e._payload)}function WA(e){function t(p,x){if(e){var v=p.deletions;v===null?(p.deletions=[x],p.flags|=16):v.push(x)}}function r(p,x){if(!e)return null;for(;x!==null;)t(p,x),x=x.sibling;return null}function n(p,x){for(p=new Map;x!==null;)x.key!==null?p.set(x.key,x):p.set(x.index,x),x=x.sibling;return p}function s(p,x){return p=Bs(p,x),p.index=0,p.sibling=null,p}function i(p,x,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<x?(p.flags|=2,x):v):(p.flags|=2,x)):(p.flags|=1048576,x)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,x,v,S){return x===null||x.tag!==6?(x=Hp(v,p.mode,S),x.return=p,x):(x=s(x,v),x.return=p,x)}function c(p,x,v,S){var w=v.type;return w===fo?f(p,x,v.props.children,S,v.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ys&&Uj(w)===x.type)?(S=s(x,v.props),S.ref=Zl(p,x,v),S.return=p,S):(S=lf(v.type,v.key,v.props,null,p.mode,S),S.ref=Zl(p,x,v),S.return=p,S)}function u(p,x,v,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=qp(v,p.mode,S),x.return=p,x):(x=s(x,v.children||[]),x.return=p,x)}function f(p,x,v,S,w){return x===null||x.tag!==7?(x=Ti(v,p.mode,S,w),x.return=p,x):(x=s(x,v),x.return=p,x)}function d(p,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Hp(""+x,p.mode,v),x.return=p,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hd:return v=lf(x.type,x.key,x.props,null,p.mode,v),v.ref=Zl(p,null,x),v.return=p,v;case uo:return x=qp(x,p.mode,v),x.return=p,x;case ys:var S=x._init;return d(p,S(x._payload),v)}if(pc(x)||Gl(x))return x=Ti(x,p.mode,v,null),x.return=p,x;_d(p,x)}return null}function m(p,x,v,S){var w=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:l(p,x,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case hd:return v.key===w?c(p,x,v,S):null;case uo:return v.key===w?u(p,x,v,S):null;case ys:return w=v._init,m(p,x,w(v._payload),S)}if(pc(v)||Gl(v))return w!==null?null:f(p,x,v,S,null);_d(p,v)}return null}function g(p,x,v,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(v)||null,l(x,p,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hd:return p=p.get(S.key===null?v:S.key)||null,c(x,p,S,w);case uo:return p=p.get(S.key===null?v:S.key)||null,u(x,p,S,w);case ys:var b=S._init;return g(p,x,v,b(S._payload),w)}if(pc(S)||Gl(S))return p=p.get(v)||null,f(x,p,S,w,null);_d(x,S)}return null}function j(p,x,v,S){for(var w=null,b=null,_=x,P=x=0,C=null;_!==null&&P<v.length;P++){_.index>P?(C=_,_=null):C=_.sibling;var M=m(p,_,v[P],S);if(M===null){_===null&&(_=C);break}e&&_&&M.alternate===null&&t(p,_),x=i(M,x,P),b===null?w=M:b.sibling=M,b=M,_=C}if(P===v.length)return r(p,_),qt&&fi(p,P),w;if(_===null){for(;P<v.length;P++)_=d(p,v[P],S),_!==null&&(x=i(_,x,P),b===null?w=_:b.sibling=_,b=_);return qt&&fi(p,P),w}for(_=n(p,_);P<v.length;P++)C=g(_,p,P,v[P],S),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?P:C.key),x=i(C,x,P),b===null?w=C:b.sibling=C,b=C);return e&&_.forEach(function(A){return t(p,A)}),qt&&fi(p,P),w}function h(p,x,v,S){var w=Gl(v);if(typeof w!="function")throw Error(je(150));if(v=w.call(v),v==null)throw Error(je(151));for(var b=w=null,_=x,P=x=0,C=null,M=v.next();_!==null&&!M.done;P++,M=v.next()){_.index>P?(C=_,_=null):C=_.sibling;var A=m(p,_,M.value,S);if(A===null){_===null&&(_=C);break}e&&_&&A.alternate===null&&t(p,_),x=i(A,x,P),b===null?w=A:b.sibling=A,b=A,_=C}if(M.done)return r(p,_),qt&&fi(p,P),w;if(_===null){for(;!M.done;P++,M=v.next())M=d(p,M.value,S),M!==null&&(x=i(M,x,P),b===null?w=M:b.sibling=M,b=M);return qt&&fi(p,P),w}for(_=n(p,_);!M.done;P++,M=v.next())M=g(_,p,P,M.value,S),M!==null&&(e&&M.alternate!==null&&_.delete(M.key===null?P:M.key),x=i(M,x,P),b===null?w=M:b.sibling=M,b=M);return e&&_.forEach(function(E){return t(p,E)}),qt&&fi(p,P),w}function y(p,x,v,S){if(typeof v=="object"&&v!==null&&v.type===fo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case hd:e:{for(var w=v.key,b=x;b!==null;){if(b.key===w){if(w=v.type,w===fo){if(b.tag===7){r(p,b.sibling),x=s(b,v.props.children),x.return=p,p=x;break e}}else if(b.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===ys&&Uj(w)===b.type){r(p,b.sibling),x=s(b,v.props),x.ref=Zl(p,b,v),x.return=p,p=x;break e}r(p,b);break}else t(p,b);b=b.sibling}v.type===fo?(x=Ti(v.props.children,p.mode,S,v.key),x.return=p,p=x):(S=lf(v.type,v.key,v.props,null,p.mode,S),S.ref=Zl(p,x,v),S.return=p,p=S)}return o(p);case uo:e:{for(b=v.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){r(p,x.sibling),x=s(x,v.children||[]),x.return=p,p=x;break e}else{r(p,x);break}else t(p,x);x=x.sibling}x=qp(v,p.mode,S),x.return=p,p=x}return o(p);case ys:return b=v._init,y(p,x,b(v._payload),S)}if(pc(v))return j(p,x,v,S);if(Gl(v))return h(p,x,v,S);_d(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(r(p,x.sibling),x=s(x,v),x.return=p,p=x):(r(p,x),x=Hp(v,p.mode,S),x.return=p,p=x),o(p)):r(p,x)}return y}var Xo=WA(!0),HA=WA(!1),Ef=Zs(null),Cf=null,bo=null,qy=null;function Gy(){qy=bo=Cf=null}function Ky(e){var t=Ef.current;Vt(Ef),e._currentValue=t}function mx(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ro(e,t){Cf=e,qy=bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(on=!0),e.firstContext=null)}function Fn(e){var t=e._currentValue;if(qy!==e)if(e={context:e,memoizedValue:t,next:null},bo===null){if(Cf===null)throw Error(je(308));bo=e,Cf.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Ni=null;function Yy(e){Ni===null?Ni=[e]:Ni.push(e)}function qA(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Yy(t)):(r.next=s.next,s.next=r),t.interleaved=r,Qa(e,n)}function Qa(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vs=!1;function Xy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function GA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Is(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,gt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Qa(e,r)}return s=n.interleaved,s===null?(t.next=t,Yy(n)):(t.next=s.next,s.next=t),n.interleaved=t,Qa(e,r)}function tf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$y(e,r)}}function Wj(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Of(e,t,r,n){var s=e.updateQueue;vs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,f=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,h=l;switch(m=t,g=r,h.tag){case 1:if(j=h.payload,typeof j=="function"){d=j.call(g,d,m);break e}d=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=h.payload,m=typeof j=="function"?j.call(g,d,m):j,m==null)break e;d=Qt({},d,m);break e;case 2:vs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=g,c=d):f=f.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);zi|=o,e.lanes=o,e.memoizedState=d}}function Hj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(je(191,s));s.call(n)}}}var Zu={},ja=Zs(Zu),eu=Zs(Zu),tu=Zs(Zu);function Si(e){if(e===Zu)throw Error(je(174));return e}function Jy(e,t){switch(It(tu,t),It(eu,e),It(ja,Zu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gg(t,e)}Vt(ja),It(ja,t)}function Jo(){Vt(ja),Vt(eu),Vt(tu)}function KA(e){Si(tu.current);var t=Si(ja.current),r=Gg(t,e.type);t!==r&&(It(eu,e),It(ja,r))}function Zy(e){eu.current===e&&(Vt(ja),Vt(eu))}var Kt=Zs(0);function Tf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bp=[];function Qy(){for(var e=0;e<Bp.length;e++)Bp[e]._workInProgressVersionPrimary=null;Bp.length=0}var rf=ls.ReactCurrentDispatcher,Fp=ls.ReactCurrentBatchConfig,Fi=0,Zt=null,hr=null,br=null,kf=!1,Pc=!1,ru=0,uM=0;function Dr(){throw Error(je(321))}function ev(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!la(e[r],t[r]))return!1;return!0}function tv(e,t,r,n,s,i){if(Fi=i,Zt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rf.current=e===null||e.memoizedState===null?hM:pM,e=r(n,s),Pc){i=0;do{if(Pc=!1,ru=0,25<=i)throw Error(je(301));i+=1,br=hr=null,t.updateQueue=null,rf.current=gM,e=r(n,s)}while(Pc)}if(rf.current=Mf,t=hr!==null&&hr.next!==null,Fi=0,br=hr=Zt=null,kf=!1,t)throw Error(je(300));return e}function rv(){var e=ru!==0;return ru=0,e}function fa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return br===null?Zt.memoizedState=br=e:br=br.next=e,br}function zn(){if(hr===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=hr.next;var t=br===null?Zt.memoizedState:br.next;if(t!==null)br=t,hr=e;else{if(e===null)throw Error(je(310));hr=e,e={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},br===null?Zt.memoizedState=br=e:br=br.next=e}return br}function nu(e,t){return typeof t=="function"?t(e):t}function zp(e){var t=zn(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=hr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((Fi&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,Zt.lanes|=f,zi|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,la(n,t.memoizedState)||(on=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Zt.lanes|=i,zi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vp(e){var t=zn(),r=t.queue;if(r===null)throw Error(je(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);la(i,t.memoizedState)||(on=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function YA(){}function XA(e,t){var r=Zt,n=zn(),s=t(),i=!la(n.memoizedState,s);if(i&&(n.memoizedState=s,on=!0),n=n.queue,nv(QA.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||br!==null&&br.memoizedState.tag&1){if(r.flags|=2048,au(9,ZA.bind(null,r,n,s,t),void 0,null),Nr===null)throw Error(je(349));Fi&30||JA(r,t,s)}return s}function JA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ZA(e,t,r,n){t.value=r,t.getSnapshot=n,eP(t)&&tP(e)}function QA(e,t,r){return r(function(){eP(t)&&tP(e)})}function eP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!la(e,r)}catch{return!0}}function tP(e){var t=Qa(e,1);t!==null&&sa(t,e,1,-1)}function qj(e){var t=fa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:e},t.queue=e,e=e.dispatch=mM.bind(null,Zt,e),[t.memoizedState,e]}function au(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Zt.updateQueue,t===null?(t={lastEffect:null,stores:null},Zt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function rP(){return zn().memoizedState}function nf(e,t,r,n){var s=fa();Zt.flags|=e,s.memoizedState=au(1|t,r,void 0,n===void 0?null:n)}function ah(e,t,r,n){var s=zn();n=n===void 0?null:n;var i=void 0;if(hr!==null){var o=hr.memoizedState;if(i=o.destroy,n!==null&&ev(n,o.deps)){s.memoizedState=au(t,r,i,n);return}}Zt.flags|=e,s.memoizedState=au(1|t,r,i,n)}function Gj(e,t){return nf(8390656,8,e,t)}function nv(e,t){return ah(2048,8,e,t)}function nP(e,t){return ah(4,2,e,t)}function aP(e,t){return ah(4,4,e,t)}function sP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function iP(e,t,r){return r=r!=null?r.concat([e]):null,ah(4,4,sP.bind(null,t,e),r)}function av(){}function oP(e,t){var r=zn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function lP(e,t){var r=zn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function cP(e,t,r){return Fi&21?(la(r,t)||(r=hA(),Zt.lanes|=r,zi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,on=!0),e.memoizedState=r)}function dM(e,t){var r=Nt;Nt=r!==0&&4>r?r:4,e(!0);var n=Fp.transition;Fp.transition={};try{e(!1),t()}finally{Nt=r,Fp.transition=n}}function uP(){return zn().memoizedState}function fM(e,t,r){var n=Rs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},dP(e))fP(t,r);else if(r=qA(e,t,r,n),r!==null){var s=Zr();sa(r,e,n,s),mP(r,t,n)}}function mM(e,t,r){var n=Rs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(dP(e))fP(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,la(l,o)){var c=t.interleaved;c===null?(s.next=s,Yy(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=qA(e,t,s,n),r!==null&&(s=Zr(),sa(r,e,n,s),mP(r,t,n))}}function dP(e){var t=e.alternate;return e===Zt||t!==null&&t===Zt}function fP(e,t){Pc=kf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mP(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$y(e,r)}}var Mf={readContext:Fn,useCallback:Dr,useContext:Dr,useEffect:Dr,useImperativeHandle:Dr,useInsertionEffect:Dr,useLayoutEffect:Dr,useMemo:Dr,useReducer:Dr,useRef:Dr,useState:Dr,useDebugValue:Dr,useDeferredValue:Dr,useTransition:Dr,useMutableSource:Dr,useSyncExternalStore:Dr,useId:Dr,unstable_isNewReconciler:!1},hM={readContext:Fn,useCallback:function(e,t){return fa().memoizedState=[e,t===void 0?null:t],e},useContext:Fn,useEffect:Gj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,nf(4194308,4,sP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return nf(4194308,4,e,t)},useInsertionEffect:function(e,t){return nf(4,2,e,t)},useMemo:function(e,t){var r=fa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=fM.bind(null,Zt,e),[n.memoizedState,e]},useRef:function(e){var t=fa();return e={current:e},t.memoizedState=e},useState:qj,useDebugValue:av,useDeferredValue:function(e){return fa().memoizedState=e},useTransition:function(){var e=qj(!1),t=e[0];return e=dM.bind(null,e[1]),fa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Zt,s=fa();if(qt){if(r===void 0)throw Error(je(407));r=r()}else{if(r=t(),Nr===null)throw Error(je(349));Fi&30||JA(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Gj(QA.bind(null,n,i,e),[e]),n.flags|=2048,au(9,ZA.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=fa(),t=Nr.identifierPrefix;if(qt){var r=Fa,n=Ba;r=(n&~(1<<32-aa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ru++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=uM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},pM={readContext:Fn,useCallback:oP,useContext:Fn,useEffect:nv,useImperativeHandle:iP,useInsertionEffect:nP,useLayoutEffect:aP,useMemo:lP,useReducer:zp,useRef:rP,useState:function(){return zp(nu)},useDebugValue:av,useDeferredValue:function(e){var t=zn();return cP(t,hr.memoizedState,e)},useTransition:function(){var e=zp(nu)[0],t=zn().memoizedState;return[e,t]},useMutableSource:YA,useSyncExternalStore:XA,useId:uP,unstable_isNewReconciler:!1},gM={readContext:Fn,useCallback:oP,useContext:Fn,useEffect:nv,useImperativeHandle:iP,useInsertionEffect:nP,useLayoutEffect:aP,useMemo:lP,useReducer:Vp,useRef:rP,useState:function(){return Vp(nu)},useDebugValue:av,useDeferredValue:function(e){var t=zn();return hr===null?t.memoizedState=e:cP(t,hr.memoizedState,e)},useTransition:function(){var e=Vp(nu)[0],t=zn().memoizedState;return[e,t]},useMutableSource:YA,useSyncExternalStore:XA,useId:uP,unstable_isNewReconciler:!1};function Yn(e,t){if(e&&e.defaultProps){t=Qt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hx(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Qt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sh={isMounted:function(e){return(e=e._reactInternals)?Zi(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Zr(),s=Rs(e),i=qa(n,s);i.payload=t,r!=null&&(i.callback=r),t=Is(e,i,s),t!==null&&(sa(t,e,s,n),tf(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Zr(),s=Rs(e),i=qa(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Is(e,i,s),t!==null&&(sa(t,e,s,n),tf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Zr(),n=Rs(e),s=qa(r,n);s.tag=2,t!=null&&(s.callback=t),t=Is(e,s,n),t!==null&&(sa(t,e,n,r),tf(t,e,n))}};function Kj(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xc(r,n)||!Xc(s,i):!0}function hP(e,t,r){var n=!1,s=Gs,i=t.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=fn(t)?Ri:Ur.current,n=t.contextTypes,i=(n=n!=null)?Ko(e,s):Gs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yj(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&sh.enqueueReplaceState(t,t.state,null)}function px(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Xy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=fn(t)?Ri:Ur.current,s.context=Ko(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hx(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&sh.enqueueReplaceState(s,s.state,null),Of(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zo(e,t){try{var r="",n=t;do r+=W5(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Up(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xM=typeof WeakMap=="function"?WeakMap:Map;function pP(e,t,r){r=qa(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$f||($f=!0,Ax=n),gx(e,t)},r}function gP(e,t,r){r=qa(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){gx(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gx(e,t),typeof n!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Xj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=TM.bind(null,e,t,r),t.then(e,e))}function Jj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zj(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=qa(-1,1),t.tag=2,Is(r,t,1))),r.lanes|=1),e)}var yM=ls.ReactCurrentOwner,on=!1;function qr(e,t,r,n){t.child=e===null?HA(t,null,r,n):Xo(t,e.child,r,n)}function Qj(e,t,r,n,s){r=r.render;var i=t.ref;return Ro(t,s),n=tv(e,t,r,n,i,s),r=rv(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(qt&&r&&Uy(t),t.flags|=1,qr(e,t,n,s),t.child)}function ew(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!fv(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,xP(e,t,i,n,s)):(e=lf(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xc,r(o,n)&&e.ref===t.ref)return es(e,t,s)}return t.flags|=1,e=Bs(i,n),e.ref=t.ref,e.return=t,t.child=e}function xP(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Xc(i,n)&&e.ref===t.ref)if(on=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(on=!0);else return t.lanes=e.lanes,es(e,t,s)}return xx(e,t,r,n,s)}function yP(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(wo,xn),xn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,It(wo,xn),xn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,It(wo,xn),xn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,It(wo,xn),xn|=n;return qr(e,t,s,r),t.child}function vP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xx(e,t,r,n,s){var i=fn(r)?Ri:Ur.current;return i=Ko(t,i),Ro(t,s),r=tv(e,t,r,n,i,s),n=rv(),e!==null&&!on?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,es(e,t,s)):(qt&&n&&Uy(t),t.flags|=1,qr(e,t,r,s),t.child)}function tw(e,t,r,n,s){if(fn(r)){var i=!0;_f(t)}else i=!1;if(Ro(t,s),t.stateNode===null)af(e,t),hP(t,r,n),px(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Fn(u):(u=fn(r)?Ri:Ur.current,u=Ko(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Yj(t,o,n,u),vs=!1;var m=t.memoizedState;o.state=m,Of(t,n,o,s),c=t.memoizedState,l!==n||m!==c||dn.current||vs?(typeof f=="function"&&(hx(t,r,f,n),c=t.memoizedState),(l=vs||Kj(t,r,l,n,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,GA(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Yn(t.type,l),o.props=u,d=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fn(c):(c=fn(r)?Ri:Ur.current,c=Ko(t,c));var g=r.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Yj(t,o,n,c),vs=!1,m=t.memoizedState,o.state=m,Of(t,n,o,s);var j=t.memoizedState;l!==d||m!==j||dn.current||vs?(typeof g=="function"&&(hx(t,r,g,n),j=t.memoizedState),(u=vs||Kj(t,r,u,n,m,j,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return yx(e,t,r,n,i,s)}function yx(e,t,r,n,s,i){vP(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Fj(t,r,!1),es(e,t,i);n=t.stateNode,yM.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xo(t,e.child,null,i),t.child=Xo(t,null,l,i)):qr(e,t,l,i),t.memoizedState=n.state,s&&Fj(t,r,!0),t.child}function bP(e){var t=e.stateNode;t.pendingContext?Bj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bj(e,t.context,!1),Jy(e,t.containerInfo)}function rw(e,t,r,n,s){return Yo(),Hy(s),t.flags|=256,qr(e,t,r,n),t.child}var vx={dehydrated:null,treeContext:null,retryLane:0};function bx(e){return{baseLanes:e,cachePool:null,transitions:null}}function jP(e,t,r){var n=t.pendingProps,s=Kt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),It(Kt,s&1),e===null)return fx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lh(o,n,0,null),e=Ti(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bx(r),t.memoizedState=vx,e):sv(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return vM(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Bs(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Bs(l,i):(i=Ti(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?bx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vx,n}return i=e.child,e=i.sibling,n=Bs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function sv(e,t){return t=lh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ad(e,t,r,n){return n!==null&&Hy(n),Xo(t,e.child,null,r),e=sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function vM(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Up(Error(je(422))),Ad(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=lh({mode:"visible",children:n.children},s,0,null),i=Ti(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xo(t,e.child,null,o),t.child.memoizedState=bx(o),t.memoizedState=vx,i);if(!(t.mode&1))return Ad(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(je(419)),n=Up(i,n,void 0),Ad(e,t,o,n)}if(l=(o&e.childLanes)!==0,on||l){if(n=Nr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qa(e,s),sa(n,e,s,-1))}return dv(),n=Up(Error(je(421))),Ad(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kM.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,bn=$s(s.nextSibling),jn=t,qt=!0,Qn=null,e!==null&&(Mn[Dn++]=Ba,Mn[Dn++]=Fa,Mn[Dn++]=Bi,Ba=e.id,Fa=e.overflow,Bi=t),t=sv(t,n.children),t.flags|=4096,t)}function nw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),mx(e.return,t,r)}function Wp(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function wP(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(qr(e,t,n.children,r),n=Kt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nw(e,r,t);else if(e.tag===19)nw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(It(Kt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Tf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Wp(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Tf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Wp(t,!0,r,null,i);break;case"together":Wp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function af(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function es(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(je(153));if(t.child!==null){for(e=t.child,r=Bs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bM(e,t,r){switch(t.tag){case 3:bP(t),Yo();break;case 5:KA(t);break;case 1:fn(t.type)&&_f(t);break;case 4:Jy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;It(Ef,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(It(Kt,Kt.current&1),t.flags|=128,null):r&t.child.childLanes?jP(e,t,r):(It(Kt,Kt.current&1),e=es(e,t,r),e!==null?e.sibling:null);It(Kt,Kt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return wP(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),It(Kt,Kt.current),n)break;return null;case 22:case 23:return t.lanes=0,yP(e,t,r)}return es(e,t,r)}var NP,jx,SP,_P;NP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};jx=function(){};SP=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Si(ja.current);var i=null;switch(r){case"input":s=Ug(e,s),n=Ug(e,n),i=[];break;case"select":s=Qt({},s,{value:void 0}),n=Qt({},n,{value:void 0}),i=[];break;case"textarea":s=qg(e,s),n=qg(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nf)}Kg(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Uc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Uc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Bt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};_P=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ql(e,t){if(!qt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $r(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function jM(e,t,r){var n=t.pendingProps;switch(Wy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(t),null;case 1:return fn(t.type)&&Sf(),$r(t),null;case 3:return n=t.stateNode,Jo(),Vt(dn),Vt(Ur),Qy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qn!==null&&(Cx(Qn),Qn=null))),jx(e,t),$r(t),null;case 5:Zy(t);var s=Si(tu.current);if(r=t.type,e!==null&&t.stateNode!=null)SP(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(je(166));return $r(t),null}if(e=Si(ja.current),Sd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ma]=t,n[Qc]=i,e=(t.mode&1)!==0,r){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(s=0;s<xc.length;s++)Bt(xc[s],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":fj(n,i),Bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",n);break;case"textarea":hj(n,i),Bt("invalid",n)}Kg(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),s=["children",""+l]):Uc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Bt("scroll",n)}switch(r){case"input":pd(n),mj(n,i,!0);break;case"textarea":pd(n),pj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nf)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Q_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ma]=t,e[Qc]=n,NP(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yg(r,n),r){case"dialog":Bt("cancel",e),Bt("close",e),s=n;break;case"iframe":case"object":case"embed":Bt("load",e),s=n;break;case"video":case"audio":for(s=0;s<xc.length;s++)Bt(xc[s],e);s=n;break;case"source":Bt("error",e),s=n;break;case"img":case"image":case"link":Bt("error",e),Bt("load",e),s=n;break;case"details":Bt("toggle",e),s=n;break;case"input":fj(e,n),s=Ug(e,n),Bt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Qt({},n,{value:void 0}),Bt("invalid",e);break;case"textarea":hj(e,n),s=qg(e,n),Bt("invalid",e);break;default:s=n}Kg(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?rA(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eA(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wc(e,c):typeof c=="number"&&Wc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Uc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Bt("scroll",e):c!=null&&Cy(e,i,c,o))}switch(r){case"input":pd(e),mj(e,n,!1);break;case"textarea":pd(e),pj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+qs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Do(e,!!n.multiple,i,!1):n.defaultValue!=null&&Do(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Nf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $r(t),null;case 6:if(e&&t.stateNode!=null)_P(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(je(166));if(r=Si(tu.current),Si(ja.current),Sd(t)){if(n=t.stateNode,r=t.memoizedProps,n[ma]=t,(i=n.nodeValue!==r)&&(e=jn,e!==null))switch(e.tag){case 3:Nd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nd(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ma]=t,t.stateNode=n}return $r(t),null;case 13:if(Vt(Kt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qt&&bn!==null&&t.mode&1&&!(t.flags&128))UA(),Yo(),t.flags|=98560,i=!1;else if(i=Sd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(je(317));i[ma]=t}else Yo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$r(t),i=!1}else Qn!==null&&(Cx(Qn),Qn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Kt.current&1?gr===0&&(gr=3):dv())),t.updateQueue!==null&&(t.flags|=4),$r(t),null);case 4:return Jo(),jx(e,t),e===null&&Jc(t.stateNode.containerInfo),$r(t),null;case 10:return Ky(t.type._context),$r(t),null;case 17:return fn(t.type)&&Sf(),$r(t),null;case 19:if(Vt(Kt),i=t.memoizedState,i===null)return $r(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ql(i,!1);else{if(gr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Tf(e),o!==null){for(t.flags|=128,Ql(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return It(Kt,Kt.current&1|2),t.child}e=e.sibling}i.tail!==null&&nr()>Qo&&(t.flags|=128,n=!0,Ql(i,!1),t.lanes=4194304)}else{if(!n)if(e=Tf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ql(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!qt)return $r(t),null}else 2*nr()-i.renderingStartTime>Qo&&r!==1073741824&&(t.flags|=128,n=!0,Ql(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nr(),t.sibling=null,r=Kt.current,It(Kt,n?r&1|2:r&1),t):($r(t),null);case 22:case 23:return uv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?xn&1073741824&&($r(t),t.subtreeFlags&6&&(t.flags|=8192)):$r(t),null;case 24:return null;case 25:return null}throw Error(je(156,t.tag))}function wM(e,t){switch(Wy(t),t.tag){case 1:return fn(t.type)&&Sf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),Vt(dn),Vt(Ur),Qy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zy(t),null;case 13:if(Vt(Kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(je(340));Yo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Vt(Kt),null;case 4:return Jo(),null;case 10:return Ky(t.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var Pd=!1,Br=!1,NM=typeof WeakSet=="function"?WeakSet:Set,Le=null;function jo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){er(e,t,n)}else r.current=null}function wx(e,t,r){try{r()}catch(n){er(e,t,n)}}var aw=!1;function SM(e,t){if(sx=bf,e=OA(),Vy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,m=null;t:for(;;){for(var g;d!==r||s!==0&&d.nodeType!==3||(l=o+s),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)m=d,d=g;for(;;){if(d===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++f===n&&(c=o),(g=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ix={focusedElem:e,selectionRange:r},bf=!1,Le=t;Le!==null;)if(t=Le,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Le=e;else for(;Le!==null;){t=Le;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var h=j.memoizedProps,y=j.memoizedState,p=t.stateNode,x=p.getSnapshotBeforeUpdate(t.elementType===t.type?h:Yn(t.type,h),y);p.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(S){er(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Le=e;break}Le=t.return}return j=aw,aw=!1,j}function Ec(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&wx(t,r,i)}s=s.next}while(s!==n)}}function ih(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Nx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function AP(e){var t=e.alternate;t!==null&&(e.alternate=null,AP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ma],delete t[Qc],delete t[cx],delete t[iM],delete t[oM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function PP(e){return e.tag===5||e.tag===3||e.tag===4}function sw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||PP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sx(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nf));else if(n!==4&&(e=e.child,e!==null))for(Sx(e,t,r),e=e.sibling;e!==null;)Sx(e,t,r),e=e.sibling}function _x(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_x(e,t,r),e=e.sibling;e!==null;)_x(e,t,r),e=e.sibling}var Er=null,Xn=!1;function ps(e,t,r){for(r=r.child;r!==null;)EP(e,t,r),r=r.sibling}function EP(e,t,r){if(ba&&typeof ba.onCommitFiberUnmount=="function")try{ba.onCommitFiberUnmount(Zm,r)}catch{}switch(r.tag){case 5:Br||jo(r,t);case 6:var n=Er,s=Xn;Er=null,ps(e,t,r),Er=n,Xn=s,Er!==null&&(Xn?(e=Er,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Er.removeChild(r.stateNode));break;case 18:Er!==null&&(Xn?(e=Er,r=r.stateNode,e.nodeType===8?Lp(e.parentNode,r):e.nodeType===1&&Lp(e,r),Kc(e)):Lp(Er,r.stateNode));break;case 4:n=Er,s=Xn,Er=r.stateNode.containerInfo,Xn=!0,ps(e,t,r),Er=n,Xn=s;break;case 0:case 11:case 14:case 15:if(!Br&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wx(r,t,o),s=s.next}while(s!==n)}ps(e,t,r);break;case 1:if(!Br&&(jo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){er(r,t,l)}ps(e,t,r);break;case 21:ps(e,t,r);break;case 22:r.mode&1?(Br=(n=Br)||r.memoizedState!==null,ps(e,t,r),Br=n):ps(e,t,r);break;default:ps(e,t,r)}}function iw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new NM),t.forEach(function(n){var s=MM.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Gn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Er=l.stateNode,Xn=!1;break e;case 3:Er=l.stateNode.containerInfo,Xn=!0;break e;case 4:Er=l.stateNode.containerInfo,Xn=!0;break e}l=l.return}if(Er===null)throw Error(je(160));EP(i,o,s),Er=null,Xn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){er(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CP(t,e),t=t.sibling}function CP(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gn(t,e),da(e),n&4){try{Ec(3,e,e.return),ih(3,e)}catch(h){er(e,e.return,h)}try{Ec(5,e,e.return)}catch(h){er(e,e.return,h)}}break;case 1:Gn(t,e),da(e),n&512&&r!==null&&jo(r,r.return);break;case 5:if(Gn(t,e),da(e),n&512&&r!==null&&jo(r,r.return),e.flags&32){var s=e.stateNode;try{Wc(s,"")}catch(h){er(e,e.return,h)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&J_(s,i),Yg(l,o);var u=Yg(l,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?rA(s,d):f==="dangerouslySetInnerHTML"?eA(s,d):f==="children"?Wc(s,d):Cy(s,f,d,u)}switch(l){case"input":Wg(s,i);break;case"textarea":Z_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Do(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Do(s,!!i.multiple,i.defaultValue,!0):Do(s,!!i.multiple,i.multiple?[]:"",!1))}s[Qc]=i}catch(h){er(e,e.return,h)}}break;case 6:if(Gn(t,e),da(e),n&4){if(e.stateNode===null)throw Error(je(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){er(e,e.return,h)}}break;case 3:if(Gn(t,e),da(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kc(t.containerInfo)}catch(h){er(e,e.return,h)}break;case 4:Gn(t,e),da(e);break;case 13:Gn(t,e),da(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lv=nr())),n&4&&iw(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Br=(u=Br)||f,Gn(t,e),Br=u):Gn(t,e),da(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Le=e,f=e.child;f!==null;){for(d=Le=f;Le!==null;){switch(m=Le,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ec(4,m,m.return);break;case 1:jo(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(h){er(n,r,h)}}break;case 5:jo(m,m.return);break;case 22:if(m.memoizedState!==null){lw(d);continue}}g!==null?(g.return=m,Le=g):lw(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=tA("display",o))}catch(h){er(e,e.return,h)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(h){er(e,e.return,h)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gn(t,e),da(e),n&4&&iw(e);break;case 21:break;default:Gn(t,e),da(e)}}function da(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(PP(r)){var n=r;break e}r=r.return}throw Error(je(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Wc(s,""),n.flags&=-33);var i=sw(e);_x(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sw(e);Sx(e,l,o);break;default:throw Error(je(161))}}catch(c){er(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _M(e,t,r){Le=e,OP(e)}function OP(e,t,r){for(var n=(e.mode&1)!==0;Le!==null;){var s=Le,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Pd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Br;l=Pd;var u=Br;if(Pd=o,(Br=c)&&!u)for(Le=s;Le!==null;)o=Le,c=o.child,o.tag===22&&o.memoizedState!==null?cw(s):c!==null?(c.return=o,Le=c):cw(s);for(;i!==null;)Le=i,OP(i),i=i.sibling;Le=s,Pd=l,Br=u}ow(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Le=i):ow(e)}}function ow(e){for(;Le!==null;){var t=Le;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Br||ih(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Br)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Yn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hj(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Kc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Br||t.flags&512&&Nx(t)}catch(m){er(t,t.return,m)}}if(t===e){Le=null;break}if(r=t.sibling,r!==null){r.return=t.return,Le=r;break}Le=t.return}}function lw(e){for(;Le!==null;){var t=Le;if(t===e){Le=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Le=r;break}Le=t.return}}function cw(e){for(;Le!==null;){var t=Le;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ih(4,t)}catch(c){er(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){er(t,s,c)}}var i=t.return;try{Nx(t)}catch(c){er(t,i,c)}break;case 5:var o=t.return;try{Nx(t)}catch(c){er(t,o,c)}}}catch(c){er(t,t.return,c)}if(t===e){Le=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Le=l;break}Le=t.return}}var AM=Math.ceil,Df=ls.ReactCurrentDispatcher,iv=ls.ReactCurrentOwner,Rn=ls.ReactCurrentBatchConfig,gt=0,Nr=null,lr=null,Tr=0,xn=0,wo=Zs(0),gr=0,su=null,zi=0,oh=0,ov=0,Cc=null,sn=null,lv=0,Qo=1/0,Ia=null,$f=!1,Ax=null,Ls=null,Ed=!1,Ps=null,If=0,Oc=0,Px=null,sf=-1,of=0;function Zr(){return gt&6?nr():sf!==-1?sf:sf=nr()}function Rs(e){return e.mode&1?gt&2&&Tr!==0?Tr&-Tr:cM.transition!==null?(of===0&&(of=hA()),of):(e=Nt,e!==0||(e=window.event,e=e===void 0?16:jA(e.type)),e):1}function sa(e,t,r,n){if(50<Oc)throw Oc=0,Px=null,Error(je(185));Yu(e,r,n),(!(gt&2)||e!==Nr)&&(e===Nr&&(!(gt&2)&&(oh|=r),gr===4&&Ss(e,Tr)),mn(e,n),r===1&&gt===0&&!(t.mode&1)&&(Qo=nr()+500,nh&&Qs()))}function mn(e,t){var r=e.callbackNode;c4(e,t);var n=vf(e,e===Nr?Tr:0);if(n===0)r!==null&&yj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&yj(r),t===1)e.tag===0?lM(uw.bind(null,e)):FA(uw.bind(null,e)),aM(function(){!(gt&6)&&Qs()}),r=null;else{switch(pA(n)){case 1:r=Dy;break;case 4:r=fA;break;case 16:r=yf;break;case 536870912:r=mA;break;default:r=yf}r=RP(r,TP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function TP(e,t){if(sf=-1,of=0,gt&6)throw Error(je(327));var r=e.callbackNode;if(Bo()&&e.callbackNode!==r)return null;var n=vf(e,e===Nr?Tr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Lf(e,n);else{t=n;var s=gt;gt|=2;var i=MP();(Nr!==e||Tr!==t)&&(Ia=null,Qo=nr()+500,Oi(e,t));do try{CM();break}catch(l){kP(e,l)}while(!0);Gy(),Df.current=i,gt=s,lr!==null?t=0:(Nr=null,Tr=0,t=gr)}if(t!==0){if(t===2&&(s=ex(e),s!==0&&(n=s,t=Ex(e,s))),t===1)throw r=su,Oi(e,0),Ss(e,n),mn(e,nr()),r;if(t===6)Ss(e,n);else{if(s=e.current.alternate,!(n&30)&&!PM(s)&&(t=Lf(e,n),t===2&&(i=ex(e),i!==0&&(n=i,t=Ex(e,i))),t===1))throw r=su,Oi(e,0),Ss(e,n),mn(e,nr()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(je(345));case 2:mi(e,sn,Ia);break;case 3:if(Ss(e,n),(n&130023424)===n&&(t=lv+500-nr(),10<t)){if(vf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Zr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lx(mi.bind(null,e,sn,Ia),t);break}mi(e,sn,Ia);break;case 4:if(Ss(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-aa(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=nr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*AM(n/1960))-n,10<n){e.timeoutHandle=lx(mi.bind(null,e,sn,Ia),n);break}mi(e,sn,Ia);break;case 5:mi(e,sn,Ia);break;default:throw Error(je(329))}}}return mn(e,nr()),e.callbackNode===r?TP.bind(null,e):null}function Ex(e,t){var r=Cc;return e.current.memoizedState.isDehydrated&&(Oi(e,t).flags|=256),e=Lf(e,t),e!==2&&(t=sn,sn=r,t!==null&&Cx(t)),e}function Cx(e){sn===null?sn=e:sn.push.apply(sn,e)}function PM(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!la(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ss(e,t){for(t&=~ov,t&=~oh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-aa(t),n=1<<r;e[r]=-1,t&=~n}}function uw(e){if(gt&6)throw Error(je(327));Bo();var t=vf(e,0);if(!(t&1))return mn(e,nr()),null;var r=Lf(e,t);if(e.tag!==0&&r===2){var n=ex(e);n!==0&&(t=n,r=Ex(e,n))}if(r===1)throw r=su,Oi(e,0),Ss(e,t),mn(e,nr()),r;if(r===6)throw Error(je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mi(e,sn,Ia),mn(e,nr()),null}function cv(e,t){var r=gt;gt|=1;try{return e(t)}finally{gt=r,gt===0&&(Qo=nr()+500,nh&&Qs())}}function Vi(e){Ps!==null&&Ps.tag===0&&!(gt&6)&&Bo();var t=gt;gt|=1;var r=Rn.transition,n=Nt;try{if(Rn.transition=null,Nt=1,e)return e()}finally{Nt=n,Rn.transition=r,gt=t,!(gt&6)&&Qs()}}function uv(){xn=wo.current,Vt(wo)}function Oi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,nM(r)),lr!==null)for(r=lr.return;r!==null;){var n=r;switch(Wy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sf();break;case 3:Jo(),Vt(dn),Vt(Ur),Qy();break;case 5:Zy(n);break;case 4:Jo();break;case 13:Vt(Kt);break;case 19:Vt(Kt);break;case 10:Ky(n.type._context);break;case 22:case 23:uv()}r=r.return}if(Nr=e,lr=e=Bs(e.current,null),Tr=xn=t,gr=0,su=null,ov=oh=zi=0,sn=Cc=null,Ni!==null){for(t=0;t<Ni.length;t++)if(r=Ni[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ni=null}return e}function kP(e,t){do{var r=lr;try{if(Gy(),rf.current=Mf,kf){for(var n=Zt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kf=!1}if(Fi=0,br=hr=Zt=null,Pc=!1,ru=0,iv.current=null,r===null||r.return===null){gr=1,su=t,lr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Tr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Jj(o);if(g!==null){g.flags&=-257,Zj(g,o,l,i,t),g.mode&1&&Xj(i,u,t),t=g,c=u;var j=t.updateQueue;if(j===null){var h=new Set;h.add(c),t.updateQueue=h}else j.add(c);break e}else{if(!(t&1)){Xj(i,u,t),dv();break e}c=Error(je(426))}}else if(qt&&l.mode&1){var y=Jj(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Zj(y,o,l,i,t),Hy(Zo(c,l));break e}}i=c=Zo(c,l),gr!==4&&(gr=2),Cc===null?Cc=[i]:Cc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=pP(i,c,t);Wj(i,p);break e;case 1:l=c;var x=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ls===null||!Ls.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=gP(i,l,t);Wj(i,S);break e}}i=i.return}while(i!==null)}$P(r)}catch(w){t=w,lr===r&&r!==null&&(lr=r=r.return);continue}break}while(!0)}function MP(){var e=Df.current;return Df.current=Mf,e===null?Mf:e}function dv(){(gr===0||gr===3||gr===2)&&(gr=4),Nr===null||!(zi&268435455)&&!(oh&268435455)||Ss(Nr,Tr)}function Lf(e,t){var r=gt;gt|=2;var n=MP();(Nr!==e||Tr!==t)&&(Ia=null,Oi(e,t));do try{EM();break}catch(s){kP(e,s)}while(!0);if(Gy(),gt=r,Df.current=n,lr!==null)throw Error(je(261));return Nr=null,Tr=0,gr}function EM(){for(;lr!==null;)DP(lr)}function CM(){for(;lr!==null&&!e4();)DP(lr)}function DP(e){var t=LP(e.alternate,e,xn);e.memoizedProps=e.pendingProps,t===null?$P(e):lr=t,iv.current=null}function $P(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=wM(r,t),r!==null){r.flags&=32767,lr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gr=6,lr=null;return}}else if(r=jM(r,t,xn),r!==null){lr=r;return}if(t=t.sibling,t!==null){lr=t;return}lr=t=e}while(t!==null);gr===0&&(gr=5)}function mi(e,t,r){var n=Nt,s=Rn.transition;try{Rn.transition=null,Nt=1,OM(e,t,r,n)}finally{Rn.transition=s,Nt=n}return null}function OM(e,t,r,n){do Bo();while(Ps!==null);if(gt&6)throw Error(je(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(u4(e,i),e===Nr&&(lr=Nr=null,Tr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ed||(Ed=!0,RP(yf,function(){return Bo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Rn.transition,Rn.transition=null;var o=Nt;Nt=1;var l=gt;gt|=4,iv.current=null,SM(e,r),CP(r,e),X4(ix),bf=!!sx,ix=sx=null,e.current=r,_M(r),t4(),gt=l,Nt=o,Rn.transition=i}else e.current=r;if(Ed&&(Ed=!1,Ps=e,If=s),i=e.pendingLanes,i===0&&(Ls=null),a4(r.stateNode),mn(e,nr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if($f)throw $f=!1,e=Ax,Ax=null,e;return If&1&&e.tag!==0&&Bo(),i=e.pendingLanes,i&1?e===Px?Oc++:(Oc=0,Px=e):Oc=0,Qs(),null}function Bo(){if(Ps!==null){var e=pA(If),t=Rn.transition,r=Nt;try{if(Rn.transition=null,Nt=16>e?16:e,Ps===null)var n=!1;else{if(e=Ps,Ps=null,If=0,gt&6)throw Error(je(331));var s=gt;for(gt|=4,Le=e.current;Le!==null;){var i=Le,o=i.child;if(Le.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Le=u;Le!==null;){var f=Le;switch(f.tag){case 0:case 11:case 15:Ec(8,f,i)}var d=f.child;if(d!==null)d.return=f,Le=d;else for(;Le!==null;){f=Le;var m=f.sibling,g=f.return;if(AP(f),f===u){Le=null;break}if(m!==null){m.return=g,Le=m;break}Le=g}}}var j=i.alternate;if(j!==null){var h=j.child;if(h!==null){j.child=null;do{var y=h.sibling;h.sibling=null,h=y}while(h!==null)}}Le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Le=o;else e:for(;Le!==null;){if(i=Le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ec(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Le=p;break e}Le=i.return}}var x=e.current;for(Le=x;Le!==null;){o=Le;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Le=v;else e:for(o=x;Le!==null;){if(l=Le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ih(9,l)}}catch(w){er(l,l.return,w)}if(l===o){Le=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Le=S;break e}Le=l.return}}if(gt=s,Qs(),ba&&typeof ba.onPostCommitFiberRoot=="function")try{ba.onPostCommitFiberRoot(Zm,e)}catch{}n=!0}return n}finally{Nt=r,Rn.transition=t}}return!1}function dw(e,t,r){t=Zo(r,t),t=pP(e,t,1),e=Is(e,t,1),t=Zr(),e!==null&&(Yu(e,1,t),mn(e,t))}function er(e,t,r){if(e.tag===3)dw(e,e,r);else for(;t!==null;){if(t.tag===3){dw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ls===null||!Ls.has(n))){e=Zo(r,e),e=gP(t,e,1),t=Is(t,e,1),e=Zr(),t!==null&&(Yu(t,1,e),mn(t,e));break}}t=t.return}}function TM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Zr(),e.pingedLanes|=e.suspendedLanes&r,Nr===e&&(Tr&r)===r&&(gr===4||gr===3&&(Tr&130023424)===Tr&&500>nr()-lv?Oi(e,0):ov|=r),mn(e,t)}function IP(e,t){t===0&&(e.mode&1?(t=yd,yd<<=1,!(yd&130023424)&&(yd=4194304)):t=1);var r=Zr();e=Qa(e,t),e!==null&&(Yu(e,t,r),mn(e,r))}function kM(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),IP(e,r)}function MM(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(je(314))}n!==null&&n.delete(t),IP(e,r)}var LP;LP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dn.current)on=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return on=!1,bM(e,t,r);on=!!(e.flags&131072)}else on=!1,qt&&t.flags&1048576&&zA(t,Pf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;af(e,t),e=t.pendingProps;var s=Ko(t,Ur.current);Ro(t,r),s=tv(null,t,n,e,s,r);var i=rv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fn(n)?(i=!0,_f(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xy(t),s.updater=sh,t.stateNode=s,s._reactInternals=t,px(t,n,e,r),t=yx(null,t,n,!0,i,r)):(t.tag=0,qt&&i&&Uy(t),qr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(af(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=$M(n),e=Yn(n,e),s){case 0:t=xx(null,t,n,e,r);break e;case 1:t=tw(null,t,n,e,r);break e;case 11:t=Qj(null,t,n,e,r);break e;case 14:t=ew(null,t,n,Yn(n.type,e),r);break e}throw Error(je(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yn(n,s),xx(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yn(n,s),tw(e,t,n,s,r);case 3:e:{if(bP(t),e===null)throw Error(je(387));n=t.pendingProps,i=t.memoizedState,s=i.element,GA(e,t),Of(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zo(Error(je(423)),t),t=rw(e,t,n,r,s);break e}else if(n!==s){s=Zo(Error(je(424)),t),t=rw(e,t,n,r,s);break e}else for(bn=$s(t.stateNode.containerInfo.firstChild),jn=t,qt=!0,Qn=null,r=HA(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),n===s){t=es(e,t,r);break e}qr(e,t,n,r)}t=t.child}return t;case 5:return KA(t),e===null&&fx(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ox(n,s)?o=null:i!==null&&ox(n,i)&&(t.flags|=32),vP(e,t),qr(e,t,o,r),t.child;case 6:return e===null&&fx(t),null;case 13:return jP(e,t,r);case 4:return Jy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xo(t,null,n,r):qr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yn(n,s),Qj(e,t,n,s,r);case 7:return qr(e,t,t.pendingProps,r),t.child;case 8:return qr(e,t,t.pendingProps.children,r),t.child;case 12:return qr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,It(Ef,n._currentValue),n._currentValue=o,i!==null)if(la(i.value,o)){if(i.children===s.children&&!dn.current){t=es(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=qa(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),mx(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),mx(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}qr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ro(t,r),s=Fn(s),n=n(s),t.flags|=1,qr(e,t,n,r),t.child;case 14:return n=t.type,s=Yn(n,t.pendingProps),s=Yn(n.type,s),ew(e,t,n,s,r);case 15:return xP(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Yn(n,s),af(e,t),t.tag=1,fn(n)?(e=!0,_f(t)):e=!1,Ro(t,r),hP(t,n,s),px(t,n,s,r),yx(null,t,n,!0,e,r);case 19:return wP(e,t,r);case 22:return yP(e,t,r)}throw Error(je(156,t.tag))};function RP(e,t){return dA(e,t)}function DM(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,t,r,n){return new DM(e,t,r,n)}function fv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $M(e){if(typeof e=="function")return fv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ty)return 11;if(e===ky)return 14}return 2}function Bs(e,t){var r=e.alternate;return r===null?(r=In(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lf(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")fv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fo:return Ti(r.children,s,i,t);case Oy:o=8,s|=8;break;case Bg:return e=In(12,r,t,s|2),e.elementType=Bg,e.lanes=i,e;case Fg:return e=In(13,r,t,s),e.elementType=Fg,e.lanes=i,e;case zg:return e=In(19,r,t,s),e.elementType=zg,e.lanes=i,e;case K_:return lh(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q_:o=10;break e;case G_:o=9;break e;case Ty:o=11;break e;case ky:o=14;break e;case ys:o=16,n=null;break e}throw Error(je(130,e==null?e:typeof e,""))}return t=In(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Ti(e,t,r,n){return e=In(7,e,n,t),e.lanes=r,e}function lh(e,t,r,n){return e=In(22,e,n,t),e.elementType=K_,e.lanes=r,e.stateNode={isHidden:!1},e}function Hp(e,t,r){return e=In(6,e,null,t),e.lanes=r,e}function qp(e,t,r){return t=In(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IM(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ap(0),this.expirationTimes=Ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ap(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mv(e,t,r,n,s,i,o,l,c){return e=new IM(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=In(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xy(i),e}function LM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function BP(e){if(!e)return Gs;e=e._reactInternals;e:{if(Zi(e)!==e||e.tag!==1)throw Error(je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(je(171))}if(e.tag===1){var r=e.type;if(fn(r))return BA(e,r,t)}return t}function FP(e,t,r,n,s,i,o,l,c){return e=mv(r,n,!0,e,s,i,o,l,c),e.context=BP(null),r=e.current,n=Zr(),s=Rs(r),i=qa(n,s),i.callback=t??null,Is(r,i,s),e.current.lanes=s,Yu(e,s,n),mn(e,n),e}function ch(e,t,r,n){var s=t.current,i=Zr(),o=Rs(s);return r=BP(r),t.context===null?t.context=r:t.pendingContext=r,t=qa(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Is(s,t,o),e!==null&&(sa(e,s,o,i),tf(e,s,o)),o}function Rf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hv(e,t){fw(e,t),(e=e.alternate)&&fw(e,t)}function RM(){return null}var zP=typeof reportError=="function"?reportError:function(e){console.error(e)};function pv(e){this._internalRoot=e}uh.prototype.render=pv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(je(409));ch(e,t,null,null)};uh.prototype.unmount=pv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vi(function(){ch(null,e,null,null)}),t[Za]=null}};function uh(e){this._internalRoot=e}uh.prototype.unstable_scheduleHydration=function(e){if(e){var t=yA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ns.length&&t!==0&&t<Ns[r].priority;r++);Ns.splice(r,0,e),r===0&&bA(e)}};function gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mw(){}function BM(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Rf(o);i.call(u)}}var o=FP(t,n,e,0,null,!1,!1,"",mw);return e._reactRootContainer=o,e[Za]=o.current,Jc(e.nodeType===8?e.parentNode:e),Vi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Rf(c);l.call(u)}}var c=mv(e,0,!1,null,null,!1,!1,"",mw);return e._reactRootContainer=c,e[Za]=c.current,Jc(e.nodeType===8?e.parentNode:e),Vi(function(){ch(t,c,r,n)}),c}function fh(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Rf(o);l.call(c)}}ch(t,o,e,s)}else o=BM(r,t,e,s,n);return Rf(o)}gA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gc(t.pendingLanes);r!==0&&($y(t,r|1),mn(t,nr()),!(gt&6)&&(Qo=nr()+500,Qs()))}break;case 13:Vi(function(){var n=Qa(e,1);if(n!==null){var s=Zr();sa(n,e,1,s)}}),hv(e,1)}};Iy=function(e){if(e.tag===13){var t=Qa(e,134217728);if(t!==null){var r=Zr();sa(t,e,134217728,r)}hv(e,134217728)}};xA=function(e){if(e.tag===13){var t=Rs(e),r=Qa(e,t);if(r!==null){var n=Zr();sa(r,e,t,n)}hv(e,t)}};yA=function(){return Nt};vA=function(e,t){var r=Nt;try{return Nt=e,t()}finally{Nt=r}};Jg=function(e,t,r){switch(t){case"input":if(Wg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=rh(n);if(!s)throw Error(je(90));X_(n),Wg(n,s)}}}break;case"textarea":Z_(e,r);break;case"select":t=r.value,t!=null&&Do(e,!!r.multiple,t,!1)}};sA=cv;iA=Vi;var FM={usingClientEntryPoint:!1,Events:[Ju,go,rh,nA,aA,cv]},ec={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zM={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cA(e),e===null?null:e.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||RM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Zm=Cd.inject(zM),ba=Cd}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FM;_n.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gv(t))throw Error(je(200));return LM(e,t,null,r)};_n.createRoot=function(e,t){if(!gv(e))throw Error(je(299));var r=!1,n="",s=zP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mv(e,1,!1,null,null,r,!1,n,s),e[Za]=t.current,Jc(e.nodeType===8?e.parentNode:e),new pv(t)};_n.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(je(188)):(e=Object.keys(e).join(","),Error(je(268,e)));return e=cA(t),e=e===null?null:e.stateNode,e};_n.flushSync=function(e){return Vi(e)};_n.hydrate=function(e,t,r){if(!dh(t))throw Error(je(200));return fh(null,e,t,!0,r)};_n.hydrateRoot=function(e,t,r){if(!gv(e))throw Error(je(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=zP;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=FP(t,null,e,1,r??null,s,!1,i,o),e[Za]=t.current,Jc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new uh(t)};_n.render=function(e,t,r){if(!dh(t))throw Error(je(200));return fh(null,e,t,!1,r)};_n.unmountComponentAtNode=function(e){if(!dh(e))throw Error(je(40));return e._reactRootContainer?(Vi(function(){fh(null,null,e,!1,function(){e._reactRootContainer=null,e[Za]=null})}),!0):!1};_n.unstable_batchedUpdates=cv;_n.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!dh(r))throw Error(je(200));if(e==null||e._reactInternals===void 0)throw Error(je(38));return fh(e,t,r,!1,n)};_n.version="18.3.1-next-f1338f8080-20240426";function VP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VP)}catch(e){console.error(e)}}VP(),V_.exports=_n;var VM=V_.exports,hw=VM;Lg.createRoot=hw.createRoot,Lg.hydrateRoot=hw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(this,arguments)}var Es;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Es||(Es={}));const pw="popstate";function UM(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Ox("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Bf(s)}return HM(t,r,null,e)}function sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WM(){return Math.random().toString(36).substr(2,8)}function gw(e,t){return{usr:e.state,key:e.key,idx:t}}function Ox(e,t,r,n){return r===void 0&&(r=null),iu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tl(t):t,{state:r,key:t&&t.key||n||WM()})}function Bf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Tl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function HM(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=Es.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(iu({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=Es.Pop;let y=f(),p=y==null?null:y-u;u=y,c&&c({action:l,location:h.location,delta:p})}function m(y,p){l=Es.Push;let x=Ox(h.location,y,p);u=f()+1;let v=gw(x,u),S=h.createHref(x);try{o.pushState(v,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(S)}i&&c&&c({action:l,location:h.location,delta:1})}function g(y,p){l=Es.Replace;let x=Ox(h.location,y,p);u=f();let v=gw(x,u),S=h.createHref(x);o.replaceState(v,"",S),i&&c&&c({action:l,location:h.location,delta:0})}function j(y){let p=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof y=="string"?y:Bf(y);return x=x.replace(/ $/,"%20"),sr(p,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,p)}let h={get action(){return l},get location(){return e(s,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(pw,d),c=y,()=>{s.removeEventListener(pw,d),c=null}},createHref(y){return t(s,y)},createURL:j,encodeLocation(y){let p=j(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:g,go(y){return o.go(y)}};return h}var xw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xw||(xw={}));function qM(e,t,r){return r===void 0&&(r="/"),GM(e,t,r)}function GM(e,t,r,n){let s=typeof t=="string"?Tl(t):t,i=yv(s.pathname||"/",r);if(i==null)return null;let o=UP(e);KM(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=iD(i);l=nD(o[c],u)}return l}function UP(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(sr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Fs([n,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(sr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),UP(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:tD(u,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of WP(i.path))s(i,o,c)}),t}function WP(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=WP(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function KM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:rD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const YM=/^:[\w-]+$/,XM=3,JM=2,ZM=1,QM=10,eD=-2,yw=e=>e==="*";function tD(e,t){let r=e.split("/"),n=r.length;return r.some(yw)&&(n+=eD),t&&(n+=JM),r.filter(s=>!yw(s)).reduce((s,i)=>s+(YM.test(i)?XM:i===""?ZM:QM),n)}function rD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function nD(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",d=aD({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Fs([i,d.pathname]),pathnameBase:dD(Fs([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=Fs([i,d.pathnameBase]))}return o}function aD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=sD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let h=l[d]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const j=l[d];return g&&!j?u[m]=void 0:u[m]=(j||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function sD(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),xv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function iD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const oD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lD=e=>oD.test(e);function cD(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Tl(e):e,i;if(r)if(lD(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),xv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=vw(r.substring(1),"/"):i=vw(r,t)}else i=t;return{pathname:i,search:fD(n),hash:mD(s)}}function vw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Gp(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vv(e,t){let r=uD(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bv(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Tl(e):(s=iu({},e),sr(!s.pathname||!s.pathname.includes("?"),Gp("?","pathname","search",s)),sr(!s.pathname||!s.pathname.includes("#"),Gp("#","pathname","hash",s)),sr(!s.search||!s.search.includes("#"),Gp("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}l=d>=0?t[d]:"/"}let c=cD(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Fs=e=>e.join("/").replace(/\/\/+/g,"/"),dD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),fD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const HP=["post","put","patch","delete"];new Set(HP);const pD=["get",...HP];new Set(pD);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ou(){return ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ou.apply(this,arguments)}const jv=N.createContext(null),gD=N.createContext(null),ei=N.createContext(null),mh=N.createContext(null),ti=N.createContext({outlet:null,matches:[],isDataRoute:!1}),qP=N.createContext(null);function xD(e,t){let{relative:r}=t===void 0?{}:t;kl()||sr(!1);let{basename:n,navigator:s}=N.useContext(ei),{hash:i,pathname:o,search:l}=KP(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Fs([n,o])),s.createHref({pathname:c,search:l,hash:i})}function kl(){return N.useContext(mh)!=null}function Pn(){return kl()||sr(!1),N.useContext(mh).location}function GP(e){N.useContext(ei).static||N.useLayoutEffect(e)}function it(){let{isDataRoute:e}=N.useContext(ti);return e?OD():yD()}function yD(){kl()||sr(!1);let e=N.useContext(jv),{basename:t,future:r,navigator:n}=N.useContext(ei),{matches:s}=N.useContext(ti),{pathname:i}=Pn(),o=JSON.stringify(vv(s,r.v7_relativeSplatPath)),l=N.useRef(!1);return GP(()=>{l.current=!0}),N.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=bv(u,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Fs([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,o,i,e])}function KP(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=N.useContext(ei),{matches:s}=N.useContext(ti),{pathname:i}=Pn(),o=JSON.stringify(vv(s,n.v7_relativeSplatPath));return N.useMemo(()=>bv(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function vD(e,t){return bD(e,t)}function bD(e,t,r,n){kl()||sr(!1);let{navigator:s}=N.useContext(ei),{matches:i}=N.useContext(ti),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Pn(),f;if(t){var d;let y=typeof t=="string"?Tl(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||sr(!1),f=y}else f=u;let m=f.pathname||"/",g=m;if(c!=="/"){let y=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let j=qM(e,{pathname:g}),h=_D(j&&j.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Fs([c,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:Fs([c,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&h?N.createElement(mh.Provider,{value:{location:ou({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Es.Pop}},h):h}function jD(){let e=CD(),t=hD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,null)}const wD=N.createElement(jD,null);class ND extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(ti.Provider,{value:this.props.routeContext},N.createElement(qP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SD(e){let{routeContext:t,match:r,children:n}=e,s=N.useContext(jv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(ti.Provider,{value:t},n)}function _D(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||sr(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:m,errors:g}=r,j=d.route.loader&&m[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||j){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,m)=>{let g,j=!1,h=null,y=null;r&&(g=l&&d.route.id?l[d.route.id]:void 0,h=d.route.errorElement||wD,c&&(u<0&&m===0?(TD("route-fallback"),j=!0,y=null):u===m&&(j=!0,y=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,m+1)),x=()=>{let v;return g?v=h:j?v=y:d.route.Component?v=N.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=f,N.createElement(SD,{match:d,routeContext:{outlet:f,matches:p,isDataRoute:r!=null},children:v})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?N.createElement(ND,{location:r.location,revalidation:r.revalidation,component:h,error:g,children:x(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):x()},null)}var YP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(YP||{}),XP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(XP||{});function AD(e){let t=N.useContext(jv);return t||sr(!1),t}function PD(e){let t=N.useContext(gD);return t||sr(!1),t}function ED(e){let t=N.useContext(ti);return t||sr(!1),t}function JP(e){let t=ED(),r=t.matches[t.matches.length-1];return r.route.id||sr(!1),r.route.id}function CD(){var e;let t=N.useContext(qP),r=PD(),n=JP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function OD(){let{router:e}=AD(YP.UseNavigateStable),t=JP(XP.UseNavigateStable),r=N.useRef(!1);return GP(()=>{r.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ou({fromRouteId:t},i)))},[e,t])}const bw={};function TD(e,t,r){bw[e]||(bw[e]=!0)}function kD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function MD(e){let{to:t,replace:r,state:n,relative:s}=e;kl()||sr(!1);let{future:i,static:o}=N.useContext(ei),{matches:l}=N.useContext(ti),{pathname:c}=Pn(),u=it(),f=bv(t,vv(l,i.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(f);return N.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:s}),[u,d,s,r,n]),null}function ht(e){sr(!1)}function DD(e){let{basename:t="/",children:r=null,location:n,navigationType:s=Es.Pop,navigator:i,static:o=!1,future:l}=e;kl()&&sr(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:o,future:ou({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Tl(n));let{pathname:f="/",search:d="",hash:m="",state:g=null,key:j="default"}=n,h=N.useMemo(()=>{let y=yv(f,c);return y==null?null:{location:{pathname:y,search:d,hash:m,state:g,key:j},navigationType:s}},[c,f,d,m,g,j,s]);return h==null?null:N.createElement(ei.Provider,{value:u},N.createElement(mh.Provider,{children:r,value:h}))}function $D(e){let{children:t,location:r}=e;return vD(Tx(t),r)}new Promise(()=>{});function Tx(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,s)=>{if(!N.isValidElement(n))return;let i=[...t,s];if(n.type===N.Fragment){r.push.apply(r,Tx(n.props.children,i));return}n.type!==ht&&sr(!1),!n.props.index||!n.props.children||sr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Tx(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(this,arguments)}function ID(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function LD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function RD(e,t){return e.button===0&&(!t||t==="_self")&&!LD(e)}const BD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FD="6";try{window.__reactRouterVersion=FD}catch{}const zD="startTransition",jw=T5[zD];function VD(e){let{basename:t,children:r,future:n,window:s}=e,i=N.useRef();i.current==null&&(i.current=UM({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},f=N.useCallback(d=>{u&&jw?jw(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>kD(n),[n]),N.createElement(DD,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const UD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ff=N.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,m=ID(t,BD),{basename:g}=N.useContext(ei),j,h=!1;if(typeof u=="string"&&WD.test(u)&&(j=u,UD))try{let v=new URL(window.location.href),S=u.startsWith("//")?new URL(v.protocol+u):new URL(u),w=yv(S.pathname,g);S.origin===v.origin&&w!=null?u=w+S.search+S.hash:h=!0}catch{}let y=xD(u,{relative:s}),p=HD(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:d});function x(v){n&&n(v),v.defaultPrevented||p(v)}return N.createElement("a",kx({},m,{href:j||y,onClick:h||i?n:x,ref:r,target:c}))});var ww;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ww||(ww={}));var Nw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nw||(Nw={}));function HD(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=it(),u=Pn(),f=KP(e,{relative:o});return N.useCallback(d=>{if(RD(d,r)){d.preventDefault();let m=n!==void 0?n:Bf(u)===Bf(f);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,f,n,s,r,e,i,o,l])}const Re=e=>`/${e}`,Sw="http://localhost/backend/api",Ne=async(e,t={})=>{const r=localStorage.getItem("token"),n={method:t.method||"GET",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},...t.body&&{body:t.body},...t};try{const s=`${Sw}${e}`;console.log(`[API] ${t.method||"GET"} ${s}`);const i=await fetch(s,n);let o;const l=i.headers.get("content-type"),c=await i.text();if(l&&l.includes("application/json"))try{o=JSON.parse(c)}catch(u){throw console.error("[API] Error parsing JSON:",u),console.error("[API] Response text:",c),new Error("Rponse invalide du serveur. Le backend ne renvoie pas du JSON valide.")}else throw console.error("[API] Non-JSON response:",c),new Error(c||"Erreur lors de la requte");if(!i.ok)throw console.error(`[API] Error ${i.status}:`,o),new Error(o.message||`Erreur ${i.status}: Erreur lors de la requte`);return console.log("[API] Success:",o),o}catch(s){throw s.name==="TypeError"&&s.message.includes("fetch")?(console.error("[API] Network Error:",s),new Error(`Impossible de se connecter au serveur. Vrifiez que:
1. XAMPP Apache est dmarr
2. Le backend est dans C:\\xampp\\htdocs\\backend
3. L'URL ${Sw} est accessible dans votre navigateur`)):s instanceof Error?(console.error("[API] Error:",s),s):(console.error("[API] Unknown Error:",s),new Error("Erreur de connexion au serveur"))}},ts={login:async(e,t,r=null)=>{const s=e.includes("@")?{email:e,password:t}:{telephone:e,password:t};return r&&(s.expected_role=r),Ne("/auth/login.php",{method:"POST",body:JSON.stringify(s)})},register:async e=>Ne("/auth/register.php",{method:"POST",body:JSON.stringify(e)}),logout:async()=>{try{await Ne("/auth/logout.php",{method:"POST"})}catch(e){console.error("Erreur lors de la dconnexion:",e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user")}},getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},saveUser:e=>{localStorage.setItem("user",JSON.stringify(e))}},Vr={getAll:()=>Ne("/chauffeurs/getAll.php"),getById:e=>Ne(`/chauffeurs/getById.php?id=${e}`),create:e=>Ne("/chauffeurs/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/chauffeurs/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/chauffeurs/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),getAccidents:e=>Ne(`/chauffeurs/accidents.php?chauffeur_id=${e}`),licencier:e=>Ne("/chauffeurs/licencier.php",{method:"POST",body:JSON.stringify({chauffeur_id:e})})},xa={getAll:()=>Ne("/responsables/getAll.php"),getById:e=>Ne(`/responsables/getById.php?id=${e}`),create:e=>Ne("/responsables/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/responsables/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/responsables/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},ri={getAll:()=>Ne("/tuteurs/getAll.php"),getById:e=>Ne(`/tuteurs/getById.php?id=${e}`),create:e=>Ne("/tuteurs/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/tuteurs/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),getEleves:e=>Ne(`/tuteurs/eleves.php?tuteur_id=${e}`),getPaiements:e=>Ne(`/tuteurs/paiements.php?tuteur_id=${e}`)},Xt={getAll:()=>Ne("/eleves/getAll.php"),getById:e=>Ne(`/eleves/getById.php?id=${e}`),getByBus:e=>Ne(`/eleves/getByBus.php?bus_id=${e}`),getTransportInfo:e=>Ne(`/eleves/getTransportInfo.php?eleve_id=${e}`),create:e=>Ne("/eleves/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/eleves/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/eleves/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},wr={getAll:()=>Ne("/bus/getAll.php"),getById:e=>Ne(`/bus/getById.php?id=${e}`),create:e=>Ne("/bus/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/bus/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/bus/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),getEleves:e=>Ne(`/bus/eleves.php?bus_id=${e}`),getByZone:e=>Ne(`/bus/getByZone.php?zone=${encodeURIComponent(e)}`)},ra={getAll:()=>Ne("/trajets/getAll.php"),getById:e=>Ne(`/trajets/getById.php?id=${e}`),create:e=>Ne("/trajets/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/trajets/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/trajets/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},za={getByDate:(e,t=null)=>{const r=t?`/presences/getByDate.php?date=${e}&bus_id=${t}`:`/presences/getByDate.php?date=${e}`;return Ne(r)},getByEleve:(e,t,r)=>Ne(`/presences/getByEleve.php?eleve_id=${e}&start_date=${t}&end_date=${r}`),marquer:e=>Ne("/presences/marquer.php",{method:"POST",body:JSON.stringify(e)}),getStatistiques:e=>Ne(`/presences/statistiques.php?eleve_id=${e}`)},ln={getAll:()=>Ne("/accidents/getAll.php"),getById:e=>Ne(`/accidents/getById.php?id=${e}`),getByChauffeur:e=>Ne(`/accidents/getByChauffeur.php?chauffeur_id=${e}`),getByResponsable:e=>Ne(`/accidents/getByResponsable.php?responsable_id=${e}`),create:e=>Ne("/accidents/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/accidents/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),validate:e=>Ne("/accidents/validate.php",{method:"PUT",body:JSON.stringify({id:e})}),delete:e=>Ne("/accidents/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},ft={getByUser:(e,t)=>Ne(`/notifications/getByUser.php?user_id=${e}&user_type=${t}`),getSentByResponsable:e=>Ne(`/notifications/getSentByResponsable.php?responsable_id=${e}`),marquerLue:e=>Ne("/notifications/marquerLue.php",{method:"PUT",body:JSON.stringify({id:e})}),create:e=>Ne("/notifications/create.php",{method:"POST",body:JSON.stringify(e)}),delete:e=>Ne("/notifications/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),deleteAll:(e,t)=>Ne("/notifications/deleteAll.php",{method:"DELETE",body:JSON.stringify({user_id:e,user_type:t})})},cr={getAll:()=>Ne("/demandes/getAll.php"),getByUser:(e,t)=>Ne(`/demandes/getByUser.php?user_id=${e}&user_type=${t}`),getByTuteur:e=>Ne(`/demandes/getByTuteur.php?tuteur_id=${e}`),create:e=>Ne("/demandes/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/demandes/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne("/demandes/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),traiter:(e,t,r,n,s)=>Ne("/demandes/traiter.php",{method:"PUT",body:JSON.stringify({id:e,statut:t,commentaire:r,raison_refus:n,traite_par:s})}),verifierCode:(e,t)=>Ne("/demandes/verifierCode.php",{method:"POST",body:JSON.stringify({demande_id:e,code_verification:t})})},Kr={getAll:()=>Ne("/inscriptions/getAll.php"),getByEleve:e=>Ne(`/inscriptions/getByEleve.php?eleve_id=${e}`),create:e=>Ne("/inscriptions/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/inscriptions/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})})},Fo={getAll:()=>Ne("/paiements/getAll.php"),getByTuteur:e=>Ne(`/paiements/getByTuteur.php?tuteur_id=${e}`),getByEleve:e=>Ne(`/paiements/getByEleve.php?eleve_id=${e}`),create:e=>Ne("/paiements/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>Ne("/paiements/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne(`/paiements/delete.php?id=${e}`,{method:"DELETE"}),getImpaye:()=>Ne("/paiements/getImpaye.php")},Cs={getAll:()=>Ne("/zones/getAll.php"),create:e=>Ne("/zones/create.php",{method:"POST",body:JSON.stringify(e)}),update:e=>Ne("/zones/update.php",{method:"PUT",body:JSON.stringify(e)}),delete:e=>Ne(`/zones/delete.php?id=${e}`,{method:"DELETE"})},qD={sendMessage:e=>Ne("/contact/create.php",{method:"POST",body:JSON.stringify(e)})},Tc={getAll:()=>Ne("/essence/getAll.php"),create:e=>Ne("/essence/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>Ne(`/essence/getByChauffeur.php?chauffeur_id=${e}`)},ZP={create:e=>Ne("/rapports/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>Ne(`/rapports/getByChauffeur.php?chauffeur_id=${e}`)},ha={getAll:()=>Ne("/signalements/getAll.php"),create:e=>Ne("/signalements/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>Ne(`/signalements/getByChauffeur.php?chauffeur_id=${e}`),update:(e,t)=>Ne("/signalements/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>Ne(`/signalements/delete.php?id=${e}`,{method:"DELETE"})};var GD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const KD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YD=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>N.createElement("svg",{ref:u,...GD,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${KD(e)}`,...c},[...t.map(([f,d])=>N.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var Ve=YD;const Ue=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Os=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ot=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),el=Ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Vn=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),_w=Ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),XD=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),tt=Ve("Bus",[["path",{d:"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2",key:"wfsdqh"}],["path",{d:"M14 17H9",key:"o2noo5"}],["circle",{cx:"6.5",cy:"17.5",r:"2.5",key:"gc8oob"}],["circle",{cx:"16.5",cy:"17.5",r:"2.5",key:"4btu0q"}]]),Qr=Ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Od=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),mt=Ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ya=Ve("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),JD=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Mx=Ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),ia=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Aw=Ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Cr=Ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),cf=Ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),zf=Ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ca=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wa=Ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ca=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),an=Ve("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),pr=Ve("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),wv=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Jn=Ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Qu=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),ZD=Ve("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Td=Ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),QD=Ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),ki=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ui=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Ut=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tl=Ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),uf=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),No=Ve("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Un=Ve("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Wi=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Na=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Pw=Ve("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),rs=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Nv=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Dx=Ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Mi=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),e$=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Tt=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),t$=Ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),lu=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),yc=Ve("UserCog",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["circle",{cx:"19",cy:"11",r:"2",key:"1rxg02"}],["path",{d:"M19 8v1",key:"1iffrw"}],["path",{d:"M19 13v1",key:"z4xc62"}],["path",{d:"m21.6 9.5-.87.5",key:"6lxupl"}],["path",{d:"m17.27 12-.87.5",key:"1rwhxx"}],["path",{d:"m21.6 12.5-.87-.5",key:"agvc9a"}],["path",{d:"m17.27 10-.87-.5",key:"12d57s"}]]),hh=Ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),pt=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ht=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ea=Ve("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Lr=Ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ke=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Di=Ve("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),QP=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ph=N.createContext({}),gh=N.createContext(null),xh=typeof document<"u",Sv=xh?N.useLayoutEffect:N.useEffect,eE=N.createContext({strict:!1}),_v=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r$="framerAppearId",tE="data-"+_v(r$);function n$(e,t,r,n){const{visualElement:s}=N.useContext(ph),i=N.useContext(eE),o=N.useContext(gh),l=N.useContext(QP).reducedMotion,c=N.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(r,o)});const f=N.useRef(!!(r[tE]&&!window.HandoffComplete));return Sv(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),u}function So(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function a$(e,t,r){return N.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):So(r)&&(r.current=n))},[t])}function cu(e){return typeof e=="string"||Array.isArray(e)}function yh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Av=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pv=["initial",...Av];function vh(e){return yh(e.animate)||Pv.some(t=>cu(e[t]))}function rE(e){return!!(vh(e)||e.variants)}function s$(e,t){if(vh(e)){const{initial:r,animate:n}=e;return{initial:r===!1||cu(r)?r:void 0,animate:cu(n)?n:void 0}}return e.inherit!==!1?t:{}}function i$(e){const{initial:t,animate:r}=s$(e,N.useContext(ph));return N.useMemo(()=>({initial:t,animate:r}),[Ew(t),Ew(r)])}function Ew(e){return Array.isArray(e)?e.join(" "):e}const Cw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uu={};for(const e in Cw)uu[e]={isEnabled:t=>Cw[e].some(r=>!!t[r])};function o$(e){for(const t in e)uu[t]={...uu[t],...e[t]}}const Ev=N.createContext({}),nE=N.createContext({}),l$=Symbol.for("motionComponentSymbol");function c$({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&o$(e);function i(l,c){let u;const f={...N.useContext(QP),...l,layoutId:u$(l)},{isStatic:d}=f,m=i$(l),g=n(l,d);if(!d&&xh){m.visualElement=n$(s,g,f,t);const j=N.useContext(nE),h=N.useContext(eE).strict;m.visualElement&&(u=m.visualElement.loadFeatures(f,h,e,j))}return N.createElement(ph.Provider,{value:m},u&&m.visualElement?N.createElement(u,{visualElement:m.visualElement,...f}):null,r(s,l,a$(g,m.visualElement,c),g,d,m.visualElement))}const o=N.forwardRef(i);return o[l$]=s,o}function u$({layoutId:e}){const t=N.useContext(Ev).id;return t&&e!==void 0?t+"-"+e:e}function d$(e){function t(n,s={}){return c$(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const f$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cv(e){return typeof e!="string"||e.includes("-")?!1:!!(f$.indexOf(e)>-1||/[A-Z]/.test(e))}const Vf={};function m$(e){Object.assign(Vf,e)}const ed=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qi=new Set(ed);function aE(e,{layout:t,layoutId:r}){return Qi.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Vf[e]||e==="opacity")}const hn=e=>!!(e&&e.getVelocity),h$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},p$=ed.length;function g$(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let o=0;o<p$;o++){const l=ed[o];if(e[l]!==void 0){const c=h$[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const sE=e=>t=>typeof t=="string"&&t.startsWith(e),iE=sE("--"),$x=sE("var(--"),x$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,y$=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ks=(e,t,r)=>Math.min(Math.max(r,e),t),eo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},kc={...eo,transform:e=>Ks(0,1,e)},kd={...eo,default:1},Mc=e=>Math.round(e*1e5)/1e5,bh=/(-)?([\d]*\.?[\d])+/g,oE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,v$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function td(e){return typeof e=="string"}const rd=e=>({test:t=>td(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),xs=rd("deg"),Sa=rd("%"),Ge=rd("px"),b$=rd("vh"),j$=rd("vw"),Ow={...Sa,parse:e=>Sa.parse(e)/100,transform:e=>Sa.transform(e*100)},Tw={...eo,transform:Math.round},lE={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,size:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,rotate:xs,rotateX:xs,rotateY:xs,rotateZ:xs,scale:kd,scaleX:kd,scaleY:kd,scaleZ:kd,skew:xs,skewX:xs,skewY:xs,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:kc,originX:Ow,originY:Ow,originZ:Ge,zIndex:Tw,fillOpacity:kc,strokeOpacity:kc,numOctaves:Tw};function Ov(e,t,r,n){const{style:s,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,f=!0;for(const d in t){const m=t[d];if(iE(d)){i[d]=m;continue}const g=lE[d],j=y$(m,g);if(Qi.has(d)){if(c=!0,o[d]=j,!f)continue;m!==(g.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,l[d]=j):s[d]=j}if(t.transform||(c||n?s.transform=g$(e.transform,r,f,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;s.transformOrigin=`${d} ${m} ${g}`}}const Tv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function cE(e,t,r){for(const n in t)!hn(t[n])&&!aE(n,r)&&(e[n]=t[n])}function w$({transformTemplate:e},t,r){return N.useMemo(()=>{const n=Tv();return Ov(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function N$(e,t,r){const n=e.style||{},s={};return cE(s,n,e),Object.assign(s,w$(e,t,r)),e.transformValues?e.transformValues(s):s}function S$(e,t,r){const n={},s=N$(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const _$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_$.has(e)}let uE=e=>!Uf(e);function A$(e){e&&(uE=t=>t.startsWith("on")?!Uf(t):e(t))}try{A$(require("@emotion/is-prop-valid").default)}catch{}function P$(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(uE(s)||r===!0&&Uf(s)||!t&&!Uf(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function kw(e,t,r){return typeof e=="string"?e:Ge.transform(t+r*e)}function E$(e,t,r){const n=kw(t,e.x,e.width),s=kw(r,e.y,e.height);return`${n} ${s}`}const C$={offset:"stroke-dashoffset",array:"stroke-dasharray"},O$={offset:"strokeDashoffset",array:"strokeDasharray"};function T$(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?C$:O$;e[i.offset]=Ge.transform(-n);const o=Ge.transform(t),l=Ge.transform(r);e[i.array]=`${o} ${l}`}function kv(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},f,d,m){if(Ov(e,u,f,m),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:j,dimensions:h}=e;g.transform&&(h&&(j.transform=g.transform),delete g.transform),h&&(s!==void 0||i!==void 0||j.transform)&&(j.transformOrigin=E$(h,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),o!==void 0&&T$(g,o,l,c,!1)}const dE=()=>({...Tv(),attrs:{}}),Mv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function k$(e,t,r,n){const s=N.useMemo(()=>{const i=dE();return kv(i,t,{enableHardwareAcceleration:!1},Mv(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};cE(i,e.style,e),s.style={...i,...s.style}}return s}function M$(e=!1){return(r,n,s,{latestValues:i},o)=>{const c=(Cv(r)?k$:S$)(n,i,o,r),f={...P$(n,typeof r=="string",e),...c,ref:s},{children:d}=n,m=N.useMemo(()=>hn(d)?d.get():d,[d]);return N.createElement(r,{...f,children:m})}}function fE(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const mE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hE(e,t,r,n){fE(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(mE.has(s)?s:_v(s),t.attrs[s])}function Dv(e,t){const{style:r}=e,n={};for(const s in r)(hn(r[s])||t.style&&hn(t.style[s])||aE(s,e))&&(n[s]=r[s]);return n}function pE(e,t){const r=Dv(e,t);for(const n in e)if(hn(e[n])||hn(t[n])){const s=ed.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function $v(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function gE(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const Wf=e=>Array.isArray(e),D$=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),$$=e=>Wf(e)?e[e.length-1]||0:e;function df(e){const t=hn(e)?e.get():e;return D$(t)?t.toValue():t}function I$({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const o={latestValues:L$(n,s,i,e),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const xE=e=>(t,r)=>{const n=N.useContext(ph),s=N.useContext(gh),i=()=>I$(e,t,n,s);return r?i():gE(i)};function L$(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=df(i[m]);let{initial:o,animate:l}=e;const c=vh(e),u=rE(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const d=f?l:o;return d&&typeof d!="boolean"&&!yh(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const j=$v(e,g);if(!j)return;const{transitionEnd:h,transition:y,...p}=j;for(const x in p){let v=p[x];if(Array.isArray(v)){const S=f?v.length-1:0;v=v[S]}v!==null&&(s[x]=v)}for(const x in h)s[x]=h[x]}),s}const ar=e=>e;class Mw{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function R$(e){let t=new Mw,r=new Mw,n=0,s=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,f=!1)=>{const d=f&&s,m=d?t:r;return u&&o.add(c),m.add(c)&&d&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const f=t.order[u];f(c),o.has(f)&&(l.schedule(f),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const Md=["prepare","read","update","preRender","render","postRender"],B$=40;function F$(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Md.reduce((d,m)=>(d[m]=R$(()=>r=!0),d),{}),o=d=>i[d].process(s),l=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,B$),1),s.timestamp=d,s.isProcessing=!0,Md.forEach(o),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:Md.reduce((d,m)=>{const g=i[m];return d[m]=(j,h=!1,y=!1)=>(r||c(),g.schedule(j,h,y)),d},{}),cancel:d=>Md.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:Lt,cancel:ns,state:Ir,steps:Kp}=F$(typeof requestAnimationFrame<"u"?requestAnimationFrame:ar,!0),z$={useVisualState:xE({scrapeMotionValuesFromProps:pE,createRenderState:dE,onMount:(e,t,{renderState:r,latestValues:n})=>{Lt.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Lt.render(()=>{kv(r,n,{enableHardwareAcceleration:!1},Mv(t.tagName),e.transformTemplate),hE(t,r)})}})},V$={useVisualState:xE({scrapeMotionValuesFromProps:Dv,createRenderState:Tv})};function U$(e,{forwardMotionProps:t=!1},r,n){return{...Cv(e)?z$:V$,preloadedFeatures:r,useRender:M$(t),createVisualElement:n,Component:e}}function Va(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const yE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function jh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const W$=e=>t=>yE(t)&&e(t,jh(t));function Ga(e,t,r,n){return Va(e,t,W$(r),n)}const H$=(e,t)=>r=>t(e(r)),zs=(...e)=>e.reduce(H$);function vE(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const Dw=vE("dragHorizontal"),$w=vE("dragVertical");function bE(e){let t=!1;if(e==="y")t=$w();else if(e==="x")t=Dw();else{const r=Dw(),n=$w();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function jE(){const e=bE(!0);return e?(e(),!1):!0}class ni{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Iw(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||jE())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Lt.update(()=>l[n](i,o))};return Ga(e.current,r,s,{passive:!e.getProps()[n]})}class q$ extends ni{mount(){this.unmount=zs(Iw(this.node,!0),Iw(this.node,!1))}unmount(){}}class G$ extends ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=zs(Va(this.node.current,"focus",()=>this.onFocus()),Va(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const wE=(e,t)=>t?e===t?!0:wE(e,t.parentElement):!1;function Yp(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,jh(r))}class K$ extends ni{constructor(){super(...arguments),this.removeStartListeners=ar,this.removeEndListeners=ar,this.removeAccessibleListeners=ar,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Ga(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f,globalTapTarget:d}=this.node.getProps();Lt.update(()=>{!d&&!wE(this.node.current,l.target)?f&&f(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=Ga(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=zs(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Yp("up",(c,u)=>{const{onTap:f}=this.node.getProps();f&&Lt.update(()=>f(c,u))})};this.removeEndListeners(),this.removeEndListeners=Va(this.node.current,"keyup",o),Yp("down",(l,c)=>{this.startPress(l,c)})},r=Va(this.node.current,"keydown",t),n=()=>{this.isPressing&&Yp("cancel",(i,o)=>this.cancelPress(i,o))},s=Va(this.node.current,"blur",n);this.removeAccessibleListeners=zs(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Lt.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jE()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Lt.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=Ga(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=Va(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=zs(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ix=new WeakMap,Xp=new WeakMap,Y$=e=>{const t=Ix.get(e.target);t&&t(e)},X$=e=>{e.forEach(Y$)};function J$({root:e,...t}){const r=e||document;Xp.has(r)||Xp.set(r,{});const n=Xp.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(X$,{root:e,...t})),n[s]}function Z$(e,t,r){const n=J$(t);return Ix.set(e,r),n.observe(e),()=>{Ix.delete(e),n.unobserve(e)}}const Q$={some:0,all:1};class e6 extends ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Q$[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=u?f:d;m&&m(c)};return Z$(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(t6(t,r))&&this.startObserver()}unmount(){}}function t6({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const r6={inView:{Feature:e6},tap:{Feature:K$},focus:{Feature:G$},hover:{Feature:q$}};function NE(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function n6(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function a6(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function wh(e,t,r){const n=e.getProps();return $v(n,t,r!==void 0?r:n.custom,n6(e),a6(e))}let Iv=ar;const $i=e=>e*1e3,Ka=e=>e/1e3,s6={current:!1},SE=e=>Array.isArray(e)&&typeof e[0]=="number";function _E(e){return!!(!e||typeof e=="string"&&AE[e]||SE(e)||Array.isArray(e)&&e.every(_E))}const vc=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,AE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vc([0,.65,.55,1]),circOut:vc([.55,0,1,.45]),backIn:vc([.31,.01,.66,-.59]),backOut:vc([.33,1.53,.69,.99])};function PE(e){if(e)return SE(e)?vc(e):Array.isArray(e)?e.map(PE):AE[e]}function i6(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const f=PE(l);return Array.isArray(f)&&(u.easing=f),e.animate(u,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function o6(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const EE=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,l6=1e-7,c6=12;function u6(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=EE(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>l6&&++l<c6);return o}function nd(e,t,r,n){if(e===t&&r===n)return ar;const s=i=>u6(i,0,1,e,r);return i=>i===0||i===1?i:EE(s(i),t,n)}const d6=nd(.42,0,1,1),f6=nd(0,0,.58,1),CE=nd(.42,0,.58,1),m6=e=>Array.isArray(e)&&typeof e[0]!="number",OE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,TE=e=>t=>1-e(1-t),Lv=e=>1-Math.sin(Math.acos(e)),kE=TE(Lv),h6=OE(Lv),ME=nd(.33,1.53,.69,.99),Rv=TE(ME),p6=OE(Rv),g6=e=>(e*=2)<1?.5*Rv(e):.5*(2-Math.pow(2,-10*(e-1))),x6={linear:ar,easeIn:d6,easeInOut:CE,easeOut:f6,circIn:Lv,circInOut:h6,circOut:kE,backIn:Rv,backInOut:p6,backOut:ME,anticipate:g6},Lw=e=>{if(Array.isArray(e)){Iv(e.length===4);const[t,r,n,s]=e;return nd(t,r,n,s)}else if(typeof e=="string")return x6[e];return e},Bv=(e,t)=>r=>!!(td(r)&&v$.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),DE=(e,t,r)=>n=>{if(!td(n))return n;const[s,i,o,l]=n.match(bh);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},y6=e=>Ks(0,255,e),Jp={...eo,transform:e=>Math.round(y6(e))},_i={test:Bv("rgb","red"),parse:DE("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Jp.transform(e)+", "+Jp.transform(t)+", "+Jp.transform(r)+", "+Mc(kc.transform(n))+")"};function v6(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Lx={test:Bv("#"),parse:v6,transform:_i.transform},_o={test:Bv("hsl","hue"),parse:DE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Sa.transform(Mc(t))+", "+Sa.transform(Mc(r))+", "+Mc(kc.transform(n))+")"},Hr={test:e=>_i.test(e)||Lx.test(e)||_o.test(e),parse:e=>_i.test(e)?_i.parse(e):_o.test(e)?_o.parse(e):Lx.parse(e),transform:e=>td(e)?e:e.hasOwnProperty("red")?_i.transform(e):_o.transform(e)},Yt=(e,t,r)=>-r*e+r*t+e;function Zp(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function b6({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Zp(c,l,e+1/3),i=Zp(c,l,e),o=Zp(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Qp=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},j6=[Lx,_i,_o],w6=e=>j6.find(t=>t.test(e));function Rw(e){const t=w6(e);let r=t.parse(e);return t===_o&&(r=b6(r)),r}const $E=(e,t)=>{const r=Rw(e),n=Rw(t),s={...r};return i=>(s.red=Qp(r.red,n.red,i),s.green=Qp(r.green,n.green,i),s.blue=Qp(r.blue,n.blue,i),s.alpha=Yt(r.alpha,n.alpha,i),_i.transform(s))};function N6(e){var t,r;return isNaN(e)&&td(e)&&(((t=e.match(bh))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(oE))===null||r===void 0?void 0:r.length)||0)>0}const IE={regex:x$,countKey:"Vars",token:"${v}",parse:ar},LE={regex:oE,countKey:"Colors",token:"${c}",parse:Hr.parse},RE={regex:bh,countKey:"Numbers",token:"${n}",parse:eo.parse};function eg(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Hf(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&eg(r,IE),eg(r,LE),eg(r,RE),r}function BE(e){return Hf(e).values}function FE(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Hf(e),i=t.length;return o=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(IE.token,o[c]):c<n+r?l=l.replace(LE.token,Hr.transform(o[c])):l=l.replace(RE.token,Mc(o[c]));return l}}const S6=e=>typeof e=="number"?0:e;function _6(e){const t=BE(e);return FE(e)(t.map(S6))}const Ys={test:N6,parse:BE,createTransformer:FE,getAnimatableNone:_6},zE=(e,t)=>r=>`${r>0?t:e}`;function VE(e,t){return typeof e=="number"?r=>Yt(e,t,r):Hr.test(e)?$E(e,t):e.startsWith("var(")?zE(e,t):WE(e,t)}const UE=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,o)=>VE(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}},A6=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=VE(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},WE=(e,t)=>{const r=Ys.createTransformer(t),n=Hf(e),s=Hf(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?zs(UE(n.values,s.values),r):zE(e,t)},du=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Bw=(e,t)=>r=>Yt(e,t,r);function P6(e){return typeof e=="number"?Bw:typeof e=="string"?Hr.test(e)?$E:WE:Array.isArray(e)?UE:typeof e=="object"?A6:Bw}function E6(e,t,r){const n=[],s=r||P6(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ar:t;l=zs(c,l)}n.push(l)}return n}function HE(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Iv(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=E6(t,n,s),l=o.length,c=u=>{let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const d=du(e[f],e[f+1],u);return o[f](d)};return r?u=>c(Ks(e[0],e[i-1],u)):c}function C6(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=du(0,t,n);e.push(Yt(r,1,s))}}function O6(e){const t=[0];return C6(t,e.length-1),t}function T6(e,t){return e.map(r=>r*t)}function k6(e,t){return e.map(()=>t||CE).splice(0,e.length-1)}function qf({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=m6(n)?n.map(Lw):Lw(n),i={done:!1,value:t[0]},o=T6(r&&r.length===t.length?r:O6(t),e),l=HE(o,t,{ease:Array.isArray(s)?s:k6(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function qE(e,t){return t?e*(1e3/t):0}const M6=5;function GE(e,t,r){const n=Math.max(t-M6,0);return qE(r-e(n),t-n)}const tg=.001,D6=.01,$6=10,I6=.05,L6=1;function R6({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,o=1-t;o=Ks(I6,L6,o),e=Ks(D6,$6,Ka(e)),o<1?(s=u=>{const f=u*o,d=f*e,m=f-r,g=Rx(u,o),j=Math.exp(-d);return tg-m/g*j},i=u=>{const d=u*o*e,m=d*r+r,g=Math.pow(o,2)*Math.pow(u,2)*e,j=Math.exp(-d),h=Rx(Math.pow(u,2),o);return(-s(u)+tg>0?-1:1)*((m-g)*j)/h}):(s=u=>{const f=Math.exp(-u*e),d=(u-r)*e+1;return-tg+f*d},i=u=>{const f=Math.exp(-u*e),d=(r-u)*(e*e);return f*d});const l=5/e,c=F6(s,i,l);if(e=$i(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const B6=12;function F6(e,t,r){let n=r;for(let s=1;s<B6;s++)n=n-e(n)/t(n);return n}function Rx(e,t){return e*Math.sqrt(1-t*t)}const z6=["duration","bounce"],V6=["stiffness","damping","mass"];function Fw(e,t){return t.some(r=>e[r]!==void 0)}function U6(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Fw(e,V6)&&Fw(e,z6)){const r=R6(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function KE({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:m}=U6({...n,velocity:-Ka(n.velocity||0)}),g=d||0,j=c/(2*Math.sqrt(l*u)),h=i-s,y=Ka(Math.sqrt(l/u)),p=Math.abs(h)<5;r||(r=p?.01:2),t||(t=p?.005:.5);let x;if(j<1){const v=Rx(y,j);x=S=>{const w=Math.exp(-j*y*S);return i-w*((g+j*y*h)/v*Math.sin(v*S)+h*Math.cos(v*S))}}else if(j===1)x=v=>i-Math.exp(-y*v)*(h+(g+y*h)*v);else{const v=y*Math.sqrt(j*j-1);x=S=>{const w=Math.exp(-j*y*S),b=Math.min(v*S,300);return i-w*((g+j*y*h)*Math.sinh(b)+v*h*Math.cosh(b))/v}}return{calculatedDuration:m&&f||null,next:v=>{const S=x(v);if(m)o.done=v>=f;else{let w=g;v!==0&&(j<1?w=GE(x,v,S):w=0);const b=Math.abs(w)<=r,_=Math.abs(i-S)<=t;o.done=b&&_}return o.value=o.done?i:S,o}}}function zw({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:f}){const d=e[0],m={done:!1,value:d},g=P=>l!==void 0&&P<l||c!==void 0&&P>c,j=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let h=r*t;const y=d+h,p=o===void 0?y:o(y);p!==y&&(h=p-d);const x=P=>-h*Math.exp(-P/n),v=P=>p+x(P),S=P=>{const C=x(P),M=v(P);m.done=Math.abs(C)<=u,m.value=m.done?p:M};let w,b;const _=P=>{g(m.value)&&(w=P,b=KE({keyframes:[m.value,j(m.value)],velocity:GE(v,P,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:f}))};return _(0),{calculatedDuration:null,next:P=>{let C=!1;return!b&&w===void 0&&(C=!0,S(P),_(P)),w!==void 0&&P>w?b.next(P-w):(!C&&S(P),m)}}}const W6=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Lt.update(t,!0),stop:()=>ns(t),now:()=>Ir.isProcessing?Ir.timestamp:performance.now()}},Vw=2e4;function Uw(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Vw;)t+=r,n=e.next(t);return t>=Vw?1/0:t}const H6={decay:zw,inertia:zw,tween:qf,keyframes:qf,spring:KE};function Gf({autoplay:e=!0,delay:t=0,driver:r=W6,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:f,onUpdate:d,...m}){let g=1,j=!1,h,y;const p=()=>{y=new Promise(ae=>{h=ae})};p();let x;const v=H6[s]||qf;let S;v!==qf&&typeof n[0]!="number"&&(S=HE([0,100],n,{clamp:!1}),n=[0,100]);const w=v({...m,keyframes:n});let b;l==="mirror"&&(b=v({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let _="idle",P=null,C=null,M=null;w.calculatedDuration===null&&i&&(w.calculatedDuration=Uw(w));const{calculatedDuration:A}=w;let E=1/0,T=1/0;A!==null&&(E=A+o,T=E*(i+1)-o);let B=0;const I=ae=>{if(C===null)return;g>0&&(C=Math.min(C,ae)),g<0&&(C=Math.min(ae-T/g,C)),P!==null?B=P:B=Math.round(ae-C)*g;const oe=B-t*(g>=0?1:-1),Z=g>=0?oe<0:oe>T;B=Math.max(oe,0),_==="finished"&&P===null&&(B=T);let pe=B,Ee=w;if(i){const X=Math.min(B,T)/E;let k=Math.floor(X),K=X%1;!K&&X>=1&&(K=1),K===1&&k--,k=Math.min(k,i+1),!!(k%2)&&(l==="reverse"?(K=1-K,o&&(K-=o/E)):l==="mirror"&&(Ee=b)),pe=Ks(0,1,K)*E}const Y=Z?{done:!1,value:n[0]}:Ee.next(pe);S&&(Y.value=S(Y.value));let{done:J}=Y;!Z&&A!==null&&(J=g>=0?B>=T:B<=0);const W=P===null&&(_==="finished"||_==="running"&&J);return d&&d(Y.value),W&&$(),Y},D=()=>{x&&x.stop(),x=void 0},O=()=>{_="idle",D(),h(),p(),C=M=null},$=()=>{_="finished",f&&f(),D(),h()},R=()=>{if(j)return;x||(x=r(I));const ae=x.now();c&&c(),P!==null?C=ae-P:(!C||_==="finished")&&(C=ae),_==="finished"&&p(),M=C,P=null,_="running",x.start()};e&&R();const Q={then(ae,oe){return y.then(ae,oe)},get time(){return Ka(B)},set time(ae){ae=$i(ae),B=ae,P!==null||!x||g===0?P=ae:C=x.now()-ae/g},get duration(){const ae=w.calculatedDuration===null?Uw(w):w.calculatedDuration;return Ka(ae)},get speed(){return g},set speed(ae){ae===g||!x||(g=ae,Q.time=Ka(B))},get state(){return _},play:R,pause:()=>{_="paused",P=B},stop:()=>{j=!0,_!=="idle"&&(_="idle",u&&u(),O())},cancel:()=>{M!==null&&I(M),O()},complete:()=>{_="finished"},sample:ae=>(C=0,I(ae))};return Q}function q6(e){let t;return()=>(t===void 0&&(t=e()),t)}const G6=q6(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),K6=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Dd=10,Y6=2e4,X6=(e,t)=>t.type==="spring"||e==="backgroundColor"||!_E(t.ease);function J6(e,t,{onUpdate:r,onComplete:n,...s}){if(!(G6()&&K6.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const f=()=>{c=new Promise(v=>{l=v})};f();let{keyframes:d,duration:m=300,ease:g,times:j}=s;if(X6(t,s)){const v=Gf({...s,repeat:0,delay:0});let S={done:!1,value:d[0]};const w=[];let b=0;for(;!S.done&&b<Y6;)S=v.sample(b),w.push(S.value),b+=Dd;j=void 0,d=w,m=b-Dd,g="linear"}const h=i6(e.owner.current,t,d,{...s,duration:m,ease:g,times:j}),y=()=>{u=!1,h.cancel()},p=()=>{u=!0,Lt.update(y),l(),f()};return h.onfinish=()=>{u||(e.set(o6(d,s)),n&&n(),p())},{then(v,S){return c.then(v,S)},attachTimeline(v){return h.timeline=v,h.onfinish=null,ar},get time(){return Ka(h.currentTime||0)},set time(v){h.currentTime=$i(v)},get speed(){return h.playbackRate},set speed(v){h.playbackRate=v},get duration(){return Ka(m)},play:()=>{o||(h.play(),ns(y))},pause:()=>h.pause(),stop:()=>{if(o=!0,h.playState==="idle")return;const{currentTime:v}=h;if(v){const S=Gf({...s,autoplay:!1});e.setWithVelocity(S.sample(v-Dd).value,S.sample(v).value,Dd)}p()},complete:()=>{u||h.finish()},cancel:p}}function Z6({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:ar,pause:ar,stop:ar,then:i=>(i(),Promise.resolve()),cancel:ar,complete:ar});return t?Gf({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Q6={type:"spring",stiffness:500,damping:25,restSpeed:10},e3=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),t3={type:"keyframes",duration:.8},r3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},n3=(e,{keyframes:t})=>t.length>2?t3:Qi.has(e)?e.startsWith("scale")?e3(t[1]):Q6:r3,Bx=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ys.test(t)||t==="0")&&!t.startsWith("url(")),a3=new Set(["brightness","contrast","saturate","opacity"]);function s3(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(bh)||[];if(!n)return e;const s=r.replace(n,"");let i=a3.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const i3=/([a-z-]*)\(.*?\)/g,Fx={...Ys,getAnimatableNone:e=>{const t=e.match(i3);return t?t.map(s3).join(" "):e}},o3={...lE,color:Hr,backgroundColor:Hr,outlineColor:Hr,fill:Hr,stroke:Hr,borderColor:Hr,borderTopColor:Hr,borderRightColor:Hr,borderBottomColor:Hr,borderLeftColor:Hr,filter:Fx,WebkitFilter:Fx},Fv=e=>o3[e];function YE(e,t){let r=Fv(e);return r!==Fx&&(r=Ys),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const XE=e=>/^0[^.\s]+$/.test(e);function l3(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||XE(e)}function c3(e,t,r,n){const s=Bx(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),l3(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const f=c[u];i[f]=YE(t,l)}return i}function u3({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}function zv(e,t){return e[t]||e.default||e}const d3={skipAnimations:!1},Vv=(e,t,r,n={})=>s=>{const i=zv(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-$i(o);const c=c3(t,e,r,i),u=c[0],f=c[c.length-1],d=Bx(e,u),m=Bx(e,f);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:j=>{t.set(j),i.onUpdate&&i.onUpdate(j)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(u3(i)||(g={...g,...n3(e,g)}),g.duration&&(g.duration=$i(g.duration)),g.repeatDelay&&(g.repeatDelay=$i(g.repeatDelay)),!d||!m||s6.current||i.type===!1||d3.skipAnimations)return Z6(g);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const j=J6(t,e,g);if(j)return j}return Gf(g)};function Kf(e){return!!(hn(e)&&e.add)}const JE=e=>/^\-?\d*\.?\d+$/.test(e);function Uv(e,t){e.indexOf(t)===-1&&e.push(t)}function Wv(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Hv{constructor(){this.subscriptions=[]}add(t){return Uv(this.subscriptions,t),()=>Wv(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const f3=e=>!isNaN(parseFloat(e));class m3{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Ir;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Lt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Lt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=f3(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Hv);const n=this.events[t].add(r);return t==="change"?()=>{n(),Lt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?qE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rl(e,t){return new m3(e,t)}const ZE=e=>t=>t.test(e),h3={test:e=>e==="auto",parse:e=>e},QE=[eo,Ge,Sa,xs,j$,b$,h3],tc=e=>QE.find(ZE(e)),p3=[...QE,Hr,Ys],g3=e=>p3.find(ZE(e));function x3(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,rl(r))}function y3(e,t){const r=wh(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=$$(i[o]);x3(e,o,l)}}function v3(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),f!=null&&(typeof f=="string"&&(JE(f)||XE(f))?f=parseFloat(f):!g3(f)&&Ys.test(u)&&(f=YE(c,u)),e.addValue(c,rl(f,{owner:e})),r[c]===void 0&&(r[c]=f),f!==null&&e.setBaseTarget(c,f))}}function b3(e,t){return t?(t[e]||t.default||t).from:void 0}function j3(e,t,r){const n={};for(const s in e){const i=b3(s,t);if(i!==void 0)n[s]=i;else{const o=r.getValue(s);o&&(n[s]=o.get())}}return n}function w3({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function N3(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function eC(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const m=e.getValue(d),g=l[d];if(!m||g===void 0||f&&w3(f,d))continue;const j={delay:r,elapsed:0,...zv(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[tE];if(p){const x=window.HandoffAppearAnimations(p,d,m,Lt);x!==null&&(j.elapsed=x,j.isHandoff=!0)}}let h=!j.isHandoff&&!N3(m,g);if(j.type==="spring"&&(m.getVelocity()||j.velocity)&&(h=!1),m.animation&&(h=!1),h)continue;m.start(Vv(d,m,g,e.shouldReduceMotion&&Qi.has(d)?{type:!1}:j));const y=m.animation;Kf(c)&&(c.add(d),y.then(()=>c.remove(d))),u.push(y)}return o&&Promise.all(u).then(()=>{o&&y3(e,o)}),u}function zx(e,t,r={}){const n=wh(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(eC(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return S3(e,t,u+c,f,d,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function S3(e,t,r=0,n=0,s=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(_3).forEach((u,f)=>{u.notify("AnimationStart",t),o.push(zx(u,t,{...i,delay:r+c(f)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function _3(e,t){return e.sortNodePosition(t)}function A3(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>zx(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=zx(e,t,r);else{const s=typeof t=="function"?wh(e,t,r.custom):t;n=Promise.all(eC(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const P3=[...Av].reverse(),E3=Av.length;function C3(e){return t=>Promise.all(t.map(({animation:r,options:n})=>A3(e,r,n)))}function O3(e){let t=C3(e);const r=k3();let n=!0;const s=(c,u)=>{const f=wh(e,u);if(f){const{transition:d,transitionEnd:m,...g}=f;c={...c,...g,...m}}return c};function i(c){t=c(e)}function o(c,u){const f=e.getProps(),d=e.getVariantContext(!0)||{},m=[],g=new Set;let j={},h=1/0;for(let p=0;p<E3;p++){const x=P3[p],v=r[x],S=f[x]!==void 0?f[x]:d[x],w=cu(S),b=x===u?v.isActive:null;b===!1&&(h=p);let _=S===d[x]&&S!==f[x]&&w;if(_&&n&&e.manuallyAnimateOnMount&&(_=!1),v.protectedKeys={...j},!v.isActive&&b===null||!S&&!v.prevProp||yh(S)||typeof S=="boolean")continue;let C=T3(v.prevProp,S)||x===u&&v.isActive&&!_&&w||p>h&&w,M=!1;const A=Array.isArray(S)?S:[S];let E=A.reduce(s,{});b===!1&&(E={});const{prevResolvedValues:T={}}=v,B={...T,...E},I=D=>{C=!0,g.has(D)&&(M=!0,g.delete(D)),v.needsAnimating[D]=!0};for(const D in B){const O=E[D],$=T[D];if(j.hasOwnProperty(D))continue;let R=!1;Wf(O)&&Wf($)?R=!NE(O,$):R=O!==$,R?O!==void 0?I(D):g.add(D):O!==void 0&&g.has(D)?I(D):v.protectedKeys[D]=!0}v.prevProp=S,v.prevResolvedValues=E,v.isActive&&(j={...j,...E}),n&&e.blockInitialAnimation&&(C=!1),C&&(!_||M)&&m.push(...A.map(D=>({animation:D,options:{type:x,...c}})))}if(g.size){const p={};g.forEach(x=>{const v=e.getBaseTarget(x);v!==void 0&&(p[x]=v)}),m.push({animation:p})}let y=!!m.length;return n&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(m):Promise.resolve()}function l(c,u,f){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var j;return(j=g.animationState)===null||j===void 0?void 0:j.setActive(c,u)}),r[c].isActive=u;const m=o(f,c);for(const g in r)r[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function T3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!NE(t,e):!1}function li(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function k3(){return{animate:li(!0),whileInView:li(),whileHover:li(),whileTap:li(),whileDrag:li(),whileFocus:li(),exit:li()}}class M3 extends ni{constructor(t){super(t),t.animationState||(t.animationState=O3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),yh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let D3=0;class $3 extends ni{constructor(){super(...arguments),this.id=D3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const I3={animation:{Feature:M3},exit:{Feature:$3}},Ww=(e,t)=>Math.abs(e-t);function L3(e,t){const r=Ww(e.x,t.x),n=Ww(e.y,t.y);return Math.sqrt(r**2+n**2)}class tC{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ng(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=L3(d.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:j}=d,{timestamp:h}=Ir;this.history.push({...j,timestamp:h});const{onStart:y,onMove:p}=this.handlers;m||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=rg(m,this.transformPagePoint),Lt.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:g,onSessionEnd:j,resumeAnimation:h}=this.handlers;if(this.dragSnapToOrigin&&h&&h(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=ng(d.type==="pointercancel"?this.lastMoveEventInfo:rg(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,y),j&&j(d,y)},!yE(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=jh(t),l=rg(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ir;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=r;f&&f(t,ng(l,this.history)),this.removeListeners=zs(Ga(this.contextWindow,"pointermove",this.handlePointerMove),Ga(this.contextWindow,"pointerup",this.handlePointerUp),Ga(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ns(this.updatePoint)}}function rg(e,t){return t?{point:t(e.point)}:e}function Hw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ng({point:e},t){return{point:e,delta:Hw(e,rC(t)),offset:Hw(e,R3(t)),velocity:B3(t,.1)}}function R3(e){return e[0]}function rC(e){return e[e.length-1]}function B3(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=rC(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>$i(t)));)r--;if(!n)return{x:0,y:0};const i=Ka(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Sn(e){return e.max-e.min}function Vx(e,t=0,r=.01){return Math.abs(e-t)<=r}function qw(e,t,r,n=.5){e.origin=n,e.originPoint=Yt(t.min,t.max,e.origin),e.scale=Sn(r)/Sn(t),(Vx(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Yt(r.min,r.max,e.origin)-e.originPoint,(Vx(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Dc(e,t,r,n){qw(e.x,t.x,r.x,n?n.originX:void 0),qw(e.y,t.y,r.y,n?n.originY:void 0)}function Gw(e,t,r){e.min=r.min+t.min,e.max=e.min+Sn(t)}function F3(e,t,r){Gw(e.x,t.x,r.x),Gw(e.y,t.y,r.y)}function Kw(e,t,r){e.min=t.min-r.min,e.max=e.min+Sn(t)}function $c(e,t,r){Kw(e.x,t.x,r.x),Kw(e.y,t.y,r.y)}function z3(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Yt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Yt(r,e,n.max):Math.min(e,r)),e}function Yw(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function V3(e,{top:t,left:r,bottom:n,right:s}){return{x:Yw(e.x,r,s),y:Yw(e.y,t,n)}}function Xw(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function U3(e,t){return{x:Xw(e.x,t.x),y:Xw(e.y,t.y)}}function W3(e,t){let r=.5;const n=Sn(e),s=Sn(t);return s>n?r=du(t.min,t.max-n,e.min):n>s&&(r=du(e.min,e.max-s,t.min)),Ks(0,1,r)}function H3(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Ux=.35;function q3(e=Ux){return e===!1?e=0:e===!0&&(e=Ux),{x:Jw(e,"left","right"),y:Jw(e,"top","bottom")}}function Jw(e,t,r){return{min:Zw(e,t),max:Zw(e,r)}}function Zw(e,t){return typeof e=="number"?e:e[t]||0}const Qw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ao=()=>({x:Qw(),y:Qw()}),e1=()=>({min:0,max:0}),ir=()=>({x:e1(),y:e1()});function kn(e){return[e("x"),e("y")]}function nC({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function G3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function K3(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function ag(e){return e===void 0||e===1}function Wx({scale:e,scaleX:t,scaleY:r}){return!ag(e)||!ag(t)||!ag(r)}function hi(e){return Wx(e)||aC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function aC(e){return t1(e.x)||t1(e.y)}function t1(e){return e&&e!=="0%"}function Yf(e,t,r){const n=e-r,s=t*n;return r+s}function r1(e,t,r,n,s){return s!==void 0&&(e=Yf(e,s,n)),Yf(e,r,n)+t}function Hx(e,t=0,r=1,n,s){e.min=r1(e.min,t,r,n,s),e.max=r1(e.max,t,r,n,s)}function sC(e,{x:t,y:r}){Hx(e.x,t.translate,t.scale,t.originPoint),Hx(e.y,r.translate,r.scale,r.originPoint)}function Y3(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Po(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,sC(e,o)),n&&hi(i.latestValues)&&Po(e,i.latestValues))}t.x=n1(t.x),t.y=n1(t.y)}function n1(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function bs(e,t){e.min=e.min+t,e.max=e.max+t}function a1(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,o=Yt(e.min,e.max,i);Hx(e,t[r],t[n],o,t.scale)}const X3=["x","scaleX","originX"],J3=["y","scaleY","originY"];function Po(e,t){a1(e.x,t,X3),a1(e.y,t,J3)}function iC(e,t){return nC(K3(e.getBoundingClientRect(),t))}function Z3(e,t,r){const n=iC(e,r),{scroll:s}=t;return s&&(bs(n.x,s.offset.x),bs(n.y,s.offset.y)),n}const oC=({current:e})=>e?e.ownerDocument.defaultView:null,Q3=new WeakMap;class eI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ir(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jh(f,"page").point)},i=(f,d)=>{const{drag:m,dragPropagation:g,onDragStart:j}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bE(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(y=>{let p=this.getAxisMotionValue(y).get()||0;if(Sa.test(p)){const{projection:x}=this.visualElement;if(x&&x.layout){const v=x.layout.layoutBox[y];v&&(p=Sn(v)*(parseFloat(p)/100))}}this.originPoint[y]=p}),j&&Lt.update(()=>j(f,d),!1,!0);const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},o=(f,d)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:j,onDrag:h}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:y}=d;if(g&&this.currentDirection===null){this.currentDirection=tI(y),this.currentDirection!==null&&j&&j(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),h&&h(f,d)},l=(f,d)=>this.stop(f,d),c=()=>kn(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new tC(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:oC(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Lt.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!$d(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=z3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&So(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=V3(s.layoutBox,r):this.constraints=!1,this.elastic=q3(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&kn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=H3(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!So(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Z3(n,s.root,this.visualElement.getTransformPagePoint());let o=U3(s.layout.layoutBox,i);if(r){const l=r(G3(o));this.hasMutatedConstraints=!!l,l&&(o=nC(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=kn(f=>{if(!$d(f,r,this.currentDirection))return;let d=c&&c[f]||{};o&&(d={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,j={type:"inertia",velocity:n?t[f]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(f,j)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Vv(t,n,0,r))}stopAnimation(){kn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){kn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){kn(r=>{const{drag:n}=this.getProps();if(!$d(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Yt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!So(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};kn(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();s[o]=W3({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),kn(o=>{if(!$d(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Yt(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Q3.set(this.visualElement,this);const t=this.visualElement.current,r=Ga(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();So(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const o=Va(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(kn(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ux,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function $d(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function tI(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class rI extends ni{constructor(t){super(t),this.removeGroupControls=ar,this.removeListeners=ar,this.controls=new eI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const s1=e=>(t,r)=>{e&&Lt.update(()=>e(t,r))};class nI extends ni{constructor(){super(...arguments),this.removePointerDownListener=ar}onPointerDown(t){this.session=new tC(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:s1(t),onStart:s1(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Lt.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ga(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function aI(){const e=N.useContext(gh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=N.useId();return N.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function i1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ge.test(e))e=parseFloat(e);else return e;const r=i1(e,t.target.x),n=i1(e,t.target.y);return`${r}% ${n}%`}},sI={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Ys.parse(e);if(s.length>5)return n;const i=Ys.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Yt(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class iI extends H.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;m$(oI),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Lt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lC(e){const[t,r]=aI(),n=N.useContext(Ev);return H.createElement(iI,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(nE),isPresent:t,safeToRemove:r})}const oI={borderRadius:{...rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rc,borderTopRightRadius:rc,borderBottomLeftRadius:rc,borderBottomRightRadius:rc,boxShadow:sI},cC=["TopLeft","TopRight","BottomLeft","BottomRight"],lI=cC.length,o1=e=>typeof e=="string"?parseFloat(e):e,l1=e=>typeof e=="number"||Ge.test(e);function cI(e,t,r,n,s,i){s?(e.opacity=Yt(0,r.opacity!==void 0?r.opacity:1,uI(n)),e.opacityExit=Yt(t.opacity!==void 0?t.opacity:1,0,dI(n))):i&&(e.opacity=Yt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<lI;o++){const l=`border${cC[o]}Radius`;let c=c1(t,l),u=c1(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||l1(c)===l1(u)?(e[l]=Math.max(Yt(o1(c),o1(u),n),0),(Sa.test(u)||Sa.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Yt(t.rotate||0,r.rotate||0,n))}function c1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uI=uC(0,.5,kE),dI=uC(.5,.95,ar);function uC(e,t,r){return n=>n<e?0:n>t?1:r(du(e,t,n))}function u1(e,t){e.min=t.min,e.max=t.max}function En(e,t){u1(e.x,t.x),u1(e.y,t.y)}function d1(e,t,r,n,s){return e-=t,e=Yf(e,1/r,n),s!==void 0&&(e=Yf(e,1/s,n)),e}function fI(e,t=0,r=1,n=.5,s,i=e,o=e){if(Sa.test(t)&&(t=parseFloat(t),t=Yt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Yt(i.min,i.max,n);e===i&&(l-=t),e.min=d1(e.min,t,r,l,s),e.max=d1(e.max,t,r,l,s)}function f1(e,t,[r,n,s],i,o){fI(e,t[r],t[n],t[s],t.scale,i,o)}const mI=["x","scaleX","originX"],hI=["y","scaleY","originY"];function m1(e,t,r,n){f1(e.x,t,mI,r?r.x:void 0,n?n.x:void 0),f1(e.y,t,hI,r?r.y:void 0,n?n.y:void 0)}function h1(e){return e.translate===0&&e.scale===1}function dC(e){return h1(e.x)&&h1(e.y)}function pI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function fC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function p1(e){return Sn(e.x)/Sn(e.y)}class gI{constructor(){this.members=[]}add(t){Uv(this.members,t),t.scheduleRender()}remove(t){if(Wv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function g1(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:f}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),f&&(n+=`rotateY(${f}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const xI=(e,t)=>e.depth-t.depth;class yI{constructor(){this.children=[],this.isDirty=!1}add(t){Uv(this.children,t),this.isDirty=!0}remove(t){Wv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(xI),this.isDirty=!1,this.children.forEach(t)}}function vI(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(ns(n),e(i-t))};return Lt.read(n,!0),()=>ns(n)}function bI(e){window.MotionDebug&&window.MotionDebug.record(e)}function jI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function wI(e,t,r){const n=hn(e)?e:rl(e);return n.start(Vv("",n,t,r)),n.animation}const x1=["","X","Y","Z"],NI={visibility:"hidden"},y1=1e3;let SI=0;const pi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mC({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=SI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pi.totalNodes=pi.resolvedTargetDeltas=pi.recalculatedProjection=0,this.nodes.forEach(PI),this.nodes.forEach(kI),this.nodes.forEach(MI),this.nodes.forEach(EI),bI(pi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yI)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Hv),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jI(o),this.instance=o;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=vI(m,250),ff.hasAnimatedSinceResize&&(ff.hasAnimatedSinceResize=!1,this.nodes.forEach(b1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const h=this.options.transition||f.getDefaultTransition()||RI,{onLayoutAnimationStart:y,onLayoutAnimationComplete:p}=f.getProps(),x=!this.targetLayout||!fC(this.targetLayout,j)||g,v=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||v||m&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,v);const S={...zv(h,"layout"),onPlay:y,onComplete:p};(f.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else m||b1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ns(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DI),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(v1);return}this.isUpdating||this.nodes.forEach(OI),this.isUpdating=!1,this.nodes.forEach(TI),this.nodes.forEach(_I),this.nodes.forEach(AI),this.clearAllSnapshots();const l=performance.now();Ir.delta=Ks(0,1e3/60,l-Ir.timestamp),Ir.timestamp=l,Ir.isProcessing=!0,Kp.update.process(Ir),Kp.preRender.process(Ir),Kp.render.process(Ir),Ir.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(CI),this.sharedNodes.forEach($I)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Lt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Lt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!dC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;o&&(l||hi(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),BI(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ir();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(bs(l.x,c.offset.x),bs(l.y,c.offset.y)),l}removeElementScroll(o){const l=ir();En(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){En(l,o);const{scroll:m}=this.root;m&&(bs(l.x,-m.offset.x),bs(l.y,-m.offset.y))}bs(l.x,f.offset.x),bs(l.y,f.offset.y)}}return l}applyTransform(o,l=!1){const c=ir();En(c,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Po(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),hi(f.latestValues)&&Po(c,f.latestValues)}return hi(this.latestValues)&&Po(c,this.latestValues),c}removeTransform(o){const l=ir();En(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!hi(u.latestValues))continue;Wx(u.latestValues)&&u.updateSnapshot();const f=ir(),d=u.measurePageBox();En(f,d),m1(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return hi(this.latestValues)&&m1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ir.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Ir.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),$c(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ir(),this.targetWithTransforms=ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):En(this.target,this.layout.layoutBox),sC(this.target,this.targetDelta)):En(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),$c(this.relativeTargetOrigin,this.target,g.target),En(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wx(this.parent.latestValues)||aC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ir.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;En(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;Y3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:j}=l;if(!j){this.projectionTransform&&(this.projectionDelta=Ao(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ao(),this.projectionDeltaWithTransform=Ao());const h=this.projectionTransform;Dc(this.projectionDelta,this.layoutCorrected,j,this.latestValues),this.projectionTransform=g1(this.projectionDelta,this.treeScale),(this.projectionTransform!==h||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),pi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},d=Ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ir(),g=c?c.source:void 0,j=this.layout?this.layout.source:void 0,h=g!==j,y=this.getStack(),p=!y||y.members.length<=1,x=!!(h&&!p&&this.options.crossfade===!0&&!this.path.some(LI));this.animationProgress=0;let v;this.mixTargetDelta=S=>{const w=S/1e3;j1(d.x,o.x,w),j1(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($c(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),II(this.relativeTarget,this.relativeTargetOrigin,m,w),v&&pI(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=ir()),En(v,this.relativeTarget)),h&&(this.animationValues=f,cI(f,u,this.latestValues,w,x,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ns(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Lt.update(()=>{ff.hasAnimatedSinceResize=!0,this.currentAnimation=wI(0,y1,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(y1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&hC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ir();const d=Sn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=Sn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}En(l,c),Po(l,f),Dc(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new gI),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let f=0;f<x1.length;f++){const d="rotate"+x1[f];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const f in u)o.setStaticValue(f,u[f]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return NI;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=df(o==null?void 0:o.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const h={};return this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=df(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hi(this.latestValues)&&(h.transform=f?f({},""):"none",this.hasProjected=!1),h}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=g1(this.projectionDeltaWithTransform,this.treeScale,m),f&&(u.transform=f(m,u.transform));const{x:g,y:j}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${j.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const h in Vf){if(m[h]===void 0)continue;const{correct:y,applyTo:p}=Vf[h],x=u.transform==="none"?m[h]:y(m[h],d);if(p){const v=p.length;for(let S=0;S<v;S++)u[p[S]]=x}else u[h]=x}return this.options.layoutId&&(u.pointerEvents=d===this?df(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(v1),this.root.sharedNodes.clear()}}}function _I(e){e.updateLayout()}function AI(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?kn(d=>{const m=o?r.measuredBox[d]:r.layoutBox[d],g=Sn(m);m.min=n[d].min,m.max=m.min+g}):hC(i,r.layoutBox,n)&&kn(d=>{const m=o?r.measuredBox[d]:r.layoutBox[d],g=Sn(n[d]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const l=Ao();Dc(l,n,r.layoutBox);const c=Ao();o?Dc(c,e.applyTransform(s,!0),r.measuredBox):Dc(c,n,r.layoutBox);const u=!dC(l);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:g}=d;if(m&&g){const j=ir();$c(j,r.layoutBox,m.layoutBox);const h=ir();$c(h,n,g.layoutBox),fC(j,h)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=h,e.relativeTargetOrigin=j,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function PI(e){pi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function EI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CI(e){e.clearSnapshot()}function v1(e){e.clearMeasurements()}function OI(e){e.isLayoutDirty=!1}function TI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function b1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function kI(e){e.resolveTargetDelta()}function MI(e){e.calcProjection()}function DI(e){e.resetRotation()}function $I(e){e.removeLeadSnapshot()}function j1(e,t,r){e.translate=Yt(t.translate,0,r),e.scale=Yt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function w1(e,t,r,n){e.min=Yt(t.min,r.min,n),e.max=Yt(t.max,r.max,n)}function II(e,t,r,n){w1(e.x,t.x,r.x,n),w1(e.y,t.y,r.y,n)}function LI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const RI={duration:.45,ease:[.4,0,.1,1]},N1=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),S1=N1("applewebkit/")&&!N1("chrome/")?Math.round:ar;function _1(e){e.min=S1(e.min),e.max=S1(e.max)}function BI(e){_1(e.x),_1(e.y)}function hC(e,t,r){return e==="position"||e==="preserve-aspect"&&!Vx(p1(t),p1(r),.2)}const FI=mC({attachResizeListener:(e,t)=>Va(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sg={current:void 0},pC=mC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sg.current){const e=new FI({});e.mount(window),e.setOptions({layoutScroll:!0}),sg.current=e}return sg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),zI={pan:{Feature:nI},drag:{Feature:rI,ProjectionNode:pC,MeasureLayout:lC}},VI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function UI(e){const t=VI.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function qx(e,t,r=1){const[n,s]=UI(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return JE(o)?parseFloat(o):o}else return $x(s)?qx(s,t,r+1):s}function WI(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!$x(i))return;const o=qx(i,n);o&&s.set(o)});for(const s in t){const i=t[s];if(!$x(i))continue;const o=qx(i,n);o&&(t[s]=o,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const HI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),gC=e=>HI.has(e),qI=e=>Object.keys(e).some(gC),A1=e=>e===eo||e===Ge,P1=(e,t)=>parseFloat(e.split(", ")[t]),E1=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return P1(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?P1(i[1],e):0}},GI=new Set(["x","y","z"]),KI=ed.filter(e=>!GI.has(e));function YI(e){const t=[];return KI.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const nl={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:E1(4,13),y:E1(5,14)};nl.translateX=nl.x;nl.translateY=nl.y;const XI=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=nl[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const f=t.getValue(u);f&&f.jump(l[u]),e[u]=nl[u](c,i)}),e},JI=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(gC);let i=[],o=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let f=r[c],d=tc(f);const m=t[c];let g;if(Wf(m)){const j=m.length,h=m[0]===null?1:0;f=m[h],d=tc(f);for(let y=h;y<j&&m[y]!==null;y++)g?Iv(tc(m[y])===g):g=tc(m[y])}else g=tc(m);if(d!==g)if(A1(d)&&A1(g)){const j=u.get();typeof j=="string"&&u.set(parseFloat(j)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&g===Ge&&(t[c]=m.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(f===0||m===0)?f===0?u.set(g.transform(f)):t[c]=d.transform(m):(o||(i=YI(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=XI(t,e,l);return i.length&&i.forEach(([f,d])=>{e.getValue(f).set(d)}),e.render(),xh&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function ZI(e,t,r,n){return qI(t)?JI(e,t,r,n):{target:t,transitionEnd:n}}const QI=(e,t,r,n)=>{const s=WI(e,t,n);return t=s.target,n=s.transitionEnd,ZI(e,t,r,n)},Gx={current:null},xC={current:!1};function eL(){if(xC.current=!0,!!xh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Gx.current=e.matches;e.addListener(t),t()}else Gx.current=!1}function tL(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],o=r[s];if(hn(i))e.addValue(s,i),Kf(n)&&n.add(s);else if(hn(o))e.addValue(s,rl(i,{owner:e})),Kf(n)&&n.remove(s);else if(o!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,rl(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const C1=new WeakMap,yC=Object.keys(uu),rL=yC.length,O1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],nL=Pv.length;class aL{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Lt.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=vh(r),this.isVariantNode=rE(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{});for(const d in f){const m=f[d];l[d]!==void 0&&hn(m)&&(m.set(l[d],!1),Kf(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,C1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),xC.current||eL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){C1.delete(this.current),this.projection&&this.projection.unmount(),ns(this.notifyUpdate),ns(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Qi.has(t),s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Lt.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let o,l;for(let c=0;c<rL;c++){const u=yC[c],{isEnabled:f,Feature:d,ProjectionNode:m,MeasureLayout:g}=uu[u];m&&(o=m),f(r)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:f,dragConstraints:d,layoutScroll:m,layoutRoot:g}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!f||d&&So(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<O1.length;n++){const s=O1[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=tL(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<nL;n++){const s=Pv[n],i=this.props[s];(cu(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=rl(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=$v(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!hn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Hv),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class vC extends aL{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let o=j3(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),o&&(o=s(o))),i){v3(this,n,o);const l=QI(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function sL(e){return window.getComputedStyle(e)}class iL extends vC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Qi.has(r)){const n=Fv(r);return n&&n.default||0}else{const n=sL(t),s=(iE(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return iC(t,r)}build(t,r,n,s){Ov(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Dv(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){fE(t,r,n,s)}}class oL extends vC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Qi.has(r)){const n=Fv(r);return n&&n.default||0}return r=mE.has(r)?r:_v(r),t.getAttribute(r)}measureInstanceViewportBox(){return ir()}scrapeMotionValuesFromProps(t,r){return pE(t,r)}build(t,r,n,s){kv(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){hE(t,r,n,s)}mount(t){this.isSVGTag=Mv(t.tagName),super.mount(t)}}const lL=(e,t)=>Cv(e)?new oL(t,{enableHardwareAcceleration:!1}):new iL(t,{enableHardwareAcceleration:!0}),cL={layout:{ProjectionNode:pC,MeasureLayout:lC}},uL={...I3,...r6,...zI,...cL},re=d$((e,t)=>U$(e,t,uL,lL));function bC(){const e=N.useRef(!1);return Sv(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function dL(){const e=bC(),[t,r]=N.useState(0),n=N.useCallback(()=>{e.current&&r(t+1)},[t]);return[N.useCallback(()=>Lt.postRender(n),[n]),t]}class fL extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function mL({children:e,isPresent:t}){const r=N.useId(),n=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=s.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),N.createElement(fL,{isPresent:t,childRef:n,sizeRef:s},N.cloneElement(e,{ref:n}))}const ig=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=gE(hL),c=N.useId(),u=N.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:f=>{l.set(f,!0);for(const d of l.values())if(!d)return;n&&n()},register:f=>(l.set(f,!1),()=>l.delete(f))}),i?void 0:[r]);return N.useMemo(()=>{l.forEach((f,d)=>l.set(d,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=N.createElement(mL,{isPresent:r},e)),N.createElement(gh.Provider,{value:u},e)};function hL(){return new Map}function pL(e){return N.useEffect(()=>()=>e(),[])}const gi=e=>e.key||"";function gL(e,t){e.forEach(r=>{const n=gi(r);t.set(n,r)})}function xL(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const Or=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=N.useContext(Ev).forceRender||dL()[0],c=bC(),u=xL(e);let f=u;const d=N.useRef(new Map).current,m=N.useRef(f),g=N.useRef(new Map).current,j=N.useRef(!0);if(Sv(()=>{j.current=!1,gL(u,g),m.current=f}),pL(()=>{j.current=!0,g.clear(),d.clear()}),j.current)return N.createElement(N.Fragment,null,f.map(x=>N.createElement(ig,{key:gi(x),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},x)));f=[...f];const h=m.current.map(gi),y=u.map(gi),p=h.length;for(let x=0;x<p;x++){const v=h[x];y.indexOf(v)===-1&&!d.has(v)&&d.set(v,void 0)}return o==="wait"&&d.size&&(f=[]),d.forEach((x,v)=>{if(y.indexOf(v)!==-1)return;const S=g.get(v);if(!S)return;const w=h.indexOf(v);let b=x;if(!b){const _=()=>{d.delete(v);const P=Array.from(g.keys()).filter(C=>!y.includes(C));if(P.forEach(C=>g.delete(C)),m.current=u.filter(C=>{const M=gi(C);return M===v||P.includes(M)}),!d.size){if(c.current===!1)return;l(),n&&n()}};b=N.createElement(ig,{key:gi(S),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:i,mode:o},S),d.set(v,b)}f.splice(w,0,b)}),f=f.map(x=>{const v=x.key;return d.has(v)?x:N.createElement(ig,{key:gi(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),N.createElement(N.Fragment,null,d.size?f:f.map(x=>N.cloneElement(x)))},ne=H.forwardRef(({className:e="",variant:t="default",size:r="default",disabled:n=!1,type:s="button",children:i,...o},l)=>{const c="inline-flex items-center justify-center rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",u={default:"bg-amber-500 text-white hover:bg-amber-600 focus:ring-amber-500 shadow-lg hover:shadow-xl",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-lg hover:shadow-xl",outline:"border-2 border-amber-500 text-amber-600 hover:bg-amber-50 focus:ring-amber-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500",link:"text-amber-600 underline-offset-4 hover:underline focus:ring-amber-500"},f={default:"h-11 px-6 py-2",sm:"h-9 px-4 text-sm",lg:"h-12 px-8 text-lg",icon:"h-10 w-10"};return a.jsx(re.button,{ref:l,type:s,whileHover:n?{}:{scale:1.02},whileTap:n?{}:{scale:.98},className:`${c} ${u[t]} ${f[r]} ${e}`,disabled:n,...o,children:i})});ne.displayName="Button";const me=H.forwardRef(({className:e="",type:t="text",error:r=!1,...n},s)=>{const i="flex w-full rounded-xl border bg-white px-4 py-2 text-sm transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",o=r?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:ring-amber-500 focus:border-amber-500";return a.jsx("input",{type:t,className:`${i} ${o} ${e}`,ref:s,...n})});me.displayName="Input";const se=H.forwardRef(({className:e="",required:t=!1,children:r,...n},s)=>a.jsxs("label",{ref:s,className:`text-sm font-medium text-gray-700 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...n,children:[r,t&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}));se.displayName="Label";const _a=H.forwardRef(({className:e="",...t},r)=>a.jsx("textarea",{ref:r,className:`w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent ${e}`,...t}));_a.displayName="Textarea";function yL(){const[e,t]=N.useState({nom:"",email:"",message:""}),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(null),c=async u=>{u.preventDefault(),n(!0),i(!1),l(null);try{const f=await qD.sendMessage(e);f.success?(i(!0),t({nom:"",email:"",message:""}),setTimeout(()=>i(!1),5e3)):l(f.message||"Erreur lors de l'envoi du message")}catch(f){console.error("Erreur:",f),l("Erreur de connexion. Veuillez ressayer.")}finally{n(!1)}};return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700",children:"Message envoy avec succs ! Nous vous rpondrons dans les plus brefs dlais."}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700",children:o}),a.jsxs("form",{onSubmit:c,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(se,{htmlFor:"nom",className:"text-gray-700 font-medium mb-2 block",children:"Votre nom"}),a.jsx(me,{id:"nom",value:e.nom,onChange:u=>t({...e,nom:u.target.value}),placeholder:"Votre nom",className:"h-12 rounded-xl border-gray-300",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"email",className:"text-gray-700 font-medium mb-2 block",children:"Votre email"}),a.jsx(me,{id:"email",type:"email",value:e.email,onChange:u=>t({...e,email:u.target.value}),placeholder:"Votre email",className:"h-12 rounded-xl border-gray-300",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"message",className:"text-gray-700 font-medium mb-2 block",children:"Votre message"}),a.jsx(_a,{id:"message",value:e.message,onChange:u=>t({...e,message:u.target.value}),placeholder:"Votre message",className:"min-h-[120px] rounded-xl border-gray-300",required:!0})]}),a.jsx(ne,{type:"submit",disabled:r,className:"w-full h-12 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2",children:r?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Dx,{className:"w-5 h-5"}),"Envoyer le message"]})})]})]})}function T1(){const e=[{title:"Espace Tuteur",icon:Ht,description:"Grez les inscriptions et suivez vos enfants",link:"TuteurLogin",gradient:"from-amber-400 to-yellow-500"},{title:"Espace Responsable Bus",icon:yc,description:"Supervisez le bus et grez les prsences",link:"ResponsableLogin",gradient:"from-amber-500 to-orange-500"},{title:"Espace Chauffeur",icon:tt,description:"Consultez vos trajets et informations",link:"ChauffeurLogin",gradient:"from-yellow-400 to-amber-500"},{title:"Espace Administrateur",icon:Mi,description:"Grez l'ensemble du systme",link:"AdminLogin",gradient:"from-orange-400 to-amber-600"}];return a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-100 via-white to-yellow-50",children:[a.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-200 rounded-full opacity-20 blur-3xl transform translate-x-1/2 -translate-y-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-yellow-200 rounded-full opacity-20 blur-3xl transform -translate-x-1/2 translate-y-1/2"})]}),a.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-8",children:[a.jsxs(re.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-3xl rotate-6 absolute inset-0 opacity-30"}),a.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-3xl flex items-center justify-center relative shadow-2xl",children:a.jsx(tt,{className:"w-16 h-16 text-white"})})]})}),a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-800 mb-4",children:["Mohammed ",a.jsx("span",{className:"text-amber-500",children:"5"})," School Bus"]}),a.jsx("p",{className:"text-xl md:text-2xl text-amber-600 font-medium italic",children:"Votre service est notre priorit"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[a.jsx(pr,{className:"w-6 h-6 text-amber-500"}),a.jsx("span",{className:"text-gray-600",children:"Transport Scolaire Scuris"})]})]}),a.jsx(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"w-full mb-16 -mx-4 md:-mx-8 rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("div",{className:"relative w-full",style:{height:"70vh",minHeight:"500px"},children:a.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694e9878090ae6571e82701e/c7a2d12a6_WhatsAppImage2026-01-05at112241PM.jpg",alt:"Mohammed V School Bus - Transport Scolaire",className:"w-full h-full object-cover"})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:e.map((t,r)=>a.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3+r*.1},children:a.jsx(Ff,{to:Re(t.link),children:a.jsxs("div",{className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${t.gradient} rounded-2xl flex items-center justify-center mb-6 group-hover:bg-white/20 transition-colors shadow-lg`,children:a.jsx(t.icon,{className:"w-8 h-8 text-white group-hover:text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-white mb-2 transition-colors",children:t.title}),a.jsx("p",{className:"text-gray-500 group-hover:text-white/90 text-sm transition-colors",children:t.description}),a.jsxs("div",{className:"mt-6 flex items-center text-amber-500 group-hover:text-white font-medium transition-colors",children:[a.jsx("span",{children:"Accder"}),a.jsx("svg",{className:"w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})},t.title))}),a.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"mt-20 mb-16",id:"contact",children:a.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 min-h-[500px]",children:[a.jsxs("div",{className:"bg-gradient-to-br from-amber-700 to-orange-700 p-8 md:p-12 flex flex-col justify-center text-white",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Contactez-nous"}),a.jsx("p",{className:"text-amber-100 text-lg mb-8",children:"Notre quipe est disponible pour rpondre  toutes vos questions concernant le service de transport scolaire."}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Wi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Tlphone"}),a.jsx("p",{className:"text-white font-semibold",children:"+212 714390289"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Wi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Tlphone"}),a.jsx("p",{className:"text-white font-semibold",children:"+212 669-266176"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Ui,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Email"}),a.jsx("p",{className:"text-white font-semibold",children:"mohammed5@gmail.com"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Ut,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Adresse"}),a.jsx("p",{className:"text-white font-semibold",children:"Rabat, Maroc"})]})]})]})]}),a.jsxs("div",{className:"bg-white p-8 md:p-12 flex flex-col justify-center",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Envoyez-nous un message"}),a.jsx(yL,{})]})]})})}),a.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"text-center mt-8 text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx(tt,{className:"w-5 h-5 text-amber-500"}),a.jsx("span",{className:"font-semibold",children:"Mohammed V School Bus"})]}),a.jsx("p",{children:" 2025 Mohammed V School Bus. Tous droits rservs."})]})]})]})}function Nh({title:e,icon:t,onLogin:r,onRegister:n,showRegister:s=!1,loginFields:i=[{name:"email",label:"Email ou Tlphone",type:"text",placeholder:"Entrez votre email ou tlphone"},{name:"password",label:"Mot de passe",type:"password",placeholder:"Entrez votre mot de passe"}],loading:o=!1,error:l=""}){const[c,u]=N.useState({}),[f,d]=N.useState(!1),m=it(),g=h=>{h.preventDefault(),r(c)},j=(h,y)=>{u(p=>({...p,[h]:y}))};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:a.jsx(re.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full max-w-md",children:a.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl p-8 border border-amber-100",children:[a.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute top-6 left-6 p-2 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-all duration-200",title:"Retour",children:a.jsx(Ot,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(t,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:e}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Connectez-vous pour accder"})]}),l&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-center",children:l}),a.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.map(h=>a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:h.label}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(me,{type:h.type==="password"&&f?"text":h.type,placeholder:h.placeholder,value:c[h.name]||"",onChange:y=>j(h.name,y.target.value),className:"h-12 rounded-xl border-gray-200 focus:border-amber-400 focus:ring-amber-400",required:!0}),h.type==="password"&&a.jsx("button",{type:"button",onClick:()=>d(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?a.jsx(zf,{className:"w-5 h-5"}):a.jsx(Ca,{className:"w-5 h-5"})})]})]},h.name)),a.jsx(ne,{type:"submit",disabled:o,className:"w-full h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:o?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(QD,{className:"w-5 h-5 mr-2"}),"Se connecter"]})})]}),s&&a.jsxs("div",{className:"mt-6 text-center",children:[a.jsx("p",{className:"text-gray-500",children:"Pas encore de compte ?"}),a.jsxs(ne,{variant:"ghost",onClick:n,className:"mt-2 text-amber-600 hover:text-amber-700 hover:bg-amber-50",children:[a.jsx(hh,{className:"w-4 h-4 mr-2"}),"Crer un compte"]})]})]})})})}function vL(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=async o=>{r(!0),s("");try{const l=await ts.login(o.email,o.password,"chauffeur");l.success?(localStorage.setItem("chauffeur_session",JSON.stringify(l.user)),ts.saveUser(l.user),e(Re("ChauffeurDashboard"))):s(l.message||"Email ou mot de passe incorrect.")}catch(l){console.error("Erreur de connexion:",l),l.response&&l.response.status,s("Email ou mot de passe incorrect.")}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Chauffeur",icon:tt,onLogin:i,showRegister:!1,loading:t,error:n})}const $e=({children:e,value:t,onValueChange:r,...n})=>{const[s,i]=N.useState(!1),o=N.useRef(null);N.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);let l=[];return H.Children.forEach(e,c=>{c&&c.type===ke&&H.Children.toArray(c.props.children).forEach(f=>{f&&f.type===q&&l.push(f)})}),a.jsx("div",{ref:o,className:"relative",...n,children:H.Children.map(e,c=>c.type===Me?H.cloneElement(c,{isOpen:s,onClick:()=>i(!s),value:t,selectItems:l}):c.type===ke?H.cloneElement(c,{isOpen:s,onSelect:u=>{r(u),i(!1)},value:t}):c)})},Me=({className:e="",children:t,isOpen:r,onClick:n,value:s,selectItems:i=[],...o})=>a.jsxs("button",{type:"button",onClick:n,className:`flex w-full items-center justify-between rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all ${e}`,...o,children:[H.Children.map(t,l=>l.type===De?H.cloneElement(l,{value:s,selectItems:i}):l),a.jsx(JD,{className:`w-4 h-4 text-gray-500 transition-transform ${r?"rotate-180":""}`})]}),De=({placeholder:e,children:t,value:r,selectItems:n=[]})=>{if(t)return a.jsx("span",{className:"text-gray-900",children:t});if(r&&n.length>0){const s=n.find(i=>i.props.value===r);if(s)return a.jsx("span",{className:"text-gray-900",children:s.props.children})}return a.jsx("span",{className:"text-gray-500",children:e})},ke=({children:e,isOpen:t,onSelect:r,value:n,className:s=""})=>t?a.jsx("div",{className:`absolute z-[100] w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden animate-fadeIn ${s}`,style:{pointerEvents:"auto"},children:a.jsx("div",{className:"max-h-60 overflow-y-auto",children:H.Children.map(e,i=>H.cloneElement(i,{onSelect:r,selectedValue:n}))})}):null,q=({value:e,children:t,onSelect:r,selectedValue:n,className:s=""})=>{const i=e===n;return a.jsxs("button",{type:"button",onClick:()=>r(e),className:`w-full flex items-center justify-between px-4 py-2.5 text-sm text-left hover:bg-amber-50 transition-colors ${i?"bg-amber-50 text-amber-700 font-medium":"text-gray-700"} ${s}`,children:[t,i&&a.jsx(ya,{className:"w-4 h-4 text-amber-600"})]})};function en({isOpen:e,title:t="Confirmation",message:r,onConfirm:n,onCancel:s,confirmText:i="Confirmer",cancelText:o="Annuler",variant:l="destructive"}){return e?a.jsx(Or,{children:a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:a.jsxs(re.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:c=>c.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:`p-6 ${l==="destructive"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(Ue,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:t})]})}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:r})}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[a.jsx(ne,{variant:"outline",onClick:s,className:"rounded-xl",children:o}),a.jsx(ne,{variant:l,onClick:n,className:`rounded-xl ${l==="destructive"?"bg-red-500 hover:bg-red-600":""}`,children:i})]})]})})}):null}function bL({notifications:e=[],onMarkAsRead:t,onDelete:r,onDeleteAll:n,onClose:s,isOpen:i}){const[o,l]=N.useState("all"),[c,u]=N.useState(!1);N.useEffect(()=>{if(!i)return;const h=y=>{y.key==="Escape"&&s&&s()};return document.addEventListener("keydown",h),document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",h),document.body.style.overflow="unset"}},[i,s]);const f=e.filter(h=>o==="unread"?!h.lue:o==="read"?h.lue===!0:!0),d=e.filter(h=>!h.lue).length,m=h=>{if(!h)return"";const y=new Date(h),x=new Date-y,v=Math.floor(x/6e4),S=Math.floor(x/36e5),w=Math.floor(x/864e5);return v<1?" l'instant":v<60?`Il y a ${v} min`:S<24?`Il y a ${S}h`:w<7?`Il y a ${w}j`:y.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},g=h=>{const y=(h==null?void 0:h.toLowerCase())||"";return y.includes("urgent")||y.includes("alerte")?a.jsx(Ue,{className:"w-5 h-5 text-red-500"}):y.includes("attention")||y.includes("avertissement")?a.jsx(Ue,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-green-500"})},j=h=>{const y=(h==null?void 0:h.toLowerCase())||"";return y.includes("urgent")||y.includes("alerte")?"border-l-red-500 bg-red-50":(y.includes("attention")||y.includes("avertissement"),"border-l-green-500 bg-green-50")};return i?a.jsx(Or,{mode:"wait",children:i&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[9999] flex items-center justify-center p-4",onClick:h=>{h.target===h.currentTarget&&s&&s()},style:{pointerEvents:"auto"},children:a.jsxs(re.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:h=>h.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden relative z-[10000]",style:{pointerEvents:"auto"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(Vn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Notifications"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[d," non lue(s)"]})]})]}),a.jsx("button",{onClick:s,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors",children:a.jsx(Ke,{className:"w-5 h-5 text-white"})})]}),a.jsx("div",{className:"flex gap-2",children:["all","unread","read"].map(h=>a.jsxs("button",{onClick:()=>l(h),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===h?"bg-white text-green-600 shadow-lg":"bg-white/20 text-white hover:bg-white/30"}`,children:[h==="all"?"Toutes":h==="unread"?"Non lues":"Lues",h==="unread"&&d>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white rounded-full text-xs",children:d})]},h))})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-200px)] p-6 space-y-3",children:a.jsx(Or,{children:f.length===0?a.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 text-gray-400",children:[a.jsx(Vn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune notification"})]}):f.map((h,y)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:y*.05},className:`relative border-l-4 rounded-xl p-4 transition-all ${j(h.titre)} ${h.lue?"opacity-75":"shadow-md"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:g(h.titre)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:h.titre}),!h.lue&&a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0 mt-1"})]}),a.jsx("p",{className:"text-gray-600 text-sm mt-1 leading-relaxed",children:h.message}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("p",{className:"text-xs text-gray-400",children:m(h.date||h.date_creation)}),a.jsxs("div",{className:"flex gap-2",children:[!h.lue&&a.jsxs("button",{onClick:()=>t&&t(h.id),className:"text-xs text-green-600 hover:text-green-700 font-medium flex items-center gap-1",children:[a.jsx(mt,{className:"w-3 h-3"}),"Marquer comme lue"]}),r&&a.jsxs("button",{onClick:()=>r(h.id),className:"text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[a.jsx(Tt,{className:"w-3 h-3"}),"Supprimer"]})]})]})]})]})},h.id))})}),f.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:[f.length," notification(s)"]}),a.jsxs("div",{className:"flex gap-2",children:[d>0&&t&&a.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>{e.filter(h=>!h.lue).forEach(h=>t(h.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),n&&e.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs(ne,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer toutes"]}),a.jsx(en,{isOpen:c,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{n(),u(!1)},onCancel:()=>u(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})]})]})]})})}):null}function na({title:e,value:t,icon:r,color:n="amber",trend:s,subtitle:i}){const o={amber:"from-amber-400 to-yellow-500",lime:"from-lime-400 to-lime-500",green:"from-green-400 to-emerald-500",blue:"from-blue-400 to-cyan-500",red:"from-red-400 to-rose-500",purple:"from-purple-400 to-violet-500",orange:"from-orange-400 to-amber-500"};return a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5,transition:{duration:.2}},className:"bg-white rounded-3xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:e}),a.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:t}),i&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i}),s&&a.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${s>0?"text-green-500":"text-red-500"}`,children:[a.jsx("span",{children:s>0?"":""}),a.jsxs("span",{children:[Math.abs(s),"%"]})]})]}),a.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${o[n]} flex items-center justify-center shadow-lg`,children:a.jsx(r,{className:"w-7 h-7 text-white"})})]})})}function Sr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Oa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function jC(e,t){const r=Sr(e);return isNaN(t)?Oa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function wC(e,t){const r=Sr(e);if(isNaN(t))return Oa(e,NaN);if(!t)return r;const n=r.getDate(),s=Oa(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const i=s.getDate();return n>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const NC=6048e5,jL=864e5;let wL={};function Sh(){return wL}function fu(e,t){var l,c,u,f;const r=Sh(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,s=Sr(e),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Xf(e){return fu(e,{weekStartsOn:1})}function SC(e){const t=Sr(e),r=t.getFullYear(),n=Oa(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Xf(n),i=Oa(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Xf(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Jf(e){const t=Sr(e);return t.setHours(0,0,0,0),t}function k1(e){const t=Sr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function NL(e,t){const r=Jf(e),n=Jf(t),s=+r-k1(r),i=+n-k1(n);return Math.round((s-i)/jL)}function SL(e){const t=SC(e),r=Oa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Xf(r)}function _L(e,t){const r=t*7;return jC(e,r)}function AL(e,t){return wC(e,t*12)}function PL(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function EL(e){if(!PL(e)&&typeof e!="number")return!1;const t=Sr(e);return!isNaN(Number(t))}function qv(e){const t=Sr(e);return t.setHours(23,59,59,999),t}function mf(e){const t=Sr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function CL(e){const t=Sr(e),r=Oa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const OL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TL=(e,t,r)=>{let n;const s=OL[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function zo(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const kL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ML={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$L={date:zo({formats:kL,defaultWidth:"full"}),time:zo({formats:ML,defaultWidth:"full"}),dateTime:zo({formats:DL,defaultWidth:"full"})},IL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},LL=(e,t,r,n)=>IL[e];function pa(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const RL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},BL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},VL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},WL=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},HL={ordinalNumber:WL,era:pa({values:RL,defaultWidth:"wide"}),quarter:pa({values:BL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:pa({values:FL,defaultWidth:"wide"}),day:pa({values:zL,defaultWidth:"wide"}),dayPeriod:pa({values:VL,defaultWidth:"wide",formattingValues:UL,defaultFormattingWidth:"wide"})};function ga(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?GL(l,d=>d.test(o)):qL(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function qL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function GL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function _C(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const KL=/^(\d+)(th|st|nd|rd)?/i,YL=/\d+/i,XL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},JL={any:[/^b/i,/^(a|c)/i]},ZL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},QL={any:[/1/i,/2/i,/3/i,/4/i]},eR={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},nR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},aR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},sR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iR={ordinalNumber:_C({matchPattern:KL,parsePattern:YL,valueCallback:e=>parseInt(e,10)}),era:ga({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any"}),quarter:ga({matchPatterns:ZL,defaultMatchWidth:"wide",parsePatterns:QL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ga({matchPatterns:eR,defaultMatchWidth:"wide",parsePatterns:tR,defaultParseWidth:"any"}),day:ga({matchPatterns:rR,defaultMatchWidth:"wide",parsePatterns:nR,defaultParseWidth:"any"}),dayPeriod:ga({matchPatterns:aR,defaultMatchWidth:"any",parsePatterns:sR,defaultParseWidth:"any"})},oR={code:"en-US",formatDistance:TL,formatLong:$L,formatRelative:LL,localize:HL,match:iR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function lR(e){const t=Sr(e);return NL(t,CL(t))+1}function cR(e){const t=Sr(e),r=+Xf(t)-+SL(t);return Math.round(r/NC)+1}function AC(e,t){var f,d,m,g;const r=Sr(e),n=r.getFullYear(),s=Sh(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Oa(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=fu(o,t),c=Oa(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=fu(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function uR(e,t){var l,c,u,f;const r=Sh(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,s=AC(e,t),i=Oa(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),fu(i,t)}function dR(e,t){const r=Sr(e),n=+fu(r,t)-+uR(r,t);return Math.round(n/NC)+1}function jt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const gs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return jt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):jt(r+1,2)},d(e,t){return jt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return jt(e.getHours()%12||12,t.length)},H(e,t){return jt(e.getHours(),t.length)},m(e,t){return jt(e.getMinutes(),t.length)},s(e,t){return jt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return jt(s,t.length)}},io={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},M1={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return gs.y(e,t)},Y:function(e,t,r,n){const s=AC(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return jt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):jt(i,t.length)},R:function(e,t){const r=SC(e);return jt(r,t.length)},u:function(e,t){const r=e.getFullYear();return jt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return jt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return jt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return gs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return jt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=dR(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):jt(s,t.length)},I:function(e,t,r){const n=cR(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):jt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):gs.d(e,t)},D:function(e,t,r){const n=lR(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):jt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return jt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return jt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return jt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=io.noon:n===0?s=io.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=io.evening:n>=12?s=io.afternoon:n>=4?s=io.morning:s=io.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return gs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):gs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):jt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):jt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):gs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):gs.s(e,t)},S:function(e,t){return gs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return $1(n);case"XXXX":case"XX":return xi(n);case"XXXXX":case"XXX":default:return xi(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return $1(n);case"xxxx":case"xx":return xi(n);case"xxxxx":case"xxx":default:return xi(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+D1(n,":");case"OOOO":default:return"GMT"+xi(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+D1(n,":");case"zzzz":default:return"GMT"+xi(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return jt(n,t.length)},T:function(e,t,r){const n=e.getTime();return jt(n,t.length)}};function D1(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+jt(i,2)}function $1(e,t){return e%60===0?(e>0?"-":"+")+jt(Math.abs(e)/60,2):xi(e,t)}function xi(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=jt(Math.trunc(n/60),2),i=jt(n%60,2);return r+s+t+i}const I1=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},PC=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},fR=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return I1(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",I1(n,t)).replace("{{time}}",PC(s,t))},mR={p:PC,P:fR},hR=/^D+$/,pR=/^Y+$/,gR=["D","DD","YY","YYYY"];function xR(e){return hR.test(e)}function yR(e){return pR.test(e)}function vR(e,t,r){const n=bR(e,t,r);if(console.warn(n),gR.includes(e))throw new RangeError(n)}function bR(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,NR=/^'([^]*?)'?$/,SR=/''/g,_R=/[a-zA-Z]/;function Se(e,t,r){var f,d,m,g,j,h,y,p;const n=Sh(),s=(r==null?void 0:r.locale)??n.locale??oR,i=(r==null?void 0:r.firstWeekContainsDate)??((d=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((h=(j=r==null?void 0:r.locale)==null?void 0:j.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((p=(y=n.locale)==null?void 0:y.options)==null?void 0:p.weekStartsOn)??0,l=Sr(e);if(!EL(l))throw new RangeError("Invalid time value");let c=t.match(wR).map(x=>{const v=x[0];if(v==="p"||v==="P"){const S=mR[v];return S(x,s.formatLong)}return x}).join("").match(jR).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const v=x[0];if(v==="'")return{isToken:!1,value:AR(x)};if(M1[v])return{isToken:!0,value:x};if(v.match(_R))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const v=x.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&yR(v)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&xR(v))&&vR(v,t,String(e));const S=M1[v[0]];return S(l,v,s.localize,u)}).join("")}function AR(e){const t=e.match(NR);return t?t[1].replace(SR,"'"):e}function PR(e,t){const r=+Sr(e),[n,s]=[+Sr(t.start),+Sr(t.end)].sort((i,o)=>i-o);return r>=n&&r<=s}function Xs(e,t){return jC(e,-t)}function Vo(e,t){return wC(e,-t)}function ER(e,t){return _L(e,-1)}function CR(e,t){return AL(e,-1)}const OR={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},TR=(e,t,r)=>{let n;const s=OR[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},kR={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},MR={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},DR={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$R={date:zo({formats:kR,defaultWidth:"full"}),time:zo({formats:MR,defaultWidth:"full"}),dateTime:zo({formats:DR,defaultWidth:"full"})},IR={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},LR=(e,t,r,n)=>IR[e],RR={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},BR={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},FR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},zR={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},VR={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},UR=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const s=["year","week","hour","minute","second"];let i;return r===1?i=n&&s.includes(n)?"re":"er":i="me",r+i},WR=["MMM","MMMM"],HR={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&WR.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:UR,era:pa({values:RR,defaultWidth:"wide"}),quarter:pa({values:BR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:pa({values:FR,defaultWidth:"wide"}),day:pa({values:zR,defaultWidth:"wide"}),dayPeriod:pa({values:VR,defaultWidth:"wide"})},qR=/^(\d+)(ime|re|me|er|e)?/i,GR=/\d+/i,KR={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},YR={any:[/^av/i,/^ap/i]},XR={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},JR={any:[/1/i,/2/i,/3/i,/4/i]},ZR={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},QR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},e8={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},t8={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},r8={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},n8={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},a8={ordinalNumber:_C({matchPattern:qR,parsePattern:GR,valueCallback:e=>parseInt(e)}),era:ga({matchPatterns:KR,defaultMatchWidth:"wide",parsePatterns:YR,defaultParseWidth:"any"}),quarter:ga({matchPatterns:XR,defaultMatchWidth:"wide",parsePatterns:JR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ga({matchPatterns:ZR,defaultMatchWidth:"wide",parsePatterns:QR,defaultParseWidth:"any"}),day:ga({matchPatterns:e8,defaultMatchWidth:"wide",parsePatterns:t8,defaultParseWidth:"any"}),dayPeriod:ga({matchPatterns:r8,defaultMatchWidth:"any",parsePatterns:n8,defaultParseWidth:"any"})},Jt={code:"fr",formatDistance:TR,formatLong:$R,formatRelative:LR,localize:HR,match:a8,options:{weekStartsOn:1,firstWeekContainsDate:4}};function s8({chauffeur:e,notifications:t=[],onLogout:r,activeTab:n,setActiveTab:s,onCollapseChange:i}){var h,y,p,x;const o=it(),l=Pn(),[c,u]=N.useState(!1),[f,d]=N.useState(!1);N.useEffect(()=>{i&&i(c)},[c,i]),N.useEffect(()=>{const v=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const m=[{title:"Dashboard",icon:wv,id:null,link:null},{title:"Mon Bus & Trajet",icon:tt,id:"bus",link:null},{title:"Essence",icon:an,id:"essence",link:null},{title:"Problmes",icon:ea,id:"signalements",link:null},{title:"Mes Accidents",icon:Ue,id:"accidents",link:null},{title:"Notifications",icon:Vn,id:"notifications",link:"ChauffeurNotifications"},{title:"Profil",icon:pt,id:"profile",link:null}],g=v=>{if(v.link){o(Re(v.link)),window.innerWidth<1024&&d(!1);return}s&&s(v.id),window.innerWidth<1024&&d(!1)},j=t.filter(v=>!v.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{typeof window<"u"&&window.innerWidth>=1024?(u(!c),d(!1)):d(!f)},className:"fixed top-4 left-4 z-50 p-2.5 bg-green-500 text-white rounded-xl shadow-lg hover:bg-green-600 transition-colors",children:!f&&c?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ke,{className:"w-5 h-5"})}),a.jsx(Or,{children:f&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40",style:{pointerEvents:"auto"}})}),a.jsxs(re.aside,{initial:!1,animate:{width:c?"80px":"280px",x:f?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-green-50 to-white
          border-r-2 border-green-200 shadow-2xl z-40
          flex flex-col
          ${c?"items-center":""}
        `,style:{pointerEvents:"auto"},children:[!c&&e&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-green-200 mt-16",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",children:((h=e.prenom)==null?void 0:h[0])||((y=e.nom)==null?void 0:y[0])||"C"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-bold text-gray-800 text-base truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.email})]})]})}),c&&e&&a.jsx("div",{className:"mt-16 w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md mx-auto",children:((p=e.prenom)==null?void 0:p[0])||((x=e.nom)==null?void 0:x[0])||"C"}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:m.map((v,S)=>{const w=n===v.id,b=v.icon,_=v.id==="accidents",P=v.id==="notifications",C=P&&l.pathname==="/ChauffeurNotifications";return a.jsxs(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:S*.05},onClick:()=>g(v),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${w||C?_?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg":"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg":"text-gray-700 hover:bg-green-100 hover:text-green-700"}
                    ${c?"justify-center":""}
                  `,title:c?v.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(b,{className:`w-5 h-5 ${w||C?"text-white":"text-gray-600"}`}),P&&j>0&&a.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:j>99?"99+":j})]}),!c&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:v.title})]},v.id||"dashboard")})})}),a.jsx("div",{className:"p-4 border-t border-green-200 space-y-2",children:a.jsxs(re.button,{onClick:r,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${c?"justify-center":""}
            `,title:c?"Dconnexion":"",children:[a.jsx(ki,{className:"w-5 h-5"}),!c&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${c?"ml-[80px]":"ml-[280px]"}
        `})]})}function Kx({children:e,title:t="Espace Chauffeur",activeTab:r,setActiveTab:n}){const s=it(),[i,o]=N.useState(null),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState(!1),g=async h=>{try{const y=await ft.getByUser(h,"chauffeur"),p=(y==null?void 0:y.data)||y||[];c(p.sort((x,v)=>new Date(v.date||v.date_creation||0)-new Date(x.date||x.date_creation||0)))}catch(y){console.warn("Erreur lors du chargement des notifications:",y),c([])}};N.useEffect(()=>{const h=localStorage.getItem("chauffeur_session");if(!h){s(Re("ChauffeurLogin"));return}const y=JSON.parse(h);o(y),g(y.id),f(!1)},[s]),N.useEffect(()=>{const h=()=>{const y=localStorage.getItem("chauffeur_session");if(y){const p=JSON.parse(y);o(p)}};return window.addEventListener("chauffeur_session_updated",h),()=>{window.removeEventListener("chauffeur_session_updated",h)}},[]),N.useEffect(()=>{if(!i)return;const h=async()=>{await g(i.id)};h();const y=setInterval(h,3e4);return()=>clearInterval(y)},[i]);const j=()=>{localStorage.removeItem("chauffeur_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),s(Re("Home"))};return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50",children:[a.jsx(s8,{chauffeur:i,notifications:l,onLogout:j,activeTab:r,setActiveTab:n,onCollapseChange:m}),a.jsx("main",{className:`min-h-screen p-4 md:p-8 pt-20 lg:pt-8 transition-all duration-300 relative z-10 ${d?"lg:ml-[80px]":"lg:ml-[280px]"}`,style:{pointerEvents:"auto"},children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function i8({activeTab:e,setActiveTab:t}){const r=it(),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState([]),[g,j]=N.useState([]),[h,y]=N.useState([]),[p,x]=N.useState([]),[v,S]=N.useState(!0),[w,b]=N.useState(Se(new Date,"yyyy-MM-dd")),[_,P]=N.useState(!1),[C,M]=N.useState(null),[A,E]=N.useState({show:!1,id:null}),[T,B]=N.useState(""),[I,D]=N.useState("tous"),[O,$]=N.useState({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),[R,Q]=N.useState([]),[ae,oe]=N.useState(!1),[Z,pe]=N.useState(!1),[Ee,Y]=N.useState(!1),[J,W]=N.useState(!1),[X,k]=N.useState([]),[K,z]=N.useState("all"),[le,ge]=N.useState(""),[ue,U]=N.useState([]),[xe,Pe]=N.useState([]),[ve,Ae]=N.useState("all"),[Ie,we]=N.useState("all"),[Te,rt]=N.useState([]),[xt,ze]=N.useState(null),[He,Ze]=N.useState(null),[dt,Ct]=N.useState(null),[Xe,At]=N.useState(null),[ot,rr]=N.useState({nom:"",prenom:"",email:"",telephone:""});N.useEffect(()=>{n&&rr({nom:n.nom||"",prenom:n.prenom||"",email:n.email||"",telephone:n.telephone||""})},[n]);const[nn,Wr]=N.useState(null),[et,Da]=N.useState("success"),lt=(L,G="success")=>{Wr(L),Da(G),setTimeout(()=>{Wr(null)},4e3)},[Mt,Ar]=N.useState({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),quantite_litres:"",prix_total:"",station_service:""}),[ms,ee]=N.useState({date:Se(new Date,"yyyy-MM-dd"),periode:"matin",heure_depart_reelle:"",heure_arrivee_reelle:"",nombre_eleves:d.length,kilometres_parcourus:"",problemes:"",observations:""}),[Ce,vt]=N.useState({date:Se(new Date,"yyyy-MM-dd"),periode:"matin",essence_verifiee:!1,pneus_ok:!1,portes_ok:!1,eclairage_ok:!1,nettoyage_fait:!1,trousse_secours:!1,autres_verifications:""}),[Pt,Qe]=N.useState({type_probleme:"mecanique",description:"",urgence:"moyenne"}),dr=(L,G=1200,he=1200,ce=.7)=>new Promise(te=>{const ie=new FileReader;ie.onload=F=>{const de=new Image;de.onload=()=>{const be=document.createElement("canvas");let Oe=de.width,Fe=de.height;Oe>Fe?Oe>G&&(Fe=Fe*G/Oe,Oe=G):Fe>he&&(Oe=Oe*he/Fe,Fe=he),be.width=Oe,be.height=Fe,be.getContext("2d").drawImage(de,0,0,Oe,Fe);const qe=be.toDataURL("image/jpeg",ce);te({data:qe,name:L.name,type:"image/jpeg"})},de.src=F.target.result},ie.readAsDataURL(L)});N.useEffect(()=>{const L=localStorage.getItem("chauffeur_session");if(!L){r(Re("ChauffeurLogin"));return}const G=JSON.parse(L);s(G),ye(G)},[r]);const V=(n==null?void 0:n.nombre_accidents)>=3||h.length>=3,ye=async L=>{try{let G=L;if(L.type_id)try{const F=await Vr.getById(L.type_id);G=(F==null?void 0:F.data)||F||L,s(G)}catch(F){console.warn("Erreur chargement donnes chauffeur:",F)}const he=await wr.getAll(),ce=(he==null?void 0:he.data)||he||[],te=L.type_id||L.id,ie=ce.find(F=>F.chauffeur_id===te);if(ie){if(o(ie),ie.trajet_id)try{const F=await ra.getById(ie.trajet_id),de=(F==null?void 0:F.data)||F;c(de)}catch(F){console.error("Erreur chargement trajet:",F)}if(ie.responsable_id)try{const F=await xa.getById(ie.responsable_id),de=(F==null?void 0:F.data)||F;f(de)}catch(F){console.error("Erreur chargement responsable:",F)}try{const F=await Xt.getByBus(ie.id),de=(F==null?void 0:F.data)||F||[];m(de)}catch(F){console.error("Erreur chargement lves:",F)}}try{const F=await ln.getByChauffeur(te),de=(F==null?void 0:F.data)||F||[];y(de),de.length>=3}catch(F){console.error("Erreur chargement accidents:",F)}try{const F=await za.getByDate(w);j((F==null?void 0:F.data)||F||[])}catch(F){console.error("Erreur chargement prsences:",F)}try{const F=await ft.getByUser(te,"chauffeur"),de=(F==null?void 0:F.data)||F||[];x(de.sort((be,Oe)=>new Date(Oe.date||0)-new Date(be.date||0)))}catch(F){console.error("Erreur chargement notifications:",F)}try{const F=await Tc.getByChauffeur(te),de=(F==null?void 0:F.data)||F||[];console.log("Prises essence charges:",de),de.forEach((be,Oe)=>{be.photo_ticket?console.log(`Prise ${Oe} - photo_ticket existe, longueur:`,be.photo_ticket.length,"premiers caractres:",be.photo_ticket.substring(0,50)):console.log(`Prise ${Oe} - pas de photo_ticket`)}),k(de)}catch(F){console.error("Erreur chargement essence:",F)}try{const F=await ZP.getByChauffeur(te),de=(F==null?void 0:F.data)||F||[];U(de)}catch(F){console.error("Erreur chargement rapports:",F)}try{const F=await ha.getByChauffeur(te),de=(F==null?void 0:F.data)||F||[];console.log("Signalements chargs:",de),de.forEach((be,Oe)=>{be.photos&&console.log(`Signalement ${Oe} a des photos:`,typeof be.photos,Array.isArray(be.photos)?be.photos.length:"non-array")}),Pe(de)}catch(F){console.error("Erreur chargement signalements:",F)}}catch(G){console.error("Erreur gnrale:",G)}S(!1)};return N.useEffect(()=>{!v&&n&&za.getByDate(w).then(L=>j(L)).catch(L=>console.error("Erreur chargement prsences:",L))},[w]),v?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .chauffeur-dashboard [role="option"]:hover,
        .chauffeur-dashboard [role="option"][data-highlighted],
        .chauffeur-dashboard [role="option"][data-state="checked"] {
          background-color: rgb(220 252 231) !important;
          color: rgb(22 101 52) !important;
        }
        .chauffeur-dashboard [role="option"][data-state="checked"] {
          background-color: rgb(220 252 231) !important;
          color: rgb(22 101 52) !important;
        }
      `}),a.jsxs("div",{className:"chauffeur-dashboard",children:[e===null&&a.jsxs(a.Fragment,{children:[a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Ht,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",n==null?void 0:n.prenom," ",n==null?void 0:n.nom]}),a.jsx("p",{className:"text-gray-500",children:n==null?void 0:n.email})]})]})}),V&&a.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-6 bg-red-50 border-2 border-red-500 rounded-xl text-red-700",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Ue,{className:"w-8 h-8 flex-shrink-0 text-red-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Tu es licenci"}),a.jsx("p",{className:"text-base mb-2",children:"Tu as atteint 3 accidents. Selon le rglement, tu es licenci et tu dois payer une amende de 1000 DH  l'cole."}),a.jsx("p",{className:"text-base font-semibold text-red-800",children:"Sinon l'cole va te poursuivre."})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(na,{title:"Mon Bus",value:(i==null?void 0:i.numero)||"-",icon:tt,color:"green"}),(()=>{const L=X.filter(te=>{const ie=new Date(te.date),F=new Date;return ie.getMonth()===F.getMonth()&&ie.getFullYear()===F.getFullYear()}),G=L.reduce((te,ie)=>te+parseFloat(ie.quantite_litres||0),0),he=L.reduce((te,ie)=>te+parseFloat(ie.prix_total||0),0),ce=L.length;return a.jsx(na,{title:"Essence (ce mois)",value:`${G.toFixed(1)} L`,subtitle:ce>0?`${ce} prise${ce>1?"s":""}  ${he.toFixed(2)} DH`:"Aucune prise",icon:an,color:"green"})})(),a.jsx(na,{title:"Mes Accidents",value:`${(n==null?void 0:n.nombre_accidents)||0} / 3`,icon:Ue,color:(n==null?void 0:n.nombre_accidents)>=2?"red":"green"}),a.jsx(na,{title:"Mon Salaire",value:`${(n==null?void 0:n.salaire)||0} DH`,icon:cf,color:"green"})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(tt,{className:"w-6 h-6 text-green-500"}),"Vue d'ensemble"]}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Informations du Bus"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Numro"}),a.jsx("span",{className:"text-2xl font-bold text-green-700",children:i.numero})]}),l&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Trajet"}),a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:l.nom||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 md:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Informations Personnelles"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Nom complet"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[n==null?void 0:n.prenom," ",n==null?void 0:n.nom]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Email"}),a.jsx("span",{className:"font-semibold text-gray-800",children:n==null?void 0:n.email})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Tlphone"}),a.jsx("span",{className:"font-semibold text-gray-800",children:n==null?void 0:n.telephone})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Salaire"}),a.jsxs("span",{className:"font-semibold text-green-600 text-lg",children:[(n==null?void 0:n.salaire)||0," DH"]})]})]})]})]})]})]}),e==="profile"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsx("div",{className:"mb-6",children:a.jsxs(ne,{onClick:()=>t(null),variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-green-600 hover:bg-green-100/50 rounded-xl px-4 py-2",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au dashboard"]})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(Ht,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500",children:"Modifiez vos informations personnelles"})]}),a.jsxs("form",{onSubmit:async L=>{L.preventDefault();try{if(!(n!=null&&n.id)&&!(n!=null&&n.type_id)){lt("Erreur: ID chauffeur non trouv","error");return}const G=(n==null?void 0:n.id)||(n==null?void 0:n.type_id),he={nom:ot.nom,prenom:ot.prenom,email:ot.email,telephone:ot.telephone},ce=await Vr.update(G,he),te=await Vr.getById(G),ie=(te==null?void 0:te.data)||te||{},F=localStorage.getItem("chauffeur_session");if(F){const de=JSON.parse(F),be={...de,...ie,type_id:de.type_id||ie.id,id:de.id||ie.id};localStorage.setItem("chauffeur_session",JSON.stringify(be)),s(be),await ye(be),window.dispatchEvent(new CustomEvent("chauffeur_session_updated"))}lt("Profil mis  jour avec succs","success")}catch(G){console.error("Erreur mise  jour profil:",G),lt("Erreur lors de la mise  jour: "+(G.message||"Erreur inconnue"),"error")}},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(se,{htmlFor:"nom",children:"Nom"}),a.jsx(me,{id:"nom",value:ot.nom,onChange:L=>rr({...ot,nom:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"prenom",children:"Prnom"}),a.jsx(me,{id:"prenom",value:ot.prenom,onChange:L=>rr({...ot,prenom:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"email",children:"Email"}),a.jsx(me,{id:"email",type:"email",value:ot.email,onChange:L=>rr({...ot,email:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"telephone",children:"Tlphone"}),a.jsx(me,{id:"telephone",value:ot.telephone,onChange:L=>rr({...ot,telephone:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs(ne,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl py-6 text-lg font-semibold shadow-lg flex items-center justify-center gap-3",children:[a.jsx(rs,{className:"w-5 h-5"}),"Enregistrer les modifications"]})]})]}),e==="bus"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs(ne,{onClick:()=>t(null),variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-green-600 hover:bg-green-100/50 rounded-xl px-4 py-2",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au dashboard"]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-green-500"}),"Mon Bus"]}),i?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-5xl font-bold text-green-600",children:i.numero}),a.jsxs("p",{className:"text-gray-500 mt-2",children:[i.marque," ",i.modele]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[i.capacite," places"]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Places occupes"}),a.jsx("span",{className:"font-medium",children:d.length})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-500",children:"Statut"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.statut==="Actif"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.statut})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun bus assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(No,{className:"w-5 h-5 text-green-500"}),"Mon Trajet"]}),l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Trajet"}),a.jsx("p",{className:"text-xl font-bold text-gray-800",children:l.nom})]}),l.zones&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Zones desservies"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(l.zones)?l.zones:JSON.parse(l.zones||"[]")).map((L,G)=>a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:L},G))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe A - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_matin_a," - ",l.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe A - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_soir_a," - ",l.heure_arrivee_soir_a]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Groupe B - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_matin_b," - ",l.heure_arrivee_matin_b]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe B - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_soir_b," - ",l.heure_arrivee_soir_b]})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun trajet assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:col-span-2",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-green-500"}),"Responsable Bus"]}),u?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center",children:a.jsx(pt,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[u.prenom," ",u.nom]}),a.jsx("p",{className:"text-gray-500",children:u.telephone}),a.jsx("p",{className:"text-gray-400 text-sm",children:u.email})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-4",children:"Aucun responsable assign"})]})]})]}),e==="accidents"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs(ne,{onClick:()=>t(null),variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-green-600 hover:bg-green-100/50 rounded-xl px-4 py-2",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au dashboard"]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6 text-red-500"}),"Historique des Accidents"]}),!V&&a.jsxs(ne,{onClick:()=>P(!0),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Dclarer un accident"]})]})]}),V&&a.jsx("div",{className:"p-6 bg-red-50 border-b-2 border-red-500",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(Ue,{className:"w-8 h-8 flex-shrink-0 text-red-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2 text-red-800",children:"Tu es licenci"}),a.jsx("p",{className:"text-base mb-2 text-red-700",children:"Tu as atteint 3 accidents. Selon le rglement, tu es licenci et tu dois payer une amende de 1000 DH  l'cole."}),a.jsx("p",{className:"text-base font-semibold text-red-900",children:"Sinon l'cole va te poursuivre."})]})]})}),h.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(mt,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun accident enregistr"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Continuez  conduire prudemment !"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:h.map(L=>{let G=[];try{if(L.photos){if(Array.isArray(L.photos))G=L.photos;else if(typeof L.photos=="string"&&L.photos.trim()!=="")if(L.photos.trim().startsWith("[")||L.photos.trim().startsWith("{")){const te=JSON.parse(L.photos);Array.isArray(te)?G=te:te&&typeof te=="object"&&Array.isArray(te.photos)&&(G=te.photos)}else L.photos.startsWith("data:image")&&(G=[L.photos])}var he=G.map(te=>typeof te=="string"?te.startsWith("data:image")||te.startsWith("http")?te:null:te&&typeof te=="object"&&(te.data||te.src||te.url||te.base64)||null).filter(te=>te&&te.trim()!=="")}catch(ce){console.error("Erreur parsing photos accident:",ce);var he=[]}return a.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${L.gravite==="Grave"?"bg-red-100 text-red-700 border border-red-300":L.gravite==="Moyenne"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-green-100 text-green-700 border border-green-300"}`,children:L.gravite}),L.statut&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${L.statut==="Valid"?"bg-green-100 text-green-700":L.statut==="En attente"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:L.statut})]}),a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[a.jsx(Qr,{className:"w-4 h-4"}),Se(new Date(L.date),"dd MMMM yyyy",{locale:Jt}),L.heure&&`  ${L.heure}`]})]}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:L.description}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-3",children:[L.lieu&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"Lieu:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:L.lieu})]}),L.degats&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Os,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"Dgts:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:L.degats})]}),L.nombre_eleves!==null&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ht,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"lves dans le bus:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:L.nombre_eleves})]}),L.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[a.jsx(Ue,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:["Blesss: ",L.nombre_blesses]})]})]}),he.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Jn,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Photos (",he.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:he.map((ce,te)=>a.jsx(re.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>ze(ce),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-red-300 group-hover:border-red-500 transition-colors bg-white",children:[a.jsx("img",{src:ce,alt:`Photo accident ${te+1}`,className:"w-full h-20 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(Di,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},te))})]}),L.blesses&&a.jsxs("div",{className:"mt-3 p-3 bg-red-50 rounded-xl text-red-700 text-sm border border-red-200",children:[a.jsx(Ue,{className:"w-4 h-4 inline mr-2"}),"Des blesss ont t signals"]}),a.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{var ce,te;M(L),$({date:L.date?Se(new Date(L.date),"yyyy-MM-dd"):Se(new Date,"yyyy-MM-dd"),heure:L.heure||Se(new Date,"HH:mm"),lieu:L.lieu||"",description:L.description||"",degats:L.degats||"",gravite:L.gravite||"Lgre",nombre_eleves:((ce=L.nombre_eleves)==null?void 0:ce.toString())||"",nombre_blesses:((te=L.nombre_blesses)==null?void 0:te.toString())||"0"}),he.length>0?Q(he.map((ie,F)=>({preview:ie,file:null,id:`existing-${F}`}))):Q([]),P(!0)},className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>E({show:!0,id:L.id}),className:"rounded-xl text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]},L.id)})})]})}),e==="essence"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-emerald-50",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs(ne,{onClick:()=>t(null),variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-green-600 hover:bg-green-100/50 rounded-xl px-4 py-2",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au dashboard"]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(an,{className:"w-6 h-6 text-green-500"}),"Gestion de l'Essence",a.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["(",X.length," prises)"]})]}),a.jsxs(ne,{onClick:()=>oe(!0),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Nouvelle prise d'essence"]})]})]}),a.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-4 gap-4 bg-gradient-to-br from-green-50 via-emerald-50 to-green-50",children:[a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Prises ce mois"}),a.jsx(Qr,{className:"w-5 h-5 text-green-500"})]}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:X.filter(L=>{const G=new Date(L.date),he=new Date;return G.getMonth()===he.getMonth()&&G.getFullYear()===he.getFullYear()}).length})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-emerald-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total litres"}),a.jsx(an,{className:"w-5 h-5 text-emerald-500"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[X.reduce((L,G)=>L+parseFloat(G.quantite_litres||0),0).toFixed(1)," ",a.jsx("span",{className:"text-lg text-gray-500",children:"L"})]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Cot total"}),a.jsx(cf,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[X.reduce((L,G)=>L+parseFloat(G.prix_total||0),0).toFixed(2)," ",a.jsx("span",{className:"text-lg text-gray-500",children:"DH"})]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-emerald-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Prix moyen/L"}),a.jsx(lu,{className:"w-5 h-5 text-emerald-600"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[X.length>0?(X.reduce((L,G)=>L+parseFloat(G.prix_total||0),0)/X.reduce((L,G)=>L+parseFloat(G.quantite_litres||0),0)).toFixed(2):"0.00"," ",a.jsx("span",{className:"text-lg text-gray-500",children:"DH"})]})]})]}),a.jsxs("div",{className:"p-6",children:[X.length>0&&a.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-green-100",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[a.jsx(me,{type:"text",placeholder:"Rechercher par station...",value:le,onChange:L=>ge(L.target.value),className:"rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500"}),a.jsxs($e,{value:K,onValueChange:z,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par date"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les prises"}),a.jsx(q,{value:"thisMonth",children:"Ce mois"}),a.jsx(q,{value:"lastMonth",children:"Mois dernier"}),a.jsx(q,{value:"last3Months",children:"3 derniers mois"})]})]})]}),le||K!=="all"?a.jsxs(ne,{variant:"outline",onClick:()=>{ge(""),z("all")},className:"rounded-xl border-green-200 text-green-600 hover:bg-green-50",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Rinitialiser"]}):null]}),(()=>{let L=[...X];if(K!=="all"){const G=new Date,he=(()=>{switch(K){case"thisMonth":return{start:mf(G),end:G};case"lastMonth":const ce=Vo(G,1);return{start:mf(ce),end:qv(Vo(mf(G),1))};case"last3Months":return{start:Vo(G,3),end:G};default:return null}})();he&&(L=L.filter(ce=>{const te=new Date(ce.date);return PR(te,he)}))}return le&&(L=L.filter(G=>{var he;return(he=G.station_service)==null?void 0:he.toLowerCase().includes(le.toLowerCase())})),L.sort((G,he)=>new Date(he.date+" "+he.heure)-new Date(G.date+" "+G.heure)),L.length===0?a.jsxs(re.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"p-12 text-center",children:[a.jsx(an,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucune prise d'essence trouve"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:le||K!=="all"?"Essayez de modifier vos filtres":"Commencez par enregistrer votre premire prise d'essence"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[L.length," prise",L.length>1?"s":""," trouve",L.length>1?"s":""]}),a.jsx(Or,{children:L.map((G,he)=>{const ce=parseFloat(G.prix_total)/parseFloat(G.quantite_litres),te=(()=>{const ie=new Date(G.date),F=new Date;return ie.getMonth()===F.getMonth()&&ie.getFullYear()===F.getFullYear()})();return a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:he*.05},className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden",children:a.jsxs("div",{className:"p-5",children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-100 text-green-600",children:a.jsx(an,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:Se(new Date(G.date),"dd MMMM yyyy",{locale:Jt})}),te&&a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Ce mois"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(ia,{className:"w-4 h-4"}),a.jsx("span",{children:G.heure})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(an,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Quantit"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[parseFloat(G.quantite_litres).toFixed(1)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"L"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(cf,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Prix total"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[parseFloat(G.prix_total).toFixed(2)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"DH"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(lu,{className:"w-4 h-4 text-emerald-500"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Prix/L"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[ce.toFixed(2)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"DH"})]})]}),G.station_service&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(XD,{className:"w-4 h-4 text-emerald-600"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Station"})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:G.station_service})]})]}),(()=>{if(!G.photo_ticket||G.photo_ticket==="null"||G.photo_ticket===""||G.photo_ticket===null)return null;const ie=de=>{if(!de)return null;let be=String(de);if(be.trim()){try{if(be.trim().startsWith("[")||be.trim().startsWith("{")){const Fe=JSON.parse(be);Array.isArray(Fe)&&Fe.length>0?be=String(Fe[0]):Fe&&typeof Fe=="object"&&Fe.data&&(be=String(Fe.data))}}catch{}if(be=be.trim(),be=be.replace(/^["']+|["']+$/g,""),be=be.replace(/^\\["']+|\\["']+$/g,""),be.startsWith("data:image")||be.startsWith("http://")||be.startsWith("https://"))return be;const Oe=be.replace(/\s/g,"");return Oe.length>50&&(/^[A-Za-z0-9+/=\s]+$/.test(Oe)||Oe.length>100)?`data:image/jpeg;base64,${Oe}`:null}return null},F=ie(G.photo_ticket);return F?a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Jn,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Photo du ticket"})]}),a.jsxs("div",{className:"relative group cursor-pointer inline-block",onClick:()=>{const de=ie(G.photo_ticket);de&&Ct(de)},children:[a.jsx("img",{src:F,alt:"Ticket essence",className:"max-w-xs h-40 object-contain rounded-lg border-2 border-green-200 bg-gray-50 hover:border-green-400 transition-colors shadow-md",onError:de=>{console.error("Erreur chargement image ticket");const be=F.replace(/^data:image\/[^;]+;base64,/,"");if(be&&be.length>50)if(!de.target.dataset.triedPng)de.target.dataset.triedPng="true",de.target.src=`data:image/png;base64,${be}`;else if(!de.target.dataset.triedWebp)de.target.dataset.triedWebp="true",de.target.src=`data:image/webp;base64,${be}`;else{de.target.style.display="none";const Oe=de.target.parentElement;if(Oe&&!Oe.querySelector(".error-message")){const Fe=document.createElement("div");Fe.className="error-message text-red-500 text-sm mt-2",Fe.textContent="Impossible de charger l'image",Oe.appendChild(Fe)}}else de.target.style.display="none"},onLoad:()=>{console.log(" Image charge avec succs")}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center rounded-lg pointer-events-none",children:a.jsx(Di,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})]}):(G.photo_ticket?String(G.photo_ticket).length:0)===255?a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Jn,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Photo du ticket"})]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[a.jsx("p",{className:"text-sm text-red-700 font-medium mb-1",children:" Photo tronque"}),a.jsx("p",{className:"text-xs text-red-600",children:"La photo a t tronque lors de l'enregistrement. Contactez l'administrateur."})]})]}):null})()]})},G.id)})})]})})()]})]})}),e==="signalements"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-50 to-emerald-50",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs(ne,{onClick:()=>t(null),variant:"ghost",className:"flex items-center gap-2 text-gray-600 hover:text-green-600 hover:bg-green-100/50 rounded-xl px-4 py-2",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au dashboard"]})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(ea,{className:"w-6 h-6 text-green-500"}),"Signalements de Problmes"]}),a.jsxs(ne,{onClick:()=>W(!0),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Signaler un problme"]})]})]}),xe.length>0&&a.jsxs("div",{className:"p-6 bg-white border-b border-gray-100 flex flex-col md:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[a.jsxs($e,{value:ve,onValueChange:Ae,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par statut"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les statuts"}),a.jsx(q,{value:"en_attente",children:"En attente"}),a.jsx(q,{value:"en_cours",children:"En cours"}),a.jsx(q,{value:"resolu",children:"Rsolu"})]})]}),a.jsxs($e,{value:Ie,onValueChange:we,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par urgence"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les urgences"}),a.jsx(q,{value:"haute",children:"Haute"}),a.jsx(q,{value:"moyenne",children:"Moyenne"}),a.jsx(q,{value:"faible",children:"Faible"})]})]})]}),(ve!=="all"||Ie!=="all")&&a.jsxs(ne,{variant:"outline",onClick:()=>{Ae("all"),we("all")},className:"rounded-xl border-green-200 text-green-600 hover:bg-green-50",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Rinitialiser"]})]}),a.jsx("div",{className:"p-6",children:(()=>{let L=[...xe];if(ve!=="all"&&(L=L.filter(ie=>ie.statut===ve)),Ie!=="all"&&(L=L.filter(ie=>ie.urgence===Ie)),L.sort((ie,F)=>new Date(F.date_creation||0)-new Date(ie.date_creation||0)),L.length===0)return a.jsxs(re.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"p-12 text-center",children:[a.jsx(ea,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun signalement trouv"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:ve!=="all"||Ie!=="all"?"Essayez de modifier vos filtres":"Commencez par signaler votre premier problme"})]});const G=ie=>{switch(ie){case"mecanique":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",icon:"text-red-500",badge:"bg-red-100 text-red-700"};case"eclairage":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",icon:"text-yellow-500",badge:"bg-yellow-100 text-yellow-700"};case"portes":return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",icon:"text-blue-500",badge:"bg-blue-100 text-blue-700"};case"climatisation":return{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700",icon:"text-cyan-500",badge:"bg-cyan-100 text-cyan-700"};case"pneus":return{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700",icon:"text-orange-500",badge:"bg-orange-100 text-orange-700"};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",icon:"text-gray-500",badge:"bg-gray-100 text-gray-700"}}},he=ie=>{switch(ie){case"haute":return{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",icon:"text-red-500"};case"moyenne":return{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",icon:"text-yellow-500"};default:return{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:"text-green-500"}}},ce=ie=>{switch(ie){case"resolu":return{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"};case"en_cours":return{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"};default:return{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}}},te=ie=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[ie]||ie;return a.jsx("div",{className:"space-y-4",children:a.jsx(Or,{children:L.map((ie,F)=>{const de=G(ie.type_probleme),be=he(ie.urgence),Oe=ce(ie.statut);return a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:F*.05},className:`${de.bg} ${de.border} border-2 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden`,children:a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:`p-2 rounded-lg ${de.bg} ${de.icon}`,children:a.jsx(ea,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:te(ie.type_probleme)}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${de.badge} border ${de.border}`,children:te(ie.type_probleme)}),a.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${be.bg} ${be.text} border ${be.border} flex items-center gap-1`,children:[ie.urgence==="haute"&&a.jsx(Os,{className:"w-3 h-3"}),ie.urgence==="haute"?"URGENT":ie.urgence==="moyenne"?"Moyenne":"Faible"]}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Oe.bg} ${Oe.text} border ${Oe.border}`,children:ie.statut==="resolu"?"Rsolu":ie.statut==="en_cours"?"En cours":"En attente"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[a.jsx(ia,{className:"w-4 h-4"}),a.jsx("span",{children:ie.date_creation?Se(new Date(ie.date_creation),"dd MMMM yyyy  HH:mm",{locale:Jt}):"Date inconnue"})]})]})]}),a.jsx(ne,{variant:"outline",size:"sm",onClick:()=>At(ie),className:"ml-4 text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400 rounded-xl",children:a.jsx(Tt,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:a.jsx("p",{className:"text-gray-800 leading-relaxed",children:ie.description})}),(()=>{try{if(!ie.photos||ie.photos===null||ie.photos==="null"||ie.photos==="")return null;let Fe=[];if(Array.isArray(ie.photos))Fe=ie.photos;else if(typeof ie.photos=="string"&&ie.photos.trim()!=="")try{let qe=ie.photos;(qe.trim().startsWith("[")||qe.trim().startsWith("{"))&&(qe=JSON.parse(qe)),Array.isArray(qe)?Fe=qe:qe&&typeof qe=="object"&&Array.isArray(qe.photos)?Fe=qe.photos:typeof qe=="string"&&qe.startsWith("data:image")&&(Fe=[qe])}catch(qe){if(ie.photos.startsWith("data:image"))Fe=[ie.photos];else return console.error("Erreur parsing photos:",qe),null}else return null;if(!Array.isArray(Fe)||Fe.length===0)return null;const nt=Fe.map(qe=>typeof qe=="string"?qe:qe&&typeof qe=="object"&&(qe.data||qe.src||qe.url)||null).filter(qe=>qe&&typeof qe=="string"&&qe.trim()!==""&&qe.startsWith("data:image"));return nt.length===0?null:a.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Jn,{className:"w-5 h-5 text-green-600"}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Photos (",nt.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:nt.map((qe,Mr)=>a.jsx(re.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>ze(qe),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-green-300 group-hover:border-green-500 transition-colors bg-white shadow-md",children:[a.jsx("img",{src:qe,alt:`Photo problme ${Mr+1}`,className:"w-full h-24 object-cover",onError:ql=>{console.error("Erreur chargement image:",Mr),ql.target.style.display="none"}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(Di,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},Mr))})]})}catch(Fe){return console.error("Erreur parsing photos:",Fe,ie),null}})(),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[ie.bus_numero&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(tt,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Bus"})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:ie.bus_numero})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Os,{className:`w-4 h-4 ${be.icon}`}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Urgence"})]}),a.jsx("p",{className:`text-sm font-semibold ${be.text}`,children:ie.urgence==="haute"?"Haute":ie.urgence==="moyenne"?"Moyenne":"Faible"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(mt,{className:`w-4 h-4 ${Oe.text}`}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Statut"})]}),a.jsx("p",{className:`text-sm font-semibold ${Oe.text}`,children:ie.statut==="resolu"?"Rsolu":ie.statut==="en_cours"?"En cours":"En attente"})]})]})]})},ie.id)})})})})()})]})})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6"}),C?"Modifier un Accident":"Dclarer un Accident"]}),a.jsx("button",{onClick:()=>{R.forEach(L=>{L.preview&&L.preview.startsWith("blob:")&&URL.revokeObjectURL(L.preview)}),Q([]),P(!1),M(null)},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async L=>{L.preventDefault();try{if(h.length>=3){lt("Vous avez atteint 3 accidents. Vous tes licenci et devez payer une amende de 1000 DH  l'cole. Sinon l'cole va vous poursuivre.","error"),P(!1);return}const he=R.reduce((Oe,Fe)=>Oe+Fe.file.size,0),ce=10*1024*1024;if(he>ce){lt("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const te=R.filter(Oe=>Oe.file),ie=R.filter(Oe=>!Oe.file&&Oe.preview);let F=[];te.length>0&&(F=await Promise.all(te.map(Oe=>dr(Oe.file))));const de=[...ie.map(Oe=>Oe.preview),...F.map(Oe=>Oe.data)].filter(Boolean),be={date:O.date,heure:O.heure,bus_id:(i==null?void 0:i.id)||null,chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id)||null,lieu:O.lieu,description:O.description,degats:O.degats||null,gravite:O.gravite,nombre_eleves:O.nombre_eleves?parseInt(O.nombre_eleves):null,nombre_blesses:O.nombre_blesses?parseInt(O.nombre_blesses):0,blesses:parseInt(O.nombre_blesses)>0,photos:de.length>0?de:null};C?(await ln.update(C.id,be),lt("Accident modifi avec succs !","success")):(await ln.create(be),((n==null?void 0:n.nombre_accidents)||h.length)+1>=3?lt("Tu es licenci et tu dois payer une amende de 1000 DH  l'cole. Sinon l'cole va te poursuivre.","error"):lt("Accident dclar avec succs ! L'administrateur a t notifi.","success")),P(!1),M(null),$({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),R.forEach(Oe=>{Oe.preview&&Oe.preview.startsWith("blob:")&&URL.revokeObjectURL(Oe.preview)}),Q([]),await ye(n)}catch(G){console.error("Erreur dclaration accident:",G),lt("Erreur lors de la dclaration: "+(G.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Date *"}),a.jsx(me,{type:"date",value:O.date,onChange:L=>$({...O,date:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Heure *"}),a.jsx(me,{type:"time",value:O.heure,onChange:L=>$({...O,heure:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Lieu *"}),a.jsx(me,{value:O.lieu,onChange:L=>$({...O,lieu:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",placeholder:"Adresse de l'accident",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Gravit *"}),a.jsxs($e,{value:O.gravite,onValueChange:L=>$({...O,gravite:L}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Lgre",children:"Lgre"}),a.jsx(q,{value:"Moyenne",children:"Moyenne"}),a.jsx(q,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Nombre d'lves dans le bus"}),a.jsx(me,{type:"number",value:O.nombre_eleves,onChange:L=>$({...O,nombre_eleves:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",min:"0",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Nombre de blesss"}),a.jsx(me,{type:"number",value:O.nombre_blesses,onChange:L=>$({...O,nombre_blesses:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",min:"0",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Description *"}),a.jsx(_a,{value:O.description,onChange:L=>$({...O,description:L.target.value}),className:"mt-1 rounded-xl",rows:4,placeholder:"Dcrivez l'accident en dtail...",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Dgts"}),a.jsx(_a,{value:O.degats,onChange:L=>$({...O,degats:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",rows:2,placeholder:"Dcrivez les dgts matriels..."})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Photos (optionnel) - Max 5 photos, 5 MB par photo, 10 MB total"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:L=>{const G=Array.from(L.target.files||[]),he=5-R.length;if(G.length>he){lt(`Vous ne pouvez ajouter que ${he} photo(s) supplmentaire(s)`,"error");return}const ce=G.slice(0,he),te=5*1024*1024,F=ce.filter(de=>de.size>te?(lt(`L'image ${de.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(de=>({file:de,preview:URL.createObjectURL(de)}));Q([...R,...F]),L.target.value=""},className:"hidden",id:"accident-photos-upload"}),a.jsxs("label",{htmlFor:"accident-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-red-500 hover:bg-red-50 transition-colors",children:[a.jsx(Jn,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),R.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[R.length," photo",R.length>1?"s":""," slectionne",R.length>1?"s":""]})}),a.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto p-2 bg-gray-50 rounded-lg border border-gray-200",children:R.map((L,G)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:L.preview,alt:`Photo ${G+1}`,className:"w-full h-16 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(L.preview),Q(R.filter((he,ce)=>ce!==G))},className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-100 shadow-md hover:bg-red-600 transition-colors",children:a.jsx(Ke,{className:"w-3 h-3"})})]},G))})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:()=>{R.forEach(L=>{L.preview&&L.preview.startsWith("blob:")&&URL.revokeObjectURL(L.preview)}),Q([]),P(!1),M(null)},className:"rounded-xl",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Ue,{className:"w-4 h-4 mr-2"}),C?"Modifier l'accident":"Dclarer l'accident"]})]})]})]})}),ae&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-500 to-emerald-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(an,{className:"w-6 h-6"}),"Prise d'Essence"]}),a.jsx("button",{onClick:()=>oe(!1),className:"text-white hover:text-green-100",children:a.jsx(Ke,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async L=>{L.preventDefault();try{let G=null;if(He)try{G=(await dr(He.file)).data}catch{lt("Erreur lors de la compression de la photo","error");return}const he={chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id),bus_id:i==null?void 0:i.id,date:Mt.date,heure:Mt.heure,quantite_litres:parseFloat(Mt.quantite_litres),prix_total:parseFloat(Mt.prix_total),station_service:Mt.station_service||null,photo_ticket:G};if((await Tc.create(he)).success){He&&(URL.revokeObjectURL(He.preview),Ze(null));const te=await Tc.getByChauffeur((n==null?void 0:n.id)||(n==null?void 0:n.type_id)),ie=(te==null?void 0:te.data)||te||[];k(ie),lt("Prise d'essence enregistre avec succs ! L'administrateur a t notifi.","success"),oe(!1),Ar({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),quantite_litres:"",prix_total:"",station_service:""})}}catch(G){lt("Erreur: "+(G.message||"Erreur inconnue"),"error")}},className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Date *"}),a.jsx(me,{type:"date",value:Mt.date,onChange:L=>Ar({...Mt,date:L.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Heure *"}),a.jsx(me,{type:"time",value:Mt.heure,onChange:L=>Ar({...Mt,heure:L.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Quantit (litres) *"}),a.jsx(me,{type:"number",step:"0.01",value:Mt.quantite_litres,onChange:L=>Ar({...Mt,quantite_litres:L.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Prix total (DH) *"}),a.jsx(me,{type:"number",step:"0.01",value:Mt.prix_total,onChange:L=>Ar({...Mt,prix_total:L.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{className:"col-span-2",children:[a.jsx(se,{children:"Station-service"}),a.jsx(me,{value:Mt.station_service,onChange:L=>Ar({...Mt,station_service:L.target.value}),className:"mt-1 rounded-xl"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx(se,{children:"Photo du ticket/reu"}),a.jsx("input",{type:"file",accept:"image/*",onChange:L=>{var he;const G=(he=L.target.files)==null?void 0:he[0];if(G){if(G.size>5242880){lt("L'image est trop grande (max 5 MB)","error");return}Ze({file:G,preview:URL.createObjectURL(G)})}L.target.value=""},className:"hidden",id:"essence-ticket-photo-upload"}),a.jsxs("label",{htmlFor:"essence-ticket-photo-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors mt-1",children:[a.jsx(Jn,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:He?"Photo slectionne - Cliquez pour changer":"Cliquez pour ajouter une photo du ticket"})]}),He&&a.jsxs("div",{className:"mt-3 flex items-center gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[a.jsx("img",{src:He.preview,alt:"Ticket essence",className:"w-16 h-16 object-contain rounded border border-green-300"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Photo slectionne"}),a.jsx("p",{className:"text-xs text-gray-500",children:He.file.name})]}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(He.preview),Ze(null)},className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t col-span-2",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:()=>{He&&(URL.revokeObjectURL(He.preview),Ze(null)),oe(!1)},className:"rounded-xl",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"})," Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(an,{className:"w-4 h-4 mr-2"})," Enregistrer"]})]})]})]})}),J&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[85vh] flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-500 to-emerald-600 flex-shrink-0",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(ea,{className:"w-6 h-6"}),"Signaler un Problme"]}),a.jsx("button",{onClick:()=>{Te.forEach(L=>URL.revokeObjectURL(L.preview)),rt([]),W(!1)},className:"text-white hover:text-green-100",children:a.jsx(Ke,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async L=>{L.preventDefault();try{const G=Te.reduce((F,de)=>F+de.file.size,0),he=10*1024*1024;if(G>he){lt("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const ce=await Promise.all(Te.map(F=>dr(F.file))),te={chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id),bus_id:i==null?void 0:i.id,type_probleme:Pt.type_probleme,description:Pt.description,urgence:Pt.urgence,photos:ce.length>0?ce.map(F=>F.data):null};if((await ha.create(te)).success){const F=await ha.getByChauffeur((n==null?void 0:n.id)||(n==null?void 0:n.type_id)),de=(F==null?void 0:F.data)||F||[];Pe(de),lt("Problme signal avec succs ! L'administrateur a t notifi.","success"),W(!1),Qe({type_probleme:"mecanique",description:"",urgence:"moyenne"}),Te.forEach(be=>URL.revokeObjectURL(be.preview)),rt([])}}catch(G){lt("Erreur: "+(G.message||"Erreur inconnue"),"error")}},className:"flex flex-col flex-1 min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1 min-h-0 pb-2",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Type de problme *"}),a.jsxs($e,{value:Pt.type_probleme,onValueChange:L=>Qe({...Pt,type_probleme:L}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"mecanique",children:"Mcanique"}),a.jsx(q,{value:"eclairage",children:"clairage"}),a.jsx(q,{value:"portes",children:"Portes"}),a.jsx(q,{value:"climatisation",children:"Climatisation"}),a.jsx(q,{value:"pneus",children:"Pneus"}),a.jsx(q,{value:"autre",children:"Autre"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Urgence *"}),a.jsxs($e,{value:Pt.urgence,onValueChange:L=>Qe({...Pt,urgence:L}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"faible",children:"Faible"}),a.jsx(q,{value:"moyenne",children:"Moyenne"}),a.jsx(q,{value:"haute",children:"Haute"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Description *"}),a.jsx(_a,{value:Pt.description,onChange:L=>Qe({...Pt,description:L.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",rows:4,required:!0,placeholder:"Dcrivez le problme en dtail..."})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Photos (optionnel) - Max 5 photos, 5 MB par photo, 10 MB total"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:L=>{const G=Array.from(L.target.files||[]),he=5-Te.length;if(G.length>he){lt(`Vous ne pouvez ajouter que ${he} photo(s) supplmentaire(s)`,"error");return}const ce=G.slice(0,he),te=5*1024*1024,F=ce.filter(de=>de.size>te?(lt(`L'image ${de.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(de=>({file:de,preview:URL.createObjectURL(de)}));rt([...Te,...F]),L.target.value=""},className:"hidden",id:"signalement-photos-upload"}),a.jsxs("label",{htmlFor:"signalement-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors",children:[a.jsx(Jn,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),Te.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[Te.length," photo",Te.length>1?"s":""," slectionne",Te.length>1?"s":""]})}),a.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto p-2 bg-gray-50 rounded-lg border border-gray-200",children:Te.map((L,G)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:L.preview,alt:`Photo ${G+1}`,className:"w-full h-16 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(L.preview),rt(Te.filter((he,ce)=>ce!==G))},className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-100 shadow-md hover:bg-red-600 transition-colors",children:a.jsx(Ke,{className:"w-3 h-3"})})]},G))})]})]})]}),a.jsxs("div",{className:"p-4 border-t-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white rounded-b-3xl flex gap-3 justify-end flex-shrink-0 sticky bottom-0 z-10 shadow-lg",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:()=>{Te.forEach(L=>URL.revokeObjectURL(L.preview)),rt([]),W(!1)},className:"rounded-xl border-2 border-gray-300 hover:border-gray-400 px-6 py-2.5 font-semibold shadow-sm hover:shadow-md transition-all",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"})," Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white rounded-xl px-6 py-2.5 font-semibold shadow-lg hover:shadow-xl transition-all",children:[a.jsx(ea,{className:"w-4 h-4 mr-2"})," Signaler"]})]})]})]})}),a.jsx(en,{isOpen:A.show,title:"Supprimer l'accident",message:"tes-vous sr de vouloir supprimer cet accident ? Cette action est irrversible.",onConfirm:async()=>{try{await ln.delete(A.id),E({show:!1,id:null}),await ye(n),lt("Accident supprim avec succs","success")}catch(L){console.error("Erreur lors de la suppression:",L),lt("Erreur lors de la suppression: "+(L.message||"Erreur inconnue"),"error"),E({show:!1,id:null})}},onCancel:()=>E({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),xt&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>ze(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:L=>L.stopPropagation(),children:[a.jsx("button",{onClick:()=>ze(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})}),a.jsx("img",{src:xt,alt:"Photo problme",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),a.jsx(Or,{children:dt&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>Ct(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full flex items-center justify-center",onClick:L=>L.stopPropagation(),children:[a.jsx("button",{onClick:()=>Ct(null),className:"absolute top-4 right-4 z-10 w-10 h-10 bg-white hover:bg-gray-100 text-gray-800 rounded-full flex items-center justify-center shadow-lg transition-colors","aria-label":"Fermer",children:a.jsx(Ke,{className:"w-6 h-6"})}),(()=>{let L=dt;if(console.log("Modal - Photo reue, longueur:",L.length,"dbut:",L.substring(0,50)),!L.startsWith("data:image")&&!L.startsWith("http")){let G=L.replace(/^["']+|["']+$/g,"").trim();G=G.replace(/\s/g,""),G.length===255&&console.warn("ATTENTION: Photo tronque  255 caractres! La colonne doit tre en LONGTEXT."),G.length>50&&(L=`data:image/jpeg;base64,${G}`)}return a.jsx("img",{src:L,alt:"Photo ticket essence",className:"max-w-full max-h-[90vh] w-auto h-auto rounded-lg shadow-2xl object-contain",onError:G=>{if(console.error("Erreur chargement image dans modal"),G.target.src,G.target.dataset.retryCount&&parseInt(G.target.dataset.retryCount)>=3){if(G.target.style.display="none",!G.target.parentElement.querySelector(".error-message")){const te=document.createElement("div");te.className="error-message text-white text-center p-4 bg-red-500 rounded-lg";const ie=dt.length,F=ie===255;te.innerHTML=`
                            <p class="font-bold mb-2">Impossible de charger l'image</p>
                            ${F?'<p class="text-sm"> La photo est tronque (255 caractres). Excutez la migration LONGTEXT.</p>':'<p class="text-sm">Le format peut tre corrompu.</p>'}
                            <p class="text-xs mt-2">Longueur: ${ie} caractres</p>
                          `,G.target.parentElement.appendChild(te)}return}const he=parseInt(G.target.dataset.retryCount||"0")+1;G.target.dataset.retryCount=he.toString();let ce=dt;ce=ce.replace(/^data:image\/[^;]+;base64,/,""),ce=ce.replace(/^["']+|["']+$/g,"").trim(),ce=ce.replace(/\s/g,""),console.log(`Tentative ${he} de chargement, base64 length:`,ce.length),he===1&&ce.length>50?G.target.src=`data:image/jpeg;base64,${ce}`:he===2&&ce.length>50?G.target.src=`data:image/png;base64,${ce}`:he===3&&ce.length>50&&(G.target.src=`data:image/webp;base64,${ce}`)},onLoad:G=>{console.log(" Image charge avec succs dans le modal"),G.target.dataset.retryCount&&delete G.target.dataset.retryCount}},L.substring(0,100))})()]})})}),Xe&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Os,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Supprimer le signalement"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cette action est irrversible"})]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-gray-700 mb-4",children:"tes-vous sr de vouloir supprimer ce signalement de problme ? Cette action ne peut pas tre annule."}),Xe&&(()=>{const L=G=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[G]||G;return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["Type: ",L(Xe.type_probleme)]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:Xe.description})]})})(),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(ne,{variant:"outline",onClick:()=>At(null),className:"rounded-xl",children:"Annuler"}),a.jsxs(ne,{onClick:async()=>{try{const L=await ha.delete(Xe.id);if(L.success){const G=(n==null?void 0:n.id)||(n==null?void 0:n.type_id),he=await ha.getByChauffeur(G),ce=(he==null?void 0:he.data)||he||[];Pe(ce),lt("Signalement supprim avec succs","success"),At(null)}else lt("Erreur lors de la suppression: "+(L.message||"Erreur inconnue"),"error")}catch(L){console.error("Erreur suppression signalement:",L),lt("Erreur lors de la suppression: "+(L.message||"Erreur inconnue"),"error")}},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})}),a.jsx(Or,{children:nn&&a.jsx(re.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:`fixed bottom-6 right-6 z-50 max-w-md w-full shadow-2xl rounded-xl overflow-hidden ${et==="success"?"bg-green-500":et==="error"?"bg-red-500":"bg-blue-500"}`,children:a.jsxs("div",{className:"p-4 flex items-center gap-3",children:[et==="success"&&a.jsx(mt,{className:"w-5 h-5 text-white flex-shrink-0"}),et==="error"&&a.jsx(Ue,{className:"w-5 h-5 text-white flex-shrink-0"}),et==="info"&&a.jsx(Ue,{className:"w-5 h-5 text-white flex-shrink-0"}),a.jsx("p",{className:"text-white font-medium flex-1",children:nn}),a.jsx("button",{onClick:()=>Wr(null),className:"text-white hover:text-gray-200 transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})})]})})})]})}function o8(){const[e,t]=H.useState(null);return a.jsx(Kx,{activeTab:e,setActiveTab:t,children:a.jsx(i8,{activeTab:e,setActiveTab:t})})}function l8(){const e=it(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0);N.useEffect(()=>{const h=localStorage.getItem("chauffeur_session");if(!h){e(Re("ChauffeurLogin"));return}const y=JSON.parse(h);r(y);const p=y.id||y.type_id;p&&l(p)},[e]);const l=async h=>{o(!0);try{const y=await ft.getByUser(h,"chauffeur"),x=(Array.isArray(y==null?void 0:y.data)?y.data:Array.isArray(y)?y:[]).sort((v,S)=>{const w=new Date(v.date||v.date_creation||0);return new Date(S.date||S.date_creation||0)-w});s(x)}catch(y){console.error("Erreur lors du chargement des notifications:",y)}finally{o(!1)}},c=async h=>{try{await ft.marquerLue(h),s(y=>y.map(p=>p.id===h?{...p,lue:!0}:p))}catch(y){console.error("Erreur lors de la mise  jour:",y)}},u=async h=>{try{await ft.delete(h),s(y=>y.filter(p=>p.id!==h))}catch(y){console.error("Erreur lors de la suppression:",y)}},f=h=>{if(!h)return"";const y=new Date(h),x=new Date-y,v=Math.floor(x/6e4),S=Math.floor(x/36e5),w=Math.floor(x/864e5);return v<1?" l'instant":v<60?`Il y a ${v} min`:S<24?`Il y a ${S}h`:w<7?`Il y a ${w}j`:y.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},d=(h,y)=>{const p=(y==null?void 0:y.toLowerCase())||"",x=(h==null?void 0:h.toLowerCase())||"";return x==="alerte"||p.includes("accident")||p.includes("urgent")?a.jsx(Ue,{className:"w-5 h-5 text-red-500"}):x==="warning"||p.includes("attention")||p.includes("avertissement")?a.jsx(Os,{className:"w-5 h-5 text-orange-500"}):p.includes("message")||p.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):p.includes("rapport")||p.includes("rapports")?a.jsx(wa,{className:"w-5 h-5 text-purple-500"}):x==="success"||p.includes("confirm")||p.includes("valid")?a.jsx(mt,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},m=(h,y)=>{const p=(h==null?void 0:h.toLowerCase())||"",x=(y==null?void 0:y.toLowerCase())||"";return p==="alerte"||x.includes("accident")||x.includes("urgent")?"bg-red-50 border-red-200":p==="warning"||x.includes("attention")?"bg-orange-50 border-orange-200":p==="success"||x.includes("confirm")||x.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},g=n,j=n.filter(h=>!h.lue).length;return i?a.jsx(Kx,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Kx,{title:"Mes Notifications",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("ChauffeurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-green-600 mb-4 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Vn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:j>0?`${j} notification${j>1?"s":""} non lue${j>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:g.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(Vn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:"Vous n'avez aucune notification pour le moment."})]}):g.map((h,y)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${h.lue?"border-gray-300 opacity-75":"border-green-500"} ${m(h.type,h.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${h.lue?"opacity-50":""}`,children:d(h.type,h.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${h.lue?"line-through":""}`,children:h.titre}),!h.lue&&a.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:h.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:f(h.date||h.date_creation)}),h.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:h.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!h.lue&&a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>c(h.id),className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",title:"Marquer comme lu",children:a.jsx(mt,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>u(h.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})})},h.id))})]})}function c8(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=(l,c)=>{var f;if(((f=l==null?void 0:l.response)==null?void 0:f.status)===401)return"Email ou mot de passe incorrect.";const u=((c==null?void 0:c.message)||(l==null?void 0:l.message)||"").toLowerCase();return u.includes("credentials")||u.includes("invalid")||u.includes("incorrect")?"Email ou mot de passe incorrect.":u.includes("not found")||u.includes("introuvable")?"Aucun compte responsable trouv avec cet email.":u.includes("inactive")||u.includes("inactif")?"Votre compte est inactif. Contactez l'administration.":"Email ou mot de passe incorrect."},o=async l=>{r(!0),s("");try{const c=await ts.login(l.email,l.password,"responsable");c.success?(localStorage.setItem("responsable_session",JSON.stringify(c.user)),ts.saveUser(c.user),e(Re("ResponsableDashboard"))):s(i(null,c))}catch(c){console.error("Erreur de connexion:",c),s(i(c,null))}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Responsable Bus",icon:tt,onLogin:o,showRegister:!1,loading:t,error:n})}function EC({responsable:e,notifications:t=[],onLogout:r,activeTab:n,setActiveTab:s,onCollapseChange:i}){var g,j,h,y;it(),Pn();const[o,l]=N.useState(!1),[c,u]=N.useState(!1);N.useEffect(()=>{i&&i(o)},[o,i]),N.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&u(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const f=[{title:"Dashboard",icon:wv,id:null},{title:"Prsences",icon:ya,id:"presence"},{title:"lves",icon:Ht,id:"eleves"},{title:"Mon Bus",icon:tt,id:"bus"},{title:"Communication",icon:uf,id:"communication"},{title:"Accidents",icon:Ue,id:"accidents"},{title:"Profil",icon:pt,id:"profile"}],d=p=>{s&&s(p.id),window.innerWidth<1024&&u(!1)},m=t.filter(p=>!p.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{typeof window<"u"&&window.innerWidth>=1024?(l(!o),u(!1)):u(!c)},className:"fixed top-4 left-4 z-50 p-2.5 bg-purple-500 text-white rounded-xl shadow-lg hover:bg-purple-600 transition-colors",children:!c&&o?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ke,{className:"w-5 h-5"})}),a.jsx(Or,{children:c&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(re.aside,{initial:!1,animate:{width:o?"80px":"280px",x:c?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-purple-50 to-white
          border-r-2 border-purple-200 shadow-2xl z-40
          flex flex-col
          ${o?"items-center":""}
        `,children:[!o&&e&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-purple-200 mt-16",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",children:((g=e.prenom)==null?void 0:g[0])||((j=e.nom)==null?void 0:j[0])||"R"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-bold text-gray-800 text-base truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.email})]})]})}),o&&e&&a.jsx("div",{className:"mt-16 w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md mx-auto",children:((h=e.prenom)==null?void 0:h[0])||((y=e.nom)==null?void 0:y[0])||"R"}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:f.map((p,x)=>{const v=n===p.id,S=p.icon,w=p.id==="accidents";let b=0;p.id==="communication"&&(b=m);const _=b>0;return a.jsxs(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.05},onClick:()=>d(p),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${v?w?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg":"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":"text-gray-700 hover:bg-purple-100 hover:text-purple-700"}
                    ${o?"justify-center":""}
                  `,title:o?p.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:`w-5 h-5 ${v?"text-white":"text-gray-600"}`}),_&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:b>99?"99+":b})]}),!o&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:p.title})]},p.id||"dashboard")})})}),a.jsx("div",{className:"p-4 border-t border-purple-200 space-y-2",children:a.jsxs(re.button,{onClick:r,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${o?"justify-center":""}
            `,title:o?"Dconnexion":"",children:[a.jsx(ki,{className:"w-5 h-5"}),!o&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${o?"ml-[80px]":"ml-[280px]"}
        `})]})}function u8({eleves:e,presences:t,onTogglePresence:r,selectedDate:n,onDateChange:s,readOnly:i=!1,onNotifyAbsence:o=null}){const l=()=>new Date().getHours()<13?"matin":"soir",[c,u]=N.useState("all"),[f,d]=N.useState(""),[m,g]=N.useState("auto"),h=m!=="auto"?m:l(),[y,p]=N.useState(new Set),[x,v]=N.useState(new Set),[S,w]=N.useState(new Set),b=M=>{const A=t.find(E=>E.eleve_id===M&&E.date===n);return A?{matin:A.present_matin,soir:A.present_soir,hasRecord:!0}:{matin:null,soir:null,hasRecord:!1}},_=e.filter(M=>{const A=c==="all"||M.groupe===c,E=M.nom.toLowerCase().includes(f.toLowerCase())||M.prenom.toLowerCase().includes(f.toLowerCase());return A&&E}),P=async M=>{i||(p(A=>new Set(A).add(M)),setTimeout(async()=>{await r(M,h,!0),setTimeout(()=>{p(E=>{const T=new Set(E);return T.delete(M),T})},500)},300))},C=async M=>{if(i)return;const A=e.find(E=>E.id===M);A&&(v(E=>new Set(E).add(M)),setTimeout(async()=>{await r(M,h,!1),w(T=>new Set(T).add(M)),setTimeout(()=>{v(T=>{const B=new Set(T);return B.delete(M),B}),o&&o(A,h)},500)},300))};return a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(ya,{className:"w-6 h-6"}),"Gestion des Prsences"]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsx(me,{placeholder:"Rechercher un lve...",value:f,onChange:M=>d(M.target.value),className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"}),a.jsxs($e,{value:c,onValueChange:u,children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les groupes"}),a.jsx(q,{value:"A",children:"Groupe A"}),a.jsx(q,{value:"B",children:"Groupe B"})]})]}),a.jsxs($e,{value:m,onValueChange:g,children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Priode"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"auto",children:"Priode actuelle (Auto)"}),a.jsx(q,{value:"matin",children:"Matin"}),a.jsx(q,{value:"soir",children:"Soir"})]})]})]})]}),a.jsxs("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:[!1,a.jsx(Or,{mode:"popLayout",children:a.jsx("div",{className:"space-y-2",children:_.map((M,A)=>{b(M.id);const E=y.has(M.id),T=x.has(M.id);S.has(M.id);let B="white",I="rgb(243 244 246)",D=M.sexe==="Masculin"?"bg-purple-100":"bg-pink-100",O=a.jsx(pt,{className:`w-6 h-6 ${M.sexe==="Masculin"?"text-purple-500":"text-pink-500"}`});return E?(B="rgb(220 252 231)",I="rgb(34 197 94)",D="bg-green-200",O=a.jsx(re.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:a.jsx(ya,{className:"w-6 h-6 text-green-600",strokeWidth:3})})):T&&(B="rgb(254 242 242)",I="rgb(239 68 68)",D="bg-red-200",O=a.jsx(re.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:a.jsx(Ke,{className:"w-6 h-6 text-red-600",strokeWidth:3})})),a.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:E||T?.7:1,x:0,backgroundColor:B,borderColor:I},exit:{opacity:0,x:20,scale:.9,backgroundColor:E?"rgb(220 252 231)":"rgb(254 242 242)"},transition:{duration:.3},className:`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${E?"bg-green-100 border-green-500":T?"bg-red-100 border-red-500":"bg-white border-gray-100 hover:border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${D}`,children:O}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-800",children:[M.nom," ",M.prenom]}),a.jsxs("div",{className:"flex gap-3 text-sm text-gray-500",children:[a.jsx("span",{children:M.classe}),a.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Groupe ",M.groupe]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:(()=>{const $=b(M.id),R=h==="matin"?$.matin:$.soir,Q=R===!0||R===1||R==="1",ae=R===!1||R===0||R==="0";return Q?a.jsxs("div",{className:"px-4 py-2 rounded-xl flex items-center gap-2 bg-green-100 text-green-700 font-bold border border-green-200 shadow-sm cursor-default",children:[a.jsx(ya,{className:"w-4 h-4",strokeWidth:3}),a.jsx("span",{children:"Prsent"}),a.jsx("button",{onClick:()=>C(M.id),className:"ml-2 p-1 hover:bg-green-200 rounded-lg transition-colors text-green-800",title:"Changer en absent",children:a.jsx(ca,{className:"w-3 h-3 rotate-180"})})]}):ae?a.jsxs("div",{className:"px-4 py-2 rounded-xl flex items-center gap-2 bg-red-100 text-red-700 font-bold border border-red-200 shadow-sm cursor-default",children:[a.jsx(Ke,{className:"w-4 h-4",strokeWidth:3}),a.jsx("span",{children:"Absent"}),a.jsx("button",{onClick:()=>P(M.id),className:"ml-2 p-1 hover:bg-red-200 rounded-lg transition-colors text-red-800",title:"Changer en prsent",children:a.jsx(ca,{className:"w-3 h-3 rotate-180"})})]}):a.jsxs(a.Fragment,{children:[a.jsxs(re.button,{onClick:()=>P(M.id),disabled:i||E,className:`px-4 py-2 rounded-xl flex items-center gap-2 transition-all duration-300 font-bold ${i||E?"bg-gray-100 text-gray-400 cursor-default opacity-50":"bg-green-50 text-green-600 border border-green-200 hover:bg-green-600 hover:text-white shadow-sm"}`,children:[a.jsx(ya,{className:"w-4 h-4",strokeWidth:3}),a.jsx("span",{children:"Prsent"})]}),a.jsxs(re.button,{onClick:()=>C(M.id),disabled:i||E||T,className:`px-4 py-2 rounded-xl flex items-center gap-2 transition-all duration-300 font-bold ${i||E||T?"bg-gray-100 text-gray-400 cursor-default opacity-50":"bg-red-50 text-red-600 border border-red-200 hover:bg-red-600 hover:text-white shadow-sm"}`,children:[a.jsx(Ke,{className:"w-4 h-4",strokeWidth:3}),a.jsx("span",{children:"Absent"})]})]})})()})]},M.id)})})}),_.length===0&&e.length>0&&a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(pt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"mb-2",children:"Aucun lve ne correspond  votre recherche"})]}),e.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(pt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun lve assign  ce bus"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:a.jsxs("div",{className:"flex justify-around text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(M=>{const A=b(M.id),E=h==="matin"?A.matin:A.soir;return E===!0||E===1||E==="1"}).length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Prsents"})]}),a.jsx("div",{className:"w-px bg-gray-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-red-500",children:e.filter(M=>{const A=b(M.id),E=h==="matin"?A.matin:A.soir;return E===!1||E===0||E==="0"}).length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Absents"})]}),a.jsx("div",{className:"w-px bg-gray-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-blue-500",children:e.filter(M=>{const A=b(M.id),E=h==="matin"?A.matin:A.soir;return E==null}).length}),a.jsx("p",{className:"text-sm text-gray-500",children:" faire"})]})]})})]})}function d8(){var dr;const e=it(),[t,r]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,j]=N.useState(!1),[h,y]=N.useState(Se(new Date,"yyyy-MM-dd")),[p,x]=N.useState(!0),[v,S]=N.useState(null),[w,b]=N.useState(!1),[_,P]=N.useState("today"),[C,M]=N.useState(""),[A,E]=N.useState("all"),[T,B]=N.useState(""),[I,D]=N.useState("auto"),[O,$]=N.useState(new Set),[R,Q]=N.useState(new Set),[ae,oe]=N.useState([]),[Z,pe]=N.useState(!1),[Ee,Y]=N.useState(null),[J,W]=N.useState({show:!1,id:null}),[X,k]=N.useState(null),[K,z]=N.useState(null),[le,ge]=N.useState({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),[ue,U]=N.useState([]),[xe,Pe]=N.useState(!1),[ve,Ae]=N.useState({destinataire:"tous",bus_id:null,eleve_id:null,titre:"",message:"",type:"info"}),[Ie,we]=N.useState([]),[Te,rt]=N.useState(null),[xt,ze]=N.useState([]),[He,Ze]=N.useState({show:!1,messageId:null}),[dt,Ct]=N.useState({nom:"",prenom:"",email:"",telephone:""});N.useEffect(()=>{t&&Ct({nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",telephone:t.telephone||""})},[t]),N.useEffect(()=>{const V=localStorage.getItem("responsable_session");if(!V){e(Re("ResponsableLogin"));return}const ye=JSON.parse(V);r(ye),Xe(ye)},[e]),N.useEffect(()=>{if(!n||!Te)return;const V=async()=>{try{const L=Se(new Date,"yyyy-MM-dd"),G={},he=[];if(n&&n.chauffeur_id)try{const ce=await ZP.getByChauffeur(n.chauffeur_id),ie=((ce==null?void 0:ce.data)||ce||[]).find(F=>F.date===L);if(ie&&ie.heure_depart_reelle&&Te&&Te.id===n.trajet_id){const F=ie.periode,de=F==="matin"?Te.heure_depart_matin_a:Te.heure_depart_soir_a;if(de){const[be,Oe]=de.split(":").map(Number),[Fe,nt]=ie.heure_depart_reelle.split(":").map(Number),qe=Fe*60+nt-(be*60+Oe);qe>10&&he.push({bus:n,retard:qe,periode:F})}}}catch(ce){console.warn("Erreur vrification retard bus",n.id,ce)}if(he.length>0&&t){for(const ce of he)if(!d.some(ie=>{var F,de;return((F=ie.titre)==null?void 0:F.includes(`Retard Bus ${ce.bus.numero.toString().replace(/^#\s*/,"")}`))&&((de=ie.date)==null?void 0:de.startsWith(L))}))try{const ie=await Kr.getAll(),de=((ie==null?void 0:ie.data)||ie||[]).filter(nt=>nt.bus_id===ce.bus.id&&nt.statut==="Active").map(nt=>nt.eleve_id),be=await Xt.getAll(),Fe=((be==null?void 0:be.data)||be||[]).filter(nt=>de.includes(nt.id)&&nt.tuteur_id).map(nt=>ft.create({destinataire_id:nt.tuteur_id,destinataire_type:"tuteur",titre:`Retard Bus ${ce.bus.numero.toString().replace(/^#\s*/,"")}`,message:`Le bus ${ce.bus.numero.toString().replace(/^#\s*/,"")} a un retard de ${ce.retard} minutes pour le trajet ${ce.periode==="matin"?"du matin":"du soir"}.`,type:"alerte",date:new Date().toISOString()}));await Promise.all(Fe)}catch(ie){console.error("Erreur envoi notification retard:",ie)}}}catch(L){console.error("Erreur vrification retards:",L)}};V();const ye=setInterval(V,5*60*1e3);return()=>clearInterval(ye)},[n,Te,t]);const Xe=async V=>{try{let ye=V;if(V.type_id)try{const F=await xa.getById(V.type_id);ye=(F==null?void 0:F.data)||F||V,r(ye)}catch(F){console.warn("Erreur chargement donnes responsable:",F)}const L=await wr.getAll(),G=(L==null?void 0:L.data)||L||[],he=V.type_id||V.id,ce=G.find(F=>F.responsable_id===he);if(s(ce||null),console.log("Responsable ID:",he),console.log("Bus trouv:",ce),ce){if(ce.chauffeur_id)try{const F=await Vr.getById(ce.chauffeur_id),de=(F==null?void 0:F.data)||F;o(de)}catch(F){console.warn("Chauffeur non trouv:",F)}try{console.log("Chargement lves pour bus_id:",ce.id);const F=await Xt.getByBus(ce.id);console.log("Rponse lves:",F);const de=(F==null?void 0:F.data)||F||[];console.log("lves chargs:",de),c(Array.isArray(de)?de:[])}catch(F){console.error("Erreur chargement lves:",F),c([])}}else console.warn("Aucun bus trouv pour le responsable_id:",he),c([]);try{const F=await za.getByDate(h,ce==null?void 0:ce.id),be=((F==null?void 0:F.data)||F||[]).filter(Oe=>!Oe.bus_id||Oe.bus_id===ce.id||!Oe.responsable_id||Oe.responsable_id===he);f(be)}catch(F){console.warn("Prsences non disponibles:",F),f([])}const te=await ft.getByUser(he,"responsable"),ie=(te==null?void 0:te.data)||te||[];m(ie.sort((F,de)=>new Date(de.date||0)-new Date(F.date||0)));try{const F=await ft.getSentByResponsable(he),de=(F==null?void 0:F.data)||F||[];ze(de.sort((be,Oe)=>new Date(Oe.date||0)-new Date(be.date||0)))}catch(F){console.warn("Erreur chargement messages envoys:",F),ze([])}try{console.log("Chargement accidents pour responsable_id:",he);const F=await ln.getByResponsable(he);console.log("Rponse accidents:",F);const de=(F==null?void 0:F.data)||F||[];console.log("Accidents chargs:",de),oe(Array.isArray(de)?de.sort((be,Oe)=>new Date(Oe.date||0)-new Date(be.date||0)):[])}catch(F){console.error("Erreur chargement accidents:",F),oe([])}if(ce&&ce.trajet_id)try{const F=await ra.getById(ce.trajet_id),de=(F==null?void 0:F.data)||F;rt(de)}catch(F){console.warn("Erreur chargement trajet:",F)}try{const F=await ri.getAll(),de=(F==null?void 0:F.data)||F||[];we(de)}catch(F){console.warn("Erreur chargement tuteurs:",F)}}catch(ye){console.error("Erreur lors du chargement:",ye)}x(!1)},At=()=>{localStorage.removeItem("responsable_session"),e(Re("Home"))},[ot,rr]=N.useState(null),[nn,Wr]=N.useState("success"),et=(V,ye="success")=>{rr(V),Wr(ye),setTimeout(()=>{rr(null)},4e3)},Da=(V,ye=1200,L=1200,G=.7)=>new Promise(he=>{const ce=new FileReader;ce.onload=te=>{const ie=new Image;ie.onload=()=>{const F=document.createElement("canvas");let de=ie.width,be=ie.height;de>be?de>ye&&(be=be*ye/de,de=ye):be>L&&(de=de*L/be,be=L),F.width=de,F.height=be,F.getContext("2d").drawImage(ie,0,0,de,be);const Fe=F.toDataURL("image/jpeg",G);he({data:Fe,name:V.name,type:"image/jpeg"})},ie.src=te.target.result},ce.readAsDataURL(V)}),lt=V=>{if(!V)return"";try{const ye=new Date(V);return Se(ye,"yyyy-MM-dd")}catch{return V.split("T")[0]||V.split(" ")[0]}},Mt=()=>{const V=new Date;switch(V.setHours(0,0,0,0),_){case"yesterday":return Se(Xs(V,1),"yyyy-MM-dd");case"dayBefore":return Se(Xs(V,2),"yyyy-MM-dd");case"lastMonth":const ye=Vo(V,1);return Se(mf(ye),"yyyy-MM-dd");case"custom":return C||Se(V,"yyyy-MM-dd");default:return Se(V,"yyyy-MM-dd")}},Ar=N.useMemo(()=>!l||l.length===0?[]:l.filter(V=>{const ye=A==="all"||A===""||V.groupe&&V.groupe.toString().toUpperCase()===A.toString().toUpperCase(),L=T.toLowerCase().trim(),G=L===""||V.nom&&V.nom.toLowerCase().includes(L)||V.prenom&&V.prenom.toLowerCase().includes(L)||V.nom&&V.prenom&&`${V.prenom} ${V.nom}`.toLowerCase().includes(L);return ye&&G}),[l,A,T]);N.useEffect(()=>{v==="eleves"&&n&&t?(async()=>{try{const ye=Mt(),L=(t==null?void 0:t.type_id)||(t==null?void 0:t.id);console.log(" Chargement prsences pour date:",ye,"bus:",n.id,"filtre:",_);const G=await za.getByDate(ye,n==null?void 0:n.id),he=(G==null?void 0:G.data)||G||[];console.log(" Prsences reues pour date",ye,":",he.length,"prsences");const ce=he.map(te=>{const ie=lt(te.date);return{...te,date_normalized:ie,date:te.date}}).filter(te=>{const ie=!te.bus_id||te.bus_id===n.id,F=!te.responsable_id||te.responsable_id===L,de=te.date_normalized||lt(te.date),be=de===ye;return be||console.log(" Date ne correspond pas:",{presenceDate:te.date,normalized:de,effectiveDate:ye,eleve_id:te.eleve_id}),ie&&F&&be});console.log(" Prsences filtres pour date",ye,":",ce.length,"prsences"),f(ce)}catch(ye){console.error(" Erreur chargement prsences pour date filtre:",ye),f([])}})():v==="eleves"&&!n&&f([])},[_,C,v,n==null?void 0:n.id,t==null?void 0:t.type_id,t==null?void 0:t.id,Mt,lt]);const ms=({dateFilter:V,setDateFilter:ye,customDate:L,setCustomDate:G,groupFilter:he,setGroupFilter:ce,searchTerm:te,setSearchTerm:ie,periodeFilter:F,setPeriodeFilter:de})=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsx(me,{placeholder:"Rechercher un lve...",value:te||"",onChange:be=>{ie(be.target.value)},className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"}),a.jsxs($e,{value:V,onValueChange:be=>{ye(be),be!=="custom"&&G("")},children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Date"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"today",children:"Aujourd'hui"}),a.jsx(q,{value:"yesterday",children:"Hier"}),a.jsx(q,{value:"dayBefore",children:"Avant-hier"}),a.jsx(q,{value:"lastMonth",children:"Mois dernier"}),a.jsx(q,{value:"custom",children:"Jour spcifique"})]})]}),a.jsxs($e,{value:he,onValueChange:be=>{ce(be)},children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les groupes"}),a.jsx(q,{value:"A",children:"Groupe A"}),a.jsx(q,{value:"B",children:"Groupe B"})]})]})]}),V==="custom"&&a.jsxs("div",{className:"relative",children:[a.jsx(Qr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-purple-600 z-10"}),a.jsx(me,{type:"date",value:L||"",onChange:be=>{G(be.target.value)},className:"pl-10 bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"})]})]}),ee=async V=>{try{await ft.marquerLue(V),m(ye=>ye.map(L=>L.id===V?{...L,lue:!0}:L))}catch(ye){console.error("Erreur lors de la mise  jour:",ye)}},Ce=async()=>{if(!t)return;const V=t.id||t.type_id;if(V)try{await ft.deleteAll(V,"responsable"),m([])}catch(ye){console.error("Erreur lors de la suppression de toutes les notifications:",ye)}},vt=async(V,ye,L)=>{try{const G=u.find(ce=>ce.eleve_id===V&&ce.date===h);let he;if(G){const ce={...G,[ye==="matin"?"present_matin":"present_soir"]:L},te=await za.marquer(ce);he=(te==null?void 0:te.data)||te,f(ie=>ie.map(F=>F.id===(G.id||G.presence_id)?{...F,...he}:F))}else{const ce={eleve_id:V,date:h,present_matin:ye==="matin"?L:null,present_soir:ye==="soir"?L:null,bus_id:n==null?void 0:n.id,responsable_id:(t==null?void 0:t.type_id)||(t==null?void 0:t.id)},te=await za.marquer(ce);he=(te==null?void 0:te.data)||te,f(ie=>[...ie,he])}if(!L){const ce=l.find(te=>te.id===V);if(ce&&ce.tuteur_id)try{await ft.create({destinataire_id:ce.tuteur_id,destinataire_type:"tuteur",titre:"Absence signale",message:`${ce.prenom} ${ce.nom} a t marqu(e) absent(e) le ${Se(new Date(h),"dd/MM/yyyy")} (${ye}).`,type:"alerte",date:new Date().toISOString()})}catch(te){console.warn("Erreur envoi notification:",te)}}}catch(G){console.error("Erreur lors de la modification de prsence:",G),et("Erreur lors de la modification de prsence: "+(G.message||"Erreur inconnue"),"error")}},Pt=async(V,ye="matin")=>{try{if(!V.tuteur_id){et("Aucun tuteur trouv pour cet lve","error");return}S("communication"),Pe(!0),Ae({destinataire:"eleve",bus_id:(n==null?void 0:n.id)||null,eleve_id:V.id,titre:`Absence de ${V.prenom} ${V.nom}`,message:`Bonjour,

Je vous informe que ${V.prenom} ${V.nom} a t marqu(e) absent(e) le ${Se(new Date(h),"dd/MM/yyyy")} (${ye==="matin"?"matin":"soir"}).

Veuillez nous contacter si vous avez des questions.

Cordialement.`,type:"alerte"})}catch(L){console.error("Erreur lors de la redirection:",L),et("Erreur lors de la redirection vers Communication","error")}};d.filter(V=>!V.lue).length;const Qe=(i==null?void 0:i.nombre_accidents)||0;return p?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-purple-50",children:[a.jsx(EC,{responsable:t,notifications:d,onLogout:At,activeTab:v,setActiveTab:S,onCollapseChange:b}),a.jsx("main",{className:`min-h-screen p-4 md:p-8 pt-20 lg:pt-8 transition-all duration-300 ${w?"lg:ml-[80px]":"lg:ml-[280px]"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Ht,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",t==null?void 0:t.prenom," ",t==null?void 0:t.nom]}),a.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email})]})]})}),v===null&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(na,{title:"Mon Bus",value:n!=null&&n.numero?n.numero.toString().replace(/^#\s*/,""):"-",icon:tt,color:"purple"}),a.jsx(na,{title:"lves",value:l.length,icon:Ht,color:"purple"}),a.jsx(na,{title:"Accidents chauffeur",value:Qe,icon:Ue,color:Qe>=3?"red":"purple"}),a.jsx(na,{title:"Mon Salaire",value:`${(t==null?void 0:t.salaire)||0} DH`,icon:cf,color:"purple"})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(tt,{className:"w-6 h-6 text-purple-500"}),"Vue d'ensemble"]}),n&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informations du Bus"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Numro:"}),a.jsx("span",{className:"font-bold text-purple-700",children:n.numero.toString().replace(/^#\s*/,"")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Marque:"}),a.jsx("span",{className:"font-semibold",children:n.marque})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Modle:"}),a.jsx("span",{className:"font-semibold",children:n.modele})]}),i&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Chauffeur:"}),a.jsxs("span",{className:"font-semibold",children:[i.prenom," ",i.nom]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informations Personnelles"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Nom complet:"}),a.jsxs("span",{className:"font-semibold",children:[t==null?void 0:t.prenom," ",t==null?void 0:t.nom]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone:"}),a.jsx("span",{className:"font-semibold",children:t==null?void 0:t.telephone})]}),(t==null?void 0:t.zone_responsabilite)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Zone:"}),a.jsx("span",{className:"font-semibold",children:t.zone_responsabilite})]})]})]})]})]})]}),v==="profile"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(Ht,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500",children:"Modifiez vos informations personnelles"})]}),a.jsxs("form",{onSubmit:async V=>{V.preventDefault();try{if(!(t!=null&&t.id)&&!(t!=null&&t.type_id)){et("Erreur: ID responsable non trouv","error");return}const ye=(t==null?void 0:t.id)||(t==null?void 0:t.type_id),L={nom:dt.nom,prenom:dt.prenom,email:dt.email,telephone:dt.telephone};await xa.update(ye,L);const G=localStorage.getItem("responsable_session");if(G){const he=JSON.parse(G);await Xe(he)}et("Profil mis  jour avec succs","success")}catch(ye){console.error("Erreur mise  jour profil:",ye),et("Erreur lors de la mise  jour: "+(ye.message||"Erreur inconnue"),"error")}},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(se,{htmlFor:"nom",children:"Nom"}),a.jsx(me,{id:"nom",value:dt.nom,onChange:V=>Ct({...dt,nom:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"prenom",children:"Prnom"}),a.jsx(me,{id:"prenom",value:dt.prenom,onChange:V=>Ct({...dt,prenom:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"email",children:"Email"}),a.jsx(me,{id:"email",type:"email",value:dt.email,onChange:V=>Ct({...dt,email:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{htmlFor:"telephone",children:"Tlphone"}),a.jsx(me,{id:"telephone",value:dt.telephone,onChange:V=>Ct({...dt,telephone:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs(ne,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl py-6 text-lg font-semibold shadow-lg flex items-center justify-center gap-3",children:[a.jsx(rs,{className:"w-5 h-5"}),"Enregistrer les modifications"]})]})]}),v==="presence"&&a.jsx(u8,{eleves:l,presences:u,onTogglePresence:vt,selectedDate:h,onDateChange:y,onNotifyAbsence:Pt}),v==="eleves"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[a.jsx(Ht,{className:"w-6 h-6"}),"Liste des lves"]}),a.jsx(ms,{dateFilter:_,setDateFilter:P,customDate:C,setCustomDate:M,groupFilter:A,setGroupFilter:E,searchTerm:T,setSearchTerm:B,periodeFilter:I,setPeriodeFilter:D})]}),(()=>{const V=Mt();(()=>{const ie=new Date().getHours()<13?"matin":"soir";return I==="auto"?ie:I})();const L=lt(V),G=Ar.filter(ce=>{const te=u.find(ie=>ie.eleve_id===ce.id&&lt(ie.date)===L);return te?te.present_matin===!0||te.present_matin===1||te.present_matin==="1":!1}),he=Ar.filter(ce=>{const te=u.find(ie=>ie.eleve_id===ce.id&&lt(ie.date)===L);return te?te.present_soir===!0||te.present_soir===1||te.present_soir==="1":!1});return a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-700",children:Ar.length}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Total"})]}),a.jsx("div",{className:"w-px h-8 bg-gray-200"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xl font-bold text-green-600",children:G.length}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Prsents Matin"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xl font-bold text-green-700",children:he.length}),a.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Prsents Soir"})]})]})]}),a.jsx("div",{className:"text-sm font-semibold text-purple-600",children:Se(new Date(V),"dd MMMM yyyy",{locale:Jt})})]})})})(),a.jsxs("div",{className:"divide-y divide-gray-100 max-h-[500px] overflow-y-auto",children:[Ar.map(V=>{const ye=Mt(),L=lt(ye),G=u.find(he=>{const ce=lt(he.date);return he.eleve_id===V.id&&ce===L});return a.jsx(re.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 hover:bg-purple-50/5 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center shadow-sm",children:a.jsx(pt,{className:"w-7 h-7 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[V.nom," ",V.prenom]}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[a.jsx("span",{className:"text-sm text-gray-600",children:V.classe||"N/A"}),a.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Groupe ",V.groupe||"N/A"]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Matin"}),a.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-bold border flex items-center gap-2 ${!G||G.present_matin===null||G.present_matin===void 0?"bg-gray-50 text-gray-400 border-gray-200":G.present_matin===!0||G.present_matin===1||G.present_matin==="1"?"bg-green-50 text-green-600 border-green-200":"bg-red-50 text-red-600 border-red-200"}`,children:!G||G.present_matin===null||G.present_matin===void 0?a.jsx(ia,{className:"w-3 h-3"}):G.present_matin===!0||G.present_matin===1||G.present_matin==="1"?a.jsx(ya,{className:"w-3 h-3",strokeWidth:3}):a.jsx(Ke,{className:"w-3 h-3",strokeWidth:3})})]}),a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-400",children:"Soir"}),a.jsx("div",{className:`px-3 py-1.5 rounded-lg text-xs font-bold border flex items-center gap-2 ${!G||G.present_soir===null||G.present_soir===void 0?"bg-gray-50 text-gray-400 border-gray-200":G.present_soir===!0||G.present_soir===1||G.present_soir==="1"?"bg-green-50 text-green-600 border-green-200":"bg-red-50 text-red-600 border-red-200"}`,children:!G||G.present_soir===null||G.present_soir===void 0?a.jsx(ia,{className:"w-3 h-3"}):G.present_soir===!0||G.present_soir===1||G.present_soir==="1"?a.jsx(ya,{className:"w-3 h-3",strokeWidth:3}):a.jsx(Ke,{className:"w-3 h-3",strokeWidth:3})})]})]})]})},V.id)}),Ar.length===0&&a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Ht,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:"Aucun lve trouv"}),a.jsx("p",{className:"text-sm mt-2",children:"Essayez de modifier vos critres de recherche"})]})]})]}),v==="bus"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-purple-500"}),"Mon Bus"]}),n?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-5xl font-bold text-purple-600",children:n.numero.toString().replace(/^#\s*/,"")}),a.jsxs("p",{className:"text-gray-500 mt-2",children:[n.marque," ",n.modele]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[n.capacite," places"]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Places occupes"}),a.jsx("span",{className:"font-medium",children:l.length})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-500",children:"Statut"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.statut==="Actif"?"bg-purple-100 text-purple-700":"bg-red-100 text-red-700"}`,children:n.statut})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun bus assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(No,{className:"w-5 h-5 text-purple-500"}),"Mon Trajet"]}),Te?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Trajet"}),a.jsx("p",{className:"text-xl font-bold text-gray-800",children:Te.nom})]}),Te.zones&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Zones desservies"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(Te.zones)?Te.zones:JSON.parse(Te.zones||"[]")).map((V,ye)=>a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:V},ye))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe A - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[Te.heure_depart_matin_a," - ",Te.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe A - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[Te.heure_depart_soir_a," - ",Te.heure_arrivee_soir_a]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe B - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[Te.heure_depart_matin_b," - ",Te.heure_arrivee_matin_b]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe B - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[Te.heure_depart_soir_b," - ",Te.heure_arrivee_soir_b]})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun trajet assign"})]}),n&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:col-span-2",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-purple-500"}),"Chauffeur"]}),i?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center",children:a.jsx(pt,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[i.prenom," ",i.nom]}),a.jsx("p",{className:"text-gray-500",children:i.telephone}),a.jsx("p",{className:"text-gray-400 text-sm",children:i.email})]}),a.jsxs("div",{className:"ml-auto",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Accidents:"}),a.jsxs("span",{className:`font-bold ${i.nombre_accidents>=3?"text-red-500":"text-purple-500"}`,children:[i.nombre_accidents," / 3"]})]}),i.nombre_accidents>=3&&a.jsxs("div",{className:"mt-2 bg-red-50 border border-red-200 rounded-xl p-2 text-red-700 text-xs",children:[a.jsx(Ue,{className:"w-4 h-4 inline mr-1"}),"Attention: 3 accidents = licenciement + amende 1000 DH"]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-4",children:"Aucun chauffeur assign"})]})]}),v==="communication"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(uf,{className:"w-6 h-6 text-purple-500"}),"Communication avec les Parents"]}),a.jsxs(ne,{onClick:()=>Pe(!0),className:"bg-purple-500 hover:bg-purple-600 text-white rounded-xl",children:[a.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Nouveau message"]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-purple-800",children:[a.jsx("strong",{children:" Astuce:"})," Envoyez des notifications groupes pour informer tous les parents d'un bus, ou des messages personnaliss  un parent spcifique."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Messages envoys"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:xt.length})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Parents notifis"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:Ie.length})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"lves concerns"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.length})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Historique des messages"}),a.jsx("div",{className:"space-y-3",children:xt.length>0?xt.slice(0,20).map(V=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 pr-12",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:V.titre}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 whitespace-pre-wrap",children:V.message}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-800 mb-2",children:"Destinataire :"}),V.tuteur_nom||V.tuteur_prenom?a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[(V.tuteur_prenom||V.tuteur_nom)&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(pt,{className:"w-4 h-4 text-purple-600"}),a.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[V.tuteur_prenom||""," ",V.tuteur_nom||""]})]}),V.tuteur_telephone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wi,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:V.tuteur_telephone})]}),V.tuteur_email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ui,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:V.tuteur_email})]})]}):a.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-gray-500 italic",children:"Informations du destinataire non disponibles"})})]})]}),a.jsx("button",{onClick:()=>Ze({show:!0,messageId:V.id}),className:"absolute top-4 right-4 p-2 hover:bg-red-100 rounded-lg text-red-600 hover:text-red-700 transition-colors",title:"Supprimer ce message",children:a.jsx(Tt,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Se(new Date(V.date||new Date),"dd MMMM yyyy  HH:mm")})]},V.id)):a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(uf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun message envoy"}),a.jsx("p",{className:"text-xs mt-1",children:"Les messages que vous envoyez aux parents apparatront ici"})]})})]})]})]})]}),v==="accidents"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-red-50 to-rose-50",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6 text-red-500"}),"Historique des Accidents",a.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["(",ae.length,")"]})]}),a.jsxs(ne,{onClick:()=>pe(!0),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Dclarer un accident"]})]}),ae.length===0?a.jsx("div",{className:"p-12 text-center",children:a.jsxs(re.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[a.jsx(mt,{className:"w-16 h-16 mx-auto text-purple-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun accident enregistr"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Continuez  tre vigilant !"})]})}):a.jsx("div",{className:"p-6 space-y-4",children:a.jsx(Or,{children:ae.map((V,ye)=>{let L=[];try{if(V.photos){if(Array.isArray(V.photos))L=V.photos;else if(typeof V.photos=="string"&&V.photos.trim()!=="")if(V.photos.trim().startsWith("[")||V.photos.trim().startsWith("{")){const te=JSON.parse(V.photos);Array.isArray(te)?L=te:te&&typeof te=="object"&&Array.isArray(te.photos)&&(L=te.photos)}else V.photos.startsWith("data:image")&&(L=[V.photos])}L=L.map(te=>typeof te=="string"?te.startsWith("data:image")||te.startsWith("http")?te:null:te&&typeof te=="object"&&(te.data||te.src||te.url||te.base64)||null).filter(te=>te&&te.trim()!=="")}catch(te){console.error("Erreur parsing photos:",te),L=[]}const G=K===V.id,he={Grave:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",badge:"bg-red-100 text-red-700",icon:"text-red-500"},Moyenne:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700",badge:"bg-orange-100 text-orange-700",icon:"text-orange-500"},Lgre:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",badge:"bg-purple-100 text-purple-700",icon:"text-purple-500"}},ce=he[V.gravite]||he.Lgre;return a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:ye*.05},className:`${ce.bg} ${ce.border} border-2 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden`,children:a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${ce.bg} ${ce.icon}`,children:a.jsx(Os,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ce.badge} border ${ce.border}`,children:V.gravite}),V.statut&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V.statut==="Trait"?"bg-green-100 text-green-700":V.statut==="En cours"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:V.statut})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[a.jsx(ia,{className:"w-4 h-4"}),a.jsxs("span",{children:[V.date?Se(new Date(V.date),"dd MMMM yyyy",{locale:Jt}):"Date inconnue",V.heure&&`  ${V.heure}`]})]})]})]}),a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>z(G?null:V.id),className:"text-gray-500 hover:text-gray-700",children:G?a.jsx(Ke,{className:"w-4 h-4"}):a.jsx(wa,{className:"w-4 h-4"})})]}),a.jsx("p",{className:`font-semibold ${ce.text} mb-4 text-base leading-relaxed`,children:V.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[V.lieu&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ut,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Lieu"}),a.jsx("p",{className:"font-medium text-gray-800",children:V.lieu})]})]}),V.bus_numero&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(tt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Bus"}),a.jsx("p",{className:"font-medium text-gray-800",children:V.bus_numero})]})]}),V.nombre_eleves!==null&&V.nombre_eleves!==void 0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ht,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"lves"}),a.jsx("p",{className:"font-medium text-gray-800",children:V.nombre_eleves})]})]}),V.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ue,{className:"w-4 h-4 text-red-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Blesss"}),a.jsx("p",{className:"font-medium text-red-600",children:V.nombre_blesses})]})]})]}),a.jsx(Or,{children:G&&a.jsx(re.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[V.degats&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(wa,{className:"w-4 h-4 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Dgts: "}),a.jsx("span",{className:"font-medium text-gray-800",children:V.degats})]})]}),V.chauffeur_nom&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(pt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Chauffeur: "}),a.jsxs("span",{className:"font-medium text-gray-800",children:[V.chauffeur_prenom," ",V.chauffeur_nom]})]})]}),V.eleves_concernees&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Ht,{className:"w-4 h-4 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"lves concerns: "}),a.jsx("span",{className:"font-medium text-gray-800",children:V.eleves_concernees})]})]})]})})}),L.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Jn,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:["Photos (",L.length,")"]})]})}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:L.map((te,ie)=>{const F=typeof te=="string"?te:(te==null?void 0:te.data)||(te==null?void 0:te.src)||te;return F?a.jsx(re.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>k(F),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 group-hover:border-purple-400 transition-colors",children:[a.jsx("img",{src:F,alt:`Photo accident ${ie+1}`,className:"w-full h-24 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(Di,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},ie):null})})]}),a.jsxs("div",{className:"mt-4 flex gap-2 justify-end pt-4 border-t border-gray-200",children:[a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{var te,ie;Y(V),ge({date:V.date?Se(new Date(V.date),"yyyy-MM-dd"):Se(new Date,"yyyy-MM-dd"),heure:V.heure||Se(new Date,"HH:mm"),lieu:V.lieu||"",description:V.description||"",degats:V.degats||"",gravite:V.gravite||"Lgre",nombre_eleves:((te=V.nombre_eleves)==null?void 0:te.toString())||"",nombre_blesses:((ie=V.nombre_blesses)==null?void 0:ie.toString())||"0"}),L.length>0?U(L.map((F,de)=>({preview:typeof F=="string"?F:(F==null?void 0:F.data)||(F==null?void 0:F.src)||F,file:null,id:`existing-${de}`}))):U([]),pe(!0)},className:"rounded-xl text-purple-600 hover:text-purple-700 hover:bg-purple-50",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>W({show:!0,id:V.id}),className:"rounded-xl text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})},V.id)})})})]}),a.jsx(en,{isOpen:J.show,title:"Supprimer l'accident",message:"tes-vous sr de vouloir supprimer cet accident ? Cette action est irrversible.",onConfirm:async()=>{try{await ln.delete(J.id),W({show:!1,id:null});const V=localStorage.getItem("responsable_session");if(V){const ye=JSON.parse(V);await Xe(ye)}else await Xe(t);et("Accident supprim avec succs","success")}catch(V){console.error("Erreur lors de la suppression:",V),et("Erreur lors de la suppression: "+(V.message||"Erreur inconnue"),"error"),W({show:!1,id:null})}},onCancel:()=>W({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),X&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>k(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:V=>V.stopPropagation(),children:[a.jsx("button",{onClick:()=>k(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})}),a.jsx("img",{src:X,alt:"Photo accident",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),Z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6"}),Ee?"Modifier un Accident":"Dclarer un Accident"]}),a.jsx("button",{type:"button",onClick:()=>{ue.forEach(V=>{V.preview&&V.preview.startsWith("blob:")&&URL.revokeObjectURL(V.preview)}),U([]),pe(!1),Y(null)},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async V=>{V.preventDefault();try{const ye=ue.reduce((Fe,nt)=>Fe+nt.file.size,0),L=10*1024*1024;if(ye>L){et("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const G=ue.filter(Fe=>Fe.file),he=ue.filter(Fe=>!Fe.file&&Fe.preview);let ce=[];G.length>0&&(ce=await Promise.all(G.map(Fe=>Da(Fe.file))));const te=[...he.map(Fe=>Fe.preview),...ce.map(Fe=>Fe.data)].filter(Boolean),ie=localStorage.getItem("responsable_session"),F=ie?JSON.parse(ie):t,de=(F==null?void 0:F.type_id)||(F==null?void 0:F.id)||(t==null?void 0:t.type_id)||(t==null?void 0:t.id)||null,be={date:le.date,heure:le.heure,bus_id:(n==null?void 0:n.id)||null,responsable_id:de,lieu:le.lieu,description:le.description,degats:le.degats||null,gravite:le.gravite,nombre_eleves:le.nombre_eleves?parseInt(le.nombre_eleves):null,nombre_blesses:le.nombre_blesses?parseInt(le.nombre_blesses):0,blesses:parseInt(le.nombre_blesses)>0,photos:te.length>0?te:null};Ee?(await ln.update(Ee.id,be),et("Accident modifi avec succs","success")):(await ln.create(be),et("Accident dclar avec succs","success")),ue.forEach(Fe=>{Fe.preview&&Fe.preview.startsWith("blob:")&&URL.revokeObjectURL(Fe.preview)}),pe(!1),Y(null),U([]),ge({date:Se(new Date,"yyyy-MM-dd"),heure:Se(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"});const Oe=localStorage.getItem("responsable_session");if(Oe){const Fe=JSON.parse(Oe);await Xe(Fe)}else await Xe(t)}catch(ye){console.error("Erreur dclaration accident:",ye),et("Erreur lors de la dclaration: "+(ye.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Date *"}),a.jsx(me,{type:"date",value:le.date,onChange:V=>ge({...le,date:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Heure *"}),a.jsx(me,{type:"time",value:le.heure,onChange:V=>ge({...le,heure:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Lieu *"}),a.jsx(me,{value:le.lieu,onChange:V=>ge({...le,lieu:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",placeholder:"Adresse de l'accident",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Gravit *"}),a.jsxs($e,{value:le.gravite,onValueChange:V=>ge({...le,gravite:V}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Lgre",children:"Lgre"}),a.jsx(q,{value:"Moyenne",children:"Moyenne"}),a.jsx(q,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Nombre d'lves dans le bus"}),a.jsx(me,{type:"number",value:le.nombre_eleves,onChange:V=>ge({...le,nombre_eleves:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",min:"0",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Nombre de blesss"}),a.jsx(me,{type:"number",value:le.nombre_blesses,onChange:V=>ge({...le,nombre_blesses:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",min:"0",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Description *"}),a.jsx(_a,{value:le.description,onChange:V=>ge({...le,description:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:4,placeholder:"Dcrivez l'accident en dtail...",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Dgts"}),a.jsx(_a,{value:le.degats,onChange:V=>ge({...le,degats:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:2,placeholder:"Dcrivez les dgts matriels..."})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Photos (optionnel - max 5 photos, 5 MB chacune)"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:V=>{const ye=Array.from(V.target.files),L=5-ue.length;if(L<=0){et("Vous ne pouvez ajouter que 5 photos maximum","error"),V.target.value="";return}const G=ye.slice(0,L),he=5*1024*1024,te=G.filter(ie=>ie.size>he?(et(`L'image ${ie.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(ie=>({file:ie,preview:URL.createObjectURL(ie)}));U([...ue,...te]),V.target.value=""},className:"hidden",id:"accident-photos-upload"}),a.jsxs("label",{htmlFor:"accident-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[a.jsx(Jn,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),ue.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-3 gap-3",children:ue.map((V,ye)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:V.preview,alt:`Photo ${ye+1}`,className:"w-full h-24 object-cover rounded-xl border border-gray-200"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(V.preview),U(ue.filter((L,G)=>G!==ye))},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Tt,{className:"w-4 h-4"})})]},ye))})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:()=>{ue.forEach(V=>{V.preview&&V.preview.startsWith("blob:")&&URL.revokeObjectURL(V.preview)}),U([]),pe(!1),Y(null)},className:"rounded-xl border-purple-500 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Ue,{className:"w-4 h-4 mr-2"}),Ee?"Modifier l'accident":"Dclarer l'accident"]})]})]})]})}),xe&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(uf,{className:"w-6 h-6"}),"Envoyer un Message aux Parents"]}),a.jsx("button",{onClick:()=>Pe(!1),className:"text-white hover:text-purple-100 transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async V=>{V.preventDefault();try{let ye=[];if(ve.destinataire==="tous"){const F=await Kr.getAll(),be=((F==null?void 0:F.data)||F||[]).filter(nt=>nt.bus_id===(n==null?void 0:n.id)&&nt.statut==="Active").map(nt=>nt.eleve_id),Oe=await Xt.getAll();ye=((Oe==null?void 0:Oe.data)||Oe||[]).filter(nt=>be.includes(nt.id)&&nt.tuteur_id).map(nt=>nt.tuteur_id)}else if(ve.destinataire==="bus"&&n){const F=await Kr.getAll(),be=((F==null?void 0:F.data)||F||[]).filter(nt=>nt.bus_id===n.id&&nt.statut==="Active").map(nt=>nt.eleve_id),Oe=await Xt.getAll();ye=((Oe==null?void 0:Oe.data)||Oe||[]).filter(nt=>be.includes(nt.id)&&nt.tuteur_id).map(nt=>nt.tuteur_id)}else if(ve.destinataire==="eleve"&&ve.eleve_id){const F=l.find(de=>de.id===parseInt(ve.eleve_id));F&&F.tuteur_id&&(ye=[F.tuteur_id])}const L=ye.map(F=>ft.create({destinataire_id:F,destinataire_type:"tuteur",titre:ve.titre,message:ve.message,type:ve.type,date:new Date().toISOString()}));await Promise.all(L),et(`Message envoy  ${ye.length} parent(s) avec succs !`,"success"),Pe(!1),Ae({destinataire:"tous",bus_id:null,eleve_id:null,titre:"",message:"",type:"info"});const G=(t==null?void 0:t.type_id)||(t==null?void 0:t.id),he=await ft.getByUser(G,"responsable"),ce=(he==null?void 0:he.data)||he||[];m(ce.sort((F,de)=>new Date(de.date||0)-new Date(F.date||0)));const te=await ft.getSentByResponsable(G),ie=(te==null?void 0:te.data)||te||[];ze(ie.sort((F,de)=>new Date(de.date||0)-new Date(F.date||0)))}catch(ye){console.error("Erreur envoi message:",ye),et("Erreur lors de l'envoi: "+(ye.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Destinataire *"}),a.jsxs($e,{value:ve.destinataire,onValueChange:V=>Ae({...ve,destinataire:V,bus_id:null,eleve_id:null}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"tous",children:"Tous les parents du bus"}),a.jsx(q,{value:"bus",children:"Parents du bus"}),a.jsx(q,{value:"eleve",children:"Parent d'un lve spcifique"})]})]})]}),ve.destinataire==="bus"&&n&&a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-3",children:a.jsxs("p",{className:"text-sm text-purple-800",children:[a.jsx("strong",{children:"Bus slectionn:"})," Bus ",n.numero.toString().replace(/^#\s*/,"")]})}),ve.destinataire==="eleve"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Slectionner un lve *"}),a.jsxs($e,{value:((dr=ve.eleve_id)==null?void 0:dr.toString())||"",onValueChange:V=>Ae({...ve,eleve_id:parseInt(V)}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Choisir un lve"})}),a.jsx(ke,{children:l.map(V=>a.jsxs(q,{value:V.id.toString(),children:[V.nom," ",V.prenom]},V.id))})]})]}),ve.eleve_id&&(()=>{const V=l.find(he=>he.id===ve.eleve_id);if(!V||!V.tuteur_id)return null;const ye=Ie.find(he=>he.id===V.tuteur_id),L=ye?`${ye.prenom||""} ${ye.nom||""}`.trim():"Non disponible",G=(ye==null?void 0:ye.telephone)||V.telephone_parent||"Non disponible";return a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(pt,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Tuteur"}),a.jsx("p",{className:"text-base font-semibold text-gray-800",children:L}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(Wi,{className:"w-4 h-4 text-purple-500"}),a.jsx("p",{className:"text-sm text-gray-600",children:G})]})]})]})})})()]}),a.jsxs("div",{children:[a.jsx(se,{children:"Type de message *"}),a.jsxs($e,{value:ve.type,onValueChange:V=>Ae({...ve,type:V}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"info",children:"Information"}),a.jsx(q,{value:"alerte",children:"Alerte"}),a.jsx(q,{value:"urgence",children:"Urgence"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Titre *"}),a.jsx(me,{value:ve.titre,onChange:V=>Ae({...ve,titre:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",placeholder:"Ex: Retard du bus, Changement d'horaires...",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Message *"}),a.jsx(_a,{value:ve.message,onChange:V=>Ae({...ve,message:V.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:6,placeholder:"Rdigez votre message aux parents...",required:!0})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:()=>Pe(!1),className:"rounded-xl border-purple-500 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-purple-500 hover:bg-purple-600 text-white rounded-xl",children:[a.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Envoyer"]})]})]})]})})]})}),a.jsx(bL,{isOpen:g,onClose:()=>j(!1),notifications:d,onMarkAsRead:ee,onDelete:async V=>{try{await ft.delete(V),m(ye=>ye.filter(L=>L.id!==V))}catch(ye){console.error("Erreur lors de la suppression de la notification:",ye)}},onDeleteAll:Ce}),He.show&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Ue,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirmer la suppression"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Cette action est irrversible"})]})]}),a.jsx("p",{className:"text-gray-700 mb-6",children:"tes-vous sr de vouloir supprimer ce message ?"}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(ne,{onClick:()=>Ze({show:!1,messageId:null}),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700 hover:bg-gray-50",children:"Annuler"}),a.jsxs(ne,{onClick:async()=>{try{await ft.delete(He.messageId),ze(V=>V.filter(ye=>ye.id!==He.messageId)),Ze({show:!1,messageId:null}),et("Message supprim avec succs","success")}catch(V){console.error("Erreur suppression message:",V),et("Erreur lors de la suppression: "+(V.message||"Erreur inconnue"),"error"),Ze({show:!1,messageId:null})}},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),a.jsx(Or,{children:ot&&a.jsxs(re.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] ${nn==="success"?"bg-green-500":nn==="error"?"bg-red-500":"bg-purple-500"} text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 min-w-[300px] max-w-[500px]`,children:[nn==="success"?a.jsx(mt,{className:"w-5 h-5 flex-shrink-0"}):nn==="error"?a.jsx(Ke,{className:"w-5 h-5 flex-shrink-0"}):a.jsx(Vn,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"flex-1 font-medium",children:ot}),a.jsx("button",{onClick:()=>rr(null),className:"text-white/80 hover:text-white transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})})]})})]})}function nc({children:e,title:t="Espace Responsable"}){const r=it();Pn();const[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(!0);N.useEffect(()=>{const d=localStorage.getItem("responsable_session");if(!d){r(Re("ResponsableLogin"));return}const m=JSON.parse(d);s(m),u(m.id),c(!1)},[r]),N.useEffect(()=>{if(!n)return;const d=async()=>{await u(n.id)};d();const m=setInterval(d,3e4);return()=>clearInterval(m)},[n]);const u=async d=>{try{const m=await ft.getByUser(d,"responsable"),g=(m==null?void 0:m.data)||m||[];o(g.sort((j,h)=>new Date(h.date||h.date_creation||0)-new Date(j.date||j.date_creation||0)))}catch(m){console.warn("Erreur lors du chargement des notifications:",m),o([])}},f=()=>{localStorage.removeItem("responsable_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(Re("Home"))};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-purple-50",children:[a.jsx(EC,{responsable:n,notifications:i,onLogout:f}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function CC(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=CC(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=CC(e))&&(n&&(n+=" "),n+=t);return n}var f8=Array.isArray,pn=f8,m8=typeof fd=="object"&&fd&&fd.Object===Object&&fd,OC=m8,h8=OC,p8=typeof self=="object"&&self&&self.Object===Object&&self,g8=h8||p8||Function("return this")(),ka=g8,x8=ka,y8=x8.Symbol,ad=y8,L1=ad,TC=Object.prototype,v8=TC.hasOwnProperty,b8=TC.toString,ac=L1?L1.toStringTag:void 0;function j8(e){var t=v8.call(e,ac),r=e[ac];try{e[ac]=void 0;var n=!0}catch{}var s=b8.call(e);return n&&(t?e[ac]=r:delete e[ac]),s}var w8=j8,N8=Object.prototype,S8=N8.toString;function _8(e){return S8.call(e)}var A8=_8,R1=ad,P8=w8,E8=A8,C8="[object Null]",O8="[object Undefined]",B1=R1?R1.toStringTag:void 0;function T8(e){return e==null?e===void 0?O8:C8:B1&&B1 in Object(e)?P8(e):E8(e)}var cs=T8;function k8(e){return e!=null&&typeof e=="object"}var us=k8,M8=cs,D8=us,$8="[object Symbol]";function I8(e){return typeof e=="symbol"||D8(e)&&M8(e)==$8}var Ml=I8,L8=pn,R8=Ml,B8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F8=/^\w*$/;function z8(e,t){if(L8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||R8(e)?!0:F8.test(e)||!B8.test(e)||t!=null&&e in Object(t)}var Gv=z8;function V8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ai=V8;const Dl=St(ai);var U8=cs,W8=ai,H8="[object AsyncFunction]",q8="[object Function]",G8="[object GeneratorFunction]",K8="[object Proxy]";function Y8(e){if(!W8(e))return!1;var t=U8(e);return t==q8||t==G8||t==H8||t==K8}var Kv=Y8;const Je=St(Kv);var X8=ka,J8=X8["__core-js_shared__"],Z8=J8,og=Z8,F1=function(){var e=/[^.]+$/.exec(og&&og.keys&&og.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Q8(e){return!!F1&&F1 in e}var eB=Q8,tB=Function.prototype,rB=tB.toString;function nB(e){if(e!=null){try{return rB.call(e)}catch{}try{return e+""}catch{}}return""}var kC=nB,aB=Kv,sB=eB,iB=ai,oB=kC,lB=/[\\^$.*+?()[\]{}|]/g,cB=/^\[object .+?Constructor\]$/,uB=Function.prototype,dB=Object.prototype,fB=uB.toString,mB=dB.hasOwnProperty,hB=RegExp("^"+fB.call(mB).replace(lB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pB(e){if(!iB(e)||sB(e))return!1;var t=aB(e)?hB:cB;return t.test(oB(e))}var gB=pB;function xB(e,t){return e==null?void 0:e[t]}var yB=xB,vB=gB,bB=yB;function jB(e,t){var r=bB(e,t);return vB(r)?r:void 0}var to=jB,wB=to,NB=wB(Object,"create"),_h=NB,z1=_h;function SB(){this.__data__=z1?z1(null):{},this.size=0}var _B=SB;function AB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var PB=AB,EB=_h,CB="__lodash_hash_undefined__",OB=Object.prototype,TB=OB.hasOwnProperty;function kB(e){var t=this.__data__;if(EB){var r=t[e];return r===CB?void 0:r}return TB.call(t,e)?t[e]:void 0}var MB=kB,DB=_h,$B=Object.prototype,IB=$B.hasOwnProperty;function LB(e){var t=this.__data__;return DB?t[e]!==void 0:IB.call(t,e)}var RB=LB,BB=_h,FB="__lodash_hash_undefined__";function zB(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=BB&&t===void 0?FB:t,this}var VB=zB,UB=_B,WB=PB,HB=MB,qB=RB,GB=VB;function $l(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$l.prototype.clear=UB;$l.prototype.delete=WB;$l.prototype.get=HB;$l.prototype.has=qB;$l.prototype.set=GB;var KB=$l;function YB(){this.__data__=[],this.size=0}var XB=YB;function JB(e,t){return e===t||e!==e&&t!==t}var Yv=JB,ZB=Yv;function QB(e,t){for(var r=e.length;r--;)if(ZB(e[r][0],t))return r;return-1}var Ah=QB,eF=Ah,tF=Array.prototype,rF=tF.splice;function nF(e){var t=this.__data__,r=eF(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():rF.call(t,r,1),--this.size,!0}var aF=nF,sF=Ah;function iF(e){var t=this.__data__,r=sF(t,e);return r<0?void 0:t[r][1]}var oF=iF,lF=Ah;function cF(e){return lF(this.__data__,e)>-1}var uF=cF,dF=Ah;function fF(e,t){var r=this.__data__,n=dF(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var mF=fF,hF=XB,pF=aF,gF=oF,xF=uF,yF=mF;function Il(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Il.prototype.clear=hF;Il.prototype.delete=pF;Il.prototype.get=gF;Il.prototype.has=xF;Il.prototype.set=yF;var Ph=Il,vF=to,bF=ka,jF=vF(bF,"Map"),Xv=jF,V1=KB,wF=Ph,NF=Xv;function SF(){this.size=0,this.__data__={hash:new V1,map:new(NF||wF),string:new V1}}var _F=SF;function AF(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var PF=AF,EF=PF;function CF(e,t){var r=e.__data__;return EF(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Eh=CF,OF=Eh;function TF(e){var t=OF(this,e).delete(e);return this.size-=t?1:0,t}var kF=TF,MF=Eh;function DF(e){return MF(this,e).get(e)}var $F=DF,IF=Eh;function LF(e){return IF(this,e).has(e)}var RF=LF,BF=Eh;function FF(e,t){var r=BF(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var zF=FF,VF=_F,UF=kF,WF=$F,HF=RF,qF=zF;function Ll(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ll.prototype.clear=VF;Ll.prototype.delete=UF;Ll.prototype.get=WF;Ll.prototype.has=HF;Ll.prototype.set=qF;var Jv=Ll,MC=Jv,GF="Expected a function";function Zv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(GF);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(Zv.Cache||MC),r}Zv.Cache=MC;var DC=Zv;const KF=St(DC);var YF=DC,XF=500;function JF(e){var t=YF(e,function(n){return r.size===XF&&r.clear(),n}),r=t.cache;return t}var ZF=JF,QF=ZF,ez=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tz=/\\(\\)?/g,rz=QF(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ez,function(r,n,s,i){t.push(s?i.replace(tz,"$1"):n||r)}),t}),nz=rz;function az(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var Qv=az,U1=ad,sz=Qv,iz=pn,oz=Ml,W1=U1?U1.prototype:void 0,H1=W1?W1.toString:void 0;function $C(e){if(typeof e=="string")return e;if(iz(e))return sz(e,$C)+"";if(oz(e))return H1?H1.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var lz=$C,cz=lz;function uz(e){return e==null?"":cz(e)}var IC=uz,dz=pn,fz=Gv,mz=nz,hz=IC;function pz(e,t){return dz(e)?e:fz(e,t)?[e]:mz(hz(e))}var LC=pz,gz=Ml;function xz(e){if(typeof e=="string"||gz(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ch=xz,yz=LC,vz=Ch;function bz(e,t){t=yz(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[vz(t[r++])];return r&&r==n?e:void 0}var eb=bz,jz=eb;function wz(e,t,r){var n=e==null?void 0:jz(e,t);return n===void 0?r:n}var RC=wz;const wn=St(RC);function Nz(e){return e==null}var Sz=Nz;const ct=St(Sz);var _z=cs,Az=pn,Pz=us,Ez="[object String]";function Cz(e){return typeof e=="string"||!Az(e)&&Pz(e)&&_z(e)==Ez}var Oz=Cz;const Hi=St(Oz);var BC={exports:{}},_t={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb=Symbol.for("react.element"),rb=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Th=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Dh=Symbol.for("react.context"),Tz=Symbol.for("react.server_context"),$h=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),Bh=Symbol.for("react.lazy"),kz=Symbol.for("react.offscreen"),FC;FC=Symbol.for("react.module.reference");function Hn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tb:switch(e=e.type,e){case Oh:case kh:case Th:case Ih:case Lh:return e;default:switch(e=e&&e.$$typeof,e){case Tz:case Dh:case $h:case Bh:case Rh:case Mh:return e;default:return t}}case rb:return t}}}_t.ContextConsumer=Dh;_t.ContextProvider=Mh;_t.Element=tb;_t.ForwardRef=$h;_t.Fragment=Oh;_t.Lazy=Bh;_t.Memo=Rh;_t.Portal=rb;_t.Profiler=kh;_t.StrictMode=Th;_t.Suspense=Ih;_t.SuspenseList=Lh;_t.isAsyncMode=function(){return!1};_t.isConcurrentMode=function(){return!1};_t.isContextConsumer=function(e){return Hn(e)===Dh};_t.isContextProvider=function(e){return Hn(e)===Mh};_t.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tb};_t.isForwardRef=function(e){return Hn(e)===$h};_t.isFragment=function(e){return Hn(e)===Oh};_t.isLazy=function(e){return Hn(e)===Bh};_t.isMemo=function(e){return Hn(e)===Rh};_t.isPortal=function(e){return Hn(e)===rb};_t.isProfiler=function(e){return Hn(e)===kh};_t.isStrictMode=function(e){return Hn(e)===Th};_t.isSuspense=function(e){return Hn(e)===Ih};_t.isSuspenseList=function(e){return Hn(e)===Lh};_t.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Oh||e===kh||e===Th||e===Ih||e===Lh||e===kz||typeof e=="object"&&e!==null&&(e.$$typeof===Bh||e.$$typeof===Rh||e.$$typeof===Mh||e.$$typeof===Dh||e.$$typeof===$h||e.$$typeof===FC||e.getModuleId!==void 0)};_t.typeOf=Hn;BC.exports=_t;var Mz=BC.exports,Dz=cs,$z=us,Iz="[object Number]";function Lz(e){return typeof e=="number"||$z(e)&&Dz(e)==Iz}var zC=Lz;const Rz=St(zC);var Bz=zC;function Fz(e){return Bz(e)&&e!=+e}var zz=Fz;const sd=St(zz);var Yr=function(t){return t===0?0:t>0?1:-1},Ai=function(t){return Hi(t)&&t.indexOf("%")===t.length-1},_e=function(t){return Rz(t)&&!sd(t)},Vz=function(t){return ct(t)},xr=function(t){return _e(t)||Hi(t)},Uz=0,id=function(t){var r=++Uz;return"".concat(t||"").concat(r)},Xr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!_e(t)&&!Hi(t))return n;var i;if(Ai(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return sd(i)&&(i=n),s&&i>r&&(i=r),i},_s=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Wz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},js=function(t,r){return _e(t)&&_e(r)?function(n){return t+n*(r-t)}:function(){return r}};function Yx(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):wn(n,t))===r})}var Hz=function(t,r){return _e(t)&&_e(r)?t-r:Hi(t)&&Hi(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Uo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}var qz=["viewBox","children"],Gz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],q1=["points","pathLength"],lg={svg:qz,polygon:q1,polyline:q1},nb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zf=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!Dl(n))return null;var s={};return Object.keys(n).forEach(function(i){nb.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},Kz=function(t,r,n){return function(s){return t(r,n,s),null}},qi=function(t,r,n){if(!Dl(t)||Xx(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];nb.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Kz(o,r,n))}),s},Yz=["children"],Xz=["children"];function G1(e,t){if(e==null)return{};var r=Jz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Jz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var K1={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ya=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},Y1=null,cg=null,ab=function e(t){if(t===Y1&&Array.isArray(cg))return cg;var r=[];return N.Children.forEach(t,function(n){ct(n)||(Mz.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),cg=r,Y1=t,r};function Bn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Ya(s)}):n=[Ya(t)],ab(e).forEach(function(s){var i=wn(s,"type.displayName")||wn(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function yn(e,t){var r=Bn(e,t);return r&&r[0]}var X1=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!_e(n)||n<=0||!_e(s)||s<=0)},Zz=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Qz=function(t){return t&&t.type&&Hi(t.type)&&Zz.indexOf(t.type)>=0},e7=function(t,r,n,s){var i,o=(i=lg==null?void 0:lg[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Je(t)&&(s&&o.includes(r)||Gz.includes(r))||n&&nb.includes(r)},Ye=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(N.isValidElement(t)&&(s=t.props),!Dl(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;e7((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Jx=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return J1(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!J1(i,o))return!1}return!0},J1=function(t,r){if(ct(t)&&ct(r))return!0;if(!ct(t)&&!ct(r)){var n=t.props||{},s=n.children,i=G1(n,Yz),o=r.props||{},l=o.children,c=G1(o,Xz);return s&&l?Uo(i,c)&&Jx(s,l):!s&&!l?Uo(i,c):!1}return!1},Z1=function(t,r){var n=[],s={};return ab(t).forEach(function(i,o){if(Qz(i))n.push(i);else if(i){var l=Ya(i.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!s[l])){var d=u(i,l,o);n.push(d),s[l]=!0}}}),n},t7=function(t){var r=t&&t.type;return r&&K1[r]?K1[r]:null},r7=function(t,r){return ab(r).indexOf(t)},n7=["children","width","height","viewBox","className","style","title","desc"];function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zx.apply(this,arguments)}function a7(e,t){if(e==null)return{};var r=s7(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qx(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=a7(e,n7),f=s||{width:r,height:n,x:0,y:0},d=st("recharts-surface",i);return H.createElement("svg",Zx({},Ye(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),H.createElement("title",null,l),H.createElement("desc",null,c),t)}var i7=["children","className"];function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e0.apply(this,arguments)}function o7(e,t){if(e==null)return{};var r=l7(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var wt=H.forwardRef(function(e,t){var r=e.children,n=e.className,s=o7(e,i7),i=st("recharts-layer",n);return H.createElement("g",e0({className:i},Ye(s,!0),{ref:t}),r)}),oa=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function c7(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var u7=c7,d7=u7;function f7(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:d7(e,t,r)}var m7=f7,h7="\\ud800-\\udfff",p7="\\u0300-\\u036f",g7="\\ufe20-\\ufe2f",x7="\\u20d0-\\u20ff",y7=p7+g7+x7,v7="\\ufe0e\\ufe0f",b7="\\u200d",j7=RegExp("["+b7+h7+y7+v7+"]");function w7(e){return j7.test(e)}var VC=w7;function N7(e){return e.split("")}var S7=N7,UC="\\ud800-\\udfff",_7="\\u0300-\\u036f",A7="\\ufe20-\\ufe2f",P7="\\u20d0-\\u20ff",E7=_7+A7+P7,C7="\\ufe0e\\ufe0f",O7="["+UC+"]",t0="["+E7+"]",r0="\\ud83c[\\udffb-\\udfff]",T7="(?:"+t0+"|"+r0+")",WC="[^"+UC+"]",HC="(?:\\ud83c[\\udde6-\\uddff]){2}",qC="[\\ud800-\\udbff][\\udc00-\\udfff]",k7="\\u200d",GC=T7+"?",KC="["+C7+"]?",M7="(?:"+k7+"(?:"+[WC,HC,qC].join("|")+")"+KC+GC+")*",D7=KC+GC+M7,$7="(?:"+[WC+t0+"?",t0,HC,qC,O7].join("|")+")",I7=RegExp(r0+"(?="+r0+")|"+$7+D7,"g");function L7(e){return e.match(I7)||[]}var R7=L7,B7=S7,F7=VC,z7=R7;function V7(e){return F7(e)?z7(e):B7(e)}var U7=V7,W7=m7,H7=VC,q7=U7,G7=IC;function K7(e){return function(t){t=G7(t);var r=H7(t)?q7(t):void 0,n=r?r[0]:t.charAt(0),s=r?W7(r,1).join(""):t.slice(1);return n[e]()+s}}var Y7=K7,X7=Y7,J7=X7("toUpperCase"),Z7=J7;const Fh=St(Z7);function $t(e){return function(){return e}}const YC=Math.cos,Qf=Math.sin,ua=Math.sqrt,em=Math.PI,zh=2*em,n0=Math.PI,a0=2*n0,yi=1e-6,Q7=a0-yi;function XC(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function eV(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XC;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class tV{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XC:eV(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,f=o-t,d=l-r,m=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>yi)if(!(Math.abs(d*c-u*f)>yi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-o,j=s-l,h=c*c+u*u,y=g*g+j*j,p=Math.sqrt(h),x=Math.sqrt(m),v=i*Math.tan((n0-Math.acos((h+m-y)/(2*p*x)))/2),S=v/x,w=v/p;Math.abs(S-1)>yi&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*g>f*j)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,f=r+c,d=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yi||Math.abs(this._y1-f)>yi)&&this._append`L${u},${f}`,n&&(m<0&&(m=m%a0+a0),m>Q7?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:m>yi&&this._append`A${n},${n},0,${+(m>=n0)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function sb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new tV(t)}function ib(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JC(e){this._context=e}JC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vh(e){return new JC(e)}function ZC(e){return e[0]}function QC(e){return e[1]}function eO(e,t){var r=$t(!0),n=null,s=Vh,i=null,o=sb(l);e=typeof e=="function"?e:e===void 0?ZC:$t(e),t=typeof t=="function"?t:t===void 0?QC:$t(t);function l(c){var u,f=(c=ib(c)).length,d,m=!1,g;for(n==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,u,c),+t(d,u,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:$t(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:$t(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:$t(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Id(e,t,r){var n=null,s=$t(!0),i=null,o=Vh,l=null,c=sb(u);e=typeof e=="function"?e:e===void 0?ZC:$t(+e),t=typeof t=="function"?t:$t(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?QC:$t(+r);function u(d){var m,g,j,h=(d=ib(d)).length,y,p=!1,x,v=new Array(h),S=new Array(h);for(i==null&&(l=o(x=c())),m=0;m<=h;++m){if(!(m<h&&s(y=d[m],m,d))===p)if(p=!p)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),j=m-1;j>=g;--j)l.point(v[j],S[j]);l.lineEnd(),l.areaEnd()}p&&(v[m]=+e(y,m,d),S[m]=+t(y,m,d),l.point(n?+n(y,m,d):v[m],r?+r(y,m,d):S[m]))}if(x)return l=null,x+""||null}function f(){return eO().defined(s).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:$t(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:$t(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:$t(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:$t(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:$t(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:$t(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:$t(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class tO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function rV(e){return new tO(e,!0)}function nV(e){return new tO(e,!1)}const ob={draw(e,t){const r=ua(t/em);e.moveTo(r,0),e.arc(0,0,r,0,zh)}},aV={draw(e,t){const r=ua(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},rO=ua(1/3),sV=rO*2,iV={draw(e,t){const r=ua(t/sV),n=r*rO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},oV={draw(e,t){const r=ua(t),n=-r/2;e.rect(n,n,r,r)}},lV=.8908130915292852,nO=Qf(em/10)/Qf(7*em/10),cV=Qf(zh/10)*nO,uV=-YC(zh/10)*nO,dV={draw(e,t){const r=ua(t*lV),n=cV*r,s=uV*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=zh*i/5,l=YC(o),c=Qf(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},ug=ua(3),fV={draw(e,t){const r=-ua(t/(ug*3));e.moveTo(0,r*2),e.lineTo(-ug*r,-r),e.lineTo(ug*r,-r),e.closePath()}},Cn=-.5,On=ua(3)/2,s0=1/ua(12),mV=(s0/2+1)*3,hV={draw(e,t){const r=ua(t/mV),n=r/2,s=r*s0,i=n,o=r*s0+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Cn*n-On*s,On*n+Cn*s),e.lineTo(Cn*i-On*o,On*i+Cn*o),e.lineTo(Cn*l-On*c,On*l+Cn*c),e.lineTo(Cn*n+On*s,Cn*s-On*n),e.lineTo(Cn*i+On*o,Cn*o-On*i),e.lineTo(Cn*l+On*c,Cn*c-On*l),e.closePath()}};function pV(e,t){let r=null,n=sb(s);e=typeof e=="function"?e:$t(e||ob),t=typeof t=="function"?t:$t(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:$t(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:$t(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function tm(){}function rm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function aO(e){this._context=e}aO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gV(e){return new aO(e)}function sO(e){this._context=e}sO.prototype={areaStart:tm,areaEnd:tm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function xV(e){return new sO(e)}function iO(e){this._context=e}iO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function yV(e){return new iO(e)}function oO(e){this._context=e}oO.prototype={areaStart:tm,areaEnd:tm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vV(e){return new oO(e)}function Q1(e){return e<0?-1:1}function eN(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(Q1(i)+Q1(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function tN(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function nm(e){this._context=e}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dg(this,this._t0,tN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dg(this,tN(this,r=eN(this,e,t)),r);break;default:dg(this,this._t0,r=eN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function lO(e){this._context=new cO(e)}(lO.prototype=Object.create(nm.prototype)).point=function(e,t){nm.prototype.point.call(this,t,e)};function cO(e){this._context=e}cO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function bV(e){return new nm(e)}function jV(e){return new lO(e)}function uO(e){this._context=e}uO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=rN(e),s=rN(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rN(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function wV(e){return new uO(e)}function Uh(e,t){this._context=e,this._t=t}Uh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function NV(e){return new Uh(e,.5)}function SV(e){return new Uh(e,0)}function _V(e){return new Uh(e,1)}function al(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function i0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function AV(e,t){return e[t]}function PV(e){const t=[];return t.key=e,t}function EV(){var e=$t([]),t=i0,r=al,n=AV;function s(i){var o=Array.from(e.apply(this,arguments),PV),l,c=o.length,u=-1,f;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,f=ib(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:$t(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:$t(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?i0:typeof i=="function"?i:$t(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??al,s):r},s}function CV(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}al(e,t)}}function OV(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}al(e,t)}}function TV(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[n][1]||0,m=f[n-1][1]||0,g=(d-m)/2,j=0;j<l;++j){var h=e[t[j]],y=h[n][1]||0,p=h[n-1][1]||0;g+=y-p}c+=d,u+=g*d}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,al(e,t)}}function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}var kV=["type","size","sizeType"];function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(this,arguments)}function nN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function aN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nN(Object(r),!0).forEach(function(n){MV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MV(e,t,r){return t=DV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e){var t=$V(e,"string");return mu(t)=="symbol"?t:t+""}function $V(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IV(e,t){if(e==null)return{};var r=LV(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function LV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var dO={symbolCircle:ob,symbolCross:aV,symbolDiamond:iV,symbolSquare:oV,symbolStar:dV,symbolTriangle:fV,symbolWye:hV},RV=Math.PI/180,BV=function(t){var r="symbol".concat(Fh(t));return dO[r]||ob},FV=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*RV;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},zV=function(t,r){dO["symbol".concat(Fh(t))]=r},lb=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=IV(t,kV),u=aN(aN({},c),{},{type:n,size:i,sizeType:l}),f=function(){var y=BV(n),p=pV().type(y).size(FV(i,l,n));return p()},d=u.className,m=u.cx,g=u.cy,j=Ye(u,!0);return m===+m&&g===+g&&i===+i?H.createElement("path",o0({},j,{className:st("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(g,")"),d:f()})):null};lb.registerSymbol=zV;function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l0.apply(this,arguments)}function sN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function VV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sN(Object(r),!0).forEach(function(n){hu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mO(n.key),n)}}function HV(e,t,r){return t&&WV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qV(e,t,r){return t=am(t),GV(e,fO()?Reflect.construct(t,r||[],am(e).constructor):t.apply(e,r))}function GV(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KV(e)}function KV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fO=function(){return!!e})()}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},am(e)}function YV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c0(e,t)}function c0(e,t){return c0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},c0(e,t)}function hu(e,t,r){return t=mO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mO(e){var t=XV(e,"string");return sl(t)=="symbol"?t:t+""}function XV(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tn=32,cb=function(e){function t(){return UV(this,t),qV(this,t,arguments)}return YV(t,e),HV(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Tn/2,o=Tn/6,l=Tn/3,c=n.inactive?s:n.color;if(n.type==="plainline")return H.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Tn,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return H.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Tn,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return H.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Tn/8,"h").concat(Tn,"v").concat(Tn*3/4,"h").concat(-Tn,"z"),className:"recharts-legend-icon"});if(H.isValidElement(n.legendIcon)){var u=VV({},n);return delete u.legendIcon,H.cloneElement(n.legendIcon,u)}return H.createElement(lb,{fill:c,cx:i,cy:i,size:Tn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Tn,height:Tn},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,j){var h=g.formatter||c,y=st(hu(hu({"recharts-legend-item":!0},"legend-item-".concat(j),!0),"inactive",g.inactive));if(g.type==="none")return null;var p=Je(g.value)?null:g.value;oa(!Je(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=g.inactive?u:g.color;return H.createElement("li",l0({className:y,style:d,key:"legend-item-".concat(j)},qi(n.props,g,j)),H.createElement(Qx,{width:o,height:o,viewBox:f,style:m},n.renderIcon(g)),H.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},h?h(p,g,j):p))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return H.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);hu(cb,"displayName","Legend");hu(cb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var JV=Ph;function ZV(){this.__data__=new JV,this.size=0}var QV=ZV;function eU(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var tU=eU;function rU(e){return this.__data__.get(e)}var nU=rU;function aU(e){return this.__data__.has(e)}var sU=aU,iU=Ph,oU=Xv,lU=Jv,cU=200;function uU(e,t){var r=this.__data__;if(r instanceof iU){var n=r.__data__;if(!oU||n.length<cU-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new lU(n)}return r.set(e,t),this.size=r.size,this}var dU=uU,fU=Ph,mU=QV,hU=tU,pU=nU,gU=sU,xU=dU;function Rl(e){var t=this.__data__=new fU(e);this.size=t.size}Rl.prototype.clear=mU;Rl.prototype.delete=hU;Rl.prototype.get=pU;Rl.prototype.has=gU;Rl.prototype.set=xU;var hO=Rl,yU="__lodash_hash_undefined__";function vU(e){return this.__data__.set(e,yU),this}var bU=vU;function jU(e){return this.__data__.has(e)}var wU=jU,NU=Jv,SU=bU,_U=wU;function sm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new NU;++t<r;)this.add(e[t])}sm.prototype.add=sm.prototype.push=SU;sm.prototype.has=_U;var pO=sm;function AU(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var gO=AU;function PU(e,t){return e.has(t)}var xO=PU,EU=pO,CU=gO,OU=xO,TU=1,kU=2;function MU(e,t,r,n,s,i){var o=r&TU,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,m=!0,g=r&kU?new EU:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var j=e[d],h=t[d];if(n)var y=o?n(h,j,d,t,e,i):n(j,h,d,e,t,i);if(y!==void 0){if(y)continue;m=!1;break}if(g){if(!CU(t,function(p,x){if(!OU(g,x)&&(j===p||s(j,p,r,n,i)))return g.push(x)})){m=!1;break}}else if(!(j===h||s(j,h,r,n,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var yO=MU,DU=ka,$U=DU.Uint8Array,IU=$U;function LU(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var RU=LU;function BU(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ub=BU,iN=ad,oN=IU,FU=Yv,zU=yO,VU=RU,UU=ub,WU=1,HU=2,qU="[object Boolean]",GU="[object Date]",KU="[object Error]",YU="[object Map]",XU="[object Number]",JU="[object RegExp]",ZU="[object Set]",QU="[object String]",e9="[object Symbol]",t9="[object ArrayBuffer]",r9="[object DataView]",lN=iN?iN.prototype:void 0,fg=lN?lN.valueOf:void 0;function n9(e,t,r,n,s,i,o){switch(r){case r9:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case t9:return!(e.byteLength!=t.byteLength||!i(new oN(e),new oN(t)));case qU:case GU:case XU:return FU(+e,+t);case KU:return e.name==t.name&&e.message==t.message;case JU:case QU:return e==t+"";case YU:var l=VU;case ZU:var c=n&WU;if(l||(l=UU),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=HU,o.set(e,t);var f=zU(l(e),l(t),n,s,i,o);return o.delete(e),f;case e9:if(fg)return fg.call(e)==fg.call(t)}return!1}var a9=n9;function s9(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var vO=s9,i9=vO,o9=pn;function l9(e,t,r){var n=t(e);return o9(e)?n:i9(n,r(e))}var c9=l9;function u9(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var d9=u9;function f9(){return[]}var m9=f9,h9=d9,p9=m9,g9=Object.prototype,x9=g9.propertyIsEnumerable,cN=Object.getOwnPropertySymbols,y9=cN?function(e){return e==null?[]:(e=Object(e),h9(cN(e),function(t){return x9.call(e,t)}))}:p9,v9=y9;function b9(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var j9=b9,w9=cs,N9=us,S9="[object Arguments]";function _9(e){return N9(e)&&w9(e)==S9}var A9=_9,uN=A9,P9=us,bO=Object.prototype,E9=bO.hasOwnProperty,C9=bO.propertyIsEnumerable,O9=uN(function(){return arguments}())?uN:function(e){return P9(e)&&E9.call(e,"callee")&&!C9.call(e,"callee")},db=O9,im={exports:{}};function T9(){return!1}var k9=T9;im.exports;(function(e,t){var r=ka,n=k9,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(im,im.exports);var jO=im.exports,M9=9007199254740991,D9=/^(?:0|[1-9]\d*)$/;function $9(e,t){var r=typeof e;return t=t??M9,!!t&&(r=="number"||r!="symbol"&&D9.test(e))&&e>-1&&e%1==0&&e<t}var fb=$9,I9=9007199254740991;function L9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=I9}var mb=L9,R9=cs,B9=mb,F9=us,z9="[object Arguments]",V9="[object Array]",U9="[object Boolean]",W9="[object Date]",H9="[object Error]",q9="[object Function]",G9="[object Map]",K9="[object Number]",Y9="[object Object]",X9="[object RegExp]",J9="[object Set]",Z9="[object String]",Q9="[object WeakMap]",eW="[object ArrayBuffer]",tW="[object DataView]",rW="[object Float32Array]",nW="[object Float64Array]",aW="[object Int8Array]",sW="[object Int16Array]",iW="[object Int32Array]",oW="[object Uint8Array]",lW="[object Uint8ClampedArray]",cW="[object Uint16Array]",uW="[object Uint32Array]",Ft={};Ft[rW]=Ft[nW]=Ft[aW]=Ft[sW]=Ft[iW]=Ft[oW]=Ft[lW]=Ft[cW]=Ft[uW]=!0;Ft[z9]=Ft[V9]=Ft[eW]=Ft[U9]=Ft[tW]=Ft[W9]=Ft[H9]=Ft[q9]=Ft[G9]=Ft[K9]=Ft[Y9]=Ft[X9]=Ft[J9]=Ft[Z9]=Ft[Q9]=!1;function dW(e){return F9(e)&&B9(e.length)&&!!Ft[R9(e)]}var fW=dW;function mW(e){return function(t){return e(t)}}var wO=mW,om={exports:{}};om.exports;(function(e,t){var r=OC,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(om,om.exports);var hW=om.exports,pW=fW,gW=wO,dN=hW,fN=dN&&dN.isTypedArray,xW=fN?gW(fN):pW,NO=xW,yW=j9,vW=db,bW=pn,jW=jO,wW=fb,NW=NO,SW=Object.prototype,_W=SW.hasOwnProperty;function AW(e,t){var r=bW(e),n=!r&&vW(e),s=!r&&!n&&jW(e),i=!r&&!n&&!s&&NW(e),o=r||n||s||i,l=o?yW(e.length,String):[],c=l.length;for(var u in e)(t||_W.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||wW(u,c)))&&l.push(u);return l}var PW=AW,EW=Object.prototype;function CW(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||EW;return e===r}var OW=CW;function TW(e,t){return function(r){return e(t(r))}}var SO=TW,kW=SO,MW=kW(Object.keys,Object),DW=MW,$W=OW,IW=DW,LW=Object.prototype,RW=LW.hasOwnProperty;function BW(e){if(!$W(e))return IW(e);var t=[];for(var r in Object(e))RW.call(e,r)&&r!="constructor"&&t.push(r);return t}var FW=BW,zW=Kv,VW=mb;function UW(e){return e!=null&&VW(e.length)&&!zW(e)}var od=UW,WW=PW,HW=FW,qW=od;function GW(e){return qW(e)?WW(e):HW(e)}var Wh=GW,KW=c9,YW=v9,XW=Wh;function JW(e){return KW(e,XW,YW)}var ZW=JW,mN=ZW,QW=1,eH=Object.prototype,tH=eH.hasOwnProperty;function rH(e,t,r,n,s,i){var o=r&QW,l=mN(e),c=l.length,u=mN(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var m=l[d];if(!(o?m in t:tH.call(t,m)))return!1}var g=i.get(e),j=i.get(t);if(g&&j)return g==t&&j==e;var h=!0;i.set(e,t),i.set(t,e);for(var y=o;++d<c;){m=l[d];var p=e[m],x=t[m];if(n)var v=o?n(x,p,m,t,e,i):n(p,x,m,e,t,i);if(!(v===void 0?p===x||s(p,x,r,n,i):v)){h=!1;break}y||(y=m=="constructor")}if(h&&!y){var S=e.constructor,w=t.constructor;S!=w&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(h=!1)}return i.delete(e),i.delete(t),h}var nH=rH,aH=to,sH=ka,iH=aH(sH,"DataView"),oH=iH,lH=to,cH=ka,uH=lH(cH,"Promise"),dH=uH,fH=to,mH=ka,hH=fH(mH,"Set"),_O=hH,pH=to,gH=ka,xH=pH(gH,"WeakMap"),yH=xH,u0=oH,d0=Xv,f0=dH,m0=_O,h0=yH,AO=cs,Bl=kC,hN="[object Map]",vH="[object Object]",pN="[object Promise]",gN="[object Set]",xN="[object WeakMap]",yN="[object DataView]",bH=Bl(u0),jH=Bl(d0),wH=Bl(f0),NH=Bl(m0),SH=Bl(h0),vi=AO;(u0&&vi(new u0(new ArrayBuffer(1)))!=yN||d0&&vi(new d0)!=hN||f0&&vi(f0.resolve())!=pN||m0&&vi(new m0)!=gN||h0&&vi(new h0)!=xN)&&(vi=function(e){var t=AO(e),r=t==vH?e.constructor:void 0,n=r?Bl(r):"";if(n)switch(n){case bH:return yN;case jH:return hN;case wH:return pN;case NH:return gN;case SH:return xN}return t});var _H=vi,mg=hO,AH=yO,PH=a9,EH=nH,vN=_H,bN=pn,jN=jO,CH=NO,OH=1,wN="[object Arguments]",NN="[object Array]",Ld="[object Object]",TH=Object.prototype,SN=TH.hasOwnProperty;function kH(e,t,r,n,s,i){var o=bN(e),l=bN(t),c=o?NN:vN(e),u=l?NN:vN(t);c=c==wN?Ld:c,u=u==wN?Ld:u;var f=c==Ld,d=u==Ld,m=c==u;if(m&&jN(e)){if(!jN(t))return!1;o=!0,f=!1}if(m&&!f)return i||(i=new mg),o||CH(e)?AH(e,t,r,n,s,i):PH(e,t,c,r,n,s,i);if(!(r&OH)){var g=f&&SN.call(e,"__wrapped__"),j=d&&SN.call(t,"__wrapped__");if(g||j){var h=g?e.value():e,y=j?t.value():t;return i||(i=new mg),s(h,y,r,n,i)}}return m?(i||(i=new mg),EH(e,t,r,n,s,i)):!1}var MH=kH,DH=MH,_N=us;function PO(e,t,r,n,s){return e===t?!0:e==null||t==null||!_N(e)&&!_N(t)?e!==e&&t!==t:DH(e,t,r,n,PO,s)}var hb=PO,$H=hO,IH=hb,LH=1,RH=2;function BH(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new $H;if(n)var m=n(u,f,c,e,t,d);if(!(m===void 0?IH(f,u,LH|RH,n,d):m))return!1}}return!0}var FH=BH,zH=ai;function VH(e){return e===e&&!zH(e)}var EO=VH,UH=EO,WH=Wh;function HH(e){for(var t=WH(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,UH(s)]}return t}var qH=HH;function GH(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var CO=GH,KH=FH,YH=qH,XH=CO;function JH(e){var t=YH(e);return t.length==1&&t[0][2]?XH(t[0][0],t[0][1]):function(r){return r===e||KH(r,e,t)}}var ZH=JH;function QH(e,t){return e!=null&&t in Object(e)}var eq=QH,tq=LC,rq=db,nq=pn,aq=fb,sq=mb,iq=Ch;function oq(e,t,r){t=tq(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=iq(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&sq(s)&&aq(o,s)&&(nq(e)||rq(e)))}var lq=oq,cq=eq,uq=lq;function dq(e,t){return e!=null&&uq(e,t,cq)}var fq=dq,mq=hb,hq=RC,pq=fq,gq=Gv,xq=EO,yq=CO,vq=Ch,bq=1,jq=2;function wq(e,t){return gq(e)&&xq(t)?yq(vq(e),t):function(r){var n=hq(r,e);return n===void 0&&n===t?pq(r,e):mq(t,n,bq|jq)}}var Nq=wq;function Sq(e){return e}var Fl=Sq;function _q(e){return function(t){return t==null?void 0:t[e]}}var Aq=_q,Pq=eb;function Eq(e){return function(t){return Pq(t,e)}}var Cq=Eq,Oq=Aq,Tq=Cq,kq=Gv,Mq=Ch;function Dq(e){return kq(e)?Oq(Mq(e)):Tq(e)}var $q=Dq,Iq=ZH,Lq=Nq,Rq=Fl,Bq=pn,Fq=$q;function zq(e){return typeof e=="function"?e:e==null?Rq:typeof e=="object"?Bq(e)?Lq(e[0],e[1]):Iq(e):Fq(e)}var Ma=zq;function Vq(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var OO=Vq;function Uq(e){return e!==e}var Wq=Uq;function Hq(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var qq=Hq,Gq=OO,Kq=Wq,Yq=qq;function Xq(e,t,r){return t===t?Yq(e,t,r):Gq(e,Kq,r)}var Jq=Xq,Zq=Jq;function Qq(e,t){var r=e==null?0:e.length;return!!r&&Zq(e,t,0)>-1}var eG=Qq;function tG(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var rG=tG;function nG(){}var aG=nG,hg=_O,sG=aG,iG=ub,oG=1/0,lG=hg&&1/iG(new hg([,-0]))[1]==oG?function(e){return new hg(e)}:sG,cG=lG,uG=pO,dG=eG,fG=rG,mG=xO,hG=cG,pG=ub,gG=200;function xG(e,t,r){var n=-1,s=dG,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=fG;else if(i>=gG){var u=t?null:hG(e);if(u)return pG(u);o=!1,s=mG,c=new uG}else c=t?[]:l;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var m=c.length;m--;)if(c[m]===d)continue e;t&&c.push(d),l.push(f)}else s(c,d,r)||(c!==l&&c.push(d),l.push(f))}return l}var yG=xG,vG=Ma,bG=yG;function jG(e,t){return e&&e.length?bG(e,vG(t)):[]}var wG=jG;const AN=St(wG);function TO(e,t,r){return t===!0?AN(e,r):Je(t)?AN(e,t):e}function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}var NG=["ref"];function PN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(r),!0).forEach(function(n){Hh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MO(n.key),n)}}function _G(e,t,r){return t&&EN(e.prototype,t),r&&EN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AG(e,t,r){return t=lm(t),PG(e,kO()?Reflect.construct(t,r||[],lm(e).constructor):t.apply(e,r))}function PG(e,t){if(t&&(il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EG(e)}function EG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kO=function(){return!!e})()}function lm(e){return lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lm(e)}function CG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p0(e,t)}function p0(e,t){return p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},p0(e,t)}function Hh(e,t,r){return t=MO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MO(e){var t=OG(e,"string");return il(t)=="symbol"?t:t+""}function OG(e,t){if(il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function TG(e,t){if(e==null)return{};var r=kG(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MG(e){return e.value}function DG(e,t){if(H.isValidElement(e))return H.cloneElement(e,t);if(typeof e=="function")return H.createElement(e,t);t.ref;var r=TG(t,NG);return H.createElement(cb,r)}var CN=1,Aa=function(e){function t(){var r;SG(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=AG(this,t,[].concat(s)),Hh(r,"lastBoundingBox",{width:-1,height:-1}),r}return CG(t,e),_G(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>CN||Math.abs(s.height-this.lastBoundingBox.height)>CN)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$a({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,f=s.chartHeight,d,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();d={left:((u||0)-g.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var j=this.getBBoxSnapshot();m={top:((f||0)-j.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return $a($a({},d),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,d=$a($a({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return H.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){n.wrapperNode=g}},DG(i,$a($a({},this.props),{},{payload:TO(f,u,MG)})))}}],[{key:"getWithHeight",value:function(n,s){var i=$a($a({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&_e(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(N.PureComponent);Hh(Aa,"displayName","Legend");Hh(Aa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var ON=ad,$G=db,IG=pn,TN=ON?ON.isConcatSpreadable:void 0;function LG(e){return IG(e)||$G(e)||!!(TN&&e&&e[TN])}var RG=LG,BG=vO,FG=RG;function DO(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=FG),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?DO(l,t-1,r,n,s):BG(s,l):n||(s[s.length]=l)}return s}var $O=DO;function zG(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var VG=zG,UG=VG,WG=UG(),HG=WG,qG=HG,GG=Wh;function KG(e,t){return e&&qG(e,t,GG)}var IO=KG,YG=od;function XG(e,t){return function(r,n){if(r==null)return r;if(!YG(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var JG=XG,ZG=IO,QG=JG,eK=QG(ZG),pb=eK,tK=pb,rK=od;function nK(e,t){var r=-1,n=rK(e)?Array(e.length):[];return tK(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var LO=nK;function aK(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var sK=aK,kN=Ml;function iK(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=kN(e),o=t!==void 0,l=t===null,c=t===t,u=kN(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!u&&e<t||u&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var oK=iK,lK=oK;function cK(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=lK(s[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var uK=cK,pg=Qv,dK=eb,fK=Ma,mK=LO,hK=sK,pK=wO,gK=uK,xK=Fl,yK=pn;function vK(e,t,r){t.length?t=pg(t,function(i){return yK(i)?function(o){return dK(o,i.length===1?i[0]:i)}:i}):t=[xK];var n=-1;t=pg(t,pK(fK));var s=mK(e,function(i,o,l){var c=pg(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return hK(s,function(i,o){return gK(i,o,r)})}var bK=vK;function jK(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var wK=jK,NK=wK,MN=Math.max;function SK(e,t,r){return t=MN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=MN(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),NK(e,this,l)}}var _K=SK;function AK(e){return function(){return e}}var PK=AK,EK=to,CK=function(){try{var e=EK(Object,"defineProperty");return e({},"",{}),e}catch{}}(),RO=CK,OK=PK,DN=RO,TK=Fl,kK=DN?function(e,t){return DN(e,"toString",{configurable:!0,enumerable:!1,value:OK(t),writable:!0})}:TK,MK=kK,DK=800,$K=16,IK=Date.now;function LK(e){var t=0,r=0;return function(){var n=IK(),s=$K-(n-r);if(r=n,s>0){if(++t>=DK)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var RK=LK,BK=MK,FK=RK,zK=FK(BK),VK=zK,UK=Fl,WK=_K,HK=VK;function qK(e,t){return HK(WK(e,t,UK),e+"")}var GK=qK,KK=Yv,YK=od,XK=fb,JK=ai;function ZK(e,t,r){if(!JK(r))return!1;var n=typeof t;return(n=="number"?YK(r)&&XK(t,r.length):n=="string"&&t in r)?KK(r[t],e):!1}var qh=ZK,QK=$O,eY=bK,tY=GK,$N=qh,rY=tY(function(e,t){if(e==null)return[];var r=t.length;return r>1&&$N(e,t[0],t[1])?t=[]:r>2&&$N(t[0],t[1],t[2])&&(t=[t[0]]),eY(e,QK(t,1),[])}),nY=rY;const gb=St(nY);function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g0.apply(this,arguments)}function aY(e,t){return lY(e)||oY(e,t)||iY(e,t)||sY()}function sY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){if(e){if(typeof e=="string")return IN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return IN(e,t)}}function IN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lY(e){if(Array.isArray(e))return e}function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(r),!0).forEach(function(n){cY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cY(e,t,r){return t=uY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=dY(e,"string");return pu(t)=="symbol"?t:t+""}function dY(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fY(e){return Array.isArray(e)&&xr(e[0])&&xr(e[1])?e.join(" ~ "):e}var mY=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,m=t.itemSorter,g=t.wrapperClassName,j=t.labelClassName,h=t.label,y=t.labelFormatter,p=t.accessibilityLayer,x=p===void 0?!1:p,v=function(){if(f&&f.length){var E={padding:0,margin:0},T=(m?gb(f,m):f).map(function(B,I){if(B.type==="none")return null;var D=gg({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),O=B.formatter||d||fY,$=B.value,R=B.name,Q=$,ae=R;if(O&&Q!=null&&ae!=null){var oe=O($,R,B,I,f);if(Array.isArray(oe)){var Z=aY(oe,2);Q=Z[0],ae=Z[1]}else Q=oe}return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:D},xr(ae)?H.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,xr(ae)?H.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,H.createElement("span",{className:"recharts-tooltip-item-value"},Q),H.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:E},T)}return null},S=gg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=gg({margin:0},u),b=!ct(h),_=b?h:"",P=st("recharts-default-tooltip",g),C=st("recharts-tooltip-label",j);b&&y&&f!==void 0&&f!==null&&(_=y(h,f));var M=x?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",g0({className:P,style:S},M),H.createElement("p",{className:C,style:w},H.isValidElement(_)?_:"".concat(_)),v())};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Rd(e,t,r){return t=hY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hY(e){var t=pY(e,"string");return gu(t)=="symbol"?t:t+""}function pY(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sc="recharts-tooltip-wrapper",gY={visibility:"hidden"};function xY(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return st(sc,Rd(Rd(Rd(Rd({},"".concat(sc,"-right"),_e(r)&&t&&_e(t.x)&&r>=t.x),"".concat(sc,"-left"),_e(r)&&t&&_e(t.x)&&r<t.x),"".concat(sc,"-bottom"),_e(n)&&t&&_e(t.y)&&n>=t.y),"".concat(sc,"-top"),_e(n)&&t&&_e(t.y)&&n<t.y))}function RN(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&_e(i[n]))return i[n];var f=r[n]-l-s,d=r[n]+s;if(t[n])return o[n]?f:d;if(o[n]){var m=f,g=c[n];return m<g?Math.max(d,c[n]):Math.max(f,c[n])}var j=d+l,h=c[n]+u;return j>h?Math.max(f,c[n]):Math.max(d,c[n])}function yY(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function vY(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=RN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=RN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=yY({translateX:f,translateY:d,useTranslate3d:l})):u=gY,{cssProperties:u,cssClasses:xY({translateX:f,translateY:d,coordinate:r})}}function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FO(n.key),n)}}function wY(e,t,r){return t&&jY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NY(e,t,r){return t=cm(t),SY(e,BO()?Reflect.construct(t,r||[],cm(e).constructor):t.apply(e,r))}function SY(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Y(e)}function _Y(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BO=function(){return!!e})()}function cm(e){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cm(e)}function AY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x0(e,t)}function x0(e,t){return x0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x0(e,t)}function y0(e,t,r){return t=FO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FO(e){var t=PY(e,"string");return ol(t)=="symbol"?t:t+""}function PY(e,t){if(ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zN=1,EY=function(e){function t(){var r;bY(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=NY(this,t,[].concat(s)),y0(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),y0(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return AY(t,e),wY(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>zN||Math.abs(n.height-this.state.lastBoundingBox.height)>zN)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,f=s.coordinate,d=s.hasPayload,m=s.isAnimationActive,g=s.offset,j=s.position,h=s.reverseDirection,y=s.useTranslate3d,p=s.viewBox,x=s.wrapperStyle,v=vY({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:j,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:p}),S=v.cssClasses,w=v.cssProperties,b=FN(FN({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},x);return H.createElement("div",{tabIndex:-1,className:S,style:b,ref:function(P){n.wrapperNode=P}},u)}}])}(N.PureComponent),CY=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zl={isSsr:CY()};function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){xb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VO(n.key),n)}}function kY(e,t,r){return t&&TY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MY(e,t,r){return t=um(t),DY(e,zO()?Reflect.construct(t,r||[],um(e).constructor):t.apply(e,r))}function DY(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Y(e)}function $Y(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zO=function(){return!!e})()}function um(e){return um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},um(e)}function IY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v0(e,t)}function v0(e,t){return v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},v0(e,t)}function xb(e,t,r){return t=VO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VO(e){var t=LY(e,"string");return ll(t)=="symbol"?t:t+""}function LY(e,t){if(ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function RY(e){return e.dataKey}function BY(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(mY,t)}var Gr=function(e){function t(){return OY(this,t),MY(this,t,arguments)}return IY(t,e),kY(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,f=s.coordinate,d=s.filterNull,m=s.isAnimationActive,g=s.offset,j=s.payload,h=s.payloadUniqBy,y=s.position,p=s.reverseDirection,x=s.useTranslate3d,v=s.viewBox,S=s.wrapperStyle,w=j??[];d&&w.length&&(w=TO(j.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),h,RY));var b=w.length>0;return H.createElement(EY,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:b,offset:g,position:y,reverseDirection:p,useTranslate3d:x,viewBox:v,wrapperStyle:S},BY(u,UN(UN({},this.props),{},{payload:w})))}}])}(N.PureComponent);xb(Gr,"displayName","Tooltip");xb(Gr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var FY=ka,zY=function(){return FY.Date.now()},VY=zY,UY=/\s/;function WY(e){for(var t=e.length;t--&&UY.test(e.charAt(t)););return t}var HY=WY,qY=HY,GY=/^\s+/;function KY(e){return e&&e.slice(0,qY(e)+1).replace(GY,"")}var YY=KY,XY=YY,WN=ai,JY=Ml,HN=NaN,ZY=/^[-+]0x[0-9a-f]+$/i,QY=/^0b[01]+$/i,eX=/^0o[0-7]+$/i,tX=parseInt;function rX(e){if(typeof e=="number")return e;if(JY(e))return HN;if(WN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=WN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=XY(e);var r=QY.test(e);return r||eX.test(e)?tX(e.slice(2),r?2:8):ZY.test(e)?HN:+e}var UO=rX,nX=ai,xg=VY,qN=UO,aX="Expected a function",sX=Math.max,iX=Math.min;function oX(e,t,r){var n,s,i,o,l,c,u=0,f=!1,d=!1,m=!0;if(typeof e!="function")throw new TypeError(aX);t=qN(t)||0,nX(r)&&(f=!!r.leading,d="maxWait"in r,i=d?sX(qN(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function g(b){var _=n,P=s;return n=s=void 0,u=b,o=e.apply(P,_),o}function j(b){return u=b,l=setTimeout(p,t),f?g(b):o}function h(b){var _=b-c,P=b-u,C=t-_;return d?iX(C,i-P):C}function y(b){var _=b-c,P=b-u;return c===void 0||_>=t||_<0||d&&P>=i}function p(){var b=xg();if(y(b))return x(b);l=setTimeout(p,h(b))}function x(b){return l=void 0,m&&n?g(b):(n=s=void 0,o)}function v(){l!==void 0&&clearTimeout(l),u=0,n=c=s=l=void 0}function S(){return l===void 0?o:x(xg())}function w(){var b=xg(),_=y(b);if(n=arguments,s=this,c=b,_){if(l===void 0)return j(c);if(d)return clearTimeout(l),l=setTimeout(p,t),g(c)}return l===void 0&&(l=setTimeout(p,t)),o}return w.cancel=v,w.flush=S,w}var lX=oX,cX=lX,uX=ai,dX="Expected a function";function fX(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(dX);return uX(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),cX(e,t,{leading:n,maxWait:t,trailing:s})}var mX=fX;const WO=St(mX);function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){hX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hX(e,t,r){return t=pX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=gX(e,"string");return xu(t)=="symbol"?t:t+""}function gX(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xX(e,t){return jX(e)||bX(e,t)||vX(e,t)||yX()}function yX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vX(e,t){if(e){if(typeof e=="string")return KN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KN(e,t)}}function KN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function jX(e){if(Array.isArray(e))return e}var Eo=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,m=e.maxHeight,g=e.children,j=e.debounce,h=j===void 0?0:j,y=e.id,p=e.className,x=e.onResize,v=e.style,S=v===void 0?{}:v,w=N.useRef(null),b=N.useRef();b.current=x,N.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=N.useState({containerWidth:s.width,containerHeight:s.height}),P=xX(_,2),C=P[0],M=P[1],A=N.useCallback(function(T,B){M(function(I){var D=Math.round(T),O=Math.round(B);return I.containerWidth===D&&I.containerHeight===O?I:{containerWidth:D,containerHeight:O}})},[]);N.useEffect(function(){var T=function(R){var Q,ae=R[0].contentRect,oe=ae.width,Z=ae.height;A(oe,Z),(Q=b.current)===null||Q===void 0||Q.call(b,oe,Z)};h>0&&(T=WO(T,h,{trailing:!0,leading:!1}));var B=new ResizeObserver(T),I=w.current.getBoundingClientRect(),D=I.width,O=I.height;return A(D,O),B.observe(w.current),function(){B.disconnect()}},[A,h]);var E=N.useMemo(function(){var T=C.containerWidth,B=C.containerHeight;if(T<0||B<0)return null;oa(Ai(o)||Ai(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),oa(!r||r>0,"The aspect(%s) must be greater than zero.",r);var I=Ai(o)?T:o,D=Ai(c)?B:c;r&&r>0&&(I?D=I/r:D&&(I=D*r),m&&D>m&&(D=m)),oa(I>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,I,D,o,c,f,d,r);var O=!Array.isArray(g)&&Ya(g.type).endsWith("Chart");return H.Children.map(g,function($){return H.isValidElement($)?N.cloneElement($,Bd({width:I,height:D},O?{style:Bd({height:"100%",width:"100%",maxHeight:D,maxWidth:I},$.props.style)}:{})):$})},[r,g,c,m,d,f,C,o]);return H.createElement("div",{id:y?"".concat(y):void 0,className:st("recharts-responsive-container",p),style:Bd(Bd({},S),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:m}),ref:w},E)}),Gh=function(t){return null};Gh.displayName="Cell";function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function YN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YN(Object(r),!0).forEach(function(n){wX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wX(e,t,r){return t=NX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NX(e){var t=SX(e,"string");return yu(t)=="symbol"?t:t+""}function SX(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oo={widthCache:{},cacheCount:0},_X=2e3,AX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XN="recharts_measurement_span";function PX(e){var t=b0({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ic=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zl.isSsr)return{width:0,height:0};var n=PX(r),s=JSON.stringify({text:t,copyStyle:n});if(oo.widthCache[s])return oo.widthCache[s];try{var i=document.getElementById(XN);i||(i=document.createElement("span"),i.setAttribute("id",XN),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=b0(b0({},AX),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return oo.widthCache[s]=c,++oo.cacheCount>_X&&(oo.cacheCount=0,oo.widthCache={}),c}catch{return{width:0,height:0}}},EX=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function dm(e,t){return kX(e)||TX(e,t)||OX(e,t)||CX()}function CX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OX(e,t){if(e){if(typeof e=="string")return JN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JN(e,t)}}function JN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function kX(e){if(Array.isArray(e))return e}function MX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$X(n.key),n)}}function DX(e,t,r){return t&&ZN(e.prototype,t),r&&ZN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $X(e){var t=IX(e,"string");return vu(t)=="symbol"?t:t+""}function IX(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var QN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,RX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,HO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},BX=Object.keys(HO),Co="NaN";function FX(e,t){return e*HO[t]}var Fd=function(){function e(t,r){MX(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!LX.test(r)&&(this.num=NaN,this.unit=""),BX.includes(r)&&(this.num=FX(t,r),this.unit="px")}return DX(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=RX.exec(r))!==null&&n!==void 0?n:[],i=dm(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function qO(e){if(e.includes(Co))return Co;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=QN.exec(t))!==null&&r!==void 0?r:[],s=dm(n,4),i=s[1],o=s[2],l=s[3],c=Fd.parse(i??""),u=Fd.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Co;t=t.replace(QN,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,m=(d=e2.exec(t))!==null&&d!==void 0?d:[],g=dm(m,4),j=g[1],h=g[2],y=g[3],p=Fd.parse(j??""),x=Fd.parse(y??""),v=h==="+"?p.add(x):p.subtract(x);if(v.isNaN())return Co;t=t.replace(e2,v.toString())}return t}var t2=/\(([^()]*)\)/;function zX(e){for(var t=e;t.includes("(");){var r=t2.exec(t),n=dm(r,2),s=n[1];t=t.replace(t2,qO(s))}return t}function VX(e){var t=e.replace(/\s+/g,"");return t=zX(t),t=qO(t),t}function UX(e){try{return VX(e)}catch{return Co}}function yg(e){var t=UX(e.slice(5,-1));return t===Co?"":t}var WX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HX=["dx","dy","angle","className","breakAll"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function r2(e,t){if(e==null)return{};var r=qX(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function n2(e,t){return XX(e)||YX(e,t)||KX(e,t)||GX()}function GX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KX(e,t){if(e){if(typeof e=="string")return a2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a2(e,t)}}function a2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function YX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function XX(e){if(Array.isArray(e))return e}var GO=/[ \f\n\r\t\v\u2028\u2029]+/,KO=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];ct(r)||(n?i=r.toString().split(""):i=r.toString().split(GO));var o=i.map(function(c){return{word:c,width:Ic(c,s).width}}),l=n?0:Ic("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},JX=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=_e(o),d=l,m=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I.reduce(function(D,O){var $=O.word,R=O.width,Q=D[D.length-1];if(Q&&(s==null||i||Q.width+R+n<Number(s)))Q.words.push($),Q.width+=R+n;else{var ae={words:[$],width:R};D.push(ae)}return D},[])},g=m(r),j=function(I){return I.reduce(function(D,O){return D.width>O.width?D:O})};if(!f)return g;for(var h="",y=function(I){var D=d.slice(0,I),O=KO({breakAll:u,style:c,children:D+h}).wordsWithComputedWidth,$=m(O),R=$.length>o||j($).width>Number(s);return[R,$]},p=0,x=d.length-1,v=0,S;p<=x&&v<=d.length-1;){var w=Math.floor((p+x)/2),b=w-1,_=y(b),P=n2(_,2),C=P[0],M=P[1],A=y(w),E=n2(A,1),T=E[0];if(!C&&!T&&(p=w+1),C&&T&&(x=w-1),!C&&T){S=M;break}v++}return S||g},s2=function(t){var r=ct(t)?[]:t.toString().split(GO);return[{words:r}]},ZX=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!zl.isSsr){var c,u,f=KO({breakAll:o,children:s,style:i});if(f){var d=f.wordsWithComputedWidth,m=f.spaceWidth;c=d,u=m}else return s2(s);return JX({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return s2(s)},i2="#808080",Gi=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,m=t.textAnchor,g=m===void 0?"start":m,j=t.verticalAnchor,h=j===void 0?"end":j,y=t.fill,p=y===void 0?i2:y,x=r2(t,WX),v=N.useMemo(function(){return ZX({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),S=x.dx,w=x.dy,b=x.angle,_=x.className,P=x.breakAll,C=r2(x,HX);if(!xr(n)||!xr(i))return null;var M=n+(_e(S)?S:0),A=i+(_e(w)?w:0),E;switch(h){case"start":E=yg("calc(".concat(u,")"));break;case"middle":E=yg("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=yg("calc(".concat(v.length-1," * -").concat(l,")"));break}var T=[];if(d){var B=v[0].width,I=x.width;T.push("scale(".concat((_e(I)?I/B:1)/B,")"))}return b&&T.push("rotate(".concat(b,", ").concat(M,", ").concat(A,")")),T.length&&(C.transform=T.join(" ")),H.createElement("text",j0({},Ye(C,!0),{x:M,y:A,className:st("recharts-text",_),textAnchor:g,fill:p.includes("url")?i2:p}),v.map(function(D,O){var $=D.words.join(P?"":" ");return H.createElement("tspan",{x:M,dy:O===0?E:l,key:"".concat($,"-").concat(O)},$)}))};function Vs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QX(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yb(e){let t,r,n;e.length!==2?(t=Vs,r=(l,c)=>Vs(e(l),c),n=(l,c)=>e(l)-c):(t=e===Vs||e===QX?e:eJ,r=e,n=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=s(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:s,center:o,right:i}}function eJ(){return 0}function YO(e){return e===null?NaN:+e}function*tJ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const rJ=yb(Vs),ld=rJ.right;yb(YO).center;class o2 extends Map{constructor(t,r=sJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(l2(this,t))}has(t){return super.has(l2(this,t))}set(t,r){return super.set(nJ(this,t),r)}delete(t){return super.delete(aJ(this,t))}}function l2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function aJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function sJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function iJ(e=Vs){if(e===Vs)return XO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function XO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const oJ=Math.sqrt(50),lJ=Math.sqrt(10),cJ=Math.sqrt(2);function fm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=oJ?10:i>=lJ?5:i>=cJ?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?fm(e,t,r*2):[l,c,u]}function w0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?fm(t,e,r):fm(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function N0(e,t,r){return t=+t,e=+e,r=+r,fm(e,t,r)[2]}function S0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?N0(t,e,r):N0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function c2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function u2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function JO(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?XO:iJ(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(t-u*d/c+m)),j=Math.min(n,Math.floor(t+(c-u)*d/c+m));JO(e,t,g,j,s)}const i=e[t];let o=r,l=n;for(ic(e,r,t),s(e[n],i)>0&&ic(e,r,n);o<l;){for(ic(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?ic(e,r,l):(++l,ic(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function ic(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function uJ(e,t,r){if(e=Float64Array.from(tJ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return u2(e);if(t>=1)return c2(e);var n,s=(n-1)*t,i=Math.floor(s),o=c2(JO(e,i).subarray(0,i+1)),l=u2(e.subarray(i+1));return o+(l-o)*(s-i)}}function dJ(e,t,r=YO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function fJ(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function qn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ds(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _0=Symbol("implicit");function vb(){var e=new o2,t=[],r=[],n=_0;function s(i){let o=e.get(i);if(o===void 0){if(n!==_0)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new o2;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return vb(t,r).unknown(n)},qn.apply(s,arguments),s}function bu(){var e=vb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var m=t().length,g=s<n,j=g?s:n,h=g?n:s;i=(h-j)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),j+=(h-j-i*(m-c))*f,o=i*(1-c),l&&(j=Math.round(j),o=Math.round(o));var y=fJ(m).map(function(p){return j+i*p});return r(g?y.reverse():y)}return e.domain=function(m){return arguments.length?(t(m),d()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,d()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,d()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),d()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),d()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,d()):u},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),d()):f},e.copy=function(){return bu(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},qn.apply(d(),arguments)}function ZO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ZO(t())},e}function Lc(){return ZO(bu.apply(null,arguments).paddingInner(1))}function bb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function QO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cd(){}var ju=.7,mm=1/ju,Wo="\\s*([+-]?\\d+)\\s*",wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mJ=/^#([0-9a-f]{3,8})$/,hJ=new RegExp(`^rgb\\(${Wo},${Wo},${Wo}\\)$`),pJ=new RegExp(`^rgb\\(${Pa},${Pa},${Pa}\\)$`),gJ=new RegExp(`^rgba\\(${Wo},${Wo},${Wo},${wu}\\)$`),xJ=new RegExp(`^rgba\\(${Pa},${Pa},${Pa},${wu}\\)$`),yJ=new RegExp(`^hsl\\(${wu},${Pa},${Pa}\\)$`),vJ=new RegExp(`^hsla\\(${wu},${Pa},${Pa},${wu}\\)$`),d2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bb(cd,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:f2,formatHex:f2,formatHex8:bJ,formatHsl:jJ,formatRgb:m2,toString:m2});function f2(){return this.rgb().formatHex()}function bJ(){return this.rgb().formatHex8()}function jJ(){return eT(this).formatHsl()}function m2(){return this.rgb().formatRgb()}function Nu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=mJ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?h2(t):r===3?new cn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?zd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?zd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=hJ.exec(e))?new cn(t[1],t[2],t[3],1):(t=pJ.exec(e))?new cn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=gJ.exec(e))?zd(t[1],t[2],t[3],t[4]):(t=xJ.exec(e))?zd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yJ.exec(e))?x2(t[1],t[2]/100,t[3]/100,1):(t=vJ.exec(e))?x2(t[1],t[2]/100,t[3]/100,t[4]):d2.hasOwnProperty(e)?h2(d2[e]):e==="transparent"?new cn(NaN,NaN,NaN,0):null}function h2(e){return new cn(e>>16&255,e>>8&255,e&255,1)}function zd(e,t,r,n){return n<=0&&(e=t=r=NaN),new cn(e,t,r,n)}function wJ(e){return e instanceof cd||(e=Nu(e)),e?(e=e.rgb(),new cn(e.r,e.g,e.b,e.opacity)):new cn}function A0(e,t,r,n){return arguments.length===1?wJ(e):new cn(e,t,r,n??1)}function cn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}bb(cn,A0,QO(cd,{brighter(e){return e=e==null?mm:Math.pow(mm,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new cn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cn(Ii(this.r),Ii(this.g),Ii(this.b),hm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:p2,formatHex:p2,formatHex8:NJ,formatRgb:g2,toString:g2}));function p2(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}`}function NJ(){return`#${Pi(this.r)}${Pi(this.g)}${Pi(this.b)}${Pi((isNaN(this.opacity)?1:this.opacity)*255)}`}function g2(){const e=hm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ii(this.r)}, ${Ii(this.g)}, ${Ii(this.b)}${e===1?")":`, ${e})`}`}function hm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ii(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Pi(e){return e=Ii(e),(e<16?"0":"")+e.toString(16)}function x2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ta(e,t,r,n)}function eT(e){if(e instanceof ta)return new ta(e.h,e.s,e.l,e.opacity);if(e instanceof cd||(e=Nu(e)),!e)return new ta;if(e instanceof ta)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new ta(o,l,c,e.opacity)}function SJ(e,t,r,n){return arguments.length===1?eT(e):new ta(e,t,r,n??1)}function ta(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}bb(ta,SJ,QO(cd,{brighter(e){return e=e==null?mm:Math.pow(mm,e),new ta(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new ta(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new cn(vg(e>=240?e-240:e+120,s,n),vg(e,s,n),vg(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ta(y2(this.h),Vd(this.s),Vd(this.l),hm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hm(this.opacity);return`${e===1?"hsl(":"hsla("}${y2(this.h)}, ${Vd(this.s)*100}%, ${Vd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function y2(e){return e=(e||0)%360,e<0?e+360:e}function Vd(e){return Math.max(0,Math.min(1,e||0))}function vg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jb=e=>()=>e;function _J(e,t){return function(r){return e+r*t}}function AJ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function PJ(e){return(e=+e)==1?tT:function(t,r){return r-t?AJ(t,r,e):jb(isNaN(t)?r:t)}}function tT(e,t){var r=t-e;return r?_J(e,r):jb(isNaN(e)?t:e)}const v2=function e(t){var r=PJ(t);function n(s,i){var o=r((s=A0(s)).r,(i=A0(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=tT(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return n.gamma=e,n}(1);function EJ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function CJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function OJ(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Vl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function TJ(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function kJ(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Vl(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var P0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(P0.source,"g");function MJ(e){return function(){return e}}function DJ(e){return function(t){return e(t)+""}}function $J(e,t){var r=P0.lastIndex=bg.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=P0.exec(e))&&(s=bg.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:pm(n,s)})),r=bg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?DJ(c[0].x):MJ(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Vl(e,t){var r=typeof t,n;return t==null||r==="boolean"?jb(t):(r==="number"?pm:r==="string"?(n=Nu(t))?(t=n,v2):$J:t instanceof Nu?v2:t instanceof Date?TJ:CJ(t)?EJ:Array.isArray(t)?OJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?kJ:pm)(e,t)}function wb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function IJ(e,t){t===void 0&&(t=e,e=Vl);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function LJ(e){return function(){return e}}function gm(e){return+e}var b2=[0,1];function Jr(e){return e}function E0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:LJ(isNaN(t)?NaN:.5)}function RJ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function BJ(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=E0(s,n),i=r(o,i)):(n=E0(n,s),i=r(i,o)),function(l){return i(n(l))}}function FJ(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=E0(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=ld(e,l,1,n)-1;return i[c](s[c](l))}}function ud(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kh(){var e=b2,t=b2,r=Vl,n,s,i,o=Jr,l,c,u;function f(){var m=Math.min(e.length,t.length);return o!==Jr&&(o=RJ(e[0],e[m-1])),l=m>2?FJ:BJ,c=u=null,d}function d(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return d.invert=function(m){return o(s((u||(u=l(t,e.map(n),pm)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,gm),f()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),r=wb,f()},d.clamp=function(m){return arguments.length?(o=m?!0:Jr,f()):o!==Jr},d.interpolate=function(m){return arguments.length?(r=m,f()):r},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,g){return n=m,s=g,f()}}function Nb(){return Kh()(Jr,Jr)}function zJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function cl(e){return e=xm(Math.abs(e)),e?e[1]:NaN}function VJ(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function UJ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var WJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Su(e){if(!(t=WJ.exec(e)))throw new Error("invalid format: "+e);var t;return new Sb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Su.prototype=Sb.prototype;function Sb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function HJ(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var rT;function qJ(e,t){var r=xm(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(rT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+xm(e,Math.max(0,t+i-1))[0]}function j2(e,t){var r=xm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const w2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>j2(e*100,t),r:j2,s:qJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N2(e){return e}var S2=Array.prototype.map,_2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GJ(e){var t=e.grouping===void 0||e.thousands===void 0?N2:VJ(S2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?N2:UJ(S2.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Su(d);var m=d.fill,g=d.align,j=d.sign,h=d.symbol,y=d.zero,p=d.width,x=d.comma,v=d.precision,S=d.trim,w=d.type;w==="n"?(x=!0,w="g"):w2[w]||(v===void 0&&(v=12),S=!0,w="g"),(y||m==="0"&&g==="=")&&(y=!0,m="0",g="=");var b=h==="$"?r:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=h==="$"?n:/[%p]/.test(w)?o:"",P=w2[w],C=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function M(A){var E=b,T=_,B,I,D;if(w==="c")T=P(A)+T,A="";else{A=+A;var O=A<0||1/A<0;if(A=isNaN(A)?c:P(Math.abs(A),v),S&&(A=HJ(A)),O&&+A==0&&j!=="+"&&(O=!1),E=(O?j==="("?j:l:j==="-"||j==="("?"":j)+E,T=(w==="s"?_2[8+rT/3]:"")+T+(O&&j==="("?")":""),C){for(B=-1,I=A.length;++B<I;)if(D=A.charCodeAt(B),48>D||D>57){T=(D===46?s+A.slice(B+1):A.slice(B))+T,A=A.slice(0,B);break}}}x&&!y&&(A=t(A,1/0));var $=E.length+A.length+T.length,R=$<p?new Array(p-$+1).join(m):"";switch(x&&y&&(A=t(R+A,R.length?p-T.length:1/0),R=""),g){case"<":A=E+A+T+R;break;case"=":A=E+R+A+T;break;case"^":A=R.slice(0,$=R.length>>1)+E+A+T+R.slice($);break;default:A=R+E+A+T;break}return i(A)}return M.toString=function(){return d+""},M}function f(d,m){var g=u((d=Su(d),d.type="f",d)),j=Math.max(-8,Math.min(8,Math.floor(cl(m)/3)))*3,h=Math.pow(10,-j),y=_2[8+j/3];return function(p){return g(h*p)+y}}return{format:u,formatPrefix:f}}var Ud,_b,nT;KJ({thousands:",",grouping:[3],currency:["$",""]});function KJ(e){return Ud=GJ(e),_b=Ud.format,nT=Ud.formatPrefix,Ud}function YJ(e){return Math.max(0,-cl(Math.abs(e)))}function XJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cl(t)/3)))*3-cl(Math.abs(e)))}function JJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cl(t)-cl(e))+1}function aT(e,t,r,n){var s=S0(e,t,r),i;switch(n=Su(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=XJ(s,o))&&(n.precision=i),nT(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=JJ(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=YJ(s))&&(n.precision=i-(n.type==="%")*2);break}}return _b(n)}function si(e){var t=e.domain;return e.ticks=function(r){var n=t();return w0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return aT(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=N0(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ym(){var e=Nb();return e.copy=function(){return ud(e,ym())},qn.apply(e,arguments),si(e)}function sT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return sT(e).unknown(t)},e=arguments.length?Array.from(e,gm):[0,1],si(r)}function iT(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function A2(e){return Math.log(e)}function P2(e){return Math.exp(e)}function ZJ(e){return-Math.log(-e)}function QJ(e){return-Math.exp(-e)}function eZ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tZ(e){return e===10?eZ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function rZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function E2(e){return(t,r)=>-e(-t,r)}function Ab(e){const t=e(A2,P2),r=t.domain;let n=10,s,i;function o(){return s=rZ(n),i=tZ(n),r()[0]<0?(s=E2(s),i=E2(i),e(ZJ,QJ)):e(A2,P2),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let m=s(u),g=s(f),j,h;const y=l==null?10:+l;let p=[];if(!(n%1)&&g-m<y){if(m=Math.floor(m),g=Math.ceil(g),u>0){for(;m<=g;++m)for(j=1;j<n;++j)if(h=m<0?j/i(-m):j*i(m),!(h<u)){if(h>f)break;p.push(h)}}else for(;m<=g;++m)for(j=n-1;j>=1;--j)if(h=m>0?j/i(-m):j*i(m),!(h<u)){if(h>f)break;p.push(h)}p.length*2<y&&(p=w0(u,f,y))}else p=w0(m,g,Math.min(g-m,y)).map(i);return d?p.reverse():p},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Su(c)).precision==null&&(c.trim=!0),c=_b(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/i(Math.round(s(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(iT(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function oT(){const e=Ab(Kh()).domain([1,10]);return e.copy=()=>ud(e,oT()).base(e.base()),qn.apply(e,arguments),e}function C2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function O2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Pb(e){var t=1,r=e(C2(t),O2(t));return r.constant=function(n){return arguments.length?e(C2(t=+n),O2(t)):t},si(r)}function lT(){var e=Pb(Kh());return e.copy=function(){return ud(e,lT()).constant(e.constant())},qn.apply(e,arguments)}function T2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function aZ(e){return e<0?-e*e:e*e}function Eb(e){var t=e(Jr,Jr),r=1;function n(){return r===1?e(Jr,Jr):r===.5?e(nZ,aZ):e(T2(r),T2(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},si(t)}function Cb(){var e=Eb(Kh());return e.copy=function(){return ud(e,Cb()).exponent(e.exponent())},qn.apply(e,arguments),e}function sZ(){return Cb.apply(null,arguments).exponent(.5)}function k2(e){return Math.sign(e)*e*e}function iZ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function cT(){var e=Nb(),t=[0,1],r=!1,n;function s(i){var o=iZ(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(k2(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,gm)).map(k2)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return cT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},qn.apply(s,arguments),si(s)}function uT(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=dJ(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[ld(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Vs),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return uT().domain(e).range(t).unknown(n)},qn.apply(i,arguments)}function dT(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[ld(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return dT().domain([e,t]).range(s).unknown(i)},qn.apply(si(o),arguments)}function fT(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[ld(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return fT().domain(e).range(t).unknown(r)},qn.apply(s,arguments)}const jg=new Date,wg=new Date;function yr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>yr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(jg.setTime(+i),wg.setTime(+o),e(jg),e(wg),Math.floor(r(jg,wg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const vm=yr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vm);vm.range;const Ua=1e3,Ln=Ua*60,Wa=Ln*60,as=Wa*24,Ob=as*7,M2=as*30,Ng=as*365,Ei=yr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());Ei.range;const Tb=yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*Ln)},(e,t)=>(t-e)/Ln,e=>e.getMinutes());Tb.range;const kb=yr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ln)},(e,t)=>(t-e)/Ln,e=>e.getUTCMinutes());kb.range;const Mb=yr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*Ln)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getHours());Mb.range;const Db=yr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getUTCHours());Db.range;const dd=yr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ln)/as,e=>e.getDate()-1);dd.range;const Yh=yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/as,e=>e.getUTCDate()-1);Yh.range;const mT=yr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/as,e=>Math.floor(e/as));mT.range;function ro(e){return yr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ln)/Ob)}const Xh=ro(0),bm=ro(1),oZ=ro(2),lZ=ro(3),ul=ro(4),cZ=ro(5),uZ=ro(6);Xh.range;bm.range;oZ.range;lZ.range;ul.range;cZ.range;uZ.range;function no(e){return yr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ob)}const Jh=no(0),jm=no(1),dZ=no(2),fZ=no(3),dl=no(4),mZ=no(5),hZ=no(6);Jh.range;jm.range;dZ.range;fZ.range;dl.range;mZ.range;hZ.range;const $b=yr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$b.range;const Ib=yr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ib.range;const ss=yr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ss.range;const is=yr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());is.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});is.range;function hT(e,t,r,n,s,i){const o=[[Ei,1,Ua],[Ei,5,5*Ua],[Ei,15,15*Ua],[Ei,30,30*Ua],[i,1,Ln],[i,5,5*Ln],[i,15,15*Ln],[i,30,30*Ln],[s,1,Wa],[s,3,3*Wa],[s,6,6*Wa],[s,12,12*Wa],[n,1,as],[n,2,2*as],[r,1,Ob],[t,1,M2],[t,3,3*M2],[e,1,Ng]];function l(u,f,d){const m=f<u;m&&([u,f]=[f,u]);const g=d&&typeof d.range=="function"?d:c(u,f,d),j=g?g.range(u,+f+1):[];return m?j.reverse():j}function c(u,f,d){const m=Math.abs(f-u)/d,g=yb(([,,y])=>y).right(o,m);if(g===o.length)return e.every(S0(u/Ng,f/Ng,d));if(g===0)return vm.every(Math.max(S0(u,f,d),1));const[j,h]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return j.every(h)}return[l,c]}const[pZ,gZ]=hT(is,Ib,Jh,mT,Db,kb),[xZ,yZ]=hT(ss,$b,Xh,dd,Mb,Tb);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _g(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vZ(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=lc(s),f=cc(s),d=lc(i),m=cc(i),g=lc(o),j=cc(o),h=lc(l),y=cc(l),p=lc(c),x=cc(c),v={a:O,A:$,b:R,B:Q,c:null,d:B2,e:B2,f:VZ,g:ZZ,G:eQ,H:BZ,I:FZ,j:zZ,L:pT,m:UZ,M:WZ,p:ae,q:oe,Q:V2,s:U2,S:HZ,u:qZ,U:GZ,V:KZ,w:YZ,W:XZ,x:null,X:null,y:JZ,Y:QZ,Z:tQ,"%":z2},S={a:Z,A:pe,b:Ee,B:Y,c:null,d:F2,e:F2,f:sQ,g:pQ,G:xQ,H:rQ,I:nQ,j:aQ,L:xT,m:iQ,M:oQ,p:J,q:W,Q:V2,s:U2,S:lQ,u:cQ,U:uQ,V:dQ,w:fQ,W:mQ,x:null,X:null,y:hQ,Y:gQ,Z:yQ,"%":z2},w={a:M,A,b:E,B:T,c:B,d:L2,e:L2,f:$Z,g:I2,G:$2,H:R2,I:R2,j:TZ,L:DZ,m:OZ,M:kZ,p:C,q:CZ,Q:LZ,s:RZ,S:MZ,u:SZ,U:_Z,V:AZ,w:NZ,W:PZ,x:I,X:D,y:I2,Y:$2,Z:EZ,"%":IZ};v.x=b(r,v),v.X=b(n,v),v.c=b(t,v),S.x=b(r,S),S.X=b(n,S),S.c=b(t,S);function b(X,k){return function(K){var z=[],le=-1,ge=0,ue=X.length,U,xe,Pe;for(K instanceof Date||(K=new Date(+K));++le<ue;)X.charCodeAt(le)===37&&(z.push(X.slice(ge,le)),(xe=D2[U=X.charAt(++le)])!=null?U=X.charAt(++le):xe=U==="e"?" ":"0",(Pe=k[U])&&(U=Pe(K,xe)),z.push(U),ge=le+1);return z.push(X.slice(ge,le)),z.join("")}}function _(X,k){return function(K){var z=oc(1900,void 0,1),le=P(z,X,K+="",0),ge,ue;if(le!=K.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(k&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(ge=_g(oc(z.y,0,1)),ue=ge.getUTCDay(),ge=ue>4||ue===0?jm.ceil(ge):jm(ge),ge=Yh.offset(ge,(z.V-1)*7),z.y=ge.getUTCFullYear(),z.m=ge.getUTCMonth(),z.d=ge.getUTCDate()+(z.w+6)%7):(ge=Sg(oc(z.y,0,1)),ue=ge.getDay(),ge=ue>4||ue===0?bm.ceil(ge):bm(ge),ge=dd.offset(ge,(z.V-1)*7),z.y=ge.getFullYear(),z.m=ge.getMonth(),z.d=ge.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),ue="Z"in z?_g(oc(z.y,0,1)).getUTCDay():Sg(oc(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(ue+5)%7:z.w+z.U*7-(ue+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,_g(z)):Sg(z)}}function P(X,k,K,z){for(var le=0,ge=k.length,ue=K.length,U,xe;le<ge;){if(z>=ue)return-1;if(U=k.charCodeAt(le++),U===37){if(U=k.charAt(le++),xe=w[U in D2?k.charAt(le++):U],!xe||(z=xe(X,K,z))<0)return-1}else if(U!=K.charCodeAt(z++))return-1}return z}function C(X,k,K){var z=u.exec(k.slice(K));return z?(X.p=f.get(z[0].toLowerCase()),K+z[0].length):-1}function M(X,k,K){var z=g.exec(k.slice(K));return z?(X.w=j.get(z[0].toLowerCase()),K+z[0].length):-1}function A(X,k,K){var z=d.exec(k.slice(K));return z?(X.w=m.get(z[0].toLowerCase()),K+z[0].length):-1}function E(X,k,K){var z=p.exec(k.slice(K));return z?(X.m=x.get(z[0].toLowerCase()),K+z[0].length):-1}function T(X,k,K){var z=h.exec(k.slice(K));return z?(X.m=y.get(z[0].toLowerCase()),K+z[0].length):-1}function B(X,k,K){return P(X,t,k,K)}function I(X,k,K){return P(X,r,k,K)}function D(X,k,K){return P(X,n,k,K)}function O(X){return o[X.getDay()]}function $(X){return i[X.getDay()]}function R(X){return c[X.getMonth()]}function Q(X){return l[X.getMonth()]}function ae(X){return s[+(X.getHours()>=12)]}function oe(X){return 1+~~(X.getMonth()/3)}function Z(X){return o[X.getUTCDay()]}function pe(X){return i[X.getUTCDay()]}function Ee(X){return c[X.getUTCMonth()]}function Y(X){return l[X.getUTCMonth()]}function J(X){return s[+(X.getUTCHours()>=12)]}function W(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var k=b(X+="",v);return k.toString=function(){return X},k},parse:function(X){var k=_(X+="",!1);return k.toString=function(){return X},k},utcFormat:function(X){var k=b(X+="",S);return k.toString=function(){return X},k},utcParse:function(X){var k=_(X+="",!0);return k.toString=function(){return X},k}}}var D2={"-":"",_:" ",0:"0"},_r=/^\s*\d+/,bZ=/^%/,jZ=/[\\^$*+?|[\]().{}]/g;function yt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function wZ(e){return e.replace(jZ,"\\$&")}function lc(e){return new RegExp("^(?:"+e.map(wZ).join("|")+")","i")}function cc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function NZ(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function SZ(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _Z(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function AZ(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function PZ(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function $2(e,t,r){var n=_r.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function I2(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function EZ(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CZ(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function OZ(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function L2(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function TZ(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function R2(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function kZ(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function MZ(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function DZ(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $Z(e,t,r){var n=_r.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function IZ(e,t,r){var n=bZ.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function LZ(e,t,r){var n=_r.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function RZ(e,t,r){var n=_r.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function B2(e,t){return yt(e.getDate(),t,2)}function BZ(e,t){return yt(e.getHours(),t,2)}function FZ(e,t){return yt(e.getHours()%12||12,t,2)}function zZ(e,t){return yt(1+dd.count(ss(e),e),t,3)}function pT(e,t){return yt(e.getMilliseconds(),t,3)}function VZ(e,t){return pT(e,t)+"000"}function UZ(e,t){return yt(e.getMonth()+1,t,2)}function WZ(e,t){return yt(e.getMinutes(),t,2)}function HZ(e,t){return yt(e.getSeconds(),t,2)}function qZ(e){var t=e.getDay();return t===0?7:t}function GZ(e,t){return yt(Xh.count(ss(e)-1,e),t,2)}function gT(e){var t=e.getDay();return t>=4||t===0?ul(e):ul.ceil(e)}function KZ(e,t){return e=gT(e),yt(ul.count(ss(e),e)+(ss(e).getDay()===4),t,2)}function YZ(e){return e.getDay()}function XZ(e,t){return yt(bm.count(ss(e)-1,e),t,2)}function JZ(e,t){return yt(e.getFullYear()%100,t,2)}function ZZ(e,t){return e=gT(e),yt(e.getFullYear()%100,t,2)}function QZ(e,t){return yt(e.getFullYear()%1e4,t,4)}function eQ(e,t){var r=e.getDay();return e=r>=4||r===0?ul(e):ul.ceil(e),yt(e.getFullYear()%1e4,t,4)}function tQ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yt(t/60|0,"0",2)+yt(t%60,"0",2)}function F2(e,t){return yt(e.getUTCDate(),t,2)}function rQ(e,t){return yt(e.getUTCHours(),t,2)}function nQ(e,t){return yt(e.getUTCHours()%12||12,t,2)}function aQ(e,t){return yt(1+Yh.count(is(e),e),t,3)}function xT(e,t){return yt(e.getUTCMilliseconds(),t,3)}function sQ(e,t){return xT(e,t)+"000"}function iQ(e,t){return yt(e.getUTCMonth()+1,t,2)}function oQ(e,t){return yt(e.getUTCMinutes(),t,2)}function lQ(e,t){return yt(e.getUTCSeconds(),t,2)}function cQ(e){var t=e.getUTCDay();return t===0?7:t}function uQ(e,t){return yt(Jh.count(is(e)-1,e),t,2)}function yT(e){var t=e.getUTCDay();return t>=4||t===0?dl(e):dl.ceil(e)}function dQ(e,t){return e=yT(e),yt(dl.count(is(e),e)+(is(e).getUTCDay()===4),t,2)}function fQ(e){return e.getUTCDay()}function mQ(e,t){return yt(jm.count(is(e)-1,e),t,2)}function hQ(e,t){return yt(e.getUTCFullYear()%100,t,2)}function pQ(e,t){return e=yT(e),yt(e.getUTCFullYear()%100,t,2)}function gQ(e,t){return yt(e.getUTCFullYear()%1e4,t,4)}function xQ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?dl(e):dl.ceil(e),yt(e.getUTCFullYear()%1e4,t,4)}function yQ(){return"+0000"}function z2(){return"%"}function V2(e){return+e}function U2(e){return Math.floor(+e/1e3)}var lo,vT,bT;vQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vQ(e){return lo=vZ(e),vT=lo.format,lo.parse,bT=lo.utcFormat,lo.utcParse,lo}function bQ(e){return new Date(e)}function jQ(e){return e instanceof Date?+e:+new Date(+e)}function Lb(e,t,r,n,s,i,o,l,c,u){var f=Nb(),d=f.invert,m=f.domain,g=u(".%L"),j=u(":%S"),h=u("%I:%M"),y=u("%I %p"),p=u("%a %d"),x=u("%b %d"),v=u("%B"),S=u("%Y");function w(b){return(c(b)<b?g:l(b)<b?j:o(b)<b?h:i(b)<b?y:n(b)<b?s(b)<b?p:x:r(b)<b?v:S)(b)}return f.invert=function(b){return new Date(d(b))},f.domain=function(b){return arguments.length?m(Array.from(b,jQ)):m().map(bQ)},f.ticks=function(b){var _=m();return e(_[0],_[_.length-1],b??10)},f.tickFormat=function(b,_){return _==null?w:u(_)},f.nice=function(b){var _=m();return(!b||typeof b.range!="function")&&(b=t(_[0],_[_.length-1],b??10)),b?m(iT(_,b)):f},f.copy=function(){return ud(f,Lb(e,t,r,n,s,i,o,l,c,u))},f}function wQ(){return qn.apply(Lb(xZ,yZ,ss,$b,Xh,dd,Mb,Tb,Ei,vT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function NQ(){return qn.apply(Lb(pZ,gZ,is,Ib,Jh,Yh,Db,kb,Ei,bT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zh(){var e=0,t=1,r,n,s,i,o=Jr,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(i(d)-r)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(m){var g,j;return arguments.length?([g,j]=m,o=d(g,j),u):[o(0),o(1)]}}return u.range=f(Vl),u.rangeRound=f(wb),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),s=r===n?0:1/(n-r),u}}function ii(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function jT(){var e=si(Zh()(Jr));return e.copy=function(){return ii(e,jT())},ds.apply(e,arguments)}function wT(){var e=Ab(Zh()).domain([1,10]);return e.copy=function(){return ii(e,wT()).base(e.base())},ds.apply(e,arguments)}function NT(){var e=Pb(Zh());return e.copy=function(){return ii(e,NT()).constant(e.constant())},ds.apply(e,arguments)}function Rb(){var e=Eb(Zh());return e.copy=function(){return ii(e,Rb()).exponent(e.exponent())},ds.apply(e,arguments)}function SQ(){return Rb.apply(null,arguments).exponent(.5)}function ST(){var e=[],t=Jr;function r(n){if(n!=null&&!isNaN(n=+n))return t((ld(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Vs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>uJ(e,i/n))},r.copy=function(){return ST(t).domain(e)},ds.apply(r,arguments)}function Qh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=Jr,f,d=!1,m;function g(h){return isNaN(h=+h)?m:(h=.5+((h=+f(h))-i)*(n*h<n*i?l:c),u(d?Math.max(0,Math.min(1,h)):h))}g.domain=function(h){return arguments.length?([e,t,r]=h,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g):[e,t,r]},g.clamp=function(h){return arguments.length?(d=!!h,g):d},g.interpolator=function(h){return arguments.length?(u=h,g):u};function j(h){return function(y){var p,x,v;return arguments.length?([p,x,v]=y,u=IJ(h,[p,x,v]),g):[u(0),u(.5),u(1)]}}return g.range=j(Vl),g.rangeRound=j(wb),g.unknown=function(h){return arguments.length?(m=h,g):m},function(h){return f=h,s=h(e),i=h(t),o=h(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g}}function _T(){var e=si(Qh()(Jr));return e.copy=function(){return ii(e,_T())},ds.apply(e,arguments)}function AT(){var e=Ab(Qh()).domain([.1,1,10]);return e.copy=function(){return ii(e,AT()).base(e.base())},ds.apply(e,arguments)}function PT(){var e=Pb(Qh());return e.copy=function(){return ii(e,PT()).constant(e.constant())},ds.apply(e,arguments)}function Bb(){var e=Eb(Qh());return e.copy=function(){return ii(e,Bb()).exponent(e.exponent())},ds.apply(e,arguments)}function _Q(){return Bb.apply(null,arguments).exponent(.5)}const W2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bu,scaleDiverging:_T,scaleDivergingLog:AT,scaleDivergingPow:Bb,scaleDivergingSqrt:_Q,scaleDivergingSymlog:PT,scaleIdentity:sT,scaleImplicit:_0,scaleLinear:ym,scaleLog:oT,scaleOrdinal:vb,scalePoint:Lc,scalePow:Cb,scaleQuantile:uT,scaleQuantize:dT,scaleRadial:cT,scaleSequential:jT,scaleSequentialLog:wT,scaleSequentialPow:Rb,scaleSequentialQuantile:ST,scaleSequentialSqrt:SQ,scaleSequentialSymlog:NT,scaleSqrt:sZ,scaleSymlog:lT,scaleThreshold:fT,scaleTime:wQ,scaleUtc:NQ,tickFormat:aT},Symbol.toStringTag,{value:"Module"}));var AQ=Ml;function PQ(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!AQ(o):r(o,l)))var l=o,c=i}return c}var ep=PQ;function EQ(e,t){return e>t}var ET=EQ,CQ=ep,OQ=ET,TQ=Fl;function kQ(e){return e&&e.length?CQ(e,TQ,OQ):void 0}var MQ=kQ;const tp=St(MQ);function DQ(e,t){return e<t}var CT=DQ,$Q=ep,IQ=CT,LQ=Fl;function RQ(e){return e&&e.length?$Q(e,LQ,IQ):void 0}var BQ=RQ;const rp=St(BQ);var FQ=Qv,zQ=Ma,VQ=LO,UQ=pn;function WQ(e,t){var r=UQ(e)?FQ:VQ;return r(e,zQ(t))}var HQ=WQ,qQ=$O,GQ=HQ;function KQ(e,t){return qQ(GQ(e,t),1)}var YQ=KQ;const XQ=St(YQ);var JQ=hb;function ZQ(e,t){return JQ(e,t)}var QQ=ZQ;const np=St(QQ);var Ul=1e9,eee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zb,Gt=!0,Wn="[DecimalError] ",Li=Wn+"Invalid argument: ",Fb=Wn+"Exponent out of range: ",Wl=Math.floor,bi=Math.pow,tee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,vn,vr=1e7,zt=7,OT=9007199254740991,wm=Wl(OT/zt),Be={};Be.absoluteValue=Be.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Be.comparedTo=Be.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Be.decimalPlaces=Be.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*zt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Be.dividedBy=Be.div=function(e){return Xa(this,new this.constructor(e))};Be.dividedToIntegerBy=Be.idiv=function(e){var t=this,r=t.constructor;return kt(Xa(t,new r(e),0,1),r.precision)};Be.equals=Be.eq=function(e){return!this.cmp(e)};Be.exponent=function(){return ur(this)};Be.greaterThan=Be.gt=function(e){return this.cmp(e)>0};Be.greaterThanOrEqualTo=Be.gte=function(e){return this.cmp(e)>=0};Be.isInteger=Be.isint=function(){return this.e>this.d.length-2};Be.isNegative=Be.isneg=function(){return this.s<0};Be.isPositive=Be.ispos=function(){return this.s>0};Be.isZero=function(){return this.s===0};Be.lessThan=Be.lt=function(e){return this.cmp(e)<0};Be.lessThanOrEqualTo=Be.lte=function(e){return this.cmp(e)<1};Be.logarithm=Be.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(vn))throw Error(Wn+"NaN");if(r.s<1)throw Error(Wn+(r.s?"NaN":"-Infinity"));return r.eq(vn)?new n(0):(Gt=!1,t=Xa(_u(r,i),_u(e,i),i),Gt=!0,kt(t,s))};Be.minus=Be.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MT(t,e):TT(t,(e.s=-e.s,e))};Be.modulo=Be.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Wn+"NaN");return r.s?(Gt=!1,t=Xa(r,e,0,1).times(e),Gt=!0,r.minus(t)):kt(new n(r),s)};Be.naturalExponential=Be.exp=function(){return kT(this)};Be.naturalLogarithm=Be.ln=function(){return _u(this)};Be.negated=Be.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Be.plus=Be.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?TT(t,e):MT(t,(e.s=-e.s,e))};Be.precision=Be.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Li+e);if(t=ur(s)+1,n=s.d.length-1,r=n*zt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Be.squareRoot=Be.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wn+"NaN")}for(e=ur(l),Gt=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=va(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Wl((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Xa(l,i,o+2)).times(.5),va(i.d).slice(0,o)===(t=va(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(kt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Gt=!0,kt(n,r)};Be.times=Be.mul=function(e){var t,r,n,s,i,o,l,c,u,f=this,d=f.constructor,m=f.d,g=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=m.length,u=g.length,c<u&&(i=m,m=g,g=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+g[n]*m[s-n-1]+t,i[s--]=l%vr|0,t=l/vr|0;i[s]=(i[s]+t)%vr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Gt?kt(e,d.precision):e};Be.toDecimalPlaces=Be.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ta(e,0,Ul),t===void 0?t=n.rounding:Ta(t,0,8),kt(r,e+ur(r)+1,t))};Be.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Ki(n,!0):(Ta(e,0,Ul),t===void 0?t=s.rounding:Ta(t,0,8),n=kt(new s(n),e+1,t),r=Ki(n,!0,e+1)),r};Be.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Ki(s):(Ta(e,0,Ul),t===void 0?t=i.rounding:Ta(t,0,8),n=kt(new i(s),e+ur(s)+1,t),r=Ki(n.abs(),!1,e+ur(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Be.toInteger=Be.toint=function(){var e=this,t=e.constructor;return kt(new t(e),ur(e)+1,t.rounding)};Be.toNumber=function(){return+this};Be.toPower=Be.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(vn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wn+"Infinity");return l}if(l.eq(vn))return l;if(n=c.precision,e.eq(vn))return kt(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=OT){for(s=new c(vn),t=Math.ceil(n/zt+4),Gt=!1;r%2&&(s=s.times(l),q2(s.d,t)),r=Wl(r/2),r!==0;)l=l.times(l),q2(l.d,t);return Gt=!0,e.s<0?new c(vn).div(s):kt(s,n)}}else if(i<0)throw Error(Wn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Gt=!1,s=e.times(_u(l,n+u)),Gt=!0,s=kT(s),s.s=i,s};Be.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ur(s),n=Ki(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ta(e,1,Ul),t===void 0?t=i.rounding:Ta(t,0,8),s=kt(new i(s),e,t),r=ur(s),n=Ki(s,e<=r||r<=i.toExpNeg,e)),n};Be.toSignificantDigits=Be.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ta(e,1,Ul),t===void 0?t=n.rounding:Ta(t,0,8)),kt(new n(r),e,t)};Be.toString=Be.valueOf=Be.val=Be.toJSON=Be[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ur(e),r=e.constructor;return Ki(e,t<=r.toExpNeg||t>=r.toExpPos)};function TT(e,t){var r,n,s,i,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Gt?kt(t,d):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(d/zt),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/vr|0,c[i]%=vr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Gt?kt(t,d):t}function Ta(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Li+e)}function va(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=zt-n.length,r&&(i+=ws(r)),i+=n;o=e[t],n=o+"",r=zt-n.length,r&&(i+=ws(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Xa=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%vr|0,o=i/vr|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*vr+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,f,d,m,g,j,h,y,p,x,v,S,w,b,_,P,C=n.constructor,M=n.s==s.s?1:-1,A=n.d,E=s.d;if(!n.s)return new C(n);if(!s.s)throw Error(Wn+"Division by zero");for(c=n.e-s.e,_=E.length,w=A.length,g=new C(M),j=g.d=[],u=0;E[u]==(A[u]||0);)++u;if(E[u]>(A[u]||0)&&--c,i==null?x=i=C.precision:o?x=i+(ur(n)-ur(s))+1:x=i,x<0)return new C(0);if(x=x/zt+2|0,u=0,_==1)for(f=0,E=E[0],x++;(u<w||f)&&x--;u++)v=f*vr+(A[u]||0),j[u]=v/E|0,f=v%E|0;else{for(f=vr/(E[0]+1)|0,f>1&&(E=e(E,f),A=e(A,f),_=E.length,w=A.length),S=_,h=A.slice(0,_),y=h.length;y<_;)h[y++]=0;P=E.slice(),P.unshift(0),b=E[0],E[1]>=vr/2&&++b;do f=0,l=t(E,h,_,y),l<0?(p=h[0],_!=y&&(p=p*vr+(h[1]||0)),f=p/b|0,f>1?(f>=vr&&(f=vr-1),d=e(E,f),m=d.length,y=h.length,l=t(d,h,m,y),l==1&&(f--,r(d,_<m?P:E,m))):(f==0&&(l=f=1),d=E.slice()),m=d.length,m<y&&d.unshift(0),r(h,d,y),l==-1&&(y=h.length,l=t(E,h,_,y),l<1&&(f++,r(h,_<y?P:E,y))),y=h.length):l===0&&(f++,h=[0]),j[u++]=f,l&&h[0]?h[y++]=A[S]||0:(h=[A[S]],y=1);while((S++<w||h[0]!==void 0)&&x--)}return j[0]||j.shift(),g.e=c,kt(g,o?i+ur(g)+1:i)}}();function kT(e,t){var r,n,s,i,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(ur(e)>16)throw Error(Fb+ur(e));if(!e.s)return new f(vn);for(Gt=!1,l=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(bi(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f(vn),f.precision=l;;){if(s=kt(s.times(e),l),r=r.times(++c),o=i.plus(Xa(s,r,l)),va(o.d).slice(0,l)===va(i.d).slice(0,l)){for(;u--;)i=kt(i.times(i),l);return f.precision=d,t==null?(Gt=!0,kt(i,d)):i}i=o}}function ur(e){for(var t=e.e*zt,r=e.d[0];r>=10;r/=10)t++;return t}function Ag(e,t,r){if(t>e.LN10.sd())throw Gt=!0,r&&(e.precision=r),Error(Wn+"LN10 precision limit exceeded");return kt(new e(e.LN10),t)}function ws(e){for(var t="";e--;)t+="0";return t}function _u(e,t){var r,n,s,i,o,l,c,u,f,d=1,m=10,g=e,j=g.d,h=g.constructor,y=h.precision;if(g.s<1)throw Error(Wn+(g.s?"NaN":"-Infinity"));if(g.eq(vn))return new h(0);if(t==null?(Gt=!1,u=y):u=t,g.eq(10))return t==null&&(Gt=!0),Ag(h,u);if(u+=m,h.precision=u,r=va(j),n=r.charAt(0),i=ur(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=va(g.d),n=r.charAt(0),d++;i=ur(g),n>1?(g=new h("0."+r),i++):g=new h(n+"."+r.slice(1))}else return c=Ag(h,u+2,y).times(i+""),g=_u(new h(n+"."+r.slice(1)),u-m).plus(c),h.precision=y,t==null?(Gt=!0,kt(g,y)):g;for(l=o=g=Xa(g.minus(vn),g.plus(vn),u),f=kt(g.times(g),u),s=3;;){if(o=kt(o.times(f),u),c=l.plus(Xa(o,new h(s),u)),va(c.d).slice(0,u)===va(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Ag(h,u+2,y).times(i+""))),l=Xa(l,new h(d),u),h.precision=y,t==null?(Gt=!0,kt(l,y)):l;l=c,s+=2}}function H2(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Wl(r/zt),e.d=[],n=(r+1)%zt,r<0&&(n+=zt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=zt;n<s;)e.d.push(+t.slice(n,n+=zt));t=t.slice(n),n=zt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Gt&&(e.e>wm||e.e<-wm))throw Error(Fb+r)}else e.s=0,e.e=0,e.d=[0];return e}function kt(e,t,r){var n,s,i,o,l,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=zt,s=t,u=d[f=0];else{if(f=Math.ceil((n+1)/zt),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=zt,s=n-zt+o}if(r!==void 0&&(i=bi(10,o-s-1),l=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/bi(10,o-s):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=ur(e),d.length=1,t=t-i-1,d[0]=bi(10,(zt-t%zt)%zt),e.e=Wl(-t/zt)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=bi(10,zt-n),d[f]=s>0?(u/bi(10,o-s)%bi(10,s)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==vr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=vr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(Gt&&(e.e>wm||e.e<-wm))throw Error(Fb+ur(e));return e}function MT(e,t){var r,n,s,i,o,l,c,u,f,d,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Gt?kt(t,g):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),s=Math.max(Math.ceil(g/zt),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=d.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){f=c[s]<d[s];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(i=s;i&&c[--i]===0;)c[i]=vr-1;--c[i],c[s]+=vr}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Gt?kt(t,g):t):new m(0)}function Ki(e,t,r){var n,s=ur(e),i=va(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+ws(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+ws(-s-1)+i,r&&(n=r-o)>0&&(i+=ws(n))):s>=o?(i+=ws(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+ws(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=ws(n))),e.s<0?"-"+i:i}function q2(e,t){if(e.length>t)return e.length=t,!0}function DT(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Li+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return H2(o,i.toString())}else if(typeof i!="string")throw Error(Li+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,tee.test(i))H2(o,i);else throw Error(Li+i)}if(s.prototype=Be,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=DT,s.config=s.set=ree,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function ree(e){if(!e||typeof e!="object")throw Error(Wn+"Object expected");var t,r,n,s=["precision",1,Ul,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Wl(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Li+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Li+r+": "+n);return this}var zb=DT(eee);vn=new zb(1);const Et=zb;function nee(e){return oee(e)||iee(e)||see(e)||aee()}function aee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function see(e,t){if(e){if(typeof e=="string")return C0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C0(e,t)}}function iee(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function oee(e){if(Array.isArray(e))return C0(e)}function C0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lee=function(t){return t},$T={},IT=function(t){return t===$T},G2=function(t){return function r(){return arguments.length===0||arguments.length===1&&IT(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},cee=function e(t,r){return t===1?r:G2(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==$T}).length;return o>=t?r.apply(void 0,s):e(t-o,G2(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=s.map(function(d){return IT(d)?c.shift():d});return r.apply(void 0,nee(f).concat(c))}))})},ap=function(t){return cee(t.length,t)},O0=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},uee=ap(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),dee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return lee;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},T0=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},LT=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function fee(e){var t;return e===0?t=1:t=Math.floor(new Et(e).abs().log(10).toNumber())+1,t}function mee(e,t,r){for(var n=new Et(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var hee=ap(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),pee=ap(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),gee=ap(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const sp={rangeStep:mee,getDigitCount:fee,interpolateNumber:hee,uninterpolateNumber:pee,uninterpolateTruncation:gee};function k0(e){return vee(e)||yee(e)||RT(e)||xee()}function xee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yee(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vee(e){if(Array.isArray(e))return M0(e)}function Au(e,t){return wee(e)||jee(e,t)||RT(e,t)||bee()}function bee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RT(e,t){if(e){if(typeof e=="string")return M0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M0(e,t)}}function M0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jee(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function wee(e){if(Array.isArray(e))return e}function BT(e){var t=Au(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function FT(e,t,r){if(e.lte(0))return new Et(0);var n=sp.getDigitCount(e.toNumber()),s=new Et(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Et(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Et(Math.ceil(c))}function Nee(e,t,r){var n=1,s=new Et(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Et(10).pow(sp.getDigitCount(e)-1),s=new Et(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Et(Math.floor(e)))}else e===0?s=new Et(Math.floor((t-1)/2)):r||(s=new Et(Math.floor(e)));var o=Math.floor((t-1)/2),l=dee(uee(function(c){return s.add(new Et(c-o).mul(n)).toNumber()}),O0);return l(0,t)}function zT(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Et(0),tickMin:new Et(0),tickMax:new Et(0)};var i=FT(new Et(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new Et(0):(o=new Et(e).add(t).div(2),o=o.sub(new Et(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Et(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?zT(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Et(l).mul(i)),tickMax:o.add(new Et(c).mul(i))})}function See(e){var t=Au(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=BT([r,n]),c=Au(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(k0(O0(0,s-1).map(function(){return 1/0}))):[].concat(k0(O0(0,s-1).map(function(){return-1/0})),[f]);return r>n?T0(d):d}if(u===f)return Nee(u,s,i);var m=zT(u,f,o,i),g=m.step,j=m.tickMin,h=m.tickMax,y=sp.rangeStep(j,h.add(new Et(.1).mul(g)),g);return r>n?T0(y):y}function _ee(e,t){var r=Au(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=BT([n,s]),l=Au(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var f=Math.max(t,2),d=FT(new Et(u).sub(c).div(f-1),i,0),m=[].concat(k0(sp.rangeStep(new Et(c),new Et(u).sub(new Et(.99).mul(d)),d)),[u]);return n>s?T0(m):m}var Aee=LT(See),Pee=LT(_ee),Eee="Invariant failed";function Yi(e,t){throw new Error(Eee)}var Cee=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(this,arguments)}function Oee(e,t){return Dee(e)||Mee(e,t)||kee(e,t)||Tee()}function Tee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kee(e,t){if(e){if(typeof e=="string")return K2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K2(e,t)}}function K2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Dee(e){if(Array.isArray(e))return e}function $ee(e,t){if(e==null)return{};var r=Iee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Iee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ree(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,WT(n.key),n)}}function Bee(e,t,r){return t&&Ree(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fee(e,t,r){return t=Sm(t),zee(e,VT()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function zee(e,t){if(t&&(fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vee(e)}function Vee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VT=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function Uee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D0(e,t)}function D0(e,t){return D0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D0(e,t)}function UT(e,t,r){return t=WT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WT(e){var t=Wee(e,"string");return fl(t)=="symbol"?t:t+""}function Wee(e,t){if(fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ip=function(e){function t(){return Lee(this,t),Fee(this,t,arguments)}return Uee(t,e),Bee(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,m=$ee(n,Cee),g=Ye(m,!1);this.props.direction==="x"&&f.type!=="number"&&Yi();var j=c.map(function(h){var y=u(h,l),p=y.x,x=y.y,v=y.value,S=y.errorVal;if(!S)return null;var w=[],b,_;if(Array.isArray(S)){var P=Oee(S,2);b=P[0],_=P[1]}else b=_=S;if(i==="vertical"){var C=f.scale,M=x+s,A=M+o,E=M-o,T=C(v-b),B=C(v+_);w.push({x1:B,y1:A,x2:B,y2:E}),w.push({x1:T,y1:M,x2:B,y2:M}),w.push({x1:T,y1:A,x2:T,y2:E})}else if(i==="horizontal"){var I=d.scale,D=p+s,O=D-o,$=D+o,R=I(v-b),Q=I(v+_);w.push({x1:O,y1:Q,x2:$,y2:Q}),w.push({x1:D,y1:R,x2:D,y2:Q}),w.push({x1:O,y1:R,x2:$,y2:R})}return H.createElement(wt,Nm({className:"recharts-errorBar",key:"bar-".concat(w.map(function(ae){return"".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))},g),w.map(function(ae){return H.createElement("line",Nm({},ae,{key:"line-".concat(ae.x1,"-").concat(ae.x2,"-").concat(ae.y1,"-").concat(ae.y2)}))}))});return H.createElement(wt,{className:"recharts-errorBars"},j)}}])}(H.Component);UT(ip,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});UT(ip,"displayName","ErrorBar");function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function Y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(r),!0).forEach(function(n){Hee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hee(e,t,r){return t=qee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qee(e){var t=Gee(e,"string");return Pu(t)=="symbol"?t:t+""}function Gee(e,t){if(Pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HT=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=yn(r,Aa);if(!o)return null;var l=Aa.defaultProps,c=l!==void 0?ci(ci({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var m=d.item,g=d.props,j=g.sectors||g.data||[];return f.concat(j.map(function(h){return{type:o.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):u=(n||[]).map(function(f){var d=f.item,m=d.type.defaultProps,g=m!==void 0?ci(ci({},m),d.props):{},j=g.dataKey,h=g.name,y=g.legendType,p=g.hide;return{inactive:p,dataKey:j,type:c.iconType||y||"square",color:Vb(d),value:h||j,payload:g}}),ci(ci(ci({},c),Aa.getWithHeight(o,s)),{},{payload:u,item:o})};function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function X2(e){return Jee(e)||Xee(e)||Yee(e)||Kee()}function Kee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yee(e,t){if(e){if(typeof e=="string")return $0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $0(e,t)}}function Xee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jee(e){if(Array.isArray(e))return $0(e)}function $0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ho(e,t,r){return t=Zee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zee(e){var t=Qee(e,"string");return Eu(t)=="symbol"?t:t+""}function Qee(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t,r){return ct(e)||ct(t)?r:xr(t)?wn(e,t,r):Je(t)?t(e):r}function Rc(e,t,r,n){var s=XQ(e,function(l){return zr(l,t)});if(r==="number"){var i=s.filter(function(l){return _e(l)||parseFloat(l)});return i.length?[rp(i),tp(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!ct(l)}):s;return o.map(function(l){return xr(l)||l instanceof Date?l:""})}var ete=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Yr(d-f)!==Yr(m-d)){var j=[];if(Yr(m-d)===Yr(c[1]-c[0])){g=m;var h=d+c[1]-c[0];j[0]=Math.min(h,(h+f)/2),j[1]=Math.max(h,(h+f)/2)}else{g=f;var y=m+c[1]-c[0];j[0]=Math.min(d,(y+d)/2),j[1]=Math.max(d,(y+d)/2)}var p=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>p[0]&&t<=p[1]||t>=j[0]&&t<=j[1]){o=s[u].index;break}}else{var x=Math.min(f,m),v=Math.max(f,m);if(t>(x+d)/2&&t<=(v+d)/2){o=s[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},Vb=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},tte=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var f=i[l[c]].stackGroups,d=Object.keys(f),m=0,g=d.length;m<g;m++){var j=f[d[m]],h=j.items,y=j.cateAxisId,p=h.filter(function(_){return Ya(_.type).indexOf("Bar")>=0});if(p&&p.length){var x=p[0].type.defaultProps,v=x!==void 0?tr(tr({},x),p[0].props):p[0].props,S=v.barSize,w=v[y];o[w]||(o[w]=[]);var b=ct(S)?r:S;o[w].push({item:p[0],stackList:p.slice(1),barSize:ct(b)?void 0:Xr(b,n,0)})}}return o},rte=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Xr(r,s,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var m=!1,g=s/c,j=o.reduce(function(S,w){return S+w.barSize||0},0);j+=(c-1)*u,j>=s&&(j-=(c-1)*u,u=0),j>=s&&g>0&&(m=!0,g*=.9,j=c*g);var h=(s-j)/2>>0,y={offset:h-u,size:0};f=o.reduce(function(S,w){var b={item:w.item,position:{offset:y.offset+y.size+u,size:m?g:w.barSize}},_=[].concat(X2(S),[b]);return y=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){_.push({item:P,position:y})}),_},d)}else{var p=Xr(n,s,0,!0);s-2*p-(c-1)*u<=0&&(u=0);var x=(s-2*p-(c-1)*u)/c;x>1&&(x>>=0);var v=l===+l?Math.min(x,l):x;f=o.reduce(function(S,w,b){var _=[].concat(X2(S),[{item:w.item,position:{offset:p+(x+u)*b+(x-v)/2,size:v}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){_.push({item:P,position:_[_.length-1].position})}),_},d)}return f},nte=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=HT({children:i,legendWidth:c});if(u){var f=s||{},d=f.width,m=f.height,g=u.align,j=u.verticalAlign,h=u.layout;if((h==="vertical"||h==="horizontal"&&j==="middle")&&g!=="center"&&_e(t[g]))return tr(tr({},t),{},Ho({},g,t[g]+(d||0)));if((h==="horizontal"||h==="vertical"&&g==="center")&&j!=="middle"&&_e(t[j]))return tr(tr({},t),{},Ho({},j,t[j]+(m||0)))}return t},ate=function(t,r,n){return ct(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},qT=function(t,r,n,s,i){var o=r.props.children,l=Bn(o,ip).filter(function(u){return ate(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=zr(f,n);if(ct(d))return u;var m=Array.isArray(d)?[rp(d),tp(d)]:[d,d],g=c.reduce(function(j,h){var y=zr(f,h,0),p=m[0]-Math.abs(Array.isArray(y)?y[0]:y),x=m[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(p,j[0]),Math.max(x,j[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},ste=function(t,r,n,s,i){var o=r.map(function(l){return qT(t,l,n,i,s)}).filter(function(l){return!ct(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},GT=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&qT(t,c,u,s)||Rc(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},KT=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},YT=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Ha=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Yr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var m=i?i.indexOf(d):d;return{coordinate:s(m)+u,value:d,offset:u}});return f.filter(function(d){return!sd(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,m){return{coordinate:s(d)+u,value:d,index:m,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,m){return{coordinate:s(d)+u,value:i?i[d]:d,index:m,offset:u}})},Pg=new WeakMap,Wd=function(t,r){if(typeof r!="function")return t;Pg.has(t)||Pg.set(t,new WeakMap);var n=Pg.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},XT=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:bu(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ym(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Lc(),realScaleType:"point"}:i==="category"?{scale:bu(),realScaleType:"band"}:{scale:ym(),realScaleType:"linear"};if(Hi(s)){var c="scale".concat(Fh(s));return{scale:(W2[c]||Lc)(),realScaleType:W2[c]?c:"point"}}return Je(s)?{scale:s}:{scale:Lc(),realScaleType:"point"}},Z2=1e-4,JT=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-Z2,o=Math.max(s[0],s[1])+Z2,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},ite=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},ote=function(t,r){if(!r||r.length!==2||!_e(r[0])||!_e(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!_e(t[0])||t[0]<n)&&(i[0]=n),(!_e(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},lte=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=sd(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},cte=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=sd(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},ute={sign:lte,expand:CV,none:al,silhouette:OV,wiggle:TV,positive:cte},dte=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=ute[n],o=EV().keys(s).value(function(l,c){return+zr(l,c,0)}).order(i0).offset(i);return o(t)},fte=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,m){var g,j=(g=m.type)!==null&&g!==void 0&&g.defaultProps?tr(tr({},m.type.defaultProps),m.props):m.props,h=j.stackId,y=j.hide;if(y)return d;var p=j[n],x=d[p]||{hasStack:!1,stackGroups:{}};if(xr(h)){var v=x.stackGroups[h]||{numericAxisId:n,cateAxisId:s,items:[]};v.items.push(m),x.hasStack=!0,x.stackGroups[h]=v}else x.stackGroups[id("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return tr(tr({},d),{},Ho({},p,x))},c),f={};return Object.keys(u).reduce(function(d,m){var g=u[m];if(g.hasStack){var j={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(h,y){var p=g.stackGroups[y];return tr(tr({},h),{},Ho({},y,{numericAxisId:n,cateAxisId:s,items:p.items,stackedData:dte(t,p.items,i)}))},j)}return tr(tr({},d),{},Ho({},m,g))},f)},ZT=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=Aee(u,i,l);return t.domain([rp(f),tp(f)]),{niceTicks:f}}if(i&&s==="number"){var d=t.domain(),m=Pee(d,i,l);return{niceTicks:m}}return null},Q2=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=zr(o,r.dataKey,r.domain[l]);return ct(c)?null:r.scale(c)-i/2+s},mte=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},hte=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(xr(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},pte=function(t){return t.reduce(function(r,n){return[rp(n.concat([r[0]]).filter(_e)),tp(n.concat([r[1]]).filter(_e))]},[1/0,-1/0])},QT=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,f){var d=pte(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},eS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I0=function(t,r,n){if(Je(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(_e(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(eS.test(t[0])){var i=+eS.exec(t[0])[1];s[0]=r[0]-i}else Je(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(_e(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(tS.test(t[1])){var o=+tS.exec(t[1])[1];s[1]=r[1]+o}else Je(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},_m=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=gb(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},rS=function(t,r,n){return!t||!t.length||np(t,wn(n,"type.defaultProps.domain"))?r:t},ek=function(t,r){var n=t.type.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return tr(tr({},Ye(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Vb(t),value:zr(r,s),type:c,payload:r,chartType:u,hide:f})};function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function La(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){tk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tk(e,t,r){return t=gte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gte(e){var t=xte(e,"string");return Cu(t)=="symbol"?t:t+""}function xte(e,t){if(Cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yte(e,t){return wte(e)||jte(e,t)||bte(e,t)||vte()}function vte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bte(e,t){if(e){if(typeof e=="string")return aS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aS(e,t)}}function aS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function wte(e){if(Array.isArray(e))return e}var Am=Math.PI/180,Nte=function(t){return t*180/Math.PI},Rt=function(t,r,n,s){return{x:t+Math.cos(-Am*s)*n,y:r+Math.sin(-Am*s)*n}},rk=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Ste=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Xr(t.cx,o,o/2),d=Xr(t.cy,l,l/2),m=rk(o,l,n),g=Xr(t.innerRadius,m,0),j=Xr(t.outerRadius,m,m*.8),h=Object.keys(r);return h.reduce(function(y,p){var x=r[p],v=x.domain,S=x.reversed,w;if(ct(x.range))s==="angleAxis"?w=[c,u]:s==="radiusAxis"&&(w=[g,j]),S&&(w=[w[1],w[0]]);else{w=x.range;var b=w,_=yte(b,2);c=_[0],u=_[1]}var P=XT(x,i),C=P.realScaleType,M=P.scale;M.domain(v).range(w),JT(M);var A=ZT(M,La(La({},x),{},{realScaleType:C})),E=La(La(La({},x),A),{},{range:w,radius:j,realScaleType:C,scale:M,cx:f,cy:d,innerRadius:g,outerRadius:j,startAngle:c,endAngle:u});return La(La({},y),{},tk({},p,E))},{})},_te=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},Ate=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=_te({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:Nte(u),angleInRadian:u}},Pte=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},Ete=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},sS=function(t,r){var n=t.x,s=t.y,i=Ate({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=Pte(r),d=f.startAngle,m=f.endAngle,g=l,j;if(d<=m){for(;g>m;)g-=360;for(;g<d;)g+=360;j=g>=d&&g<=m}else{for(;g>d;)g-=360;for(;g<m;)g+=360;j=g>=m&&g<=d}return j?La(La({},r),{},{radius:o,angle:Ete(g,r)}):null},nk=function(t){return!N.isValidElement(t)&&!Je(t)&&typeof t!="boolean"?t.className:""};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}var Cte=["offset"];function Ote(e){return Dte(e)||Mte(e)||kte(e)||Tte()}function Tte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kte(e,t){if(e){if(typeof e=="string")return L0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L0(e,t)}}function Mte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dte(e){if(Array.isArray(e))return L0(e)}function L0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $te(e,t){if(e==null)return{};var r=Ite(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ite(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){Lte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lte(e,t,r){return t=Rte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rte(e){var t=Bte(e,"string");return Ou(t)=="symbol"?t:t+""}function Bte(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tu.apply(this,arguments)}var Fte=function(t){var r=t.value,n=t.formatter,s=ct(t.children)?r:t.children;return Je(n)?n(s):s},zte=function(t,r){var n=Yr(r-t),s=Math.min(Math.abs(r-t),360);return n*s},Vte=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,m=c.outerRadius,g=c.startAngle,j=c.endAngle,h=c.clockWise,y=(d+m)/2,p=zte(g,j),x=p>=0?1:-1,v,S;s==="insideStart"?(v=g+x*o,S=h):s==="insideEnd"?(v=j-x*o,S=!h):s==="end"&&(v=j+x*o,S=h),S=p<=0?S:!S;var w=Rt(u,f,y,v),b=Rt(u,f,y,v+(S?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(b.x,",").concat(b.y),P=ct(t.id)?id("recharts-radial-line-"):t.id;return H.createElement("text",Tu({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",l)}),H.createElement("defs",null,H.createElement("path",{id:P,d:_})),H.createElement("textPath",{xlinkHref:"#".concat(P)},r))},Ute=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,m=(f+d)/2;if(s==="outside"){var g=Rt(o,l,u+n,m),j=g.x,h=g.y;return{x:j,y:h,textAnchor:j>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,p=Rt(o,l,y,m),x=p.x,v=p.y;return{x,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Wte=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,m=d*s,g=d>0?"end":"start",j=d>0?"start":"end",h=u>=0?1:-1,y=h*s,p=h>0?"end":"start",x=h>0?"start":"end";if(i==="top"){var v={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:g};return mr(mr({},v),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+f+m,textAnchor:"middle",verticalAnchor:j};return mr(mr({},S),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var w={x:l-y,y:c+f/2,textAnchor:p,verticalAnchor:"middle"};return mr(mr({},w),n?{width:Math.max(w.x-n.x,0),height:f}:{})}if(i==="right"){var b={x:l+u+y,y:c+f/2,textAnchor:x,verticalAnchor:"middle"};return mr(mr({},b),n?{width:Math.max(n.x+n.width-b.x,0),height:f}:{})}var _=n?{width:u,height:f}:{};return i==="insideLeft"?mr({x:l+y,y:c+f/2,textAnchor:x,verticalAnchor:"middle"},_):i==="insideRight"?mr({x:l+u-y,y:c+f/2,textAnchor:p,verticalAnchor:"middle"},_):i==="insideTop"?mr({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:j},_):i==="insideBottom"?mr({x:l+u/2,y:c+f-m,textAnchor:"middle",verticalAnchor:g},_):i==="insideTopLeft"?mr({x:l+y,y:c+m,textAnchor:x,verticalAnchor:j},_):i==="insideTopRight"?mr({x:l+u-y,y:c+m,textAnchor:p,verticalAnchor:j},_):i==="insideBottomLeft"?mr({x:l+y,y:c+f-m,textAnchor:x,verticalAnchor:g},_):i==="insideBottomRight"?mr({x:l+u-y,y:c+f-m,textAnchor:p,verticalAnchor:g},_):Dl(i)&&(_e(i.x)||Ai(i.x))&&(_e(i.y)||Ai(i.y))?mr({x:l+Xr(i.x,u),y:c+Xr(i.y,f),textAnchor:"end",verticalAnchor:"end"},_):mr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},_)},Hte=function(t){return"cx"in t&&_e(t.cx)};function jr(e){var t=e.offset,r=t===void 0?5:t,n=$te(e,Cte),s=mr({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,f=s.className,d=f===void 0?"":f,m=s.textBreakAll;if(!i||ct(l)&&ct(c)&&!N.isValidElement(u)&&!Je(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var g;if(Je(u)){if(g=N.createElement(u,s),N.isValidElement(g))return g}else g=Fte(s);var j=Hte(i),h=Ye(s,!0);if(j&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Vte(s,g,h);var y=j?Ute(s):Wte(s);return H.createElement(Gi,Tu({className:st("recharts-label",d)},h,y,{breakAll:m}),g)}jr.displayName="Label";var ak=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,m=t.y,g=t.top,j=t.left,h=t.width,y=t.height,p=t.clockWise,x=t.labelViewBox;if(x)return x;if(_e(h)&&_e(y)){if(_e(d)&&_e(m))return{x:d,y:m,width:h,height:y};if(_e(g)&&_e(j))return{x:g,y:j,width:h,height:y}}return _e(d)&&_e(m)?{x:d,y:m,width:0,height:0}:_e(r)&&_e(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:p}:t.viewBox?t.viewBox:{}},qte=function(t,r){return t?t===!0?H.createElement(jr,{key:"label-implicit",viewBox:r}):xr(t)?H.createElement(jr,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===jr?N.cloneElement(t,{key:"label-implicit",viewBox:r}):H.createElement(jr,{key:"label-implicit",content:t,viewBox:r}):Je(t)?H.createElement(jr,{key:"label-implicit",content:t,viewBox:r}):Dl(t)?H.createElement(jr,Tu({viewBox:r},t,{key:"label-implicit"})):null:null},Gte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=ak(t),o=Bn(s,jr).map(function(c,u){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=qte(t.label,r||i);return[l].concat(Ote(o))};jr.parseViewBox=ak;jr.renderCallByParent=Gte;function Kte(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Yte=Kte;const Xte=St(Yte);function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}var Jte=["valueAccessor"],Zte=["data","dataKey","clockWise","id","textBreakAll"];function Qte(e){return nre(e)||rre(e)||tre(e)||ere()}function ere(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tre(e,t){if(e){if(typeof e=="string")return R0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R0(e,t)}}function rre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nre(e){if(Array.isArray(e))return R0(e)}function R0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(this,arguments)}function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){are(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function are(e,t,r){return t=sre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sre(e){var t=ire(e,"string");return ku(t)=="symbol"?t:t+""}function ire(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cS(e,t){if(e==null)return{};var r=ore(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ore(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lre=function(t){return Array.isArray(t.value)?Xte(t.value):t.value};function Us(e){var t=e.valueAccessor,r=t===void 0?lre:t,n=cS(e,Jte),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=cS(n,Zte);return!s||!s.length?null:H.createElement(wt,{className:"recharts-label-list"},s.map(function(f,d){var m=ct(i)?r(f,d):zr(f&&f.payload,i),g=ct(l)?{}:{id:"".concat(l,"-").concat(d)};return H.createElement(jr,Pm({},Ye(f,!0),u,g,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:jr.parseViewBox(ct(o)?f:lS(lS({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Us.displayName="LabelList";function cre(e,t){return e?e===!0?H.createElement(Us,{key:"labelList-implicit",data:t}):H.isValidElement(e)||Je(e)?H.createElement(Us,{key:"labelList-implicit",data:t,content:e}):Dl(e)?H.createElement(Us,Pm({data:t},e,{key:"labelList-implicit"})):null:null}function ure(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Bn(n,Us).map(function(o,l){return N.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=cre(e.label,t);return[i].concat(Qte(s))}Us.renderCallByParent=ure;function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){dre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dre(e,t,r){return t=fre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fre(e){var t=mre(e,"string");return Mu(t)=="symbol"?t:t+""}function mre(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hre=function(t,r){var n=Yr(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Hd=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+s,d=Math.asin(c/f)/Am,m=u?i:i+o*d,g=Rt(r,n,f,m),j=Rt(r,n,s,m),h=u?i-o*d:i,y=Rt(r,n,f*Math.cos(d*Am),h);return{center:g,circleTangency:j,lineTangency:y,theta:d}},sk=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=hre(o,l),u=o+c,f=Rt(r,n,i,o),d=Rt(r,n,i,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var g=Rt(r,n,s,o),j=Rt(r,n,s,u);m+="L ".concat(j.x,",").concat(j.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},pre=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Yr(f-u),m=Hd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),g=m.circleTangency,j=m.lineTangency,h=m.theta,y=Hd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),p=y.circleTangency,x=y.lineTangency,v=y.theta,S=c?Math.abs(u-f):Math.abs(u-f)-h-v;if(S<0)return l?"M ".concat(j.x,",").concat(j.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):sk({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var w="M ".concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(s>0){var b=Hd({cx:r,cy:n,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=b.circleTangency,P=b.lineTangency,C=b.theta,M=Hd({cx:r,cy:n,radius:s,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=M.circleTangency,E=M.lineTangency,T=M.theta,B=c?Math.abs(u-f):Math.abs(u-f)-C-T;if(B<0&&o===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},gre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ik=function(t){var r=dS(dS({},gre),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,m=r.className;if(o<i||f===d)return null;var g=st("recharts-sector",m),j=o-i,h=Xr(l,j,0,!0),y;return h>0&&Math.abs(f-d)<360?y=pre({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(h,j/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):y=sk({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),H.createElement("path",B0({},Ye(r,!0),{className:g,d:y,role:"img"}))};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function fS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fS(Object(r),!0).forEach(function(n){xre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xre(e,t,r){return t=yre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yre(e){var t=vre(e,"string");return Du(t)=="symbol"?t:t+""}function vre(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hS={curveBasisClosed:xV,curveBasisOpen:yV,curveBasis:gV,curveBumpX:rV,curveBumpY:nV,curveLinearClosed:vV,curveLinear:Vh,curveMonotoneX:bV,curveMonotoneY:jV,curveNatural:wV,curveStep:NV,curveStepAfter:_V,curveStepBefore:SV},qd=function(t){return t.x===+t.x&&t.y===+t.y},uc=function(t){return t.x},dc=function(t){return t.y},bre=function(t,r){if(Je(t))return t;var n="curve".concat(Fh(t));return(n==="curveMonotone"||n==="curveBump")&&r?hS["".concat(n).concat(r==="vertical"?"Y":"X")]:hS[n]||Vh},jre=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=bre(n,l),d=u?i.filter(function(h){return qd(h)}):i,m;if(Array.isArray(o)){var g=u?o.filter(function(h){return qd(h)}):o,j=d.map(function(h,y){return mS(mS({},h),{},{base:g[y]})});return l==="vertical"?m=Id().y(dc).x1(uc).x0(function(h){return h.base.x}):m=Id().x(uc).y1(dc).y0(function(h){return h.base.y}),m.defined(qd).curve(f),m(j)}return l==="vertical"&&_e(o)?m=Id().y(dc).x1(uc).x0(o):_e(o)?m=Id().x(uc).y1(dc).y0(o):m=eO().x(uc).y(dc),m.defined(qd).curve(f),m(d)},z0=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?jre(t):s;return N.createElement("path",F0({},Ye(t,!1),Zf(t),{className:st("recharts-curve",r),d:o,ref:i}))},ok={exports:{}},wre="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nre=wre,Sre=Nre;function lk(){}function ck(){}ck.resetWarningCache=lk;var _re=function(){function e(n,s,i,o,l,c){if(c!==Sre){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ck,resetWarningCache:lk};return r.PropTypes=r,r};ok.exports=_re();var Are=ok.exports;const bt=St(Are),{getOwnPropertyNames:Pre,getOwnPropertySymbols:Ere}=Object,{hasOwnProperty:Cre}=Object.prototype;function Eg(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function Gd(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function Ore(e){return e!=null?e[Symbol.toStringTag]:void 0}function pS(e){return Pre(e).concat(Ere(e))}const Tre=Object.hasOwn||((e,t)=>Cre.call(e,t));function ao(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const kre="__v",Mre="__o",Dre="_owner",{getOwnPropertyDescriptor:gS,keys:xS}=Object;function $re(e,t){return e.byteLength===t.byteLength&&Em(new Uint8Array(e),new Uint8Array(t))}function Ire(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Lre(e,t){return e.byteLength===t.byteLength&&Em(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Rre(e,t){return ao(e.getTime(),t.getTime())}function Bre(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Fre(e,t){return e===t}function yS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(l=u.next())&&!l.done;){if(s[d]){d++;continue}const m=o.value,g=l.value;if(r.equals(m[0],g[0],c,d,e,t,r)&&r.equals(m[1],g[1],m[0],g[0],e,t,r)){f=s[d]=!0;break}d++}if(!f)return!1;c++}return!0}const zre=ao;function Vre(e,t,r){const n=xS(e);let s=n.length;if(xS(t).length!==s)return!1;for(;s-- >0;)if(!uk(e,t,r,n[s]))return!1;return!0}function fc(e,t,r){const n=pS(e);let s=n.length;if(pS(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!uk(e,t,r,i)||(o=gS(e,i),l=gS(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Ure(e,t){return ao(e.valueOf(),t.valueOf())}function Wre(e,t){return e.source===t.source&&e.flags===t.flags}function vS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function Em(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Hre(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function uk(e,t,r,n){return(n===Dre||n===Mre||n===kre)&&(e.$$typeof||t.$$typeof)?!0:Tre(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const qre="[object ArrayBuffer]",Gre="[object Arguments]",Kre="[object Boolean]",Yre="[object DataView]",Xre="[object Date]",Jre="[object Error]",Zre="[object Map]",Qre="[object Number]",ene="[object Object]",tne="[object RegExp]",rne="[object Set]",nne="[object String]",ane={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},sne="[object URL]",ine=Object.prototype.toString;function one({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:m,areUrlsEqual:g,unknownTagComparators:j}){return function(y,p,x){if(y===p)return!0;if(y==null||p==null)return!1;const v=typeof y;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?l(y,p,x):v==="function"?i(y,p,x):!1;const S=y.constructor;if(S!==p.constructor)return!1;if(S===Object)return c(y,p,x);if(Array.isArray(y))return t(y,p,x);if(S===Date)return n(y,p,x);if(S===RegExp)return f(y,p,x);if(S===Map)return o(y,p,x);if(S===Set)return d(y,p,x);const w=ine.call(y);if(w===Xre)return n(y,p,x);if(w===tne)return f(y,p,x);if(w===Zre)return o(y,p,x);if(w===rne)return d(y,p,x);if(w===ene)return typeof y.then!="function"&&typeof p.then!="function"&&c(y,p,x);if(w===sne)return g(y,p,x);if(w===Jre)return s(y,p,x);if(w===Gre)return c(y,p,x);if(ane[w])return m(y,p,x);if(w===qre)return e(y,p,x);if(w===Yre)return r(y,p,x);if(w===Kre||w===Qre||w===nne)return u(y,p,x);if(j){let b=j[w];if(!b){const _=Ore(y);_&&(b=j[_])}if(b)return b(y,p,x)}return!1}}function lne({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:$re,areArraysEqual:r?fc:Ire,areDataViewsEqual:Lre,areDatesEqual:Rre,areErrorsEqual:Bre,areFunctionsEqual:Fre,areMapsEqual:r?Eg(yS,fc):yS,areNumbersEqual:zre,areObjectsEqual:r?fc:Vre,arePrimitiveWrappersEqual:Ure,areRegExpsEqual:Wre,areSetsEqual:r?Eg(vS,fc):vS,areTypedArraysEqual:r?Eg(Em,fc):Em,areUrlsEqual:Hre,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=Gd(n.areArraysEqual),i=Gd(n.areMapsEqual),o=Gd(n.areObjectsEqual),l=Gd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function cne(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function une({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const dne=oi();oi({strict:!0});oi({circular:!0});oi({circular:!0,strict:!0});oi({createInternalComparator:()=>ao});oi({strict:!0,createInternalComparator:()=>ao});oi({circular:!0,createInternalComparator:()=>ao});oi({circular:!0,createInternalComparator:()=>ao,strict:!0});function oi(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=lne(e),o=one(i),l=r?r(o):cne(o);return une({circular:t,comparator:o,createState:n,equals:l,strict:s})}function fne(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function bS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):fne(s)};requestAnimationFrame(n)}function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function mne(e){return xne(e)||gne(e)||pne(e)||hne()}function hne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pne(e,t){if(e){if(typeof e=="string")return jS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jS(e,t)}}function jS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xne(e){if(Array.isArray(e))return e}function yne(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=mne(o),c=l[0],u=l.slice(1);if(typeof c=="number"){bS(s.bind(null,u),c);return}s(c),bS(s.bind(null,u));return}V0(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wS(Object(r),!0).forEach(function(n){dk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dk(e,t,r){return t=vne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vne(e){var t=bne(e,"string");return $u(t)==="symbol"?t:String(t)}function bne(e,t){if($u(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jne=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},wne=function(t){return t},Nne=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Bc=function(t,r){return Object.keys(r).reduce(function(n,s){return NS(NS({},n),{},dk({},s,t(s,r[s])))},{})},SS=function(t,r,n){return t.map(function(s){return"".concat(Nne(s)," ").concat(r,"ms ").concat(n)}).join(",")};function Sne(e,t){return Pne(e)||Ane(e,t)||fk(e,t)||_ne()}function _ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ane(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Pne(e){if(Array.isArray(e))return e}function Ene(e){return Tne(e)||One(e)||fk(e)||Cne()}function Cne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fk(e,t){if(e){if(typeof e=="string")return U0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U0(e,t)}}function One(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Tne(e){if(Array.isArray(e))return U0(e)}function U0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cm=1e-4,mk=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},hk=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},_S=function(t,r){return function(n){var s=mk(t,r);return hk(s,n)}},kne=function(t,r){return function(n){var s=mk(t,r),i=[].concat(Ene(s.map(function(o,l){return o*l}).slice(1)),[0]);return hk(i,n)}},AS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),f=Sne(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var d=_S(s,o),m=_S(i,l),g=kne(s,o),j=function(p){return p>1?1:p<0?0:p},h=function(p){for(var x=p>1?1:p,v=x,S=0;S<8;++S){var w=d(v)-x,b=g(v);if(Math.abs(w-x)<Cm||b<Cm)return m(v);v=j(v-w/b)}return m(v)};return h.isStepper=!1,h},Mne=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,d,m){var g=-(f-d)*n,j=m*i,h=m+(g-j)*l/1e3,y=m*l/1e3+f;return Math.abs(y-d)<Cm&&Math.abs(h)<Cm?[d,0]:[y,h]};return c.isStepper=!0,c.dt=l,c},Dne=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return AS(s);case"spring":return Mne();default:if(s.split("(")[0]==="cubic-bezier")return AS(s)}return typeof s=="function"?s:null};function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function PS(e){return Lne(e)||Ine(e)||pk(e)||$ne()}function $ne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ine(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lne(e){if(Array.isArray(e))return H0(e)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){W0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W0(e,t,r){return t=Rne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rne(e){var t=Bne(e,"string");return Iu(t)==="symbol"?t:String(t)}function Bne(e,t){if(Iu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fne(e,t){return Une(e)||Vne(e,t)||pk(e,t)||zne()}function zne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pk(e,t){if(e){if(typeof e=="string")return H0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H0(e,t)}}function H0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Une(e){if(Array.isArray(e))return e}var Om=function(t,r,n){return t+(r-t)*n},q0=function(t){var r=t.from,n=t.to;return r!==n},Wne=function e(t,r,n){var s=Bc(function(i,o){if(q0(o)){var l=t(o.from,o.to,o.velocity),c=Fne(l,2),u=c[0],f=c[1];return Pr(Pr({},o),{},{from:u,velocity:f})}return o},r);return n<1?Bc(function(i,o){return q0(o)?Pr(Pr({},o),{},{velocity:Om(o.velocity,s[i].velocity,n),from:Om(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const Hne=function(e,t,r,n,s){var i=jne(e,t),o=i.reduce(function(y,p){return Pr(Pr({},y),{},W0({},p,[e[p],t[p]]))},{}),l=i.reduce(function(y,p){return Pr(Pr({},y),{},W0({},p,{from:e[p],velocity:0,to:t[p]}))},{}),c=-1,u,f,d=function(){return null},m=function(){return Bc(function(p,x){return x.from},l)},g=function(){return!Object.values(l).filter(q0).length},j=function(p){u||(u=p);var x=p-u,v=x/r.dt;l=Wne(r,l,v),s(Pr(Pr(Pr({},e),t),m())),u=p,g()||(c=requestAnimationFrame(d))},h=function(p){f||(f=p);var x=(p-f)/n,v=Bc(function(w,b){return Om.apply(void 0,PS(b).concat([r(x)]))},o);if(s(Pr(Pr(Pr({},e),t),v)),x<1)c=requestAnimationFrame(d);else{var S=Bc(function(w,b){return Om.apply(void 0,PS(b).concat([r(1)]))},o);s(Pr(Pr(Pr({},e),t),S))}};return d=r.isStepper?j:h,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}var qne=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Gne(e,t){if(e==null)return{};var r=Kne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kne(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Cg(e){return Zne(e)||Jne(e)||Xne(e)||Yne()}function Yne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xne(e,t){if(e){if(typeof e=="string")return G0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G0(e,t)}}function Jne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zne(e){if(Array.isArray(e))return G0(e)}function G0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){bc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bc(e,t,r){return t=gk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gk(n.key),n)}}function tae(e,t,r){return t&&eae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gk(e){var t=rae(e,"string");return ml(t)==="symbol"?t:String(t)}function rae(e,t){if(ml(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ml(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K0(e,t)}function K0(e,t){return K0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},K0(e,t)}function aae(e){var t=sae();return function(){var n=Tm(e),s;if(t){var i=Tm(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return Y0(this,s)}}function Y0(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X0(e)}function X0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tm(e){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tm(e)}var os=function(e){nae(r,e);var t=aae(r);function r(n,s){var i;Qne(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,m=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(X0(i)),i.changeStyle=i.changeStyle.bind(X0(i)),!l||g<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),Y0(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Y0(i);i.state={style:c?bc({},c,u):u}}else i.state={style:{}};return i}return tae(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,m=this.state.style;if(l){if(!o){var g={style:c?bc({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(g);return}if(!(dne(s.to,f)&&s.canBegin&&s.isActive)){var j=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=j||u?d:s.to;if(this.state&&m){var y={style:c?bc({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(y)}this.runAnimation(Kn(Kn({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,f=s.begin,d=s.onAnimationEnd,m=s.onAnimationStart,g=Hne(o,l,Dne(u),c,this.changeStyle),j=function(){i.stopJSAnimation=g()};this.manager.start([m,f,j,c,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],f=u.style,d=u.duration,m=d===void 0?0:d,g=function(h,y,p){if(p===0)return h;var x=y.duration,v=y.easing,S=v===void 0?"ease":v,w=y.style,b=y.properties,_=y.onAnimationEnd,P=p>0?o[p-1]:y,C=b||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(Cg(h),[i.runJSAnimation.bind(i,{from:P.style,to:w,duration:x,easing:S}),x]);var M=SS(C,x,S),A=Kn(Kn(Kn({},P.style),w),{},{transition:M});return[].concat(Cg(h),[A,x,_]).filter(wne)};return this.manager.start([c].concat(Cg(o.reduce(g,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=yne());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,f=s.onAnimationStart,d=s.onAnimationEnd,m=s.steps,g=s.children,j=this.manager;if(this.unSubscribe=j.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var h=l?bc({},l,c):c,y=SS(Object.keys(h),o,u);j.start([f,i,Kn(Kn({},h),{},{transition:y}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Gne(s,qne),u=N.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var d=function(g){var j=g.props,h=j.style,y=h===void 0?{}:h,p=j.className,x=N.cloneElement(g,Kn(Kn({},c),{},{style:Kn(Kn({},y),f),className:p}));return x};return u===1?d(N.Children.only(i)):H.createElement("div",null,N.Children.map(i,function(m){return d(m)}))}}]),r}(N.PureComponent);os.displayName="Animate";os.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};os.propTypes={from:bt.oneOfType([bt.object,bt.string]),to:bt.oneOfType([bt.object,bt.string]),attributeName:bt.string,duration:bt.number,begin:bt.number,easing:bt.oneOfType([bt.string,bt.func]),steps:bt.arrayOf(bt.shape({duration:bt.number.isRequired,style:bt.object.isRequired,easing:bt.oneOfType([bt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),bt.func]),properties:bt.arrayOf("string"),onAnimationEnd:bt.func})),children:bt.oneOfType([bt.node,bt.func]),isActive:bt.bool,canBegin:bt.bool,onAnimationEnd:bt.func,shouldReAnimate:bt.bool,onAnimationStart:bt.func,onAnimationReStart:bt.func};function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},km.apply(this,arguments)}function iae(e,t){return uae(e)||cae(e,t)||lae(e,t)||oae()}function oae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lae(e,t){if(e){if(typeof e=="string")return OS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OS(e,t)}}function OS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function uae(e){if(Array.isArray(e))return e}function TS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TS(Object(r),!0).forEach(function(n){dae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dae(e,t,r){return t=fae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fae(e){var t=mae(e,"string");return Lu(t)=="symbol"?t:t+""}function mae(e,t){if(Lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MS=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],m=0,g=4;m<g;m++)d[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+s-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+s)),f+="L ".concat(t+c*d[3],",").concat(r+s),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var j=Math.min(o,i);f="M ".concat(t,",").concat(r+l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(u,",").concat(t+c*j,",").concat(r,`
            L `).concat(t+n-c*j,",").concat(r,`
            A `).concat(j,",").concat(j,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*j,`
            L `).concat(t+n,",").concat(r+s-l*j,`
            A `).concat(j,",").concat(j,",0,0,").concat(u,",").concat(t+n-c*j,",").concat(r+s,`
            L `).concat(t+c*j,",").concat(r+s,`
            A `).concat(j,",").concat(j,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*j," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},hae=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),d=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=f&&s>=d&&s<=m}return!1},pae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ub=function(t){var r=kS(kS({},pae),t),n=N.useRef(),s=N.useState(-1),i=iae(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,m=r.radius,g=r.className,j=r.animationEasing,h=r.animationDuration,y=r.animationBegin,p=r.isAnimationActive,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var v=st("recharts-rectangle",g);return x?H.createElement(os,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:h,animationEasing:j,isActive:x},function(S){var w=S.width,b=S.height,_=S.x,P=S.y;return H.createElement(os,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:h,isActive:p,easing:j},H.createElement("path",km({},Ye(r,!0),{className:v,d:MS(_,P,w,b,m),ref:n})))}):H.createElement("path",km({},Ye(r,!0),{className:v,d:MS(c,u,f,d,m)}))},gae=["points","className","baseLinePoints","connectNulls"];function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo.apply(this,arguments)}function xae(e,t){if(e==null)return{};var r=yae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DS(e){return wae(e)||jae(e)||bae(e)||vae()}function vae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bae(e,t){if(e){if(typeof e=="string")return J0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J0(e,t)}}function jae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wae(e){if(Array.isArray(e))return J0(e)}function J0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $S=function(t){return t&&t.x===+t.x&&t.y===+t.y},Nae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){$S(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),$S(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Fc=function(t,r){var n=Nae(t);r&&(n=[n.reduce(function(i,o){return[].concat(DS(i),DS(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},Sae=function(t,r,n){var s=Fc(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Fc(r.reverse(),n).slice(1))},_ae=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=xae(t,gae);if(!r||!r.length)return null;var l=st("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=Sae(r,s,i);return H.createElement("g",{className:l},H.createElement("path",Oo({},Ye(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?H.createElement("path",Oo({},Ye(o,!0),{fill:"none",d:Fc(r,i)})):null,c?H.createElement("path",Oo({},Ye(o,!0),{fill:"none",d:Fc(s,i)})):null)}var f=Fc(r,i);return H.createElement("path",Oo({},Ye(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z0.apply(this,arguments)}var Wb=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=st("recharts-dot",i);return r===+r&&n===+n&&s===+s?N.createElement("circle",Z0({},Ye(t,!1),Zf(t),{className:o,cx:r,cy:n,r:s})):null};function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}var Aae=["x","y","top","left","width","height","className"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(this,arguments)}function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){Eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eae(e,t,r){return t=Cae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cae(e){var t=Oae(e,"string");return Ru(t)=="symbol"?t:t+""}function Oae(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tae(e,t){if(e==null)return{};var r=kae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Mae=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},Dae=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,m=t.height,g=m===void 0?0:m,j=t.className,h=Tae(t,Aae),y=Pae({x:n,y:i,top:l,left:u,width:d,height:g},h);return!_e(n)||!_e(i)||!_e(d)||!_e(g)||!_e(l)||!_e(u)?null:H.createElement("path",Q0({},Ye(y,!0),{className:st("recharts-cross",j),d:Mae(n,i,d,g,l,u)}))},$ae=ep,Iae=ET,Lae=Ma;function Rae(e,t){return e&&e.length?$ae(e,Lae(t),Iae):void 0}var Bae=Rae;const Fae=St(Bae);var zae=ep,Vae=Ma,Uae=CT;function Wae(e,t){return e&&e.length?zae(e,Vae(t),Uae):void 0}var Hae=Wae;const qae=St(Hae);var Gae=["cx","cy","angle","ticks","axisLine"],Kae=["ticks","tick","angle","tickFormatter","stroke"];function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(this,arguments)}function LS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LS(Object(r),!0).forEach(function(n){op(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RS(e,t){if(e==null)return{};var r=Yae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yk(n.key),n)}}function Jae(e,t,r){return t&&BS(e.prototype,t),r&&BS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zae(e,t,r){return t=Mm(t),Qae(e,xk()?Reflect.construct(t,r||[],Mm(e).constructor):t.apply(e,r))}function Qae(e,t){if(t&&(hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ese(e)}function ese(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xk=function(){return!!e})()}function Mm(e){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mm(e)}function tse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}function ey(e,t){return ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ey(e,t)}function op(e,t,r){return t=yk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yk(e){var t=rse(e,"string");return hl(t)=="symbol"?t:t+""}function rse(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lp=function(e){function t(){return Xae(this,t),Zae(this,t,arguments)}return tse(t,e),Jae(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Rt(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=Fae(l,function(f){return f.coordinate||0}),u=qae(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=RS(n,Gae),f=l.reduce(function(j,h){return[Math.min(j[0],h.coordinate),Math.max(j[1],h.coordinate)]},[1/0,-1/0]),d=Rt(s,i,f[0],o),m=Rt(s,i,f[1],o),g=ui(ui(ui({},Ye(u,!1)),{},{fill:"none"},Ye(c,!1)),{},{x1:d.x,y1:d.y,x2:m.x,y2:m.y});return H.createElement("line",zc({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,f=RS(s,Kae),d=this.getTickTextAnchor(),m=Ye(f,!1),g=Ye(o,!1),j=i.map(function(h,y){var p=n.getTickValueCoord(h),x=ui(ui(ui(ui({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(p.x,", ").concat(p.y,")")},m),{},{stroke:"none",fill:u},g),{},{index:y},p),{},{payload:h});return H.createElement(wt,zc({className:st("recharts-polar-radius-axis-tick",nk(o)),key:"tick-".concat(h.coordinate)},qi(n.props,h,y)),t.renderTickItem(o,x,c?c(h.value,y):h.value))});return H.createElement(wt,{className:"recharts-polar-radius-axis-ticks"},j)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:H.createElement(wt,{className:st("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),jr.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return H.isValidElement(n)?o=H.cloneElement(n,s):Je(n)?o=n(s):o=H.createElement(Gi,zc({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);op(lp,"displayName","PolarRadiusAxis");op(lp,"axisType","radiusAxis");op(lp,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ji.apply(this,arguments)}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){cp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bk(n.key),n)}}function ase(e,t,r){return t&&zS(e.prototype,t),r&&zS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sse(e,t,r){return t=Dm(t),ise(e,vk()?Reflect.construct(t,r||[],Dm(e).constructor):t.apply(e,r))}function ise(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ose(e)}function ose(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vk=function(){return!!e})()}function Dm(e){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dm(e)}function lse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ty(e,t)}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ty(e,t)}function cp(e,t,r){return t=bk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bk(e){var t=cse(e,"string");return pl(t)=="symbol"?t:t+""}function cse(e,t){if(pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var use=Math.PI/180,VS=1e-5,up=function(e){function t(){return nse(this,t),sse(this,t,arguments)}return lse(t,e),ase(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,f=u||8,d=Rt(i,o,l,n.coordinate),m=Rt(i,o,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*use),o;return i>VS?o=s==="outer"?"start":"end":i<-VS?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=di(di({},Ye(this.props,!1)),{},{fill:"none"},Ye(l,!1));if(c==="circle")return H.createElement(Wb,ji({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,d=f.map(function(m){return Rt(s,i,o,m.coordinate)});return H.createElement(_ae,ji({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,f=Ye(this.props,!1),d=Ye(o,!1),m=di(di({},f),{},{fill:"none"},Ye(l,!1)),g=i.map(function(j,h){var y=n.getTickLineCoord(j),p=n.getTickTextAnchor(j),x=di(di(di({textAnchor:p},f),{},{stroke:"none",fill:u},d),{},{index:h,payload:j,x:y.x2,y:y.y2});return H.createElement(wt,ji({className:st("recharts-polar-angle-axis-tick",nk(o)),key:"tick-".concat(j.coordinate)},qi(n.props,j,h)),l&&H.createElement("line",ji({className:"recharts-polar-angle-axis-tick-line"},m,y)),o&&t.renderTickItem(o,x,c?c(j.value,h):j.value))});return H.createElement(wt,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:H.createElement(wt,{className:st("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return H.isValidElement(n)?o=H.cloneElement(n,s):Je(n)?o=n(s):o=H.createElement(Gi,ji({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);cp(up,"displayName","PolarAngleAxis");cp(up,"axisType","angleAxis");cp(up,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var dse=SO,fse=dse(Object.getPrototypeOf,Object),mse=fse,hse=cs,pse=mse,gse=us,xse="[object Object]",yse=Function.prototype,vse=Object.prototype,jk=yse.toString,bse=vse.hasOwnProperty,jse=jk.call(Object);function wse(e){if(!gse(e)||hse(e)!=xse)return!1;var t=pse(e);if(t===null)return!0;var r=bse.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&jk.call(r)==jse}var Nse=wse;const Sse=St(Nse);var _se=cs,Ase=us,Pse="[object Boolean]";function Ese(e){return e===!0||e===!1||Ase(e)&&_se(e)==Pse}var Cse=Ese;const Ose=St(Cse);function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$m.apply(this,arguments)}function Tse(e,t){return $se(e)||Dse(e,t)||Mse(e,t)||kse()}function kse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mse(e,t){if(e){if(typeof e=="string")return US(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return US(e,t)}}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function $se(e){if(Array.isArray(e))return e}function WS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WS(Object(r),!0).forEach(function(n){Ise(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ise(e,t,r){return t=Lse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lse(e){var t=Rse(e,"string");return Bu(t)=="symbol"?t:t+""}function Rse(e,t){if(Bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qS=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Bse={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fse=function(t){var r=HS(HS({},Bse),t),n=N.useRef(),s=N.useState(-1),i=Tse(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var v=n.current.getTotalLength();v&&l(v)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,m=r.height,g=r.className,j=r.animationEasing,h=r.animationDuration,y=r.animationBegin,p=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||m!==+m||f===0&&d===0||m===0)return null;var x=st("recharts-trapezoid",g);return p?H.createElement(os,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:m,x:c,y:u},duration:h,animationEasing:j,isActive:p},function(v){var S=v.upperWidth,w=v.lowerWidth,b=v.height,_=v.x,P=v.y;return H.createElement(os,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:h,easing:j},H.createElement("path",$m({},Ye(r,!0),{className:x,d:qS(_,P,S,w,b),ref:n})))}):H.createElement("g",null,H.createElement("path",$m({},Ye(r,!0),{className:x,d:qS(c,u,f,d,m)})))},zse=["option","shapeType","propTransformer","activeClassName","isActive"];function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Vse(e,t){if(e==null)return{};var r=Use(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Use(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){Wse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wse(e,t,r){return t=Hse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hse(e){var t=qse(e,"string");return Fu(t)=="symbol"?t:t+""}function qse(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gse(e,t){return Im(Im({},t),e)}function Kse(e,t){return e==="symbols"}function KS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return H.createElement(Ub,r);case"trapezoid":return H.createElement(Fse,r);case"sector":return H.createElement(ik,r);case"symbols":if(Kse(t))return H.createElement(lb,r);break;default:return null}}function Yse(e){return N.isValidElement(e)?e.props:e}function wk(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?Gse:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=Vse(e,zse),u;if(N.isValidElement(t))u=N.cloneElement(t,Im(Im({},c),Yse(t)));else if(Je(t))u=t(c);else if(Sse(t)&&!Ose(t)){var f=s(t,c);u=H.createElement(KS,{shapeType:r,elementProps:f})}else{var d=c;u=H.createElement(KS,{shapeType:r,elementProps:d})}return l?H.createElement(wt,{className:o},u):u}function dp(e,t){return t!=null&&"trapezoids"in e.props}function fp(e,t){return t!=null&&"sectors"in e.props}function zu(e,t){return t!=null&&"points"in e.props}function Xse(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function Jse(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Zse(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function Qse(e,t){var r;return dp(e,t)?r=Xse:fp(e,t)?r=Jse:zu(e,t)&&(r=Zse),r}function eie(e,t){var r;return dp(e,t)?r="trapezoids":fp(e,t)?r="sectors":zu(e,t)&&(r="points"),r}function tie(e,t){if(dp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(fp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return zu(e,t)?t.payload:{}}function rie(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=eie(r,t),i=tie(r,t),o=n.filter(function(c,u){var f=np(i,c),d=r.props[s].filter(function(j){var h=Qse(r,t);return h(j,t)}),m=r.props[s].indexOf(d[d.length-1]),g=u===m;return f&&g}),l=n.indexOf(o[o.length-1]);return l}var hf;function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},To.apply(this,arguments)}function YS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(r),!0).forEach(function(n){$n(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sk(n.key),n)}}function aie(e,t,r){return t&&XS(e.prototype,t),r&&XS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sie(e,t,r){return t=Lm(t),iie(e,Nk()?Reflect.construct(t,r||[],Lm(e).constructor):t.apply(e,r))}function iie(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oie(e)}function oie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nk=function(){return!!e})()}function Lm(e){return Lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lm(e)}function lie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ry(e,t)}function ry(e,t){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ry(e,t)}function $n(e,t,r){return t=Sk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sk(e){var t=cie(e,"string");return gl(t)=="symbol"?t:t+""}function cie(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fs=function(e){function t(r){var n;return nie(this,t),n=sie(this,t,[r]),$n(n,"pieRef",null),$n(n,"sectorRefs",[]),$n(n,"id",id("recharts-pie-")),$n(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Je(s)&&s()}),$n(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Je(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return lie(t,e),aie(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,f=Ye(this.props,!1),d=Ye(o,!1),m=Ye(l,!1),g=o&&o.offsetRadius||20,j=n.map(function(h,y){var p=(h.startAngle+h.endAngle)/2,x=Rt(h.cx,h.cy,h.outerRadius+g,p),v=Dt(Dt(Dt(Dt({},f),h),{},{stroke:"none"},d),{},{index:y,textAnchor:t.getTextAnchor(x.x,h.cx)},x),S=Dt(Dt(Dt(Dt({},f),h),{},{fill:"none",stroke:h.fill},m),{},{index:y,points:[Rt(h.cx,h.cy,h.outerRadius,p),x]}),w=c;return ct(c)&&ct(u)?w="value":ct(c)&&(w=u),H.createElement(wt,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,v,zr(h,w)))});return H.createElement(wt,{className:"recharts-pie-labels"},j)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=s.isActiveIndex(f),m=c&&s.hasActiveIndex()?c:null,g=d?o:m,j=Dt(Dt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return H.createElement(wt,To({ref:function(y){y&&!s.sectorRefs.includes(y)&&s.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},qi(s.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),H.createElement(wk,To({option:g,isActive:d,shapeType:"sector"},j)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,f=s.animationId,d=this.state,m=d.prevSectors,g=d.prevIsAnimationActive;return H.createElement(os,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(j){var h=j.t,y=[],p=i&&i[0],x=p.startAngle;return i.forEach(function(v,S){var w=m&&m[S],b=S>0?wn(v,"paddingAngle",0):0;if(w){var _=js(w.endAngle-w.startAngle,v.endAngle-v.startAngle),P=Dt(Dt({},v),{},{startAngle:x+b,endAngle:x+_(h)+b});y.push(P),x=P.endAngle}else{var C=v.endAngle,M=v.startAngle,A=js(0,C-M),E=A(h),T=Dt(Dt({},v),{},{startAngle:x+b,endAngle:x+E+b});y.push(T),x=T.endAngle}}),H.createElement(wt,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!np(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,f=s.cy,d=s.innerRadius,m=s.outerRadius,g=s.isAnimationActive,j=this.state.isAnimationFinished;if(i||!o||!o.length||!_e(u)||!_e(f)||!_e(d)||!_e(m))return null;var h=st("recharts-pie",l);return H.createElement(wt,{tabIndex:this.props.rootTabIndex,className:h,ref:function(p){n.pieRef=p}},this.renderSectors(),c&&this.renderLabels(o),jr.renderCallByParent(this.props,null,!1),(!g||j)&&Us.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(H.isValidElement(n))return H.cloneElement(n,s);if(Je(n))return n(s);var o=st("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return H.createElement(z0,To({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(H.isValidElement(n))return H.cloneElement(n,s);var o=i;if(Je(n)&&(o=n(s),H.isValidElement(o)))return o;var l=st("recharts-pie-label-text",typeof n!="boolean"&&!Je(n)?n.className:"");return H.createElement(Gi,To({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);hf=fs;$n(fs,"displayName","Pie");$n(fs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!zl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});$n(fs,"parseDeltaAngle",function(e,t){var r=Yr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});$n(fs,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ye(e,!1),s=Bn(r,Gh);return t&&t.length?t.map(function(i,o){return Dt(Dt(Dt({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Dt(Dt({},n),i.props)}):[]});$n(fs,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=rk(s,i),l=n+Xr(e.cx,s,s/2),c=r+Xr(e.cy,i,i/2),u=Xr(e.innerRadius,o,0),f=Xr(e.outerRadius,o,o*.8),d=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:d}});$n(fs,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Dt(Dt({},t.type.defaultProps),t.props):t.props,s=hf.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,f=n.nameKey,d=n.valueKey,m=n.tooltipType,g=Math.abs(n.minAngle),j=hf.parseCoordinateOfPie(n,r),h=hf.parseDeltaAngle(o,l),y=Math.abs(h),p=u;ct(u)&&ct(d)?(oa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):ct(u)&&(oa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=d);var x=s.filter(function(P){return zr(P,p,0)!==0}).length,v=(y>=360?x:x-1)*c,S=y-x*g-v,w=s.reduce(function(P,C){var M=zr(C,p,0);return P+(_e(M)?M:0)},0),b;if(w>0){var _;b=s.map(function(P,C){var M=zr(P,p,0),A=zr(P,f,C),E=(_e(M)?M:0)/w,T;C?T=_.endAngle+Yr(h)*c*(M!==0?1:0):T=o;var B=T+Yr(h)*((M!==0?g:0)+E*S),I=(T+B)/2,D=(j.innerRadius+j.outerRadius)/2,O=[{name:A,value:M,payload:P,dataKey:p,type:m}],$=Rt(j.cx,j.cy,D,I);return _=Dt(Dt(Dt({percent:E,cornerRadius:i,name:A,tooltipPayload:O,midAngle:I,middleRadius:D,tooltipPosition:$},P),j),{},{value:zr(P,p),startAngle:T,endAngle:B,payload:P,paddingAngle:Yr(h)*c}),_})}return Dt(Dt({},j),{},{sectors:b,data:s})});var uie=Math.ceil,die=Math.max;function fie(e,t,r,n){for(var s=-1,i=die(uie((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var mie=fie,hie=UO,JS=1/0,pie=17976931348623157e292;function gie(e){if(!e)return e===0?e:0;if(e=hie(e),e===JS||e===-JS){var t=e<0?-1:1;return t*pie}return e===e?e:0}var _k=gie,xie=mie,yie=qh,Og=_k;function vie(e){return function(t,r,n){return n&&typeof n!="number"&&yie(t,r,n)&&(r=n=void 0),t=Og(t),r===void 0?(r=t,t=0):r=Og(r),n=n===void 0?t<r?1:-1:Og(n),xie(t,r,n,e)}}var bie=vie,jie=bie,wie=jie(),Nie=wie;const Rm=St(Nie);function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(n){Ak(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ak(e,t,r){return t=Sie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sie(e){var t=_ie(e,"string");return Vu(t)=="symbol"?t:t+""}function _ie(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aie=["Webkit","Moz","O","ms"],Pie=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Aie.reduce(function(i,o){return QS(QS({},i),{},Ak({},o+n,r))},{});return s[t]=r,s};function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function e_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e_(Object(r),!0).forEach(function(n){gn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ek(n.key),n)}}function Cie(e,t,r){return t&&t_(e.prototype,t),r&&t_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oie(e,t,r){return t=Fm(t),Tie(e,Pk()?Reflect.construct(t,r||[],Fm(e).constructor):t.apply(e,r))}function Tie(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kie(e)}function kie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Pk=function(){return!!e})()}function Fm(e){return Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fm(e)}function Mie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}function ny(e,t){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ny(e,t)}function gn(e,t,r){return t=Ek(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ek(e){var t=Die(e,"string");return xl(t)=="symbol"?t:t+""}function Die(e,t){if(xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $ie=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Lc().domain(Rm(0,c)).range([i,i+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},r_=function(t){return t.changedTouches&&!!t.changedTouches.length},yl=function(e){function t(r){var n;return Eie(this,t),n=Oie(this,t,[r]),gn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),gn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),gn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),gn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),gn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),gn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),gn(n,"handleSlideDragStart",function(s){var i=r_(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Mie(t,e),Cie(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(s,i),m=Math.max(s,i),g=t.getIndexInRange(o,d),j=t.getIndexInRange(o,m);return{startIndex:g-g%c,endIndex:j===f?f:j-j%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=zr(i[n],l,n);return Je(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,m=c.startIndex,g=c.endIndex,j=c.onChange,h=n.pageX-i;h>0?h=Math.min(h,u+f-d-l,u+f-d-o):h<0&&(h=Math.max(h,u-o,u-l));var y=this.getIndex({startX:o+h,endX:l+h});(y.startIndex!==m||y.endIndex!==g)&&j&&j(y),this.setState({startX:o+h,endX:l+h,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=r_(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],f=this.props,d=f.x,m=f.width,g=f.travellerWidth,j=f.onChange,h=f.gap,y=f.data,p={startX:this.state.startX,endX:this.state.endX},x=n.pageX-i;x>0?x=Math.min(x,d+m-g-u):x<0&&(x=Math.max(x,d-u)),p[o]=u+x;var v=this.getIndex(p),S=v.startIndex,w=v.endIndex,b=function(){var P=y.length-1;return o==="startX"&&(l>c?S%h===0:w%h===0)||l<c&&w===P||o==="endX"&&(l>c?w%h===0:S%h===0)||l>c&&w===P};this.setState(gn(gn({},o,u+x),"brushMoveStartX",n.pageX),function(){j&&b()&&j(v)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[s],d=l.indexOf(f);if(d!==-1){var m=d+n;if(!(m===-1||m>=l.length)){var g=l[m];s==="startX"&&g>=u||s==="endX"&&g<=c||this.setState(gn({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return H.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=N.Children.only(u);return d?H.cloneElement(d,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,m=c.traveller,g=c.ariaLabel,j=c.data,h=c.startIndex,y=c.endIndex,p=Math.max(n,this.props.x),x=Tg(Tg({},Ye(this.props,!1)),{},{x:p,y:u,width:f,height:d}),v=g||"Min value: ".concat((i=j[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=j[y])===null||o===void 0?void 0:o.name);return H.createElement(wt,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,x))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,d=Math.max(Math.abs(s-n)-u,0);return H.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,m=f.endX,g=5,j={pointerEvents:"none",fill:u};return H.createElement(wt,{className:"recharts-brush-texts"},H.createElement(Gi,Bm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,m)-g,y:o+l/2},j),this.getTextOfTick(s)),H.createElement(Gi,Bm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,m)+c+g,y:o+l/2},j),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,m=this.state,g=m.startX,j=m.endX,h=m.isTextActive,y=m.isSlideMoving,p=m.isTravellerMoving,x=m.isTravellerFocused;if(!s||!s.length||!_e(l)||!_e(c)||!_e(u)||!_e(f)||u<=0||f<=0)return null;var v=st("recharts-brush",i),S=H.Children.count(o)===1,w=Pie("userSelect","none");return H.createElement(wt,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(g,j),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(j,"endX"),(h||y||p||x||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return H.createElement(H.Fragment,null,H.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),H.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),H.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return H.isValidElement(n)?i=H.cloneElement(n,s):Je(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Tg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?$ie({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(N.PureComponent);gn(yl,"displayName","Brush");gn(yl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Iie=pb;function Lie(e,t){var r;return Iie(e,function(n,s,i){return r=t(n,s,i),!r}),!!r}var Rie=Lie,Bie=gO,Fie=Ma,zie=Rie,Vie=pn,Uie=qh;function Wie(e,t,r){var n=Vie(e)?Bie:zie;return r&&Uie(e,t,r)&&(t=void 0),n(e,Fie(t))}var Hie=Wie;const qie=St(Hie);var Ea=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},n_=RO;function Gie(e,t,r){t=="__proto__"&&n_?n_(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Kie=Gie,Yie=Kie,Xie=IO,Jie=Ma;function Zie(e,t){var r={};return t=Jie(t),Xie(e,function(n,s,i){Yie(r,s,t(n,s,i))}),r}var Qie=Zie;const eoe=St(Qie);function toe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var roe=toe,noe=pb;function aoe(e,t){var r=!0;return noe(e,function(n,s,i){return r=!!t(n,s,i),r}),r}var soe=aoe,ioe=roe,ooe=soe,loe=Ma,coe=pn,uoe=qh;function doe(e,t,r){var n=coe(e)?ioe:ooe;return r&&uoe(e,t,r)&&(t=void 0),n(e,loe(t))}var foe=doe;const Ck=St(foe);var moe=["x","y"];function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(this,arguments)}function a_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a_(Object(r),!0).forEach(function(n){hoe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hoe(e,t,r){return t=poe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function poe(e){var t=goe(e,"string");return Uu(t)=="symbol"?t:t+""}function goe(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xoe(e,t){if(e==null)return{};var r=yoe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yoe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function voe(e,t){var r=e.x,n=e.y,s=xoe(e,moe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),d="".concat(t.width||s.width),m=parseInt(d,10);return mc(mc(mc(mc(mc({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function s_(e){return H.createElement(wk,ay({shapeType:"rectangle",propTransformer:voe,activeClassName:"recharts-active-bar"},e))}var boe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=_e(n)||Vz(n);return i?t(n,s):(i||Yi(),r)}},joe=["value","background"],Ok;function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function woe(e,t){if(e==null)return{};var r=Noe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Noe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(this,arguments)}function i_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i_(Object(r),!0).forEach(function(n){Ts(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Soe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kk(n.key),n)}}function _oe(e,t,r){return t&&o_(e.prototype,t),r&&o_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aoe(e,t,r){return t=Vm(t),Poe(e,Tk()?Reflect.construct(t,r||[],Vm(e).constructor):t.apply(e,r))}function Poe(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eoe(e)}function Eoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tk=function(){return!!e})()}function Vm(e){return Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vm(e)}function Coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},sy(e,t)}function Ts(e,t,r){return t=kk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kk(e){var t=Ooe(e,"string");return vl(t)=="symbol"?t:t+""}function Ooe(e,t){if(vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var un=function(e){function t(){var r;Soe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Aoe(this,t,[].concat(s)),Ts(r,"state",{isAnimationFinished:!1}),Ts(r,"id",id("recharts-bar-")),Ts(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Ts(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Coe(t,e),_oe(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,f=Ye(this.props,!1);return n&&n.map(function(d,m){var g=m===c,j=g?u:o,h=or(or(or({},f),d),{},{isActive:g,option:j,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return H.createElement(wt,zm({className:"recharts-bar-rectangle"},qi(s.props,d,m),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(m)}),H.createElement(s_,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,f=s.animationEasing,d=s.animationId,m=this.state.prevData;return H.createElement(os,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var j=g.t,h=i.map(function(y,p){var x=m&&m[p];if(x){var v=js(x.x,y.x),S=js(x.y,y.y),w=js(x.width,y.width),b=js(x.height,y.height);return or(or({},y),{},{x:v(j),y:S(j),width:w(j),height:b(j)})}if(o==="horizontal"){var _=js(0,y.height),P=_(j);return or(or({},y),{},{y:y.y+y.height-P,height:P})}var C=js(0,y.width),M=C(j);return or(or({},y),{},{width:M})});return H.createElement(wt,null,n.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!np(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Ye(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,m=woe(u,joe);if(!d)return null;var g=or(or(or(or(or({},m),{},{fill:"#eee"},d),c),qi(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return H.createElement(s_,zm({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Bn(f,ip);if(!d)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,g=function(y,p){var x=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:x,errorVal:zr(y,p)}},j={clipPath:n?"url(#clipPath-".concat(s,")"):null};return H.createElement(wt,j,d.map(function(h){return H.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,m=n.height,g=n.isAnimationActive,j=n.background,h=n.id;if(s||!i||!i.length)return null;var y=this.state.isAnimationFinished,p=st("recharts-bar",o),x=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,S=x||v,w=ct(h)?this.id:h;return H.createElement(wt,{className:p},x||v?H.createElement("defs",null,H.createElement("clipPath",{id:"clipPath-".concat(w)},H.createElement("rect",{x:x?u:u-d/2,y:v?f:f-m/2,width:x?d:d*2,height:v?m:m*2}))):null,H.createElement(wt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},j?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!g||y)&&Us.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(N.PureComponent);Ok=un;Ts(un,"displayName","Bar");Ts(un,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!zl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ts(un,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,g=ite(n,r);if(!g)return null;var j=t.layout,h=r.type.defaultProps,y=h!==void 0?or(or({},h),r.props):r.props,p=y.dataKey,x=y.children,v=y.minPointSize,S=j==="horizontal"?o:i,w=u?S.scale.domain():null,b=mte({numericAxis:S}),_=Bn(x,Gh),P=d.map(function(C,M){var A,E,T,B,I,D;u?A=ote(u[f+M],w):(A=zr(C,p),Array.isArray(A)||(A=[b,A]));var O=boe(v,Ok.defaultProps.minPointSize)(A[1],M);if(j==="horizontal"){var $,R=[o.scale(A[0]),o.scale(A[1])],Q=R[0],ae=R[1];E=Q2({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:C,index:M}),T=($=ae??Q)!==null&&$!==void 0?$:void 0,B=g.size;var oe=Q-ae;if(I=Number.isNaN(oe)?0:oe,D={x:E,y:o.y,width:B,height:o.height},Math.abs(O)>0&&Math.abs(I)<Math.abs(O)){var Z=Yr(I||O)*(Math.abs(O)-Math.abs(I));T-=Z,I+=Z}}else{var pe=[i.scale(A[0]),i.scale(A[1])],Ee=pe[0],Y=pe[1];if(E=Ee,T=Q2({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:C,index:M}),B=Y-Ee,I=g.size,D={x:i.x,y:T,width:i.width,height:I},Math.abs(O)>0&&Math.abs(B)<Math.abs(O)){var J=Yr(B||O)*(Math.abs(O)-Math.abs(B));B+=J}}return or(or(or({},C),{},{x:E,y:T,width:B,height:I,value:u?A:A[1],payload:C,background:D},_&&_[M]&&_[M].props),{},{tooltipPayload:[ek(r,C)],tooltipPosition:{x:E+B/2,y:T+I/2}})});return or({data:P,layout:j},m)});function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function Toe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mk(n.key),n)}}function koe(e,t,r){return t&&l_(e.prototype,t),r&&l_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c_(Object(r),!0).forEach(function(n){mp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mp(e,t,r){return t=Mk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mk(e){var t=Moe(e,"string");return Wu(t)=="symbol"?t:t+""}function Moe(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Doe=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!yn(u,un);return f.reduce(function(g,j){var h=r[j],y=h.orientation,p=h.domain,x=h.padding,v=x===void 0?{}:x,S=h.mirror,w=h.reversed,b="".concat(y).concat(S?"Mirror":""),_,P,C,M,A;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var E=p[1]-p[0],T=1/0,B=h.categoricalDomain.sort(Hz);if(B.forEach(function(pe,Ee){Ee>0&&(T=Math.min((pe||0)-(B[Ee-1]||0),T))}),Number.isFinite(T)){var I=T/E,D=h.layout==="vertical"?n.height:n.width;if(h.padding==="gap"&&(_=I*D/2),h.padding==="no-gap"){var O=Xr(t.barCategoryGap,I*D),$=I*D/2;_=$-O-($-O)/D*O}}}s==="xAxis"?P=[n.left+(v.left||0)+(_||0),n.left+n.width-(v.right||0)-(_||0)]:s==="yAxis"?P=c==="horizontal"?[n.top+n.height-(v.bottom||0),n.top+(v.top||0)]:[n.top+(v.top||0)+(_||0),n.top+n.height-(v.bottom||0)-(_||0)]:P=h.range,w&&(P=[P[1],P[0]]);var R=XT(h,i,m),Q=R.scale,ae=R.realScaleType;Q.domain(p).range(P),JT(Q);var oe=ZT(Q,Zn(Zn({},h),{},{realScaleType:ae}));s==="xAxis"?(A=y==="top"&&!S||y==="bottom"&&S,C=n.left,M=d[b]-A*h.height):s==="yAxis"&&(A=y==="left"&&!S||y==="right"&&S,C=d[b]-A*h.width,M=n.top);var Z=Zn(Zn(Zn({},h),oe),{},{realScaleType:ae,x:C,y:M,scale:Q,width:s==="xAxis"?n.width:h.width,height:s==="yAxis"?n.height:h.height});return Z.bandSize=_m(Z,oe),!h.hide&&s==="xAxis"?d[b]+=(A?-1:1)*Z.height:h.hide||(d[b]+=(A?-1:1)*Z.width),Zn(Zn({},g),{},mp({},j,Z))},{})},Dk=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},$oe=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return Dk({x:r,y:n},{x:s,y:i})},$k=function(){function e(t){Toe(this,e),this.scale=t}return koe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();mp($k,"EPS",1e-4);var Hb=function(t){var r=Object.keys(t).reduce(function(n,s){return Zn(Zn({},n),{},mp({},s,$k.create(t[s])))},{});return Zn(Zn({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return eoe(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return Ck(s,function(i,o){return r[o].isInRange(i)})}})};function Ioe(e){return(e%180+180)%180}var Loe=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Ioe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Roe=Ma,Boe=od,Foe=Wh;function zoe(e){return function(t,r,n){var s=Object(t);if(!Boe(t)){var i=Roe(r);t=Foe(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:void 0}}var Voe=zoe,Uoe=_k;function Woe(e){var t=Uoe(e),r=t%1;return t===t?r?t-r:t:0}var Hoe=Woe,qoe=OO,Goe=Ma,Koe=Hoe,Yoe=Math.max;function Xoe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:Koe(r);return s<0&&(s=Yoe(n+s,0)),qoe(e,Goe(t),s)}var Joe=Xoe,Zoe=Voe,Qoe=Joe,ele=Zoe(Qoe),tle=ele;const rle=St(tle);var nle=KF(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),qb=N.createContext(void 0),Gb=N.createContext(void 0),Ik=N.createContext(void 0),Lk=N.createContext({}),Rk=N.createContext(void 0),Bk=N.createContext(0),Fk=N.createContext(0),u_=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=nle(i);return H.createElement(qb.Provider,{value:n},H.createElement(Gb.Provider,{value:s},H.createElement(Lk.Provider,{value:i},H.createElement(Ik.Provider,{value:f},H.createElement(Rk.Provider,{value:o},H.createElement(Bk.Provider,{value:u},H.createElement(Fk.Provider,{value:c},l)))))))},ale=function(){return N.useContext(Rk)},zk=function(t){var r=N.useContext(qb);r==null&&Yi();var n=r[t];return n==null&&Yi(),n},sle=function(){var t=N.useContext(qb);return _s(t)},ile=function(){var t=N.useContext(Gb),r=rle(t,function(n){return Ck(n.domain,Number.isFinite)});return r||_s(t)},Vk=function(t){var r=N.useContext(Gb);r==null&&Yi();var n=r[t];return n==null&&Yi(),n},ole=function(){var t=N.useContext(Ik);return t},lle=function(){return N.useContext(Lk)},Kb=function(){return N.useContext(Fk)},Yb=function(){return N.useContext(Bk)};function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function cle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ule(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wk(n.key),n)}}function dle(e,t,r){return t&&ule(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fle(e,t,r){return t=Um(t),mle(e,Uk()?Reflect.construct(t,r||[],Um(e).constructor):t.apply(e,r))}function mle(e,t){if(t&&(bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hle(e)}function hle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uk=function(){return!!e})()}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Um(e)}function ple(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},iy(e,t)}function d_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d_(Object(r),!0).forEach(function(n){Xb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xb(e,t,r){return t=Wk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wk(e){var t=gle(e,"string");return bl(t)=="symbol"?t:t+""}function gle(e,t){if(bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function xle(e,t){return jle(e)||ble(e,t)||vle(e,t)||yle()}function yle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vle(e,t){if(e){if(typeof e=="string")return m_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m_(e,t)}}function m_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ble(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function jle(e){if(Array.isArray(e))return e}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}var wle=function(t,r){var n;return H.isValidElement(t)?n=H.cloneElement(t,r):Je(t)?n=t(r):n=H.createElement("line",oy({},r,{className:"recharts-reference-line-line"})),n},Nle=function(t,r,n,s,i,o,l,c,u){var f=i.x,d=i.y,m=i.width,g=i.height;if(n){var j=u.y,h=t.y.apply(j,{position:o});if(Ea(u,"discard")&&!t.y.isInRange(h))return null;var y=[{x:f+m,y:h},{x:f,y:h}];return c==="left"?y.reverse():y}if(r){var p=u.x,x=t.x.apply(p,{position:o});if(Ea(u,"discard")&&!t.x.isInRange(x))return null;var v=[{x,y:d+g},{x,y:d}];return l==="top"?v.reverse():v}if(s){var S=u.segment,w=S.map(function(b){return t.apply(b,{position:o})});return Ea(u,"discard")&&qie(w,function(b){return!t.isInRange(b)})?null:w}return null};function Sle(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=ale(),f=zk(s),d=Vk(i),m=ole();if(!u||!m)return null;oa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Hb({x:f.scale,y:d.scale}),j=xr(t),h=xr(r),y=n&&n.length===2,p=Nle(g,j,h,y,m,e.position,f.orientation,d.orientation,e);if(!p)return null;var x=xle(p,2),v=x[0],S=v.x,w=v.y,b=x[1],_=b.x,P=b.y,C=Ea(e,"hidden")?"url(#".concat(u,")"):void 0,M=f_(f_({clipPath:C},Ye(e,!0)),{},{x1:S,y1:w,x2:_,y2:P});return H.createElement(wt,{className:st("recharts-reference-line",l)},wle(o,M),jr.renderCallByParent(e,$oe({x1:S,y1:w,x2:_,y2:P})))}var Jb=function(e){function t(){return cle(this,t),fle(this,t,arguments)}return ple(t,e),dle(t,[{key:"render",value:function(){return H.createElement(Sle,this.props)}}])}(H.Component);Xb(Jb,"displayName","ReferenceLine");Xb(Jb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(this,arguments)}function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h_(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ale(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qk(n.key),n)}}function Ple(e,t,r){return t&&Ale(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ele(e,t,r){return t=Wm(t),Cle(e,Hk()?Reflect.construct(t,r||[],Wm(e).constructor):t.apply(e,r))}function Cle(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ole(e)}function Ole(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hk=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wm(e)}function Tle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cy(e,t)}function hp(e,t,r){return t=qk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qk(e){var t=kle(e,"string");return jl(t)=="symbol"?t:t+""}function kle(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mle=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=Hb({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Ea(t,"discard")&&!o.isInRange(l)?null:l},pp=function(e){function t(){return _le(this,t),Ele(this,t,arguments)}return Tle(t,e),Ple(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=xr(s),f=xr(i);if(oa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=Mle(this.props);if(!d)return null;var m=d.x,g=d.y,j=this.props,h=j.shape,y=j.className,p=Ea(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=p_(p_({clipPath:p},Ye(this.props,!0)),{},{cx:m,cy:g});return H.createElement(wt,{className:st("recharts-reference-dot",y)},t.renderDot(h,x),jr.renderCallByParent(this.props,{x:m-o,y:g-o,width:2*o,height:2*o}))}}])}(H.Component);hp(pp,"displayName","ReferenceDot");hp(pp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});hp(pp,"renderDot",function(e,t){var r;return H.isValidElement(e)?r=H.cloneElement(e,t):Je(e)?r=e(t):r=H.createElement(Wb,ly({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(this,arguments)}function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function g_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kk(n.key),n)}}function Ile(e,t,r){return t&&$le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lle(e,t,r){return t=Hm(t),Rle(e,Gk()?Reflect.construct(t,r||[],Hm(e).constructor):t.apply(e,r))}function Rle(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ble(e)}function Ble(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gk=function(){return!!e})()}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hm(e)}function Fle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dy(e,t)}function dy(e,t){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},dy(e,t)}function gp(e,t,r){return t=Kk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kk(e){var t=zle(e,"string");return wl(t)=="symbol"?t:t+""}function zle(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vle=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var m=Hb({x:f.scale,y:d.scale}),g={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},j={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Ea(i,"discard")&&(!m.isInRange(g)||!m.isInRange(j))?null:Dk(g,j)},xp=function(e){function t(){return Dle(this,t),Lle(this,t,arguments)}return Fle(t,e),Ile(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;oa(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=xr(s),m=xr(i),g=xr(o),j=xr(l),h=this.props.shape;if(!d&&!m&&!g&&!j&&!h)return null;var y=Vle(d,m,g,j,this.props);if(!y&&!h)return null;var p=Ea(this.props,"hidden")?"url(#".concat(f,")"):void 0;return H.createElement(wt,{className:st("recharts-reference-area",c)},t.renderRect(h,x_(x_({clipPath:p},Ye(this.props,!0)),y)),jr.renderCallByParent(this.props,y))}}])}(H.Component);gp(xp,"displayName","ReferenceArea");gp(xp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gp(xp,"renderRect",function(e,t){var r;return H.isValidElement(e)?r=H.cloneElement(e,t):Je(e)?r=e(t):r=H.createElement(Ub,uy({},t,{className:"recharts-reference-area-rect"})),r});function Yk(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Ule(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Loe(n,r)}function Wle(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function qm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Hle(e,t){return Yk(e,t+1)}function qle(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var j=n==null?void 0:n[c];if(j===void 0)return{v:Yk(n,u)};var h=c,y,p=function(){return y===void 0&&(y=r(j,h)),y},x=j.coordinate,v=c===0||qm(e,x,p,f,l);v||(c=0,f=o,u+=1),v&&(f=x+e*(p()/2+s),c+=u)},m;u<=i.length;)if(m=d(),m)return m.v;return[]}function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y_(Object(r),!0).forEach(function(n){Gle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gle(e,t,r){return t=Kle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kle(e){var t=Yle(e,"string");return Hu(t)=="symbol"?t:t+""}function Yle(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xle(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var g=i[m],j,h=function(){return j===void 0&&(j=r(g,m)),j};if(m===o-1){var y=e*(g.coordinate+e*h()/2-c);i[m]=g=Rr(Rr({},g),{},{tickCoord:y>0?g.coordinate-y*e:g.coordinate})}else i[m]=g=Rr(Rr({},g),{},{tickCoord:g.coordinate});var p=qm(e,g.tickCoord,h,l,c);p&&(c=g.tickCoord-e*(h()/2+s),i[m]=Rr(Rr({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Jle(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var f=n[l-1],d=r(f,l-1),m=e*(f.coordinate+e*d/2-u);o[l-1]=f=Rr(Rr({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var g=qm(e,f.tickCoord,function(){return d},c,u);g&&(u=f.tickCoord-e*(d/2+s),o[l-1]=Rr(Rr({},f),{},{isShow:!0}))}for(var j=i?l-1:l,h=function(x){var v=o[x],S,w=function(){return S===void 0&&(S=r(v,x)),S};if(x===0){var b=e*(v.coordinate-e*w()/2-c);o[x]=v=Rr(Rr({},v),{},{tickCoord:b<0?v.coordinate-b*e:v.coordinate})}else o[x]=v=Rr(Rr({},v),{},{tickCoord:v.coordinate});var _=qm(e,v.tickCoord,w,c,u);_&&(c=v.tickCoord+e*(w()/2+s),o[x]=Rr(Rr({},v),{},{isShow:!0}))},y=0;y<j;y++)h(y);return o}function Zb(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(_e(c)||zl.isSsr)return Hle(s,typeof c=="number"&&_e(c)?c:0);var m=[],g=l==="top"||l==="bottom"?"width":"height",j=f&&g==="width"?Ic(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(v,S){var w=Je(u)?u(v.value,S):v.value;return g==="width"?Ule(Ic(w,{fontSize:t,letterSpacing:r}),j,d):Ic(w,{fontSize:t,letterSpacing:r})[g]},y=s.length>=2?Yr(s[1].coordinate-s[0].coordinate):1,p=Wle(i,y,g);return c==="equidistantPreserveStart"?qle(y,p,h,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Jle(y,p,h,s,o,c==="preserveStartEnd"):m=Xle(y,p,h,s,o),m.filter(function(x){return x.isShow}))}var Zle=["viewBox"],Qle=["viewBox"],ece=["ticks"];function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ko.apply(this,arguments)}function v_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(r),!0).forEach(function(n){Qb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kg(e,t){if(e==null)return{};var r=tce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Jk(n.key),n)}}function nce(e,t,r){return t&&b_(e.prototype,t),r&&b_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ace(e,t,r){return t=Gm(t),sce(e,Xk()?Reflect.construct(t,r||[],Gm(e).constructor):t.apply(e,r))}function sce(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ice(e)}function ice(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xk=function(){return!!e})()}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gm(e)}function oce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fy(e,t)}function fy(e,t){return fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},fy(e,t)}function Qb(e,t,r){return t=Jk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jk(e){var t=lce(e,"string");return Nl(t)=="symbol"?t:t+""}function lce(e,t){if(Nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hl=function(e){function t(r){var n;return rce(this,t),n=ace(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return oce(t,e),nce(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=kg(n,Zle),l=this.props,c=l.viewBox,u=kg(l,Qle);return!Uo(i,c)||!Uo(o,u)||!Uo(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,f=s.tickSize,d=s.mirror,m=s.tickMargin,g,j,h,y,p,x,v=d?-1:1,S=n.tickSize||f,w=_e(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":g=j=n.coordinate,y=o+ +!d*c,h=y-v*S,x=h-v*m,p=w;break;case"left":h=y=n.coordinate,j=i+ +!d*l,g=j-v*S,p=g-v*m,x=w;break;case"right":h=y=n.coordinate,j=i+ +d*l,g=j+v*S,p=g+v*m,x=w;break;default:g=j=n.coordinate,y=o+ +d*c,h=y+v*S,x=h+v*m,p=w;break}return{line:{x1:g,y1:h,x2:j,y2:y},tick:{x:p,y:x}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=fr(fr(fr({},Ye(this.props,!1)),Ye(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);d=fr(fr({},d),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var g=+(c==="left"&&!u||c==="right"&&u);d=fr(fr({},d),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return H.createElement("line",ko({},d,{className:st("recharts-cartesian-axis-line",wn(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,m=l.unit,g=Zb(fr(fr({},this.props),{},{ticks:n}),s,i),j=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),y=Ye(this.props,!1),p=Ye(f,!1),x=fr(fr({},y),{},{fill:"none"},Ye(c,!1)),v=g.map(function(S,w){var b=o.getTickLineCoord(S),_=b.line,P=b.tick,C=fr(fr(fr(fr({textAnchor:j,verticalAnchor:h},y),{},{stroke:"none",fill:u},p),P),{},{index:w,payload:S,visibleTicksCount:g.length,tickFormatter:d});return H.createElement(wt,ko({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},qi(o.props,S,w)),c&&H.createElement("line",ko({},x,_,{className:st("recharts-cartesian-axis-tick-line",wn(c,"className"))})),f&&t.renderTickItem(f,C,"".concat(Je(d)?d(S.value,w):S.value).concat(m||"")))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var d=this.props,m=d.ticks,g=kg(d,ece),j=m;return Je(c)&&(j=m&&m.length>0?c(this.props):c(g)),o<=0||l<=0||!j||!j.length?null:H.createElement(wt,{className:st("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(j,this.state.fontSize,this.state.letterSpacing),jr.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=st(s.className,"recharts-cartesian-axis-tick-value");return H.isValidElement(n)?o=H.cloneElement(n,fr(fr({},s),{},{className:l})):Je(n)?o=n(fr(fr({},s),{},{className:l})):o=H.createElement(Gi,ko({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);Qb(Hl,"displayName","CartesianAxis");Qb(Hl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cce=["x1","y1","x2","y2","key"],uce=["offset"];function Xi(e){"@babel/helpers - typeof";return Xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xi(e)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(n){dce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dce(e,t,r){return t=fce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fce(e){var t=mce(e,"string");return Xi(t)=="symbol"?t:t+""}function mce(e,t){if(Xi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ci(){return Ci=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ci.apply(this,arguments)}function w_(e,t){if(e==null)return{};var r=hce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var pce=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return H.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Zk(e,t){var r;if(H.isValidElement(e))r=H.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=w_(t,cce),u=Ye(c,!1);u.offset;var f=w_(u,uce);r=H.createElement("line",Ci({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function gce(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Fr(Fr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return Zk(s,u)});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function xce(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Fr(Fr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return Zk(s,u)});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function yce(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,g){return m-g});s!==f[0]&&f.unshift(0);var d=f.map(function(m,g){var j=!f[g+1],h=j?s+o-m:f[g+1]-m;if(h<=0)return null;var y=g%t.length;return H.createElement("rect",{key:"react-".concat(g),y:m,x:n,height:h,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function vce(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,g){return m-g});i!==f[0]&&f.unshift(0);var d=f.map(function(m,g){var j=!f[g+1],h=j?i+l-m:f[g+1]-m;if(h<=0)return null;var y=g%n.length;return H.createElement("rect",{key:"react-".concat(g),x:m,y:o,width:h,height:c,stroke:"none",fill:n[y],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var bce=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return YT(Zb(Fr(Fr(Fr({},Hl.defaultProps),n),{},{ticks:Ha(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},jce=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return YT(Zb(Fr(Fr(Fr({},Hl.defaultProps),n),{},{ticks:Ha(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},co={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qo(e){var t,r,n,s,i,o,l=Kb(),c=Yb(),u=lle(),f=Fr(Fr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:co.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:co.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:co.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:co.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:co.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:co.verticalFill,x:_e(e.x)?e.x:u.left,y:_e(e.y)?e.y:u.top,width:_e(e.width)?e.width:u.width,height:_e(e.height)?e.height:u.height}),d=f.x,m=f.y,g=f.width,j=f.height,h=f.syncWithTicks,y=f.horizontalValues,p=f.verticalValues,x=sle(),v=ile();if(!_e(g)||g<=0||!_e(j)||j<=0||!_e(d)||d!==+d||!_e(m)||m!==+m)return null;var S=f.verticalCoordinatesGenerator||bce,w=f.horizontalCoordinatesGenerator||jce,b=f.horizontalPoints,_=f.verticalPoints;if((!b||!b.length)&&Je(w)){var P=y&&y.length,C=w({yAxis:v?Fr(Fr({},v),{},{ticks:P?y:v.ticks}):void 0,width:l,height:c,offset:u},P?!0:h);oa(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xi(C),"]")),Array.isArray(C)&&(b=C)}if((!_||!_.length)&&Je(S)){var M=p&&p.length,A=S({xAxis:x?Fr(Fr({},x),{},{ticks:M?p:x.ticks}):void 0,width:l,height:c,offset:u},M?!0:h);oa(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xi(A),"]")),Array.isArray(A)&&(_=A)}return H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(pce,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),H.createElement(gce,Ci({},f,{offset:u,horizontalPoints:b,xAxis:x,yAxis:v})),H.createElement(xce,Ci({},f,{offset:u,verticalPoints:_,xAxis:x,yAxis:v})),H.createElement(yce,Ci({},f,{horizontalPoints:b})),H.createElement(vce,Ci({},f,{verticalPoints:_})))}qo.displayName="CartesianGrid";function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}function wce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t5(n.key),n)}}function Sce(e,t,r){return t&&Nce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ce(e,t,r){return t=Km(t),Ace(e,Qk()?Reflect.construct(t,r||[],Km(e).constructor):t.apply(e,r))}function Ace(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pce(e)}function Pce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qk=function(){return!!e})()}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Km(e)}function Ece(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},my(e,t)}function e5(e,t,r){return t=t5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t5(e){var t=Cce(e,"string");return Sl(t)=="symbol"?t:t+""}function Cce(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}function Oce(e){var t=e.xAxisId,r=Kb(),n=Yb(),s=zk(t);return s==null?null:N.createElement(Hl,hy({},s,{className:st("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Ha(o,!0)}}))}var Ws=function(e){function t(){return wce(this,t),_ce(this,t,arguments)}return Ece(t,e),Sce(t,[{key:"render",value:function(){return N.createElement(Oce,this.props)}}])}(N.Component);e5(Ws,"displayName","XAxis");e5(Ws,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Tce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a5(n.key),n)}}function Mce(e,t,r){return t&&kce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dce(e,t,r){return t=Ym(t),$ce(e,r5()?Reflect.construct(t,r||[],Ym(e).constructor):t.apply(e,r))}function $ce(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ice(e)}function Ice(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r5=function(){return!!e})()}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ym(e)}function Lce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&py(e,t)}function py(e,t){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},py(e,t)}function n5(e,t,r){return t=a5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a5(e){var t=Rce(e,"string");return _l(t)=="symbol"?t:t+""}function Rce(e,t){if(_l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gy(){return gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gy.apply(this,arguments)}var Bce=function(t){var r=t.yAxisId,n=Kb(),s=Yb(),i=Vk(r);return i==null?null:N.createElement(Hl,gy({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Ha(l,!0)}}))},Hs=function(e){function t(){return Tce(this,t),Dce(this,t,arguments)}return Lce(t,e),Mce(t,[{key:"render",value:function(){return N.createElement(Bce,this.props)}}])}(N.Component);n5(Hs,"displayName","YAxis");n5(Hs,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function N_(e){return Uce(e)||Vce(e)||zce(e)||Fce()}function Fce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zce(e,t){if(e){if(typeof e=="string")return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(e,t)}}function Vce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uce(e){if(Array.isArray(e))return xy(e)}function xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yy=function(t,r,n,s,i){var o=Bn(t,Jb),l=Bn(t,pp),c=[].concat(N_(o),N_(l)),u=Bn(t,xp),f="".concat(s,"Id"),d=s[0],m=r;if(c.length&&(m=c.reduce(function(h,y){if(y.props[f]===n&&Ea(y.props,"extendDomain")&&_e(y.props[d])){var p=y.props[d];return[Math.min(h[0],p),Math.max(h[1],p)]}return h},m)),u.length){var g="".concat(d,"1"),j="".concat(d,"2");m=u.reduce(function(h,y){if(y.props[f]===n&&Ea(y.props,"extendDomain")&&_e(y.props[g])&&_e(y.props[j])){var p=y.props[g],x=y.props[j];return[Math.min(h[0],p,x),Math.max(h[1],p,x)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,y){return _e(y)?[Math.min(h[0],y),Math.max(h[1],y)]:h},m)),m},s5={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,d||c,m),j=r?r+u:u;return c._events[j]?c._events[j].fn?c._events[j]=[c._events[j],g]:c._events[j].push(g):(c._events[j]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var m=0,g=d.length,j=new Array(g);m<g;m++)j[m]=d[m].fn;return j},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,m,g,j){var h=r?r+u:u;if(!this._events[h])return!1;var y=this._events[h],p=arguments.length,x,v;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),p){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,d),!0;case 4:return y.fn.call(y.context,f,d,m),!0;case 5:return y.fn.call(y.context,f,d,m,g),!0;case 6:return y.fn.call(y.context,f,d,m,g,j),!0}for(v=1,x=new Array(p-1);v<p;v++)x[v-1]=arguments[v];y.fn.apply(y.context,x)}else{var S=y.length,w;for(v=0;v<S;v++)switch(y[v].once&&this.removeListener(u,y[v].fn,void 0,!0),p){case 1:y[v].fn.call(y[v].context);break;case 2:y[v].fn.call(y[v].context,f);break;case 3:y[v].fn.call(y[v].context,f,d);break;case 4:y[v].fn.call(y[v].context,f,d,m);break;default:if(!x)for(w=1,x=new Array(p-1);w<p;w++)x[w-1]=arguments[w];y[v].fn.apply(y[v].context,x)}}return!0},l.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,m){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var j=this._events[g];if(j.fn)j.fn===f&&(!m||j.once)&&(!d||j.context===d)&&o(this,g);else{for(var h=0,y=[],p=j.length;h<p;h++)(j[h].fn!==f||m&&!j[h].once||d&&j[h].context!==d)&&y.push(j[h]);y.length?this._events[g]=y.length===1?y[0]:y:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(s5);var Wce=s5.exports;const Hce=St(Wce);var Mg=new Hce,Dg="recharts.syncMouseEvents";function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function qce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i5(n.key),n)}}function Kce(e,t,r){return t&&Gce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $g(e,t,r){return t=i5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i5(e){var t=Yce(e,"string");return qu(t)=="symbol"?t:t+""}function Yce(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xce=function(){function e(){qce(this,e),$g(this,"activeIndex",0),$g(this,"coordinateList",[]),$g(this,"layout","horizontal")}return Kce(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,m=r.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:m})}}}])}();function Jce(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&_e(n)&&_e(s))return!0}return!1}function Zce(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function o5(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=Rt(t,r,n,s),l=Rt(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Qce(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,m=Rt(l,c,u,d),g=Rt(l,c,f,d);n=m.x,s=m.y,i=g.x,o=g.y}else return o5(t);return[{x:n,y:s},{x:i,y:o}]}function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){eue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eue(e,t,r){return t=tue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tue(e){var t=rue(e,"string");return Gu(t)=="symbol"?t:t+""}function rue(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nue(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,m=e.chartName,g=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var j,h=z0;if(m==="ScatterChart")j=o,h=Dae;else if(m==="BarChart")j=Zce(d,o,c,f),h=Ub;else if(d==="radial"){var y=o5(o),p=y.cx,x=y.cy,v=y.radius,S=y.startAngle,w=y.endAngle;j={cx:p,cy:x,startAngle:S,endAngle:w,innerRadius:v,outerRadius:v},h=ik}else j={points:Qce(d,o,c)},h=z0;var b=Kd(Kd(Kd(Kd({stroke:"#ccc",pointerEvents:"none"},c),j),Ye(g,!1)),{},{payload:l,payloadIndex:u,className:st("recharts-tooltip-cursor",g.className)});return N.isValidElement(g)?N.cloneElement(g,b):N.createElement(h,b)}var aue=["item"],sue=["children","className","width","height","style","compact","title","desc"];function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mo.apply(this,arguments)}function __(e,t){return lue(e)||oue(e,t)||c5(e,t)||iue()}function iue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lue(e){if(Array.isArray(e))return e}function A_(e,t){if(e==null)return{};var r=cue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function uue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function due(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u5(n.key),n)}}function fue(e,t,r){return t&&due(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mue(e,t,r){return t=Xm(t),hue(e,l5()?Reflect.construct(t,r||[],Xm(e).constructor):t.apply(e,r))}function hue(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pue(e)}function pue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l5=function(){return!!e})()}function Xm(e){return Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xm(e)}function gue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vy(e,t)}function vy(e,t){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},vy(e,t)}function Pl(e){return vue(e)||yue(e)||c5(e)||xue()}function xue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c5(e,t){if(e){if(typeof e=="string")return by(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return by(e,t)}}function yue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vue(e){if(Array.isArray(e))return by(e)}function by(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){We(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function We(e,t,r){return t=u5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u5(e){var t=bue(e,"string");return Al(t)=="symbol"?t:t+""}function bue(e,t){if(Al(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jue={xAxis:["bottom","top"],yAxis:["left","right"]},wue={width:"100%",height:"100%"},d5={x:0,y:0};function Yd(e){return e}var Nue=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Sue=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return fe(fe(fe({},s),Rt(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return fe(fe(fe({},s),Rt(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return d5},yp=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Pl(l),Pl(u)):l},[]);return o.length>0?o:t&&t.length&&_e(s)&&_e(i)?t.slice(s,i+1):[]};function f5(e){return e==="number"?[0,"auto"]:void 0}var jy=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=yp(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var g=d===void 0?l:d;m=Yx(g,o.dataKey,s)}else m=d&&d[n]||l[n];return m?[].concat(Pl(c),[ek(u,m)]):c},[])},E_=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Nue(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=ete(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,m=jy(t,r,f,d),g=Sue(n,l,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:m,activeCoordinate:g}}return null},_ue=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=t.stackOffset,g=KT(f,i);return n.reduce(function(j,h){var y,p=h.type.defaultProps!==void 0?fe(fe({},h.type.defaultProps),h.props):h.props,x=p.type,v=p.dataKey,S=p.allowDataOverflow,w=p.allowDuplicatedCategory,b=p.scale,_=p.ticks,P=p.includeHidden,C=p[o];if(j[C])return j;var M=yp(t.data,{graphicalItems:s.filter(function(oe){var Z,pe=o in oe.props?oe.props[o]:(Z=oe.type.defaultProps)===null||Z===void 0?void 0:Z[o];return pe===C}),dataStartIndex:c,dataEndIndex:u}),A=M.length,E,T,B;Jce(p.domain,S,x)&&(E=I0(p.domain,null,S),g&&(x==="number"||b!=="auto")&&(B=Rc(M,v,"category")));var I=f5(x);if(!E||E.length===0){var D,O=(D=p.domain)!==null&&D!==void 0?D:I;if(v){if(E=Rc(M,v,x),x==="category"&&g){var $=Wz(E);w&&$?(T=E,E=Rm(0,A)):w||(E=rS(O,E,h).reduce(function(oe,Z){return oe.indexOf(Z)>=0?oe:[].concat(Pl(oe),[Z])},[]))}else if(x==="category")w?E=E.filter(function(oe){return oe!==""&&!ct(oe)}):E=rS(O,E,h).reduce(function(oe,Z){return oe.indexOf(Z)>=0||Z===""||ct(Z)?oe:[].concat(Pl(oe),[Z])},[]);else if(x==="number"){var R=ste(M,s.filter(function(oe){var Z,pe,Ee=o in oe.props?oe.props[o]:(Z=oe.type.defaultProps)===null||Z===void 0?void 0:Z[o],Y="hide"in oe.props?oe.props.hide:(pe=oe.type.defaultProps)===null||pe===void 0?void 0:pe.hide;return Ee===C&&(P||!Y)}),v,i,f);R&&(E=R)}g&&(x==="number"||b!=="auto")&&(B=Rc(M,v,"category"))}else g?E=Rm(0,A):l&&l[C]&&l[C].hasStack&&x==="number"?E=m==="expand"?[0,1]:QT(l[C].stackGroups,c,u):E=GT(M,s.filter(function(oe){var Z=o in oe.props?oe.props[o]:oe.type.defaultProps[o],pe="hide"in oe.props?oe.props.hide:oe.type.defaultProps.hide;return Z===C&&(P||!pe)}),x,f,!0);if(x==="number")E=yy(d,E,C,i,_),O&&(E=I0(O,E,S));else if(x==="category"&&O){var Q=O,ae=E.every(function(oe){return Q.indexOf(oe)>=0});ae&&(E=Q)}}return fe(fe({},j),{},We({},C,fe(fe({},p),{},{axisType:i,domain:E,categoricalDomain:B,duplicateDomain:T,originalDomain:(y=p.domain)!==null&&y!==void 0?y:I,isCategorical:g,layout:f})))},{})},Aue=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=yp(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),g=m.length,j=KT(f,i),h=-1;return n.reduce(function(y,p){var x=p.type.defaultProps!==void 0?fe(fe({},p.type.defaultProps),p.props):p.props,v=x[o],S=f5("number");if(!y[v]){h++;var w;return j?w=Rm(0,g):l&&l[v]&&l[v].hasStack?(w=QT(l[v].stackGroups,c,u),w=yy(d,w,v,i)):(w=I0(S,GT(m,n.filter(function(b){var _,P,C=o in b.props?b.props[o]:(_=b.type.defaultProps)===null||_===void 0?void 0:_[o],M="hide"in b.props?b.props.hide:(P=b.type.defaultProps)===null||P===void 0?void 0:P.hide;return C===v&&!M}),"number",f),s.defaultProps.allowDataOverflow),w=yy(d,w,v,i)),fe(fe({},y),{},We({},v,fe(fe({axisType:i},s.defaultProps),{},{hide:!0,orientation:wn(jue,"".concat(i,".").concat(h%2),null),domain:w,originalDomain:S,isCategorical:j,layout:f})))}return y},{})},Pue=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(s,"Id"),m=Bn(f,i),g={};return m&&m.length?g=_ue(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(g=Aue(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),g},Eue=function(t){var r=_s(t),n=Ha(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:gb(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:_m(r,n)}},C_=function(t){var r=t.children,n=t.defaultShowTooltip,s=yn(r,yl),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Cue=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ya(r&&r.type);return n&&n.indexOf("Bar")>=0})},O_=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Oue=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,m=n.margin||{},g=yn(d,yl),j=yn(d,Aa),h=Object.keys(c).reduce(function(w,b){var _=c[b],P=_.orientation;return!_.mirror&&!_.hide?fe(fe({},w),{},We({},P,w[P]+_.width)):w},{left:m.left||0,right:m.right||0}),y=Object.keys(o).reduce(function(w,b){var _=o[b],P=_.orientation;return!_.mirror&&!_.hide?fe(fe({},w),{},We({},P,wn(w,"".concat(P))+_.height)):w},{top:m.top||0,bottom:m.bottom||0}),p=fe(fe({},y),h),x=p.bottom;g&&(p.bottom+=g.props.height||yl.defaultProps.height),j&&r&&(p=nte(p,s,n,r));var v=u-p.left-p.right,S=f-p.top-p.bottom;return fe(fe({brushBottom:x},p),{},{width:Math.max(v,0),height:Math.max(S,0)})},Tue=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},m5=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,m=function(p,x){var v=x.graphicalItems,S=x.stackGroups,w=x.offset,b=x.updateId,_=x.dataStartIndex,P=x.dataEndIndex,C=p.barSize,M=p.layout,A=p.barGap,E=p.barCategoryGap,T=p.maxBarSize,B=O_(M),I=B.numericAxisName,D=B.cateAxisName,O=Cue(v),$=[];return v.forEach(function(R,Q){var ae=yp(p.data,{graphicalItems:[R],dataStartIndex:_,dataEndIndex:P}),oe=R.type.defaultProps!==void 0?fe(fe({},R.type.defaultProps),R.props):R.props,Z=oe.dataKey,pe=oe.maxBarSize,Ee=oe["".concat(I,"Id")],Y=oe["".concat(D,"Id")],J={},W=c.reduce(function(Ie,we){var Te=x["".concat(we.axisType,"Map")],rt=oe["".concat(we.axisType,"Id")];Te&&Te[rt]||we.axisType==="zAxis"||Yi();var xt=Te[rt];return fe(fe({},Ie),{},We(We({},we.axisType,xt),"".concat(we.axisType,"Ticks"),Ha(xt)))},J),X=W[D],k=W["".concat(D,"Ticks")],K=S&&S[Ee]&&S[Ee].hasStack&&hte(R,S[Ee].stackGroups),z=Ya(R.type).indexOf("Bar")>=0,le=_m(X,k),ge=[],ue=O&&tte({barSize:C,stackGroups:S,totalSize:Tue(W,D)});if(z){var U,xe,Pe=ct(pe)?T:pe,ve=(U=(xe=_m(X,k,!0))!==null&&xe!==void 0?xe:Pe)!==null&&U!==void 0?U:0;ge=rte({barGap:A,barCategoryGap:E,bandSize:ve!==le?ve:le,sizeList:ue[Y],maxBarSize:Pe}),ve!==le&&(ge=ge.map(function(Ie){return fe(fe({},Ie),{},{position:fe(fe({},Ie.position),{},{offset:Ie.position.offset-ve/2})})}))}var Ae=R&&R.type&&R.type.getComposedData;Ae&&$.push({props:fe(fe({},Ae(fe(fe({},W),{},{displayedData:ae,props:p,dataKey:Z,item:R,bandSize:le,barPosition:ge,offset:w,stackedData:K,layout:M,dataStartIndex:_,dataEndIndex:P}))),{},We(We(We({key:R.key||"item-".concat(Q)},I,W[I]),D,W[D]),"animationId",b)),childIndex:r7(R,p.children),item:R})}),$},g=function(p,x){var v=p.props,S=p.dataStartIndex,w=p.dataEndIndex,b=p.updateId;if(!X1({props:v}))return null;var _=v.children,P=v.layout,C=v.stackOffset,M=v.data,A=v.reverseStackOrder,E=O_(P),T=E.numericAxisName,B=E.cateAxisName,I=Bn(_,n),D=fte(M,I,"".concat(T,"Id"),"".concat(B,"Id"),C,A),O=c.reduce(function(oe,Z){var pe="".concat(Z.axisType,"Map");return fe(fe({},oe),{},We({},pe,Pue(v,fe(fe({},Z),{},{graphicalItems:I,stackGroups:Z.axisType===T&&D,dataStartIndex:S,dataEndIndex:w}))))},{}),$=Oue(fe(fe({},O),{},{props:v,graphicalItems:I}),x==null?void 0:x.legendBBox);Object.keys(O).forEach(function(oe){O[oe]=f(v,O[oe],$,oe.replace("Map",""),r)});var R=O["".concat(B,"Map")],Q=Eue(R),ae=m(v,fe(fe({},O),{},{dataStartIndex:S,dataEndIndex:w,updateId:b,graphicalItems:I,stackGroups:D,offset:$}));return fe(fe({formattedGraphicalItems:ae,graphicalItems:I,offset:$,stackGroups:D},Q),O)},j=function(y){function p(x){var v,S,w;return uue(this,p),w=mue(this,p,[x]),We(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),We(w,"accessibilityManager",new Xce),We(w,"handleLegendBBoxUpdate",function(b){if(b){var _=w.state,P=_.dataStartIndex,C=_.dataEndIndex,M=_.updateId;w.setState(fe({legendBBox:b},g({props:w.props,dataStartIndex:P,dataEndIndex:C,updateId:M},fe(fe({},w.state),{},{legendBBox:b}))))}}),We(w,"handleReceiveSyncEvent",function(b,_,P){if(w.props.syncId===b){if(P===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),We(w,"handleBrushChange",function(b){var _=b.startIndex,P=b.endIndex;if(_!==w.state.dataStartIndex||P!==w.state.dataEndIndex){var C=w.state.updateId;w.setState(function(){return fe({dataStartIndex:_,dataEndIndex:P},g({props:w.props,dataStartIndex:_,dataEndIndex:P,updateId:C},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:P})}}),We(w,"handleMouseEnter",function(b){var _=w.getMouseInfo(b);if(_){var P=fe(fe({},_),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var C=w.props.onMouseEnter;Je(C)&&C(P,b)}}),We(w,"triggeredAfterMouseMove",function(b){var _=w.getMouseInfo(b),P=_?fe(fe({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var C=w.props.onMouseMove;Je(C)&&C(P,b)}),We(w,"handleItemMouseEnter",function(b){w.setState(function(){return{isTooltipActive:!0,activeItem:b,activePayload:b.tooltipPayload,activeCoordinate:b.tooltipPosition||{x:b.cx,y:b.cy}}})}),We(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),We(w,"handleMouseMove",function(b){b.persist(),w.throttleTriggeredAfterMouseMove(b)}),We(w,"handleMouseLeave",function(b){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var P=w.props.onMouseLeave;Je(P)&&P(_,b)}),We(w,"handleOuterEvent",function(b){var _=t7(b),P=wn(w.props,"".concat(_));if(_&&Je(P)){var C,M;/.*touch.*/i.test(_)?M=w.getMouseInfo(b.changedTouches[0]):M=w.getMouseInfo(b),P((C=M)!==null&&C!==void 0?C:{},b)}}),We(w,"handleClick",function(b){var _=w.getMouseInfo(b);if(_){var P=fe(fe({},_),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var C=w.props.onClick;Je(C)&&C(P,b)}}),We(w,"handleMouseDown",function(b){var _=w.props.onMouseDown;if(Je(_)){var P=w.getMouseInfo(b);_(P,b)}}),We(w,"handleMouseUp",function(b){var _=w.props.onMouseUp;if(Je(_)){var P=w.getMouseInfo(b);_(P,b)}}),We(w,"handleTouchMove",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(b.changedTouches[0])}),We(w,"handleTouchStart",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&w.handleMouseDown(b.changedTouches[0])}),We(w,"handleTouchEnd",function(b){b.changedTouches!=null&&b.changedTouches.length>0&&w.handleMouseUp(b.changedTouches[0])}),We(w,"handleDoubleClick",function(b){var _=w.props.onDoubleClick;if(Je(_)){var P=w.getMouseInfo(b);_(P,b)}}),We(w,"handleContextMenu",function(b){var _=w.props.onContextMenu;if(Je(_)){var P=w.getMouseInfo(b);_(P,b)}}),We(w,"triggerSyncEvent",function(b){w.props.syncId!==void 0&&Mg.emit(Dg,w.props.syncId,b,w.eventEmitterSymbol)}),We(w,"applySyncEvent",function(b){var _=w.props,P=_.layout,C=_.syncMethod,M=w.state.updateId,A=b.dataStartIndex,E=b.dataEndIndex;if(b.dataStartIndex!==void 0||b.dataEndIndex!==void 0)w.setState(fe({dataStartIndex:A,dataEndIndex:E},g({props:w.props,dataStartIndex:A,dataEndIndex:E,updateId:M},w.state)));else if(b.activeTooltipIndex!==void 0){var T=b.chartX,B=b.chartY,I=b.activeTooltipIndex,D=w.state,O=D.offset,$=D.tooltipTicks;if(!O)return;if(typeof C=="function")I=C($,b);else if(C==="value"){I=-1;for(var R=0;R<$.length;R++)if($[R].value===b.activeLabel){I=R;break}}var Q=fe(fe({},O),{},{x:O.left,y:O.top}),ae=Math.min(T,Q.x+Q.width),oe=Math.min(B,Q.y+Q.height),Z=$[I]&&$[I].value,pe=jy(w.state,w.props.data,I),Ee=$[I]?{x:P==="horizontal"?$[I].coordinate:ae,y:P==="horizontal"?oe:$[I].coordinate}:d5;w.setState(fe(fe({},b),{},{activeLabel:Z,activeCoordinate:Ee,activePayload:pe,activeTooltipIndex:I}))}else w.setState(b)}),We(w,"renderCursor",function(b){var _,P=w.state,C=P.isTooltipActive,M=P.activeCoordinate,A=P.activePayload,E=P.offset,T=P.activeTooltipIndex,B=P.tooltipAxisBandSize,I=w.getTooltipEventType(),D=(_=b.props.active)!==null&&_!==void 0?_:C,O=w.props.layout,$=b.key||"_recharts-cursor";return H.createElement(nue,{key:$,activeCoordinate:M,activePayload:A,activeTooltipIndex:T,chartName:r,element:b,isActive:D,layout:O,offset:E,tooltipAxisBandSize:B,tooltipEventType:I})}),We(w,"renderPolarAxis",function(b,_,P){var C=wn(b,"type.axisType"),M=wn(w.state,"".concat(C,"Map")),A=b.type.defaultProps,E=A!==void 0?fe(fe({},A),b.props):b.props,T=M&&M[E["".concat(C,"Id")]];return N.cloneElement(b,fe(fe({},T),{},{className:st(C,T.className),key:b.key||"".concat(_,"-").concat(P),ticks:Ha(T,!0)}))}),We(w,"renderPolarGrid",function(b){var _=b.props,P=_.radialLines,C=_.polarAngles,M=_.polarRadius,A=w.state,E=A.radiusAxisMap,T=A.angleAxisMap,B=_s(E),I=_s(T),D=I.cx,O=I.cy,$=I.innerRadius,R=I.outerRadius;return N.cloneElement(b,{polarAngles:Array.isArray(C)?C:Ha(I,!0).map(function(Q){return Q.coordinate}),polarRadius:Array.isArray(M)?M:Ha(B,!0).map(function(Q){return Q.coordinate}),cx:D,cy:O,innerRadius:$,outerRadius:R,key:b.key||"polar-grid",radialLines:P})}),We(w,"renderLegend",function(){var b=w.state.formattedGraphicalItems,_=w.props,P=_.children,C=_.width,M=_.height,A=w.props.margin||{},E=C-(A.left||0)-(A.right||0),T=HT({children:P,formattedGraphicalItems:b,legendWidth:E,legendContent:u});if(!T)return null;var B=T.item,I=A_(T,aue);return N.cloneElement(B,fe(fe({},I),{},{chartWidth:C,chartHeight:M,margin:A,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),We(w,"renderTooltip",function(){var b,_=w.props,P=_.children,C=_.accessibilityLayer,M=yn(P,Gr);if(!M)return null;var A=w.state,E=A.isTooltipActive,T=A.activeCoordinate,B=A.activePayload,I=A.activeLabel,D=A.offset,O=(b=M.props.active)!==null&&b!==void 0?b:E;return N.cloneElement(M,{viewBox:fe(fe({},D),{},{x:D.left,y:D.top}),active:O,label:I,payload:O?B:[],coordinate:T,accessibilityLayer:C})}),We(w,"renderBrush",function(b){var _=w.props,P=_.margin,C=_.data,M=w.state,A=M.offset,E=M.dataStartIndex,T=M.dataEndIndex,B=M.updateId;return N.cloneElement(b,{key:b.key||"_recharts-brush",onChange:Wd(w.handleBrushChange,b.props.onChange),data:C,x:_e(b.props.x)?b.props.x:A.left,y:_e(b.props.y)?b.props.y:A.top+A.height+A.brushBottom-(P.bottom||0),width:_e(b.props.width)?b.props.width:A.width,startIndex:E,endIndex:T,updateId:"brush-".concat(B)})}),We(w,"renderReferenceElement",function(b,_,P){if(!b)return null;var C=w,M=C.clipPathId,A=w.state,E=A.xAxisMap,T=A.yAxisMap,B=A.offset,I=b.type.defaultProps||{},D=b.props,O=D.xAxisId,$=O===void 0?I.xAxisId:O,R=D.yAxisId,Q=R===void 0?I.yAxisId:R;return N.cloneElement(b,{key:b.key||"".concat(_,"-").concat(P),xAxis:E[$],yAxis:T[Q],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:M})}),We(w,"renderActivePoints",function(b){var _=b.item,P=b.activePoint,C=b.basePoint,M=b.childIndex,A=b.isRange,E=[],T=_.props.key,B=_.item.type.defaultProps!==void 0?fe(fe({},_.item.type.defaultProps),_.item.props):_.item.props,I=B.activeDot,D=B.dataKey,O=fe(fe({index:M,dataKey:D,cx:P.x,cy:P.y,r:4,fill:Vb(_.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ye(I,!1)),Zf(I));return E.push(p.renderActiveDot(I,O,"".concat(T,"-activePoint-").concat(M))),C?E.push(p.renderActiveDot(I,fe(fe({},O),{},{cx:C.x,cy:C.y}),"".concat(T,"-basePoint-").concat(M))):A&&E.push(null),E}),We(w,"renderGraphicChild",function(b,_,P){var C=w.filterFormatItem(b,_,P);if(!C)return null;var M=w.getTooltipEventType(),A=w.state,E=A.isTooltipActive,T=A.tooltipAxis,B=A.activeTooltipIndex,I=A.activeLabel,D=w.props.children,O=yn(D,Gr),$=C.props,R=$.points,Q=$.isRange,ae=$.baseLine,oe=C.item.type.defaultProps!==void 0?fe(fe({},C.item.type.defaultProps),C.item.props):C.item.props,Z=oe.activeDot,pe=oe.hide,Ee=oe.activeBar,Y=oe.activeShape,J=!!(!pe&&E&&O&&(Z||Ee||Y)),W={};M!=="axis"&&O&&O.props.trigger==="click"?W={onClick:Wd(w.handleItemMouseEnter,b.props.onClick)}:M!=="axis"&&(W={onMouseLeave:Wd(w.handleItemMouseLeave,b.props.onMouseLeave),onMouseEnter:Wd(w.handleItemMouseEnter,b.props.onMouseEnter)});var X=N.cloneElement(b,fe(fe({},C.props),W));function k(we){return typeof T.dataKey=="function"?T.dataKey(we.payload):null}if(J)if(B>=0){var K,z;if(T.dataKey&&!T.allowDuplicatedCategory){var le=typeof T.dataKey=="function"?k:"payload.".concat(T.dataKey.toString());K=Yx(R,le,I),z=Q&&ae&&Yx(ae,le,I)}else K=R==null?void 0:R[B],z=Q&&ae&&ae[B];if(Y||Ee){var ge=b.props.activeIndex!==void 0?b.props.activeIndex:B;return[N.cloneElement(b,fe(fe(fe({},C.props),W),{},{activeIndex:ge})),null,null]}if(!ct(K))return[X].concat(Pl(w.renderActivePoints({item:C,activePoint:K,basePoint:z,childIndex:B,isRange:Q})))}else{var ue,U=(ue=w.getItemByXY(w.state.activeCoordinate))!==null&&ue!==void 0?ue:{graphicalItem:X},xe=U.graphicalItem,Pe=xe.item,ve=Pe===void 0?b:Pe,Ae=xe.childIndex,Ie=fe(fe(fe({},C.props),W),{},{activeIndex:Ae});return[N.cloneElement(ve,Ie),null,null]}return Q?[X,null,null]:[X,null]}),We(w,"renderCustomized",function(b,_,P){return N.cloneElement(b,fe(fe({key:"recharts-customized-".concat(P)},w.props),w.state))}),We(w,"renderMap",{CartesianGrid:{handler:Yd,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Yd},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Yd},YAxis:{handler:Yd},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((v=x.id)!==null&&v!==void 0?v:id("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=WO(w.triggeredAfterMouseMove,(S=x.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return gue(p,y),fue(p,[{key:"componentDidMount",value:function(){var v,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,S=v.children,w=v.data,b=v.height,_=v.layout,P=yn(S,Gr);if(P){var C=P.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,A=jy(this.state,w,C,M),E=this.state.tooltipTicks[C].coordinate,T=(this.state.offset.top+b)/2,B=_==="horizontal",I=B?{x:E,y:T}:{y:E,x:T},D=this.state.formattedGraphicalItems.find(function($){var R=$.item;return R.type.name==="Scatter"});D&&(I=fe(fe({},I),D.props.points[C].tooltipPosition),A=D.props.points[C].tooltipPayload);var O={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:M,activePayload:A,activeCoordinate:I};this.setState(O),this.renderCursor(P),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var w,b;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(b=this.props.margin.top)!==null&&b!==void 0?b:0}})}return null}},{key:"componentDidUpdate",value:function(v){Jx([yn(v.children,Gr)],[yn(this.props.children,Gr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=yn(this.props.children,Gr);if(v&&typeof v.props.shared=="boolean"){var S=v.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),b=EX(w),_={chartX:Math.round(v.pageX-b.left),chartY:Math.round(v.pageY-b.top)},P=w.width/S.offsetWidth||1,C=this.inRange(_.chartX,_.chartY,P);if(!C)return null;var M=this.state,A=M.xAxisMap,E=M.yAxisMap,T=this.getTooltipEventType(),B=E_(this.state,this.props.data,this.props.layout,C);if(T!=="axis"&&A&&E){var I=_s(A).scale,D=_s(E).scale,O=I&&I.invert?I.invert(_.chartX):null,$=D&&D.invert?D.invert(_.chartY):null;return fe(fe({},_),{},{xValue:O,yValue:$},B)}return B?fe(fe({},_),B):null}},{key:"inRange",value:function(v,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,b=this.props.layout,_=v/w,P=S/w;if(b==="horizontal"||b==="vertical"){var C=this.state.offset,M=_>=C.left&&_<=C.left+C.width&&P>=C.top&&P<=C.top+C.height;return M?{x:_,y:P}:null}var A=this.state,E=A.angleAxisMap,T=A.radiusAxisMap;if(E&&T){var B=_s(E);return sS({x:_,y:P},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,S=this.getTooltipEventType(),w=yn(v,Gr),b={};w&&S==="axis"&&(w.props.trigger==="click"?b={onClick:this.handleClick}:b={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Zf(this.props,this.handleOuterEvent);return fe(fe({},_),b)}},{key:"addListener",value:function(){Mg.on(Dg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mg.removeListener(Dg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,S,w){for(var b=this.state.formattedGraphicalItems,_=0,P=b.length;_<P;_++){var C=b[_];if(C.item===v||C.props.key===v.key||S===Ya(C.item.type)&&w===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,S=this.state.offset,w=S.left,b=S.top,_=S.height,P=S.width;return H.createElement("defs",null,H.createElement("clipPath",{id:v},H.createElement("rect",{x:w,y:b,height:_,width:P})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(S,w){var b=__(w,2),_=b[0],P=b[1];return fe(fe({},S),{},We({},_,P.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(S,w){var b=__(w,2),_=b[0],P=b[1];return fe(fe({},S),{},We({},_,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(v){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[v])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(v){var S=this.state,w=S.formattedGraphicalItems,b=S.activeItem;if(w&&w.length)for(var _=0,P=w.length;_<P;_++){var C=w[_],M=C.props,A=C.item,E=A.type.defaultProps!==void 0?fe(fe({},A.type.defaultProps),A.props):A.props,T=Ya(A.type);if(T==="Bar"){var B=(M.data||[]).find(function($){return hae(v,$)});if(B)return{graphicalItem:C,payload:B}}else if(T==="RadialBar"){var I=(M.data||[]).find(function($){return sS(v,$)});if(I)return{graphicalItem:C,payload:I}}else if(dp(C,b)||fp(C,b)||zu(C,b)){var D=rie({graphicalItem:C,activeTooltipItem:b,itemData:E.data}),O=E.activeIndex===void 0?D:E.activeIndex;return{graphicalItem:fe(fe({},C),{},{childIndex:O}),payload:zu(C,b)?E.data[D]:C.props.data[D]}}}return null}},{key:"render",value:function(){var v=this;if(!X1(this))return null;var S=this.props,w=S.children,b=S.className,_=S.width,P=S.height,C=S.style,M=S.compact,A=S.title,E=S.desc,T=A_(S,sue),B=Ye(T,!1);if(M)return H.createElement(u_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement(Qx,Mo({},B,{width:_,height:P,title:A,desc:E}),this.renderClipPath(),Z1(w,this.renderMap)));if(this.props.accessibilityLayer){var I,D;B.tabIndex=(I=this.props.tabIndex)!==null&&I!==void 0?I:0,B.role=(D=this.props.role)!==null&&D!==void 0?D:"application",B.onKeyDown=function($){v.accessibilityManager.keyboardEvent($)},B.onFocus=function(){v.accessibilityManager.focus()}}var O=this.parseEventsOfWrapper();return H.createElement(u_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},H.createElement("div",Mo({className:st("recharts-wrapper",b),style:fe({position:"relative",cursor:"default",width:_,height:P},C)},O,{ref:function(R){v.container=R}}),H.createElement(Qx,Mo({},B,{width:_,height:P,title:A,desc:E,style:wue}),this.renderClipPath(),Z1(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);We(j,"displayName",r),We(j,"defaultProps",fe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),We(j,"getDerivedStateFromProps",function(y,p){var x=y.dataKey,v=y.data,S=y.children,w=y.width,b=y.height,_=y.layout,P=y.stackOffset,C=y.margin,M=p.dataStartIndex,A=p.dataEndIndex;if(p.updateId===void 0){var E=C_(y);return fe(fe(fe({},E),{},{updateId:0},g(fe(fe({props:y},E),{},{updateId:0}),p)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:b,prevLayout:_,prevStackOffset:P,prevMargin:C,prevChildren:S})}if(x!==p.prevDataKey||v!==p.prevData||w!==p.prevWidth||b!==p.prevHeight||_!==p.prevLayout||P!==p.prevStackOffset||!Uo(C,p.prevMargin)){var T=C_(y),B={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},I=fe(fe({},E_(p,v,_)),{},{updateId:p.updateId+1}),D=fe(fe(fe({},T),B),I);return fe(fe(fe({},D),g(fe({props:y},D),p)),{},{prevDataKey:x,prevData:v,prevWidth:w,prevHeight:b,prevLayout:_,prevStackOffset:P,prevMargin:C,prevChildren:S})}if(!Jx(S,p.prevChildren)){var O,$,R,Q,ae=yn(S,yl),oe=ae&&(O=($=ae.props)===null||$===void 0?void 0:$.startIndex)!==null&&O!==void 0?O:M,Z=ae&&(R=(Q=ae.props)===null||Q===void 0?void 0:Q.endIndex)!==null&&R!==void 0?R:A,pe=oe!==M||Z!==A,Ee=!ct(v),Y=Ee&&!pe?p.updateId:p.updateId+1;return fe(fe({updateId:Y},g(fe(fe({props:y},p),{},{updateId:Y,dataStartIndex:oe,dataEndIndex:Z}),p)),{},{prevChildren:S,dataStartIndex:oe,dataEndIndex:Z})}return null}),We(j,"renderActiveDot",function(y,p,x){var v;return N.isValidElement(y)?v=N.cloneElement(y,p):Je(y)?v=y(p):v=H.createElement(Wb,p),H.createElement(wt,{className:"recharts-active-dot",key:x},v)});var h=N.forwardRef(function(p,x){return H.createElement(j,Mo({},p,{ref:x}))});return h.displayName=j.displayName,h},Vc=m5({chartName:"BarChart",GraphicalChild:un,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Ws},{axisType:"yAxis",AxisComp:Hs}],formatAxisMap:Doe}),kue=m5({chartName:"PieChart",GraphicalChild:fs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:up},{axisType:"radiusAxis",AxisComp:lp}],formatAxisMap:Ste,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Mue(){const e=it(),[t,r]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,j]=N.useState(!0),[h,y]=N.useState(null),[p,x]=N.useState("semaine"),[v,S]=N.useState(Se(new Date,"yyyy-MM-dd")),w=async A=>{if(!A){console.error("Aucun ID d'lve fourni"),y("Aucun ID d'lve fourni dans l'URL"),j(!1);return}try{j(!0),y(null);const E=await Xt.getById(A),T=(E==null?void 0:E.data)||E;if(!T||!T.id){console.error("lve non trouv ou donnes invalides:",E),y("lve non trouv ou donnes invalides"),j(!1);return}if(r(T),T){try{const B=await Kr.getByEleve(A),I=(B==null?void 0:B.data)||B||[],D=Array.isArray(I)?I.find(O=>O.statut==="Active"):I;if(D&&D.bus_id){const O=await wr.getById(D.bus_id),$=(O==null?void 0:O.data)||O;if(s($),$&&$.trajet_id){const R=await ra.getById($.trajet_id),Q=(R==null?void 0:R.data)||R;o(Q)}if($&&$.chauffeur_id)try{const R=await Vr.getById($.chauffeur_id),Q=(R==null?void 0:R.data)||R;c(Q)}catch(R){console.warn("Erreur lors du chargement du chauffeur:",R)}}}catch(B){console.warn("Erreur lors du chargement des inscriptions:",B)}try{const B=new Date().toISOString().split("T")[0],I=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],D=await za.getByEleve(A,I,B),$=((D==null?void 0:D.data)||D||[]).sort((R,Q)=>new Date(Q.date||0)-new Date(R.date||0));m($),f($.slice(0,7))}catch(B){console.warn("Prsences non disponibles:",B),f([]),m([])}}}catch(E){console.error("Erreur lors du chargement:",E),y("Erreur lors du chargement des donnes de l'lve: "+(E.message||"Erreur inconnue"))}finally{j(!1)}};if(N.useEffect(()=>{if(!localStorage.getItem("responsable_session")){e(Re("ResponsableLogin"));return}const E=new URLSearchParams(window.location.search),T=E.get("eleveId")||E.get("eleveld");T?w(T):(y("Aucun ID d'lve fourni dans l'URL"),j(!1))},[e]),g)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})})});if(!g&&!t&&!h)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-500 mb-2",children:"lve non trouv ou ID invalide."}),a.jsx(ne,{onClick:()=>e(Re("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})});if(!g&&h&&!t)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 mb-2",children:h}),a.jsx(ne,{onClick:()=>e(Re("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})});const b=N.useMemo(()=>{if(!d||d.length===0)return[];const A=new Date;let E,T;switch(p){case"jour":const B=new Date(v);return E=Jf(B),T=qv(B),d.filter(I=>{const D=new Date(I.date);return D>=E&&D<=T});case"semaine":return E=Xs(A,6),T=A,d.filter(I=>{const D=new Date(I.date);return D>=E&&D<=T}).slice(0,7);case"mois":return E=Xs(A,29),T=A,d.filter(I=>{const D=new Date(I.date);return D>=E&&D<=T});default:return d.slice(0,7)}},[d,p,v]),_=N.useMemo(()=>{if(!b||b.length===0)return[];const A={};return b.forEach(E=>{const T=Se(new Date(E.date),"dd/MM",{locale:Jt});A[T]||(A[T]={date:T,absents:0,presents:0}),E.present_matin?A[T].presents++:A[T].absents++,E.present_soir?A[T].presents++:A[T].absents++}),Object.values(A).sort((E,T)=>{try{const[B,I]=E.date.split("/"),D=new Date(new Date().getFullYear(),parseInt(I)-1,parseInt(B)),[O,$]=T.date.split("/"),R=new Date(new Date().getFullYear(),parseInt($)-1,parseInt(O));return D-R}catch(B){return console.error("Erreur lors du tri des dates:",B),0}})},[b]);N.useEffect(()=>{t&&t.id&&f(b)},[p,v,b,t]);const C=(A=>{const E=Se(new Date(A),"yyyy-MM-dd"),T=d.find(B=>Se(new Date(B.date),"yyyy-MM-dd")===E);return T?{absent:!T.present_matin||!T.present_soir,matin:!T.present_matin,soir:!T.present_soir}:{absent:!1,matin:!1,soir:!1}})(v),M=A=>({Actif:"bg-green-100 text-green-700",Inactif:"bg-amber-100 text-amber-700",Suspendu:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700";return t?a.jsx(nc,{title:`Dtails - ${(t==null?void 0:t.prenom)||""} ${(t==null?void 0:t.nom)||""}`,children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("button",{onClick:()=>e(Re("ResponsableDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-purple-600 mb-6 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),h&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:h}),a.jsx("button",{onClick:()=>y(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:a.jsx("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 flex items-center justify-center",children:a.jsx(pr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1 text-white",children:[a.jsxs("h1",{className:"text-2xl font-bold",children:[(t==null?void 0:t.prenom)||""," ",(t==null?void 0:t.nom)||""]}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("p",{className:"text-lg opacity-90",children:(t==null?void 0:t.classe)||"N/A"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${M((t==null?void 0:t.statut)||"Inactif")}`,children:(t==null?void 0:t.statut)||"Inactif"})]})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-purple-500"}),"Informations personnelles"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Classe"}),a.jsx("span",{className:"font-medium text-gray-800",children:(t==null?void 0:t.classe)||"N/A"})]}),(t==null?void 0:t.date_naissance)&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Date de naissance"}),a.jsx("span",{className:"font-medium text-gray-800",children:Se(new Date(t.date_naissance),"dd/MM/yyyy",{locale:Jt})})]}),(t==null?void 0:t.adresse)&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Adresse"}),a.jsx("span",{className:"font-medium text-gray-800 text-right max-w-[200px]",children:t.adresse})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-purple-500"}),"Informations de transport"]}),n&&(t==null?void 0:t.statut)==="Actif"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4 border border-purple-100",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Bus assign"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.numero?n.numero.toString().replace(/^#\s*/,""):"N/A"}),n.immatriculation&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.immatriculation})]}),n.marque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Marque/Modle"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.marque," ",n.modele||""]})]}),n.capacite&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.capacite," places"]})]}),l&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Chauffeur"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Nom"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[l.prenom," ",l.nom]})]}),l.telephone&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone"}),a.jsx("span",{className:"font-medium text-gray-800",children:l.telephone})]})]})]}),i&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex justify-between py-2 mb-3",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium text-gray-800",children:i.nom||"N/A"})]}),i.heure_depart_matin_a&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Horaires:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_matin_a," - ",i.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_soir_a," - ",i.heure_arrivee_soir_a]})]})]})]})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-medium",children:"Aucun bus affect"}),a.jsx("p",{className:"text-sm mt-1",children:"L'affectation sera faite aprs validation"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-purple-500"}),"Historique des absences"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs($e,{value:p,onValueChange:x,children:[a.jsxs(Me,{className:"w-40 rounded-xl",children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),a.jsx(De,{})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"jour",children:"Jour"}),a.jsx(q,{value:"semaine",children:"Semaine"}),a.jsx(q,{value:"mois",children:"Mois"})]})]}),p==="jour"&&a.jsx(me,{type:"date",value:v,onChange:A=>S(A.target.value),className:"w-40 rounded-xl"})]})]}),p==="jour"&&a.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:["tat pour le ",Se(new Date(v),"EEEE d MMMM yyyy",{locale:Jt})]}),C.absent?a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:"text-red-600 font-semibold",children:"Absent"}),C.matin&&a.jsx("span",{className:"text-sm text-red-600",children:"Matin"}),C.soir&&a.jsx("span",{className:"text-sm text-red-600",children:"Soir"})]}):a.jsx("span",{className:"text-green-600 font-semibold",children:"Prsent (matin et soir)"})]}),a.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${C.absent?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:C.absent?"Absent":"Prsent"})]})}),_.length>0?a.jsx("div",{className:"mb-6",children:a.jsx(Eo,{width:"100%",height:300,children:a.jsxs(Vc,{data:_,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Ws,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),a.jsx(Hs,{}),a.jsx(Gr,{}),a.jsx(Aa,{}),a.jsx(un,{dataKey:"absents",fill:"#EF4444",name:"Absences"}),a.jsx(un,{dataKey:"presents",fill:"#10B981",name:"Prsences"})]})})}):a.jsxs("div",{className:"text-center py-8 text-gray-400 mb-6",children:[a.jsx(el,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune donne de prsence disponible pour cette priode"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:["Dtail des prsences ",p==="jour"?"du jour":p==="semaine"?"de la semaine":"du mois"]}),u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(ia,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun historique de prsence"})]}):a.jsx("div",{className:"space-y-2",children:u.map((A,E)=>{const T=new Date(A.date),B=Se(T,"yyyy-MM-dd")===Se(new Date,"yyyy-MM-dd"),I=p==="jour"&&Se(T,"yyyy-MM-dd")===v;return a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl transition-colors ${I?"bg-purple-100 border-2 border-purple-300":"bg-gray-50 hover:bg-gray-100"}`,children:[a.jsxs("span",{className:"font-medium text-gray-700",children:[Se(T,"EEEE d MMMM",{locale:Jt}),B&&a.jsx("span",{className:"ml-2 text-xs text-purple-600",children:"(Aujourd'hui)"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Matin:"}),a.jsx("span",{className:`text-sm font-medium ${A.present_matin?"text-green-600":"text-red-600"}`,children:A.present_matin?"Prsent":"Absent"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Soir:"}),a.jsx("span",{className:`text-sm font-medium ${A.present_soir?"text-green-600":"text-red-600"}`,children:A.present_soir?"Prsent":"Absent"})]})]})]},A.id||E)})})]})]})]})})}):a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-500",children:"lve non trouv ou ID invalide."}),a.jsx(ne,{onClick:()=>e(Re("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})})}function Due(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=async l=>{r(!0),s("");try{const c=await ts.login(l.email,l.password,"tuteur");c.success?(c.token&&localStorage.setItem("token",c.token),ts.saveUser(c.user),localStorage.setItem("tuteur_session",JSON.stringify(c.user)),e(Re("TuteurDashboard"))):s(c.message||"Identifiants incorrects")}catch(c){console.error("Erreur de connexion:",c),s("Erreur de connexion. Veuillez vrifier vos identifiants.")}r(!1)},o=()=>{e(Re("TuteurRegister"))};return a.jsx(Nh,{title:"Espace Tuteur",icon:Ht,onLogin:i,onRegister:o,showRegister:!0,loading:t,error:n})}function $ue({tuteur:e,notifications:t=[],newCounts:r={inscriptions:0,accidents:0,paiements:0,notifications:0},onLogout:n}){var x,v;const s=it(),i=Pn(),[o,l]=N.useState(!1),[c,u]=N.useState(!1);N.useEffect(()=>{const S=()=>{window.innerWidth>=1024&&u(!1)};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const f=[{title:"Dashboard",icon:wv,link:"TuteurDashboard",path:"/TuteurDashboard",badgeKeys:["inscriptions","accidents","paiements"]},{title:"Inscrire un lve",icon:hh,link:"TuteurInscription",path:"/TuteurInscription",badgeKey:null},{title:"Mes Demandes",icon:wa,link:"TuteurDemandes",path:"/TuteurDemandes",badgeKey:"inscriptions"},{title:"Notifications",icon:Vn,link:"TuteurNotifications",path:"/TuteurNotifications",badgeKey:"notifications"},{title:"Profil",icon:pt,link:"TuteurProfile",path:"/TuteurProfile",badgeKey:null}],d=i.pathname==="/TuteurDashboard"||i.pathname.startsWith("/TuteurDashboard"),g=new URLSearchParams(i.search).get("tab")||"eleves",j=[{title:"Mes Enfants",icon:pr,tab:"eleves",badgeKey:null},{title:"Demandes refuses",icon:Lr,tab:"historique",badgeKey:null},{title:"Paiements",icon:Cr,tab:"paiements",badgeKey:"paiements"}],h=S=>{S.path?s(S.path):s(Re(S.link)),u(!1)},y=S=>{s(`/TuteurDashboard?tab=${S}`),u(!1)},p=S=>i.pathname===S||i.pathname.startsWith(S+"/");return t.filter(S=>!S.lue).length,a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>u(!c),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-lime-500 text-white rounded-xl shadow-lg hover:bg-lime-600 transition-colors",children:c?a.jsx(Ke,{className:"w-6 h-6"}):a.jsx(tl,{className:"w-6 h-6"})}),a.jsx(Or,{children:c&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(re.aside,{initial:!1,animate:{width:o?"80px":"280px",x:c?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-lime-50 to-white
          border-r-2 border-lime-200 shadow-2xl z-40
          flex flex-col
          ${o?"items-center":""}
        `,children:[a.jsx("div",{className:"p-4 border-b border-lime-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!o&&a.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-lime-500 to-lime-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(pr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-gray-800 text-sm",children:"Espace Tuteur"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Transport Scolaire"})]})]}),o&&a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-lime-500 to-lime-600 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsx(pr,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:()=>l(!o),className:"hidden lg:block p-2 hover:bg-lime-100 rounded-lg transition-colors text-gray-600 hover:text-lime-600",children:o?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ke,{className:"w-5 h-5"})})]})}),!o&&e&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-lime-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-lime-500 rounded-full flex items-center justify-center text-white font-bold",children:((x=e.prenom)==null?void 0:x[0])||((v=e.nom)==null?void 0:v[0])||"T"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-semibold text-gray-800 text-sm truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsxs("div",{className:"space-y-1",children:[d&&!o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-3 py-2 mb-2",children:a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Onglets"})}),j.map((S,w)=>{const b=g===S.tab,_=S.icon,P=S.badgeKey&&r[S.badgeKey]||0,C=P>0;return a.jsxs(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.05},onClick:()=>y(S.tab),className:`
                        w-full flex items-center gap-3 px-4 py-3 rounded-xl
                        transition-all duration-200
                        ${b?"bg-gradient-to-r from-lime-500 to-lime-600 text-white shadow-lg":"text-gray-700 hover:bg-lime-100 hover:text-lime-700"}
                      `,children:[a.jsxs("div",{className:"relative",children:[a.jsx(_,{className:`w-5 h-5 ${b?"text-white":"text-gray-600"}`}),C&&!b&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold w-5 h-5",children:P>99?"99+":P})]}),a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:S.title})]},`tab-${S.tab}`)}),a.jsx("div",{className:"px-3 py-2 mt-4 mb-2",children:a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Navigation"})})]}),f.map((S,w)=>{const b=p(S.path),_=S.icon;let P=0;S.badgeKeys&&Array.isArray(S.badgeKeys)?P=S.badgeKeys.reduce((M,A)=>M+(r[A]||0),0):S.badgeKey&&r[S.badgeKey]!==void 0&&(P=r[S.badgeKey]||0);const C=P>0;return a.jsxs(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.05},onClick:()=>h(S),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${b?"bg-gradient-to-r from-lime-500 to-lime-600 text-white shadow-lg":"text-gray-700 hover:bg-lime-100 hover:text-lime-700"}
                    ${o?"justify-center":""}
                  `,title:o?S.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_,{className:`w-5 h-5 ${b?"text-white":"text-gray-600"}`}),C&&a.jsx("span",{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold ${P>99?"px-1.5 py-0.5":P>9?"min-w-[20px] h-5 px-1":"w-5 h-5"}`,children:P>99?"99+":P})]}),!o&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:S.title})]},S.link)})]})}),a.jsx("div",{className:"p-4 border-t border-lime-200 space-y-2",children:a.jsxs(re.button,{onClick:n,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${o?"justify-center":""}
            `,title:o?"Dconnexion":"",children:[a.jsx(ki,{className:"w-5 h-5"}),!o&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${o?"ml-[80px]":"ml-[280px]"}
        `})]})}function jc({children:e,title:t="Espace Tuteur"}){const r=it(),n=Pn(),[s,i]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState({inscriptions:0,accidents:0,paiements:0,notifications:0}),[f,d]=N.useState(!0);N.useEffect(()=>{const h=localStorage.getItem("tuteur_session");if(!h){r(Re("TuteurLogin"));return}try{const y=JSON.parse(h);i(y),Promise.all([m(y.id).catch(p=>{console.warn("Erreur chargement notifications dans Layout:",p)}),g(y).catch(p=>{console.warn("Erreur chargement compteurs dans Layout:",p)})]).finally(()=>{d(!1)})}catch(y){console.error("Erreur parsing session dans TuteurLayout:",y),d(!1)}},[r]),N.useEffect(()=>{s&&n.pathname==="/TuteurNotifications"&&m(s.id)},[n.pathname,s]),N.useEffect(()=>{if(!s)return;const h=async()=>{await Promise.all([m(s.id),g(s)])};h();const y=setInterval(h,3e4);return()=>clearInterval(y)},[s]);const m=async h=>{try{const y=await ft.getByUser(h,"tuteur"),p=(y==null?void 0:y.data)||y||[];l(p.sort((v,S)=>new Date(S.date||S.date_creation||0)-new Date(v.date||v.date_creation||0)));const x=p.filter(v=>!v.lue).length;u(v=>({...v,notifications:x}))}catch(y){console.warn("Erreur lors du chargement des notifications:",y),l([])}},g=async h=>{try{const y=h.type_id||h.id;try{const p=await cr.getByTuteur(y),v=((p==null?void 0:p.data)||p||[]).filter(S=>S.type_demande==="inscription"&&(S.statut==="En attente"||S.statut==="En cours de traitement")).length;u(S=>({...S,inscriptions:v}))}catch(p){console.warn("Erreur chargement demandes:",p)}try{const p=await ri.getEleves(y),x=(p==null?void 0:p.data)||p||[],v=Array.isArray(x)?x.map(S=>S.id||S.eleve_id).filter(Boolean):[];if(v.length>0){const S=await ln.getAll(),b=((S==null?void 0:S.data)||S||[]).filter(_=>{try{const P=_.eleves_concernes?typeof _.eleves_concernes=="string"?JSON.parse(_.eleves_concernes||"[]"):_.eleves_concernes:[];if(!(Array.isArray(P)&&P.some(B=>v.includes(parseInt(B))||v.includes(B))))return!1;const M=new Date(_.date||_.date_creation||0),E=(new Date-M)/(1e3*60*60*24)<=7;return _.statut!=="Rsolu"&&_.statut!=="rsolu"&&_.statut!=="Resolu"||E}catch(P){return console.warn("Erreur parsing eleves_concernes:",P),!1}}).length;u(_=>({..._,accidents:b}))}else u(S=>({...S,accidents:0}))}catch(p){console.warn("Erreur chargement accidents:",p),u(x=>({...x,accidents:0}))}try{const p=await Fo.getByTuteur(y),v=((p==null?void 0:p.data)||p||[]).filter(S=>S.type_paiement==="mensuel"&&(S.statut==="Impay"||S.statut==="En attente"||S.statut==="impay"||S.statut==="en attente")).length;u(S=>({...S,paiements:v}))}catch(p){console.warn("Erreur chargement paiements:",p)}}catch(y){console.warn("Erreur lors du chargement des compteurs:",y)}},j=()=>{localStorage.removeItem("tuteur_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(Re("Home"))};return f&&!s?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50",children:[a.jsx($ue,{tuteur:s,notifications:o,newCounts:c,onLogout:j}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function vp({isOpen:e,title:t="Information",message:r,type:n="info",onClose:s}){if(!e)return null;const i=()=>{switch(n){case"success":return a.jsx(mt,{className:"w-6 h-6 text-white"});case"error":return a.jsx(Lr,{className:"w-6 h-6 text-white"});case"warning":return a.jsx(Ue,{className:"w-6 h-6 text-white"});default:return a.jsx(Qu,{className:"w-6 h-6 text-white"})}},o=()=>{switch(n){case"success":return"bg-gradient-to-r from-green-500 to-green-600";case"error":return"bg-gradient-to-r from-red-500 to-red-600";case"warning":return"bg-gradient-to-r from-amber-500 to-amber-600";default:return"bg-gradient-to-r from-blue-500 to-blue-600"}};return a.jsx(Or,{children:a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:a.jsxs(re.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:l=>l.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:`p-6 ${o()}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i()}),a.jsx("h3",{className:"text-xl font-bold text-white",children:t})]})}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:r})}),a.jsx("div",{className:"p-6 border-t border-gray-100 flex justify-end bg-gray-50",children:a.jsx(ne,{onClick:s,className:"rounded-xl",children:"OK"})})]})})})}function Iue(){var ms;const e=it(),t=Pn(),[r,n]=N.useState(null),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState("all"),m=new URLSearchParams(t.search),g=m.get("tab")||"eleves",[j,h]=N.useState(g);N.useEffect(()=>{const ee=m.get("tab")||"eleves";ee!==j&&h(ee)},[t.search]);const[y,p]=N.useState(!1),[x,v]=N.useState(null),[S,w]=N.useState(""),[b,_]=N.useState(!1),[P,C]=N.useState(""),[M,A]=N.useState([]),[E,T]=N.useState(!1),[B,I]=N.useState(!1),[D,O]=N.useState(!1),[$,R]=N.useState(null),[Q,ae]=N.useState(null),[oe,Z]=N.useState(""),[pe,Ee]=N.useState({zone:"",type_transport:"",abonnement:""}),[Y,J]=N.useState([]),[W,X]=N.useState(""),[k,K]=N.useState(""),[z,le]=N.useState({show:!1,eleve:null,type:null}),[ge,ue]=N.useState({show:!1,eleve:null}),[U,xe]=N.useState({show:!1,message:"",type:"info"}),[Pe,ve]=N.useState(!1),[Ae,Ie]=N.useState(null),[we,Te]=N.useState(null),[rt,xt]=N.useState(null),[ze,He]=N.useState([]),[Ze,dt]=N.useState(!1);N.useEffect(()=>{const ee=localStorage.getItem("tuteur_session");if(!ee){e(Re("TuteurLogin"));return}const Ce=JSON.parse(ee);n(Ce);const vt=Ce.type_id||Ce.id;Xe(vt,Ce.id),Ct()},[e]);const Ct=async()=>{try{const ee=await Cs.getAll(),Ce=(ee==null?void 0:ee.data)||ee||[];J(Array.isArray(Ce)?Ce:[])}catch(ee){console.error("Erreur lors du chargement des zones:",ee)}},Xe=async(ee,Ce)=>{var vt,Pt,Qe,dr,V;u(!0);try{const[ye,L,G,he,ce]=await Promise.allSettled([Xt.getAll(),ft.getByUser(Ce,"tuteur"),cr.getAll(),Kr.getAll(),Fo.getByTuteur(ee)]),te=ye.status==="fulfilled"?Array.isArray((vt=ye.value)==null?void 0:vt.data)?ye.value.data:Array.isArray(ye.value)?ye.value:[]:[],ie=L.status==="fulfilled"?Array.isArray((Pt=L.value)==null?void 0:Pt.data)?L.value.data:Array.isArray(L.value)?L.value:[]:[],F=G.status==="fulfilled"?Array.isArray((Qe=G.value)==null?void 0:Qe.data)?G.value.data:Array.isArray(G.value)?G.value:[]:[],de=he.status==="fulfilled"?Array.isArray((dr=he.value)==null?void 0:dr.data)?he.value.data:Array.isArray(he.value)?he.value:[]:[],be=ce.status==="fulfilled"?Array.isArray((V=ce.value)==null?void 0:V.data)?ce.value.data:Array.isArray(ce.value)?ce.value:[]:[],Oe=Array.isArray(te)?te.filter(qe=>qe.tuteur_id===ee):[];A(Array.isArray(be)?be:[]);const Fe=Array.isArray(F)?F.filter(qe=>qe.type_demande==="inscription"&&qe.tuteur_id===ee):[],nt=Oe.map(qe=>{const Mr=Fe.filter(at=>at.eleve_id===qe.id).sort((at,bp)=>new Date(bp.date_creation||0)-new Date(at.date_creation||0))[0],ql=Array.isArray(de)?de.find(at=>at.eleve_id===qe.id&&(at.statut==="Active"||at.statut==="Dsabonn")):null,h5=(Array.isArray(be)?be.filter(at=>at.eleve_id===qe.id&&at.statut==="Pay"):[]).reduce((at,bp)=>at+(parseFloat(bp.montant)||0),0);let tj=null,rj=0,nj=0,aj=null,sj=null;if(Mr!=null&&Mr.description)try{const at=typeof Mr.description=="string"?JSON.parse(Mr.description):Mr.description;at!=null&&at.taux_reduction&&at.taux_reduction>0&&(tj=at==null?void 0:at.montant_avant_reduction,rj=at==null?void 0:at.taux_reduction,nj=(at==null?void 0:at.montant_reduction)||0),aj=at==null?void 0:at.rang_eleve,sj=at==null?void 0:at.rang_eleve_texte}catch{}let hs=null;if(ql)ql.statut==="Dsabonn"?hs="Dsabonn":hs="Inscrit";else if(Mr){const at=Mr.statut||"En attente";at==="En attente"?hs="En cours de traitement":at==="Valide"||at==="En attente de paiement"?hs="En attente de paiement":at==="Refuse"?hs="Refuse":hs=at}else hs="En cours de traitement";return{...qe,demande_inscription:Mr,inscription:ql,statut_demande:hs,montant_total_paye:h5,montant_avant_reduction:tj,taux_reduction:rj,montant_reduction:nj,rang_eleve:aj,rang_eleve_texte:sj}});i(nt),l(ie.sort((qe,Mr)=>new Date(Mr.date||Mr.date_creation||0)-new Date(qe.date||qe.date_creation||0)))}catch(ye){console.error("Erreur lors du chargement:",ye)}finally{u(!1),T(!1)}},At=ee=>{const Ce="px-4 py-2 rounded-xl text-sm font-medium border";return ee==="En cours de traitement"?`${Ce} bg-[#64B5F6] text-white border-[#64B5F6]`:ee==="Inscrit"?`${Ce} bg-[#A5D6A7] text-[#1B5E20] border-[#A5D6A7]`:ee==="Dsabonn"?`${Ce} bg-[#E57373] text-white border-[#E57373]`:ee==="En attente de paiement"?`${Ce} bg-orange-100 text-orange-700 border-orange-200`:ee==="Paye"?`${Ce} bg-amber-100 text-amber-700 border-amber-200`:ee==="Refuse"?`${Ce} bg-red-100 text-red-700 border-red-200`:ee==="En attente"?`${Ce} bg-yellow-100 text-yellow-700 border-yellow-200`:`${Ce} bg-gray-100 text-gray-700 border-gray-200`},ot=async()=>{var Ce;if(!ge.eleve)return;const ee=ge.eleve;try{if((Ce=ee.demande_inscription)!=null&&Ce.id)try{await cr.delete(ee.demande_inscription.id),console.log("Demande supprime avec succs")}catch(Pt){console.warn("Erreur lors de la suppression de la demande:",Pt)}try{await Xt.delete(ee.id),console.log("lve supprim avec succs")}catch(Pt){throw console.error("Erreur lors de la suppression de l'lve:",Pt),Pt}if(!r)return;const vt=r.type_id||r.id;await Xe(vt,r.id),ue({show:!1,eleve:null}),X("Demande annule avec succs"),setTimeout(()=>X(""),5e3)}catch(vt){console.error("Erreur lors de l'annulation:",vt),ue({show:!1,eleve:null}),K("Erreur lors de l'annulation de la demande: "+(vt.message||"Erreur inconnue")),setTimeout(()=>K(""),5e3)}},rr=ee=>{ue({show:!0,eleve:ee})},nn=async()=>{if(!z.eleve||!r)return;const ee=z.eleve;try{await Xt.delete(ee.id);const Ce=r.type_id||r.id;await Xe(Ce,r.id),le({show:!1,eleve:null,type:null}),X("Inscription supprime avec succs"),setTimeout(()=>X(""),5e3)}catch(Ce){console.error("Erreur lors de la suppression:",Ce),le({show:!1,eleve:null,type:null}),K("Erreur lors de la suppression de l'inscription"),setTimeout(()=>K(""),5e3)}},Wr=ee=>{le({show:!0,eleve:ee,type:"delete"})},et=async()=>{if(!$||!oe.trim()){K("Veuillez saisir la raison du dsabonnement"),setTimeout(()=>K(""),5e3);return}try{K("");const ee=r.type_id||r.id;await cr.create({eleve_id:$.id,tuteur_id:ee,type_demande:"desinscription",description:JSON.stringify({raison:oe}),statut:"Valide"}),await Xt.delete($.id),X("Dsabonnement effectu avec succs. L'lve a t supprim."),I(!1),R(null),Z(""),await Xe(ee,r.id),setTimeout(()=>X(""),5e3)}catch(ee){console.error("Erreur lors du dsabonnement:",ee),K("Erreur lors du dsabonnement"),setTimeout(()=>K(""),5e3)}},Da=async()=>{if(Q){if(!pe.zone&&!pe.type_transport&&!pe.abonnement){K("Veuillez slectionner au moins un lment  modifier"),setTimeout(()=>K(""),5e3);return}try{const ee=r.type_id||r.id,Ce=Q.demande_inscription;let vt={};if(Ce!=null&&Ce.description)try{vt=typeof Ce.description=="string"?JSON.parse(Ce.description):Ce.description}catch(Qe){console.warn("Erreur parsing description:",Qe)}const Pt={...vt,type_transport:pe.type_transport||vt.type_transport,abonnement:pe.abonnement||vt.abonnement,zone:pe.zone||vt.zone};await cr.create({eleve_id:Q.id,tuteur_id:ee,type_demande:"modification",zone_geographique:pe.zone||(Ce==null?void 0:Ce.zone_geographique),description:JSON.stringify(Pt),statut:"En attente"}),X("Demande de modification envoye avec succs"),O(!1),ae(null),Ee({zone:"",type_transport:"",abonnement:""}),await Xe(ee,r.id),setTimeout(()=>X(""),5e3)}catch(ee){console.error("Erreur lors de la demande de changement:",ee),K("Erreur lors de l'envoi de la demande de modification"),setTimeout(()=>K(""),5e3)}}},lt=s.filter(ee=>ee.statut_demande!=="Refuse"),Mt=s.filter(ee=>ee.statut_demande==="Refuse"),Ar=lt.filter(ee=>f==="all"?!0:f==="inscrit"?ee.statut_demande==="Inscrit":f==="en_attente"?ee.statut_demande==="En attente de paiement":f==="en_traitement"?ee.statut_demande==="En cours de traitement":!0);return o.filter(ee=>!ee.lue).length,c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[W&&a.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between gap-2 text-green-700 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(mt,{className:"w-5 h-5"}),a.jsx("span",{children:W})]}),a.jsx("button",{onClick:()=>X(""),className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(Lr,{className:"w-5 h-5"})})]}),k&&a.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center justify-between gap-2 text-red-600 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ue,{className:"w-5 h-5"}),a.jsx("span",{children:k})]}),a.jsx("button",{onClick:()=>K(""),className:"text-red-600 hover:text-red-800 transition-colors",children:a.jsx(Lr,{className:"w-5 h-5"})})]}),a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Ht,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",r==null?void 0:r.prenom," ",r==null?void 0:r.nom]}),a.jsx("p",{className:"text-gray-500",children:r==null?void 0:r.email})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(na,{title:"Mes Enfants",value:s.length,icon:pr,color:"lime"}),a.jsx(na,{title:"En attente",value:s.filter(ee=>ee.statut_demande==="En cours de traitement"||ee.statut_demande==="En attente").length,icon:ia,color:"orange"}),a.jsx(na,{title:"Inscrits",value:s.filter(ee=>ee.statut_demande==="Inscrit"||ee.statut_demande==="En attente de paiement").length,icon:mt,color:"green"})]}),j==="eleves"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(pr,{className:"w-6 h-6 text-lime-500"}),"Mes Enfants"]}),a.jsxs($e,{value:f,onValueChange:d,children:[a.jsx(Me,{className:"w-48 rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les lves"}),a.jsx(q,{value:"inscrit",children:"Inscrits"}),a.jsx(q,{value:"en_attente",children:"En attente de paiement"}),a.jsx(q,{value:"en_traitement",children:"En cours de traitement"})]})]})]})}),Ar.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(pr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun lve inscrit pour le moment"}),a.jsx(Ff,{to:Re("TuteurInscription"),children:a.jsx(ne,{className:"mt-4 bg-lime-500 hover:bg-lime-600 text-white rounded-xl",children:"Inscrire un lve"})})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:Ar.map((ee,Ce)=>{var vt,Pt;return a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Ce},className:"p-6 hover:bg-lime-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center",children:a.jsx(pr,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[ee.nom," ",ee.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:ee.classe}),ee.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[ee.adresse.substring(0,30),"..."]})]})]}),ee.montant_total_paye>0&&a.jsx("div",{className:"mt-2 space-y-1",children:ee.taux_reduction>0&&ee.montant_avant_reduction?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg text-sm font-medium bg-green-100 text-green-700 flex-wrap border border-green-200",children:[a.jsx(Cr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded font-semibold",children:ee.rang_eleve_texte||`${ee.rang_eleve||""}me lve`}),a.jsxs("span",{className:"line-through text-gray-500",children:[parseFloat(ee.montant_avant_reduction).toFixed(2)," DH"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"font-bold",children:["Total pay: ",ee.montant_total_paye.toFixed(2)," DH"]}),a.jsxs("span",{className:"text-xs bg-green-200 px-2 py-0.5 rounded font-semibold",children:["-",Math.round(ee.taux_reduction*100),"%"]})]}),a.jsxs("div",{className:"text-xs text-green-600 ml-3",children:["Rduction familiale: -",ee.montant_reduction.toFixed(2)," DH"]})]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg text-sm font-medium bg-green-100 text-green-700",children:[a.jsx(Cr,{className:"w-4 h-4"}),"Total pay: ",ee.montant_total_paye.toFixed(2)," DH"]})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("span",{className:At(ee.statut_demande),children:ee.statut_demande}),a.jsxs(ne,{onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),e(`/TuteurEleveDetails?eleveId=${ee.id}`)},className:"rounded-xl bg-blue-500 hover:bg-blue-600 text-white border-2 border-blue-600",children:[a.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Dtails"]}),(ee.statut_demande==="En cours de traitement"||ee.statut_demande==="En attente")&&a.jsxs(a.Fragment,{children:[a.jsx(Ff,{to:Re(`TuteurDemandes${(vt=ee.demande_inscription)!=null&&vt.id?`?demandeId=${ee.demande_inscription.id}`:""}`),onClick:Qe=>{var dr;(dr=ee.demande_inscription)!=null&&dr.id||console.warn("Pas d'ID de demande trouv pour l'lve:",ee)},children:a.jsxs(ne,{className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]})}),a.jsxs(ne,{onClick:Qe=>{Qe.preventDefault(),Qe.stopPropagation(),rr(ee)},className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Lr,{className:"w-4 h-4 mr-2"}),"Annuler"]})]}),ee.statut_demande==="En attente de paiement"&&((Pt=ee.demande_inscription)==null?void 0:Pt.id)&&a.jsxs(ne,{onClick:Qe=>{Qe.stopPropagation(),v(ee),p(!0),w(""),C("")},className:"bg-gradient-to-r from-lime-600 to-lime-600 hover:from-lime-700 hover:to-lime-700 text-white rounded-xl font-semibold shadow-md",children:[a.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Payer"]})]}),ee.statut_demande==="Inscrit"&&a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-2 w-full",children:a.jsxs(ne,{onClick:Qe=>{Qe.stopPropagation(),R(ee),I(!0),Z("")},className:"w-full rounded-xl text-white border-2 font-semibold",style:{backgroundColor:"#E57373",borderColor:"#E57373"},onMouseEnter:Qe=>Qe.target.style.backgroundColor="#EF5350",onMouseLeave:Qe=>Qe.target.style.backgroundColor="#E57373",children:[a.jsx(ki,{className:"w-4 h-4 mr-2"}),"Dsabonnement"]})})]})},ee.id)})})]}),j==="historique"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Lr,{className:"w-6 h-6 text-lime-500"}),"Demandes Refuses"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:[Mt.length," demande(s) refuse(s)"]})]}),Mt.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Lr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucune demande refuse"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:Mt.map((ee,Ce)=>{var vt;return a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Ce},className:"p-6 hover:bg-red-50/50 transition-colors cursor-pointer",onClick:()=>e(`/TuteurEleveDetails?eleveId=${ee.id}`),children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-100 flex items-center justify-center",children:a.jsx(Lr,{className:"w-7 h-7 text-red-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[ee.nom," ",ee.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:ee.classe}),ee.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[ee.adresse.substring(0,30),"..."]})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"px-3 py-1 rounded-xl text-sm font-medium border border-red-300 bg-red-50 text-red-700",children:"Refuse"}),((vt=ee.demande_inscription)==null?void 0:vt.date_creation)&&a.jsxs("span",{className:"ml-3 text-xs text-gray-500",children:["Le ",new Date(ee.demande_inscription.date_creation).toLocaleDateString("fr-FR")]})]})]})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-3",children:a.jsxs(ne,{onClick:Pt=>{Pt.stopPropagation(),Wr(ee)},className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})})]})},ee.id)})})]}),j==="demandes"&&a.jsx(Lue,{tuteur:r,eleves:s}),j==="paiements"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Cr,{className:"w-6 h-6 text-lime-500"}),"Mes Paiements"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:["Total: ",M.filter(ee=>ee.statut==="Pay").reduce((ee,Ce)=>ee+(parseFloat(Ce.montant)||0),0).toFixed(2)," DH"]})]}),M.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Cr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun paiement enregistr"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:M.map((ee,Ce)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Ce},className:"p-6 hover:bg-lime-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${ee.type_paiement==="initial"?"bg-blue-100":"bg-green-100"}`,children:a.jsx(Cr,{className:`w-7 h-7 ${ee.type_paiement==="initial"?"text-blue-500":"text-green-500"}`})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[ee.eleve_prenom," ",ee.eleve_nom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:ee.eleve_classe||"N/A"}),ee.bus_numero&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:["Bus ",ee.bus_numero]})]}),ee.date_paiement&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:new Date(ee.date_paiement).toLocaleDateString("fr-FR")})]})]}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-medium ${ee.type_paiement==="initial"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:ee.type_paiement==="initial"?"Paiement initial":`Mois ${ee.mois}/${ee.annee}`}),a.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-medium border ${ee.statut==="Pay"?"bg-green-100 text-green-700 border-green-200":"bg-yellow-100 text-yellow-700 border-yellow-200"}`,children:ee.statut})]})]})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"text-2xl font-bold text-lime-600",children:[parseFloat(ee.montant||0).toFixed(2)," DH"]})})]})},ee.id))})]}),Pe&&Ae&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Ca,{className:"w-6 h-6"}),"Dtails de ",Ae.prenom," ",Ae.nom]}),a.jsx("button",{onClick:()=>{ve(!1),Ie(null),Te(null),xt(null),He([])},className:"text-white hover:text-lime-100 transition-colors",children:a.jsx(Lr,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 space-y-6",children:Ze?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(pr,{className:"w-5 h-5 text-lime-500"}),"Informations gnrales"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Classe:"}),a.jsx("span",{className:"ml-2 font-medium",children:Ae.classe||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Statut:"}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded-lg text-xs font-medium ${At(Ae.statut_demande)}`,children:Ae.statut_demande})]})]})]}),Ae.inscription&&Ae.inscription.bus_id?a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-4 border border-lime-200",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations du bus"]}),we?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-lime-200",children:[a.jsx("p",{className:"text-sm text-lime-600 font-medium mb-1",children:"Bus assign"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:we.numero}),we.immatriculation&&a.jsx("p",{className:"text-sm text-gray-500",children:we.immatriculation})]}),we.marque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Marque/Modle"}),a.jsxs("span",{className:"font-medium",children:[we.marque," ",we.modele||""]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[we.capacite," places"]})]}),rt&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium",children:rt.nom})]}),rt.heure_depart_matin_a&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Horaires:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200",children:[a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Matin"}),a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:rt.heure_depart_matin_a})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-3 border border-orange-200",children:[a.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Soir"}),a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:rt.heure_depart_soir_a})]})]})]})]})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement des informations du bus..."})]}):a.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200",children:a.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2",children:[a.jsx(Ue,{className:"w-4 h-4"}),"L'lve n'est pas encore assign  un bus"]})}),a.jsxs("div",{className:"bg-red-50 rounded-2xl p-4 border border-red-200",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(Ue,{className:"w-5 h-5 text-red-500"}),"Absences (30 derniers jours)"]}),ze.length>0?a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:ze.map((ee,Ce)=>a.jsxs("div",{className:"bg-white rounded-xl p-3 border border-red-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qr,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"font-medium text-gray-800",children:ee.date?new Date(ee.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date inconnue"})]}),a.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg text-xs font-medium",children:"Absent"})]},Ce))}):a.jsx("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:a.jsxs("p",{className:"text-green-700 text-sm flex items-center gap-2",children:[a.jsx(mt,{className:"w-4 h-4"}),"Aucune absence enregistre sur les 30 derniers jours"]})})]})]})})]})}),y&&x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-600 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Cr,{className:"w-6 h-6"}),"Paiement"]}),a.jsx("button",{onClick:()=>{p(!1),v(null),w(""),C("")},className:"text-white/80 hover:text-white transition-colors",children:a.jsx(Lr,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"bg-lime-50 rounded-xl p-4 mb-6 border border-lime-200",children:a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"lve:"}),a.jsxs("span",{className:"font-semibold",children:[x.prenom," ",x.nom]})]}),((ms=x.demande_inscription)==null?void 0:ms.montant_facture)&&a.jsxs("div",{className:"flex justify-between pt-2 border-t border-lime-200",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"Montant:"}),a.jsxs("span",{className:"text-lg font-bold text-lime-700",children:[parseFloat(x.demande_inscription.montant_facture).toFixed(2)," DH"]})]})]})}),a.jsx("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," Veuillez consulter l'cole pour effectuer le paiement et rcuprer le code de vrification  saisir ci-dessous."]})}),P&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(Ue,{className:"w-5 h-5"}),P]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Code de vrification (fourni par l'cole)"}),a.jsx(me,{value:S,onChange:ee=>w(ee.target.value.toUpperCase()),placeholder:"Entrez le code de vrification",className:"h-12 rounded-xl text-center text-xl tracking-widest font-mono uppercase",maxLength:10,disabled:b,autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{type:"button",onClick:()=>{p(!1),v(null),w(""),C("")},className:"flex-1 rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",disabled:b,children:"Annuler"}),a.jsx(ne,{onClick:async ee=>{if(setTimeout(()=>ee.currentTarget.blur(),0),!S||S.length<4){C("Veuillez saisir le code de vrification");return}_(!0),C("");try{const Ce=await cr.verifierCode(x.demande_inscription.id,S);if(!Ce.success){C(Ce.message||"Code de vrification incorrect"),_(!1);return}p(!1),v(null),w("");const vt=r.type_id||r.id;await Xe(vt,r.id)}catch(Ce){console.error("Erreur lors de la vrification:",Ce),C(Ce.message||"Erreur lors de la vrification du code. Veuillez ressayer.")}_(!1)},disabled:b,className:"flex-1 bg-gradient-to-r from-lime-600 to-lime-600 hover:from-lime-700 hover:to-lime-700 text-white rounded-xl font-semibold",children:b?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-5 h-5 mr-2"}),"Confirmer"]})})]})]})]})]})}),B&&$&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-red-500 to-red-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(ki,{className:"w-6 h-6"}),"Dsabonnement"]}),a.jsx("button",{onClick:()=>{I(!1),R(null),Z("")},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Lr,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:ee=>{ee.preventDefault();const Ce=ee.target.querySelector('button[type="submit"]');Ce&&Ce.blur(),et()},className:"p-6 space-y-5",children:[a.jsxs("div",{className:"bg-red-100 rounded-xl p-5 border-2 border-red-400",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx(Ue,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),a.jsx("p",{className:"text-lg font-bold text-red-700",children:"tes-vous sr de cette opration ?"})]}),a.jsxs("p",{className:"text-sm text-red-800 ml-9",children:["Vous tes sur le point de dsabonner ",a.jsxs("strong",{children:[$.prenom," ",$.nom]}),". Cette action est ",a.jsx("strong",{className:"underline",children:"irrversible"})," et supprimera dfinitivement toutes les donnes de l'lve."]})]}),a.jsx("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pr,{className:"w-5 h-5 text-gray-600"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-semibold text-gray-800",children:[$.prenom," ",$.nom]}),a.jsx("p",{className:"text-sm text-gray-600",children:$.classe||"Classe non spcifie"})]})]})}),a.jsxs("div",{children:[a.jsxs(se,{className:"block text-sm font-medium text-gray-700 mb-2",children:["Raison du dsabonnement ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx(_a,{value:oe,onChange:ee=>Z(ee.target.value),className:"rounded-xl border-2 border-gray-300 focus:border-red-500 focus:ring-2 focus:ring-red-200 min-h-[120px]",placeholder:"Veuillez indiquer la raison du dsabonnement...",required:!0})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[a.jsx(ne,{type:"button",onClick:()=>{I(!1),R(null),Z("")},className:"rounded-xl bg-gray-500 hover:bg-gray-600 text-white border-2 border-gray-600 px-6 py-2 font-semibold",children:"Annuler"}),a.jsxs(ne,{type:"submit",className:"rounded-xl bg-red-600 hover:bg-red-700 text-white border-2 border-red-700 px-6 py-2 font-semibold shadow-lg",children:[a.jsx(ki,{className:"w-4 h-4 mr-2"}),"Valider le dsabonnement"]})]})]})]})}),D&&Q&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Pw,{className:"w-6 h-6"}),"Demande de changement"]}),a.jsx("button",{onClick:()=>{O(!1),ae(null),Ee({zone:"",type_transport:"",abonnement:""})},className:"text-white hover:text-lime-100 transition-colors",children:a.jsx(Lr,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:ee=>{ee.preventDefault();const Ce=ee.target.querySelector('button[type="submit"]');Ce&&Ce.blur(),Da()},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-lime-50 rounded-xl p-4 border border-lime-200",children:[a.jsxs("p",{className:"text-sm text-lime-800",children:["Demande de changement pour ",a.jsxs("strong",{children:[Q.prenom," ",Q.nom]}),"."]}),a.jsx("p",{className:"text-xs text-lime-700 mt-2",children:"Slectionnez uniquement les lments que vous souhaitez modifier."})]}),a.jsxs("div",{children:[a.jsx(se,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Zone gographique"}),a.jsxs($e,{value:pe.zone,onValueChange:ee=>Ee({...pe,zone:ee}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez une nouvelle zone (optionnel)"})}),a.jsx(ke,{children:Y.filter(ee=>ee.actif!==!1).map(ee=>a.jsx(q,{value:ee.nom,children:ee.nom},ee.id))})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de transport"}),a.jsxs($e,{value:pe.type_transport,onValueChange:ee=>Ee({...pe,type_transport:ee}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez un nouveau type (optionnel)"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Aller-Retour",children:"Aller-Retour"}),a.jsx(q,{value:"Aller",children:"Aller uniquement"}),a.jsx(q,{value:"Retour",children:"Retour uniquement"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type d'abonnement"}),a.jsxs($e,{value:pe.abonnement,onValueChange:ee=>Ee({...pe,abonnement:ee}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez un nouveau type d'abonnement (optionnel)"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Mensuel",children:"Mensuel"}),a.jsx(q,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(ne,{type:"button",onClick:()=>{O(!1),ae(null),Ee({zone:"",type_transport:"",abonnement:""})},className:"rounded-xl bg-gray-500 hover:bg-gray-600 text-white border-2 border-gray-600",children:"Annuler"}),a.jsxs(ne,{type:"submit",className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Pw,{className:"w-4 h-4 mr-2"}),"Envoyer la demande"]})]})]})]})}),a.jsx(en,{isOpen:z.show,title:"Supprimer l'inscription",message:z.eleve?`tes-vous sr de vouloir supprimer dfinitivement l'inscription de ${z.eleve.prenom} ${z.eleve.nom} ?`:"",onConfirm:nn,onCancel:()=>le({show:!1,eleve:null,type:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(en,{isOpen:ge.show,title:"Annuler la demande",message:ge.eleve?`tes-vous sr de vouloir annuler la demande d'inscription de ${ge.eleve.prenom} ${ge.eleve.nom} ?`:"",onConfirm:ot,onCancel:()=>ue({show:!1,eleve:null}),confirmText:"Annuler la demande",cancelText:"Non",variant:"default"}),a.jsx(vp,{isOpen:U.show,title:"Information",message:U.message,type:U.type,onClose:()=>xe({show:!1,message:"",type:"info"})})]})}function Lue({tuteur:e,eleves:t}){const r=["agdal","(takaddoum-haynahda)","hay riad","temara","medina","hay el fath","hay lmohit","yaakoub al mansour"],[n,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState({eleve_id:"",nouvelle_adresse:"",nouvelle_zone:"",date_demenagement:"",raisons:""}),u=async d=>{d.preventDefault();const m=d.target.querySelector('button[type="submit"]');m&&m.blur(),s(!0);try{await cr.create({eleve_id:parseInt(l.eleve_id),tuteur_id:e.id,type_demande:"Dmnagement",nouvelle_adresse:l.nouvelle_adresse,nouvelle_zone:l.nouvelle_zone,date_demenagement:l.date_demenagement,raisons:l.raisons,statut:"En attente"}),await ft.create({destinataire_id:1,destinataire_type:"admin",titre:"Nouvelle demande de changement d'adresse/zone",message:`${e.prenom} ${e.nom} a fait une demande de changement d'adresse/zone pour un lve.`,type:"info"}),o(!0),c({eleve_id:"",nouvelle_adresse:"",nouvelle_zone:"",date_demenagement:"",raisons:""}),setTimeout(()=>o(!1),3e3)}catch(g){console.error("Erreur lors de l'envoi de la demande:",g),setAlertDialog({show:!0,message:"Erreur lors de l'envoi de la demande",type:"error"})}finally{s(!1)}},f=t.find(d=>d.id===parseInt(l.eleve_id));return a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(lu,{className:"w-6 h-6 text-lime-500"}),"Demande de changement d'adresse / Zone (Dmnagement)"]}),i&&a.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(mt,{className:"w-5 h-5"}),"Demande envoye avec succs !"]}),a.jsxs("form",{onSubmit:u,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium mb-2",children:"Slectionner l'lve"}),a.jsxs($e,{value:l.eleve_id,onValueChange:d=>c({...l,eleve_id:d}),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez un lve"})}),a.jsx(ke,{children:t.map(d=>a.jsxs(q,{value:d.id.toString(),children:[d.prenom," ",d.nom," - ",d.classe]},d.id))})]})]}),f&&a.jsxs("div",{className:"bg-lime-50 rounded-xl p-4 border border-lime-100",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Informations actuelles"}),a.jsxs("p",{className:"font-medium",children:["Adresse actuelle: ",a.jsx("span",{className:"text-gray-700",children:f.adresse||"Non renseigne"})]})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-lime-500"}),"Nouvelle adresse"]}),a.jsx(me,{value:l.nouvelle_adresse,onChange:d=>c({...l,nouvelle_adresse:d.target.value}),className:"mt-1 h-12 rounded-xl",placeholder:"Nouvelle adresse complte",required:!0})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-lime-500"}),"Nouvelle zone"]}),a.jsxs($e,{value:l.nouvelle_zone,onValueChange:d=>c({...l,nouvelle_zone:d}),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez la nouvelle zone"})}),a.jsx(ke,{children:r.map(d=>a.jsx(q,{value:d,children:d},d))})]})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4 text-lime-500"}),"Date de dmnagement"]}),a.jsx(me,{type:"date",value:l.date_demenagement,onChange:d=>c({...l,date_demenagement:d.target.value}),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium mb-2",children:"Raisons / Justification"}),a.jsx(_a,{value:l.raisons,onChange:d=>c({...l,raisons:d.target.value}),className:"mt-1 rounded-xl min-h-[120px]",placeholder:"Expliquez les raisons du dmnagement...",required:!0})]}),a.jsx(ne,{type:"submit",disabled:n||!l.eleve_id,className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-500 hover:from-lime-600 hover:to-lime-600 text-white rounded-xl",children:n?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Envoyer la demande"})]})]})}function Rue(){return a.jsx(jc,{children:a.jsx(Iue,{})})}function Bue(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",confirm_password:"",adresse:""}),u=(d,m)=>{c(g=>({...g,[d]:m}))},f=async d=>{if(d.preventDefault(),s(""),l.mot_de_passe!==l.confirm_password){s("Les mots de passe ne correspondent pas");return}if(l.mot_de_passe.length<6){s("Le mot de passe doit contenir au moins 6 caractres");return}r(!0);try{const{confirm_password:m,adresse:g,...j}=l;j.role="tuteur";const h=await ts.register(j);h.success?e(Re("TuteurLogin")):s(h.message||"Erreur lors de la cration du compte")}catch(m){console.error("Erreur lors de l'inscription:",m);const g=m.message||"";g.toLowerCase().includes("email")||g.toLowerCase().includes("dj")?s("Un compte existe dj avec cet email"):s(g||"Erreur lors de la cration du compte. Veuillez ressayer.")}r(!1)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:a.jsx(re.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full max-w-lg",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-amber-100",children:[a.jsxs("button",{onClick:()=>e(Re("TuteurLogin")),className:"flex items-center gap-2 text-gray-500 hover:text-amber-600 mb-6 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour  la connexion"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(Ht,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Crer un compte"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Inscription Espace Tuteur"})]}),n&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-center",children:n}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Nom"}),a.jsx(me,{value:l.nom,onChange:d=>u("nom",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre nom",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Prnom"}),a.jsx(me,{value:l.prenom,onChange:d=>u("prenom",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre prnom",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Email"}),a.jsx(me,{type:"email",value:l.email,onChange:d=>u("email",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"exemple@email.com",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Tlphone"}),a.jsx(me,{value:l.telephone,onChange:d=>u("telephone",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"06XXXXXXXX",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(me,{value:l.adresse,onChange:d=>u("adresse",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre adresse"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Mot de passe"}),a.jsx("div",{className:"relative mt-1",children:a.jsx(me,{type:i?"text":"password",value:l.mot_de_passe,onChange:d=>u("mot_de_passe",d.target.value),className:"h-11 rounded-xl border-gray-200",placeholder:"",required:!0,minLength:6})})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Confirmer"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(me,{type:i?"text":"password",value:l.confirm_password,onChange:d=>u("confirm_password",d.target.value),className:"h-11 rounded-xl border-gray-200",placeholder:"",required:!0,minLength:6}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?a.jsx(zf,{className:"w-4 h-4"}):a.jsx(Ca,{className:"w-4 h-4"})})]})]})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Le mot de passe doit contenir au moins 6 caractres"}),a.jsx(ne,{type:"submit",disabled:t,className:"w-full h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg mt-6",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(hh,{className:"w-5 h-5 mr-2"}),"Crer mon compte"]})})]}),a.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Vous avez dj un compte ?"," ",a.jsx("button",{onClick:()=>e(Re("TuteurLogin")),className:"text-amber-600 hover:text-amber-700 font-medium",children:"Se connecter"})]})]})})})}function Fue(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(null),[u,f]=N.useState({nom:"",prenom:"",email:"",telephone:"",adresse:""});N.useEffect(()=>{const g=localStorage.getItem("tuteur_session");if(!g){e(Re("TuteurLogin"));return}const j=JSON.parse(g);c(j.id),f({nom:j.nom||"",prenom:j.prenom||"",email:j.email||"",telephone:j.telephone||"",adresse:j.adresse||""})},[e]);const d=(g,j)=>{f(h=>({...h,[g]:j}))},m=async g=>{var j,h;if(g.preventDefault(),g.target){const y=g.target.querySelector('button[type="submit"]');y&&y.blur()}r(!0),o(""),s(!1);try{const y=await ri.update(l,u);if(!y.success)throw new Error(y.message||"Erreur lors de la mise  jour");const p=JSON.parse(localStorage.getItem("tuteur_session")),x={...p,...y.data||u,...p.type_id?{type_id:p.type_id}:{}};localStorage.setItem("tuteur_session",JSON.stringify(x)),s(!0),setTimeout(()=>s(!1),3e3)}catch(y){console.error("Erreur lors de la mise  jour:",y);const p=((h=(j=y.response)==null?void 0:j.data)==null?void 0:h.message)||y.message||"Erreur lors de la mise  jour du profil. Veuillez ressayer.";o(p)}finally{r(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("button",{onClick:()=>e(Re("TuteurDashboard")),className:"flex items-center gap-2 text-gray-500 hover:text-lime-600 mb-6 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(Ht,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Modifiez vos informations personnelles"})]}),n&&a.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(mt,{className:"w-5 h-5"}),"Profil mis  jour avec succs !"]}),i&&a.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(Ue,{className:"w-5 h-5"}),i]}),a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Nom"}),a.jsx(me,{value:u.nom,onChange:g=>d("nom",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Prnom"}),a.jsx(me,{value:u.prenom,onChange:g=>d("prenom",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Email"}),a.jsx(me,{type:"email",value:u.email,onChange:g=>d("email",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Tlphone"}),a.jsx(me,{value:u.telephone,onChange:g=>d("telephone",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(me,{value:u.adresse,onChange:g=>d("adresse",g.target.value),className:"mt-1 h-12 rounded-xl"})]}),a.jsx(ne,{type:"submit",disabled:t,onClick:g=>{setTimeout(()=>g.currentTarget.blur(),0)},className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl font-semibold shadow-lg mt-4",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),"Enregistrer les modifications"]})})]})]})})})}const ej=(e,t)=>{const r=e==="Aller-Retour"?400:250;return t==="Annuel"?r*10:r},zue=(e,t)=>{const r=ej(e,t);return t==="Mensuel"?`${r} DH/mois`:`${r} DH/an`},wy=e=>{try{const t=typeof e=="string"?JSON.parse(e):e;return{type_transport:(t==null?void 0:t.type_transport)||"Aller-Retour",abonnement:(t==null?void 0:t.abonnement)||"Mensuel",groupe:(t==null?void 0:t.groupe)||null,zone:(t==null?void 0:t.zone)||null,niveau:(t==null?void 0:t.niveau)||null,lien_parente:(t==null?void 0:t.lien_parente)||null,sexe:(t==null?void 0:t.sexe)||null}}catch(t){return console.warn("Erreur parsing description:",t),{type_transport:"Aller-Retour",abonnement:"Mensuel",groupe:null,zone:null,niveau:null,lien_parente:null,sexe:null}}},Vue=async()=>{const e=await fetch("http://localhost/backend/api/utilisateurs/getAdmins.php");return e.ok?await e.json():{success:!1,data:[]}};function Uue(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(null),[l,c]=N.useState(1),[u,f]=N.useState([{nom:"",prenom:"",date_naissance:"",sexe:"",classe:"",niveau:"",ville:"",zone:"",adresse:""}]),[d,m]=N.useState({lien_parente:"",lien_parente_custom:"",type_transport:"",abonnement:"",groupe:""}),g=["Rabat","Sal","Temara"],[j,h]=N.useState([]),[y,p]=N.useState([]),x={Primaire:["1AP","2AP","3AP","4AP","5AP","6AP"],Collge:["1AC","2AC","3AC"],Lyce:["TC","1BAC","2BAC"]},v=A=>A?x[A]||[]:[];N.useEffect(()=>{const A=localStorage.getItem("tuteur_session");if(!A){e(Re("TuteurLogin"));return}o(JSON.parse(A)),S()},[e]),N.useEffect(()=>{j.length===0&&(console.log(" Rechargement des zones car aucune zone n'est charge"),S())},[j.length]),N.useEffect(()=>{if(d.ville){const A=j.filter(E=>{const T=E.ville&&E.ville.trim()===d.ville.trim(),B=E.actif===!0||E.actif===1||E.actif==="1";return T&&B});p(A),d.zone&&!A.some(E=>E.nom===d.zone)&&m(E=>({...E,zone:""}))}else p([]),m(A=>({...A,zone:""}))},[d.ville,j]);const S=async()=>{try{console.log(" Chargement des zones...");const A=await Cs.getAll();console.log(" Rponse brute zonesAPI.getAll():",A),console.log(" Type de rponse:",typeof A),console.log(" Est un tableau?",Array.isArray(A));let E;A&&typeof A=="object"&&A.success!==!1&&A.data?(E=A.data,console.log(" Format dtect: { success, data }")):Array.isArray(A)?(E=A,console.log(" Format dtect: Tableau direct")):A&&typeof A=="object"&&A.data&&Array.isArray(A.data)?(E=A.data,console.log(" Format dtect: { data }")):(console.warn(" Format de rponse non reconnu:",A),E=[]);const T=Array.isArray(E)?E:[];if(console.log(` Zones charges: ${T.length} zone(s)`),T.length>0){console.log(" Exemple de zone:",T[0]);const B=[...new Set(T.map(I=>I.ville).filter(Boolean))];console.log(" Villes disponibles:",B),console.log(" Rpartition par ville:",B.map(I=>({ville:I,count:T.filter(D=>D.ville===I).length})))}else console.warn(" Aucune zone charge!");return h(T),T}catch(A){console.error(" Erreur lors du chargement des zones:",A),console.error(" Dtails:",A.message,A.stack);const E=A.message||"Erreur inconnue";return E.includes("connexion")||E.includes("base de donnes")||E.includes("MySQL")?s("Impossible de charger les zones. Vrifiez que MySQL est dmarr dans XAMPP."):s("Erreur lors du chargement des zones: "+E),h([]),[]}},w=(A,E)=>{m(T=>({...T,[A]:E}))},b=(A,E,T)=>{f(B=>{const I=[...B];return I[A]={...I[A],[E]:T},E==="niveau"&&(I[A].classe=""),E==="ville"&&(I[A].zone="",j.length===0&&(console.log(" Rechargement des zones car la ville a chang et aucune zone n'est charge"),S())),I})},_=()=>{f(A=>[...A,{nom:"",prenom:"",date_naissance:"",sexe:"",classe:"",niveau:"",ville:"",zone:"",adresse:""}])},P=A=>{u.length>1&&f(E=>E.filter((T,B)=>B!==A))},C=async A=>{var E;A.preventDefault(),r(!0),s("");try{if(!d.type_transport||!d.abonnement||!d.groupe){s("Veuillez remplir tous les champs de transport"),r(!1);return}for(let D=0;D<u.length;D++){const O=u[D];if(!O.nom||!O.prenom||!O.classe||!O.ville||!O.zone||!O.adresse){s(`Veuillez remplir tous les champs obligatoires pour l'lve ${D+1}`),r(!1);return}}const T=i.type_id||i.id,B=d.lien_parente==="Autre"?d.lien_parente_custom.trim():d.lien_parente,I=[];for(const D of u){const O=await Xt.create({nom:D.nom,prenom:D.prenom,date_naissance:D.date_naissance||null,adresse:D.adresse,telephone_parent:i.telephone,email_parent:i.email,classe:D.classe,tuteur_id:T,statut:"Inactif"});if(!O||!O.success||!O.data){const Q=(O==null?void 0:O.message)||"Erreur lors de la cration de l'lve";throw console.error("Erreur cration lve:",O),new Error(Q)}const $=O.data,R=await cr.create({eleve_id:$.id,tuteur_id:T,type_demande:"inscription",zone_geographique:D.zone,description:JSON.stringify({type_transport:d.type_transport,abonnement:d.abonnement,groupe:d.groupe,zone:D.zone,niveau:D.niveau,lien_parente:B,sexe:D.sexe}),statut:"En attente"});if(!R||!R.success){const Q=(R==null?void 0:R.message)||"Erreur lors de la cration de la demande";throw console.error("Erreur cration demande:",R),new Error(Q)}I.push({eleve:$,demande:R})}try{const D=u.map(O=>`${O.prenom} ${O.nom}`).join(", ");await ft.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Inscription(s) envoye(s)",message:`L'inscription de ${u.length===1?D:`${u.length} lves (${D})`} a t envoye et est en attente de validation.`,type:"info"})}catch(D){console.warn("Erreur notification tuteur:",D)}try{const D=await Vue();if(D.success&&D.data&&D.data.length>0){const O=u.map(R=>`${R.prenom} ${R.nom}`).join(", "),$=D.data.map(R=>ft.create({destinataire_id:R.id,destinataire_type:"admin",titre:"Nouvelle(s) demande(s) d'inscription",message:`${u.length===1?"Nouvelle demande":`${u.length} nouvelles demandes`} d'inscription pour ${O} de ${i.prenom} ${i.nom}`,type:"info"}));await Promise.all($)}}catch(D){console.warn("Impossible de rcuprer les admins pour la notification:",D)}setTimeout(()=>{e(Re("TuteurDashboard"))},500)}catch(T){console.error("Erreur lors de l'inscription:",T);const B=T.message||((E=T.response)==null?void 0:E.message)||"Erreur lors de l'envoi de l'inscription. Veuillez ressayer.";s(B),r(!1)}finally{r(!1)}},M=[{num:1,title:"Infos Tuteur",icon:pt},{num:2,title:"Infos lve",icon:pr},{num:3,title:"Transport",icon:tt}];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:[a.jsxs("button",{onClick:()=>e(Re("TuteurDashboard")),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour"]}),a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(hh,{className:"w-7 h-7"}),"Inscription ",u.length===1?"d'un lve":`de ${u.length} lves`]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsx("div",{className:"flex justify-between",children:M.map((A,E)=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:`flex items-center gap-2 cursor-pointer ${l>=A.num?"text-amber-600":"text-gray-400"}`,onClick:()=>l>A.num&&c(A.num),children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l>=A.num?"bg-lime-500 text-white":"bg-gray-100 text-gray-400"}`,children:l>A.num?a.jsx(mt,{className:"w-5 h-5"}):a.jsx(A.icon,{className:"w-5 h-5"})}),a.jsx("span",{className:"hidden sm:block font-medium",children:A.title})]}),E<M.length-1&&a.jsx("div",{className:`w-12 sm:w-24 h-1 mx-2 rounded ${l>A.num?"bg-lime-500":"bg-gray-200"}`})]},A.num))})}),n&&a.jsx("div",{className:"mx-6 mt-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:n}),a.jsxs("form",{onSubmit:C,className:"p-6",children:[l===1&&a.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 border border-lime-100",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-lime-500"}),"Informations du Tuteur"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-600",children:"Nom"}),a.jsx(me,{value:(i==null?void 0:i.nom)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-600",children:"Prnom"}),a.jsx(me,{value:(i==null?void 0:i.prenom)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-600",children:"Email"}),a.jsx(me,{value:(i==null?void 0:i.email)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-600",children:"Tlphone"}),a.jsx(me,{value:(i==null?void 0:i.telephone)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Lien de parent avec l'lve"}),a.jsxs($e,{value:d.lien_parente,onValueChange:A=>{w("lien_parente",A),A!=="Autre"&&w("lien_parente_custom","")},children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez le lien"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Pre",children:"Pre"}),a.jsx(q,{value:"Mre",children:"Mre"}),a.jsx(q,{value:"Tuteur lgal",children:"Tuteur lgal"}),a.jsx(q,{value:"Grand-pre",children:"Grand-pre"}),a.jsx(q,{value:"Grand-mre",children:"Grand-mre"}),a.jsx(q,{value:"Oncle",children:"Oncle"}),a.jsx(q,{value:"Tante",children:"Tante"}),a.jsx(q,{value:"Frre",children:"Frre"}),a.jsx(q,{value:"Sur",children:"Sur"}),a.jsx(q,{value:"Autre",children:"Autre (prcisez)"})]})]}),d.lien_parente==="Autre"&&a.jsx(me,{type:"text",placeholder:"Prcisez le lien de parent (ex: cousin, beau-pre, etc.)",value:d.lien_parente_custom,onChange:A=>w("lien_parente_custom",A.target.value),className:"mt-2 h-12 rounded-xl",required:!0})]}),a.jsx(ne,{type:"button",onClick:()=>c(2),disabled:!d.lien_parente||d.lien_parente==="Autre"&&!d.lien_parente_custom.trim(),className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl",children:"Continuer"})]}),l===2&&a.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(pr,{className:"w-5 h-5 text-lime-500"}),"Informations des lves (",u.length,")"]}),a.jsxs(ne,{type:"button",onClick:_,variant:"outline",className:"rounded-xl",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Ajouter un lve"]})]}),u.map((A,E)=>{const T=v(A.niveau),B=A.ville?j.filter(I=>{const D=(I.ville||"").toString().trim(),O=(A.ville||"").toString().trim(),$=D.toLowerCase()===O.toLowerCase(),R=I.actif===!0||I.actif===1||I.actif==="1"||I.actif==="true";return $&&R}):[];if(A.ville&&(console.log(`Filtrage zones pour "${A.ville}":`),console.log(`  - Total zones charges: ${j.length}`),console.log(`  - Zones filtres: ${B.length}`),console.log("  - Zones trouves:",B.map(I=>I.nom)),B.length===0&&j.length>0)){const I=j.filter(D=>{const O=(D.ville||"").toString().trim().toLowerCase(),$=(A.ville||"").toString().trim().toLowerCase();return O===$});console.log(`  - Zones avec mme ville (sans filtre actif): ${I.length}`,I)}return a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border-2 border-lime-200 relative",children:[u.length>1&&a.jsx("button",{type:"button",onClick:()=>P(E),className:"absolute top-4 right-4 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})}),a.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-lime-500 text-white rounded-full flex items-center justify-center font-bold",children:E+1}),a.jsxs("h4",{className:"font-semibold text-gray-800",children:["lve ",E+1]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Nom *"}),a.jsx(me,{value:A.nom,onChange:I=>b(E,"nom",I.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Prnom *"}),a.jsx(me,{value:A.prenom,onChange:I=>b(E,"prenom",I.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Date de naissance"}),a.jsx(me,{type:"date",value:A.date_naissance,onChange:I=>b(E,"date_naissance",I.target.value),className:"mt-1 h-12 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Sexe"}),a.jsxs($e,{value:A.sexe,onValueChange:I=>b(E,"sexe",I),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Masculin",children:"Masculin"}),a.jsx(q,{value:"Fminin",children:"Fminin"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Niveau"}),a.jsxs($e,{value:A.niveau,onValueChange:I=>b(E,"niveau",I),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Primaire",children:"Primaire"}),a.jsx(q,{value:"Collge",children:"Collge"}),a.jsx(q,{value:"Lyce",children:"Lyce"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Classe *"}),a.jsxs($e,{value:A.classe,onValueChange:I=>b(E,"classe",I),disabled:!A.niveau,children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:A.niveau?"Slectionnez":"Slectionnez d'abord le niveau"})}),a.jsx(ke,{children:T.length>0?T.map(I=>a.jsx(q,{value:I,children:I},I)):a.jsx(q,{value:"",disabled:!0,children:"Aucune classe disponible"})})]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-lime-500"}),"Ville *"]}),a.jsxs($e,{value:A.ville,onValueChange:I=>b(E,"ville",I),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez votre ville"})}),a.jsx(ke,{children:g.map(I=>a.jsx(q,{value:I,children:I},I))})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-lime-500"}),"Zone gographique *"]}),a.jsxs($e,{value:A.zone,onValueChange:I=>b(E,"zone",I),disabled:!A.ville||B.length===0,children:[a.jsx(Me,{className:`mt-1 h-12 rounded-xl ${!A.ville||B.length===0?"border-orange-300":""}`,children:a.jsx(De,{placeholder:A.ville?"Slectionnez votre zone":"Slectionnez d'abord la ville"})}),a.jsx(ke,{children:B.length>0?B.map(I=>a.jsx(q,{value:I.nom,children:I.nom},I.id||I.nom)):a.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500",children:A.ville?"Aucune zone disponible pour cette ville":"Slectionnez d'abord la ville"})})]}),A.ville&&B.length===0&&a.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-amber-700 flex items-center gap-2 mb-2",children:[a.jsx(Ue,{className:"w-4 h-4"}),"Aucune zone disponible pour ",A.ville]}),a.jsxs("div",{className:"text-xs text-amber-600 space-y-1",children:[a.jsxs("p",{children:[" Zones charges: ",j.length]}),a.jsxs("p",{children:[" Zones pour cette ville: ",j.filter(I=>{const D=(I.ville||"").toString().trim().toLowerCase(),O=(A.ville||"").toString().trim().toLowerCase();return D===O}).length]}),j.length===0&&a.jsx("p",{className:"text-red-600 font-medium mt-2",children:" Les zones ne sont pas charges. Vrifiez que MySQL est dmarr dans XAMPP."}),a.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:async()=>{console.log(" Rechargement manuel des zones"),s(""),await S()},className:"mt-2 text-xs",children:"Recharger les zones"})]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4 text-lime-500"}),"Adresse *"]}),a.jsx(me,{value:A.adresse,onChange:I=>b(E,"adresse",I.target.value),className:"mt-1 h-12 rounded-xl",placeholder:"Ex: Quartier Hay Riad, Rue Mohammed V, Maison N12",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Veuillez entrer le quartier, la rue et le nom/numro de la maison"})]})]},E)}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{type:"button",variant:"outline",onClick:()=>c(1),className:"flex-1 h-12 rounded-xl",children:"Retour"}),a.jsx(ne,{type:"button",onClick:()=>c(3),disabled:u.some(A=>!A.nom||!A.prenom||!A.niveau||!A.classe||!A.ville||!A.zone||!A.adresse),className:"flex-1 h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:"Continuer"})]})]}),l===3&&a.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-5",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations de Transport"]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Type de transport"}),a.jsxs($e,{value:d.type_transport,onValueChange:A=>w("type_transport",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Aller",children:"Aller uniquement"}),a.jsx(q,{value:"Retour",children:"Retour uniquement"}),a.jsx(q,{value:"Aller-Retour",children:"Aller-Retour"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Type d'abonnement"}),a.jsxs($e,{value:d.abonnement,onValueChange:A=>w("abonnement",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Mensuel",children:"Mensuel"}),a.jsx(q,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Groupe horaire"}),a.jsxs($e,{value:d.groupe,onValueChange:A=>w("groupe",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"A",children:"Groupe A (Matin: 7h30-8h00 / Soir: 17h00-17h30)"}),a.jsx(q,{value:"B",children:"Groupe B (Matin: 8h00-8h30 / Soir: 17h30-18h00)"})]})]})]}),a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 border border-lime-100",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Rcapitulatif"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Type de transport:"}),a.jsx("span",{className:"font-medium",children:d.type_transport||"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Abonnement:"}),a.jsx("span",{className:"font-medium",children:d.abonnement||"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Groupe:"}),a.jsx("span",{className:"font-medium",children:d.groupe||"-"})]}),a.jsxs("div",{className:"border-t border-amber-200 pt-2 mt-2 flex justify-between",children:[a.jsx("span",{className:"text-gray-800 font-semibold",children:"Montant estim:"}),a.jsx("span",{className:"font-bold text-amber-600",children:d.type_transport&&d.abonnement?zue(d.type_transport,d.abonnement):"-"})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{type:"button",variant:"outline",onClick:()=>c(2),className:"flex-1 h-12 rounded-xl",children:"Retour"}),a.jsx(ne,{type:"submit",disabled:t||!d.type_transport||!d.abonnement||!d.groupe,className:"flex-1 h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(mt,{className:"w-5 h-5 mr-2"}),"Envoyer ",u.length===1?"l'inscription":`les ${u.length} inscriptions`]})})]})]})]})]})})})}function Wue(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState(null),[g,j]=N.useState("");N.useEffect(()=>{const x=localStorage.getItem("tuteur_session");if(!x){e(Re("TuteurLogin"));return}const v=JSON.parse(x);m(v);const w=new URLSearchParams(window.location.search).get("demandeId");if(w){const b=v.type_id||v.id;h(w,b)}},[e]);const h=async(x,v)=>{try{const S=await cr.getByTuteur(v),b=((S==null?void 0:S.data)||[]).find(_=>_.id===parseInt(x));if(!b){s("Demande non trouve");return}if(b.statut!=="En attente de paiement"&&b.statut!=="Valide"){s("Cette demande n'est pas en attente de paiement");return}if(c(b),b.eleve_id)try{const _=await Xt.getById(b.eleve_id);f(_)}catch(_){console.warn("Impossible de charger l'lve:",_)}}catch(S){console.error("Erreur lors du chargement de la demande:",S),s("Impossible de charger les informations de la demande")}},y=()=>{if(l!=null&&l.montant_facture)return parseFloat(l.montant_facture);if(l){const x=wy(l.description);return ej(x.type_transport,x.abonnement)}return 0},p=async x=>{if(x.preventDefault(),s(""),!g||g.length<4){s("Veuillez saisir le code de vrification");return}if(!l){s("Demande non trouve");return}r(!0);try{const v=await cr.verifierCode(l.id,g);if(!v.success){s(v.message||"Code de vrification incorrect"),r(!1);return}o(!0),setTimeout(()=>{e(Re("TuteurDashboard"))},2e3)}catch(v){console.error("Erreur lors de la vrification:",v),s(v.message||"Erreur lors de la vrification du code. Veuillez ressayer.")}r(!1)};return l?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:[a.jsxs("button",{onClick:()=>e(Re("TuteurDashboard")),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour"]}),a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Cr,{className:"w-7 h-7"}),"Paiement"]})]}),i?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(re.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(mt,{className:"w-10 h-10 text-green-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Paiement russi !"}),a.jsx("p",{className:"text-gray-500",children:"Redirection vers le tableau de bord..."})]}):a.jsxs("div",{className:"p-6",children:[(()=>{try{const x=typeof l.description=="string"?JSON.parse(l.description):l.description,v=(x==null?void 0:x.taux_reduction)??0,S=(x==null?void 0:x.montant_reduction)??0,w=(x==null?void 0:x.rang_eleve)??0,b=(x==null?void 0:x.rang_eleve_texte)??"",_=(x==null?void 0:x.nombre_eleves_total)??0;if(v>0&&S>0){const P=Math.round(v*100);return a.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-5 mb-6 border-2 border-green-200 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-14 h-14 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(e$,{className:"w-7 h-7 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-green-800 mb-1 text-lg",children:" Rduction familiale applique !"}),a.jsxs("div",{className:"text-sm text-green-700 space-y-1",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold",children:b||`${w}me lve`})," de la famille  Rduction de ",a.jsxs("span",{className:"font-bold",children:[P,"%"]})]}),a.jsxs("div",{className:"text-xs text-green-600",children:[_," ",_===1?"lve inscrit":"lves inscrits"," dans votre famille"]})]})]}),a.jsxs("div",{className:"flex-shrink-0 text-right bg-white rounded-lg p-3 border border-green-200",children:[a.jsx("div",{className:"text-xs text-green-600 mb-1 font-medium",children:"conomie"}),a.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["-",S.toFixed(2)," DH"]})]})]})})}return null}catch{return null}})(),a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 mb-6 border border-lime-100",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pr,{className:"w-5 h-5 text-lime-500"}),"Facture"]}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"lve:"}),a.jsxs("span",{className:"font-medium",children:[l.eleve_prenom," ",l.eleve_nom]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Classe:"}),a.jsx("span",{className:"font-medium",children:l.eleve_classe||"Non spcifie"})]}),l.zone_geographique&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Zone:"}),a.jsx("span",{className:"font-medium",children:l.zone_geographique})]}),(()=>{const x=typeof l.description=="string"?JSON.parse(l.description):l.description;return a.jsxs(a.Fragment,{children:[(x==null?void 0:x.type_transport)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Type de transport:"}),a.jsx("span",{className:"font-medium",children:x.type_transport})]}),(x==null?void 0:x.abonnement)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Abonnement:"}),a.jsx("span",{className:"font-medium",children:x.abonnement})]})]})})(),(()=>{try{const x=typeof l.description=="string"?JSON.parse(l.description):l.description,v=x==null?void 0:x.montant_avant_reduction,S=(x==null?void 0:x.montant_reduction)??0,w=(x==null?void 0:x.taux_reduction)??0,b=(x==null?void 0:x.rang_eleve)??0,_=(x==null?void 0:x.rang_eleve_texte)??"";return w>0&&v?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border-t border-amber-200 pt-3 space-y-2",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200 mb-2",children:[a.jsx("div",{className:"text-xs text-blue-600 font-medium mb-1",children:"Rang dans la famille"}),a.jsx("div",{className:"text-sm font-semibold text-blue-800",children:_||`${b}me lve`})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Prix initial:"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[parseFloat(v).toFixed(2)," DH"]})]}),a.jsxs("div",{className:"flex justify-between bg-green-50 rounded-lg p-2 border border-green-200",children:[a.jsxs("span",{className:"text-green-700 font-semibold",children:["Rduction familiale (",Math.round(w*100),"%):"]}),a.jsxs("span",{className:"font-bold text-green-700",children:["-",parseFloat(S).toFixed(2)," DH"]})]})]}),a.jsxs("div",{className:"border-t-2 border-amber-300 pt-3 flex justify-between bg-amber-50 rounded-lg p-3",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total  payer:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[y().toFixed(2)," DH"]})]})]}):a.jsxs("div",{className:"border-t border-amber-200 pt-3 flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[y().toFixed(2)," DH"]})]})}catch{return a.jsxs("div",{className:"border-t border-amber-200 pt-3 flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[y().toFixed(2)," DH"]})]})}})()]})]}),a.jsx("div",{className:"bg-blue-50 rounded-2xl p-4 mb-6 border border-blue-100",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," Veuillez consulter l'cole pour effectuer le paiement et rcuprer le code de vrification  saisir ci-dessous."]})}),n&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(Ue,{className:"w-5 h-5"}),n]}),a.jsxs("form",{onSubmit:p,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Code de validation (fourni par l'cole)"}),a.jsx(me,{value:g,onChange:x=>j(x.target.value),placeholder:"Entrez le code de validation",className:"mt-1 h-12 rounded-xl text-center text-2xl tracking-widest font-mono",required:!0}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ce code vous a t communiqu par l'administration de l'cole"})]}),a.jsx(ne,{type:"submit",disabled:t,className:"w-full h-14 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl font-semibold text-lg shadow-lg",children:t?a.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Cr,{className:"w-5 h-5 mr-2"}),"Confirmer le paiement"]})})]})]})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})})}function Hue(){const e=it(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState(null),[d,m]=N.useState("semaine"),[g,j]=N.useState(Se(new Date,"yyyy-MM-dd")),[h,y]=N.useState("tous"),[p,x]=N.useState(null),[v,S]=N.useState(null),[w,b]=N.useState(null),[_,P]=N.useState(null),[C,M]=N.useState(null),A=N.useCallback(async D=>{if(console.log("loadData appel avec eleveId:",D),!D){console.error("loadData: Aucun ID d'lve fourni"),f("Aucun ID d'lve fourni"),c(!1);return}try{console.log("loadData: Dbut du chargement, setLoading(true)"),c(!0),f(null),console.log("loadData: Appel de elevesAPI.getById avec:",D);const O=await Xt.getById(D);console.log("loadData: Rponse elevesAPI.getById:",O);let $=null;if((O==null?void 0:O.success)===!1)throw new Error(O.message||"lve non trouv");if(O!=null&&O.data?$=O.data:(O!=null&&O.id||O)&&($=O),console.log("loadData: eleveData extrait:",$),!$||!$.id)throw new Error("lve non trouv dans la base de donnes");console.log("loadData: setEleve avec:",$),r($);try{const R=await Kr.getByEleve(D),ae=(Array.isArray(R==null?void 0:R.data)?R.data:Array.isArray(R)?R:[]).find(oe=>oe.eleve_id===D&&oe.statut==="Active");if(ae&&ae.bus_id)try{const oe=await wr.getById(ae.bus_id),Z=(oe==null?void 0:oe.data)||oe;if(Z&&Z.id){if(x(Z),Z.chauffeur_id)try{const pe=await Vr.getById(Z.chauffeur_id),Ee=(pe==null?void 0:pe.data)||pe;S(Ee)}catch(pe){console.warn("Erreur chargement chauffeur:",pe)}if(Z.responsable_id)try{const pe=await xa.getById(Z.responsable_id),Ee=(pe==null?void 0:pe.data)||pe;b(Ee)}catch(pe){console.warn("Erreur chargement responsable:",pe)}if(Z.trajet_id)try{const pe=await ra.getById(Z.trajet_id),Ee=(pe==null?void 0:pe.data)||pe;P(Ee)}catch(pe){console.warn("Erreur chargement trajet:",pe)}}}catch(oe){console.warn("Erreur chargement bus:",oe)}else x(null),S(null),b(null),P(null)}catch(R){console.warn("Erreur chargement inscription:",R)}try{const R=new Date().toISOString().split("T")[0],Q=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];console.log("loadData: Chargement des prsences de",Q,"",R);const ae=await za.getByEleve(D,Q,R);console.log("loadData: Rponse presencesAPI:",ae);const oe=(ae==null?void 0:ae.data)||ae||[],Z=Array.isArray(oe)?oe.sort((pe,Ee)=>new Date(Ee.date||0)-new Date(pe.date||0)):[];console.log("loadData: Prsences tries:",Z.length),o(Z),s(Z.slice(0,7))}catch(R){console.warn("Erreur lors du chargement des prsences:",R),s([]),o([])}}catch(O){console.error("Erreur lors du chargement des donnes:",O),f(O.message||"Erreur lors du chargement des donnes. Vrifiez votre connexion.")}finally{console.log("loadData: Fin du chargement, setLoading(false)"),c(!1)}},[]);N.useEffect(()=>{try{console.log("TuteurEleveDetailsContent - Composant mont"),console.log("URL:",window.location.href),console.log("Search:",window.location.search)}catch(D){console.error("Erreur dans useEffect initial:",D),f("Erreur lors de l'initialisation: "+D.message),c(!1)}},[]),N.useEffect(()=>{console.log("TuteurEleveDetailsContent - useEffect principal dclench");const D=localStorage.getItem("tuteur_session");if(console.log("Session trouve:",!!D),!D){console.log("Pas de session, redirection vers login"),e(Re("TuteurLogin"));return}const O=new URLSearchParams(window.location.search),$=O.get("eleveId")||O.get("eleveld")||O.get("id");if(console.log("EleveId depuis URL:",$),console.log("Tous les paramtres:",Object.fromEntries(O.entries())),!$){console.error("Aucun ID d'lve trouv dans l'URL"),f("Aucun ID d'lve fourni dans l'URL"),c(!1);return}console.log("Appel de loadData avec eleveId:",$),A($).catch(Q=>{console.error("Erreur dans loadData:",Q),f(Q.message||"Erreur lors du chargement des donnes"),c(!1)});const R=setInterval(()=>{const Q=new URLSearchParams(window.location.search),ae=Q.get("eleveId")||Q.get("eleveld")||Q.get("id");ae&&(console.log("Rechargement automatique des donnes"),A(ae).catch(oe=>{console.error("Erreur lors du rechargement:",oe)}))},3e4);return()=>{console.log("Nettoyage de l'intervalle"),clearInterval(R)}},[e,A]);const E=N.useMemo(()=>{if(!i||i.length===0)return[];const D=new Date;let O,$;switch(d){case"jour":const R=new Date(g);return O=Jf(R),$=qv(R),i.filter(Q=>{const ae=new Date(Q.date);return ae>=O&&ae<=$});case"semaine":return O=Xs(D,6),$=D,i.filter(Q=>{const ae=new Date(Q.date);return ae>=O&&ae<=$}).slice(0,7);case"mois":return O=Xs(D,29),$=D,i.filter(Q=>{const ae=new Date(Q.date);return ae>=O&&ae<=$});default:return i.slice(0,7)}},[i,d,g]),T=N.useMemo(()=>{if(!E||E.length===0)return[];const D={};return E.forEach($=>{const R=Se(new Date($.date),"dd/MM",{locale:Jt});D[R]||(D[R]={date:R,absents:0,presents:0}),(h==="tous"||h==="matin")&&($.present_matin===!0||$.present_matin===1||$.present_matin==="1"?D[R].presents=(D[R].presents||0)+1:D[R].absents=(D[R].absents||0)+1),(h==="tous"||h==="soir")&&($.present_soir===!0||$.present_soir===1||$.present_soir==="1"?D[R].presents=(D[R].presents||0)+1:D[R].absents=(D[R].absents||0)+1)}),Object.values(D).map($=>({...$,absents:Math.round($.absents||0),presents:Math.round($.presents||0)})).sort(($,R)=>{try{const[Q,ae]=$.date.split("/"),[oe,Z]=R.date.split("/"),pe=new Date().getFullYear(),Ee=new Date(pe,parseInt(ae)-1,parseInt(Q)),Y=new Date(pe,parseInt(Z)-1,parseInt(oe));return Ee-Y}catch{return 0}})},[E,h]);N.useEffect(()=>{t&&t.id&&s(E)},[d,g,E,t]);const B=N.useCallback(D=>{const O=Se(new Date(D),"yyyy-MM-dd"),$=i.find(R=>Se(new Date(R.date),"yyyy-MM-dd")===O);return $?{absent:!$.present_matin||!$.present_soir,matin:!$.present_matin,soir:!$.present_soir}:{absent:!1,matin:!1,soir:!1}},[i]),I=N.useMemo(()=>B(g),[g,B]);if(C)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de rendu"}),a.jsx("p",{className:"text-red-600 mb-4 text-sm",children:C}),a.jsx("button",{onClick:()=>{M(null),window.location.reload()},className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-4 py-2 mt-4",children:"Recharger la page"})]})})});try{console.log("TuteurEleveDetails - Rendu:",{loading:l,error:u,eleve:t?{id:t.id,nom:t.nom,prenom:t.prenom}:null,bus:p?{id:p.id,numero:p.numero}:null,presencesCount:n.length,allPresencesCount:i.length})}catch(D){console.error("Erreur dans les logs de dbogage:",D)}if(l){console.log("TuteurEleveDetails - Affichage de l'tat de chargement");try{return a.jsx(jc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Chargement des donnes..."}),u&&a.jsx("p",{className:"text-red-500 text-sm mt-2",children:u}),a.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Vrifiez la console pour plus de dtails"})]})})})}catch(D){return console.error("Erreur dans le rendu de chargement:",D),M(D.message||"Erreur lors du rendu"),null}}if(u&&!t)return a.jsx(jc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de chargement"}),a.jsx("p",{className:"text-red-600 mb-6",children:u}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ne,{onClick:()=>{const D=new URLSearchParams(window.location.search),O=D.get("eleveId")||D.get("eleveld")||D.get("id");O&&(f(null),c(!0),A(O))},className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl",children:"Ressayer"}),a.jsx(ne,{onClick:()=>e(Re("TuteurDashboard")),className:"w-full bg-gray-500 hover:bg-gray-600 text-white rounded-xl",children:"Retour au tableau de bord"})]})]})})})});if(!t)return a.jsx(jc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Aucune donne disponible"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Impossible de charger les informations de l'lve."}),a.jsx(ne,{onClick:()=>e(Re("TuteurDashboard")),className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl",children:"Retour au tableau de bord"})]})})})});try{console.log("TuteurEleveDetails - Rendu principal, eleve existe:",!!t)}catch(D){console.error("Erreur dans le log de rendu principal:",D)}try{return a.jsx(jc,{title:`Dtails - ${(t==null?void 0:t.prenom)||""} ${(t==null?void 0:t.nom)||""}`,children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("button",{onClick:()=>e(Re("TuteurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-lime-600 mb-6 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),u&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ue,{className:"w-5 h-5"}),a.jsx("span",{children:u})]}),a.jsx("button",{onClick:()=>f(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-lime-500"}),"Informations personnelles"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Classe"}),a.jsx("span",{className:"font-medium text-gray-800",children:t.classe||"N/A"})]}),t.date_naissance&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Date de naissance"}),a.jsx("span",{className:"font-medium text-gray-800",children:Se(new Date(t.date_naissance),"dd/MM/yyyy")})]}),t.adresse&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Adresse"}),a.jsx("span",{className:"font-medium text-gray-800 text-right max-w-[200px]",children:t.adresse})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations de transport"]}),p?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Bus assign"}),a.jsx("span",{className:"font-medium text-gray-800",children:p.numero?p.numero.toString().replace(/^#\s*/,""):"N/A"})]}),p.immatriculation&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Immatriculation"}),a.jsx("span",{className:"font-medium text-gray-800",children:p.immatriculation})]}),p.capacite&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[p.capacite," places"]})]}),v&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Chauffeur"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[v.prenom," ",v.nom]})]}),_&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium text-gray-800",children:_.nom||"N/A"})]})]}):a.jsx("div",{className:"py-2",children:a.jsx("p",{className:"text-gray-600",children:"Aucun bus assign pour le moment"})})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mt-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-lime-500"}),"Historique des absences"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs($e,{value:d,onValueChange:m,children:[a.jsxs(Me,{className:"w-40 rounded-xl",children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),a.jsx(De,{})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"jour",children:"Jour"}),a.jsx(q,{value:"semaine",children:"Semaine"}),a.jsx(q,{value:"mois",children:"Mois"})]})]}),d==="jour"&&a.jsx(me,{type:"date",value:g,onChange:D=>j(D.target.value),className:"w-40 rounded-xl"}),a.jsxs($e,{value:h,onValueChange:y,children:[a.jsxs(Me,{className:"w-40 rounded-xl",children:[a.jsx(ia,{className:"w-4 h-4 mr-2"}),a.jsx(De,{})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"tous",children:"Tous"}),a.jsx(q,{value:"matin",children:"Matin"}),a.jsx(q,{value:"soir",children:"Soir"})]})]})]})]}),d==="jour"&&a.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border-2 border-lime-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:["tat pour le ",Se(new Date(g),"EEEE d MMMM yyyy",{locale:Jt})]}),I.absent?a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:"text-red-600 font-semibold",children:"Absent"}),I.matin&&a.jsx("span",{className:"text-sm text-red-600",children:"Matin"}),I.soir&&a.jsx("span",{className:"text-sm text-red-600",children:"Soir"})]}):a.jsx("span",{className:"text-green-600 font-semibold",children:"Prsent (matin et soir)"})]}),a.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${I.absent?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:I.absent?"Absent":"Prsent"})]})}),T.length>0?a.jsx("div",{className:"mb-6",children:a.jsx(Eo,{width:"100%",height:300,children:a.jsxs(Vc,{data:T,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Ws,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),a.jsx(Hs,{domain:[0,"auto"],allowDecimals:!1,tick:{fontSize:12},tickFormatter:D=>Math.round(D)}),a.jsx(Gr,{}),a.jsx(Aa,{}),a.jsx(un,{dataKey:"absents",fill:"#EF4444",name:"Absences"}),a.jsx(un,{dataKey:"presents",fill:"#10B981",name:"Prsences"})]})})}):a.jsxs("div",{className:"text-center py-8 text-gray-400 mb-6",children:[a.jsx(el,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune donne de prsence disponible pour cette priode"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:["Dtail des prsences ",d==="jour"?"du jour":d==="semaine"?"de la semaine":"du mois",h!=="tous"&&a.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",h==="matin"?"Matin":"Soir",")"]})]}),n.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(ia,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun historique de prsence"})]}):a.jsx("div",{className:"space-y-2",children:n.filter(D=>h==="tous"?!0:h==="matin"?D.present_matin!==null&&D.present_matin!==void 0:h==="soir"?D.present_soir!==null&&D.present_soir!==void 0:!0).map((D,O)=>{const $=new Date(D.date),R=Se($,"yyyy-MM-dd")===Se(new Date,"yyyy-MM-dd"),Q=d==="jour"&&Se($,"yyyy-MM-dd")===g,ae=h==="tous"||h==="matin",oe=h==="tous"||h==="soir";return a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl transition-colors ${Q?"bg-lime-100 border-2 border-lime-300":"bg-gray-50 hover:bg-gray-100"}`,children:[a.jsxs("span",{className:"font-medium text-gray-700",children:[Se($,"EEEE d MMMM",{locale:Jt}),R&&a.jsx("span",{className:"ml-2 text-xs text-lime-600",children:"(Aujourd'hui)"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[ae&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Matin:"}),a.jsx("span",{className:`text-sm font-medium ${D.present_matin?"text-green-600":"text-red-600"}`,children:D.present_matin?"Prsent":"Absent"})]}),oe&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Soir:"}),a.jsx("span",{className:`text-sm font-medium ${D.present_soir?"text-green-600":"text-red-600"}`,children:D.present_soir?"Prsent":"Absent"})]})]})]},D.id||O)})})]})]})]})})})}catch(D){return console.error("Erreur dans le rendu principal:",D),M(D.message||"Erreur lors du rendu de la page"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de rendu"}),a.jsx("p",{className:"text-red-600 mb-4 text-sm",children:D.message||"Une erreur est survenue"}),a.jsx("button",{onClick:()=>{M(null),window.location.reload()},className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-4 py-2 mt-4",children:"Recharger la page"})]})})})}}function que(){console.log("TuteurEleveDetails - Composant mont (wrapper)");const[e,t]=N.useState(!1),[r,n]=N.useState(null);if(N.useEffect(()=>{console.log("TuteurEleveDetails - useEffect wrapper dclench");const s=i=>{var o;console.error("Erreur non gre:",i.error),t(!0),n(((o=i.error)==null?void 0:o.message)||"Une erreur est survenue")};return window.addEventListener("error",s),window.addEventListener("unhandledrejection",i=>{var o;console.error("Promesse rejete non gre:",i.reason),t(!0),n(((o=i.reason)==null?void 0:o.message)||"Une erreur est survenue")}),()=>{window.removeEventListener("error",s)}},[]),console.log("TuteurEleveDetails - Rendu wrapper, hasError:",e),e)return console.log("TuteurEleveDetails - Affichage de l'erreur"),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur"}),a.jsx("p",{className:"text-red-600 mb-4 text-sm",children:r}),a.jsx("button",{onClick:()=>{t(!1),n(null),window.location.reload()},className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-4 py-2 mt-4",children:"Recharger la page"})]})})});console.log("TuteurEleveDetails - Tentative de rendu du contenu");try{const s=a.jsx(Hue,{});return console.log("TuteurEleveDetails - Contenu cr avec succs"),s}catch(s){return console.error("TuteurEleveDetails - Erreur lors de la cration du contenu:",s),console.error("Erreur dans TuteurEleveDetails:",s),console.error("Stack:",s.stack),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:a.jsx("div",{className:"text-center max-w-md mx-auto",children:a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-3xl p-8 shadow-xl",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ue,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de rendu"}),a.jsx("p",{className:"text-red-600 mb-4 text-sm",children:s.message||"Une erreur est survenue"}),a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Vrifiez la console pour plus de dtails"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-4 py-2 mt-4",children:"Recharger la page"})]})})})}}typeof window<"u"&&window.addEventListener("error",e=>{console.error("Erreur globale capture:",e.error)});const Ig=({className:e="",children:t,...r})=>a.jsx("div",{className:`rounded-2xl bg-white shadow-lg border border-gray-100 ${e}`,...r,children:t});function Gue(){const e=it(),[t,r]=N.useState(!0),[n,s]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState(""),[u,f]=N.useState(null),[d,m]=N.useState({show:!1,demandeId:null}),[g,j]=N.useState({show:!1,message:"",type:"info"}),[h,y]=N.useState({}),p={Primaire:["1AP","2AP","3AP","4AP","5AP","6AP"],Collge:["1AC","2AC","3AC"],Lyce:["TC","1BAC","2BAC"]},x=h.niveau?p[h.niveau]||[]:[];N.useEffect(()=>{const A=localStorage.getItem("tuteur_session");if(!A){e(Re("TuteurLogin"));return}const E=JSON.parse(A);o(E);const T=E.type_id||E.id;v(T)},[e]),N.useEffect(()=>{if(n.length>0&&!u){const E=new URLSearchParams(window.location.search).get("demandeId");if(E){const T=n.find(B=>B.id===parseInt(E));T&&(console.log("Ouverture automatique du formulaire d'dition pour la demande:",E),b(T),window.history.replaceState({},"",window.location.pathname))}}},[n,u]);const v=async A=>{var E,T,B,I,D,O;try{r(!0);const[$,R,Q,ae,oe,Z]=await Promise.allSettled([cr.getByTuteur(A),Kr.getAll(),wr.getAll(),ra.getAll(),Vr.getAll(),xa.getAll()]),pe=$.status==="fulfilled"&&((E=$.value)!=null&&E.success)?$.value.data||[]:[],Ee=R.status==="fulfilled"?((T=R.value)==null?void 0:T.data)||R.value||[]:[],Y=Q.status==="fulfilled"?((B=Q.value)==null?void 0:B.data)||Q.value||[]:[],J=ae.status==="fulfilled"?((I=ae.value)==null?void 0:I.data)||ae.value||[]:[],W=oe.status==="fulfilled"?((D=oe.value)==null?void 0:D.data)||oe.value||[]:[],X=Z.status==="fulfilled"?((O=Z.value)==null?void 0:O.data)||Z.value||[]:[],K=pe.filter(z=>z.type_demande==="inscription").map(z=>{if(z.eleve_id){const le=Ee.find(ge=>ge.eleve_id===z.eleve_id&&ge.bus_id&&ge.bus_id!==null&&ge.bus_id>0);if(le){const ge=Y.find(ue=>ue.id===le.bus_id);if(ge){const ue=ge.chauffeur_id?W.find(Pe=>Pe.id===ge.chauffeur_id):null,U=ge.responsable_id?X.find(Pe=>Pe.id===ge.responsable_id):null,xe=ge.trajet_id?J.find(Pe=>Pe.id===ge.trajet_id):null;return{...z,inscription:le,bus:{...ge,chauffeur:ue,responsable:U,trajet:xe}}}}}return z});s(K)}catch($){console.error("Erreur:",$),c("Erreur lors du chargement des demandes")}finally{r(!1)}},S=A=>{m({show:!0,demandeId:A})},w=async()=>{if(d.demandeId)try{const A=await cr.delete(d.demandeId);A.success?(await v(i.id),await ft.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Demande supprime",message:"Votre demande a t supprime avec succs.",type:"info"}),m({show:!1,demandeId:null})):(j({show:!0,message:A.message||"Erreur lors de la suppression",type:"error"}),m({show:!1,demandeId:null}))}catch(A){console.error("Erreur:",A),j({show:!0,message:"Erreur lors de la suppression de la demande",type:"error"}),m({show:!1,demandeId:null})}},b=async A=>{f(A.id);let E={};if(A.eleve_id)try{const B=await Xt.getById(A.eleve_id);(B!=null&&B.success&&B.data||B!=null&&B.data)&&(E=B.data)}catch(B){console.error("Erreur lors du chargement de l'lve:",B)}let T={};if(A.description)try{T=typeof A.description=="string"?JSON.parse(A.description):A.description}catch(B){console.error("Erreur parsing description:",B)}y({nom:A.eleve_nom||E.nom||"",prenom:A.eleve_prenom||E.prenom||"",date_naissance:A.eleve_date_naissance||E.date_naissance||"",sexe:T.sexe||E.sexe||"",classe:A.eleve_classe||E.classe||"",niveau:T.niveau||"",adresse:E.adresse||"",zone_geographique:A.zone_geographique||T.zone||"",type_transport:T.type_transport||"",abonnement:T.abonnement||"",groupe:T.groupe||""})},_=async(A,E)=>{E&&setTimeout(()=>E.blur(),0);try{const T=n.find(D=>D.id===A);if(!T||!T.eleve_id){j({show:!0,message:"Erreur: lve introuvable",type:"error"});return}await Xt.update(T.eleve_id,{nom:h.nom,prenom:h.prenom,date_naissance:h.date_naissance||null,classe:h.classe,adresse:h.adresse});const B={type_transport:h.type_transport,abonnement:h.abonnement,groupe:h.groupe,zone:h.zone_geographique,niveau:h.niveau,sexe:h.sexe},I=await cr.update(A,{zone_geographique:h.zone_geographique,description:JSON.stringify(B)});I.success?(f(null),await v(i.type_id||i.id),await ft.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Demande modifie",message:"Votre demande a t modifie avec succs.",type:"info"})):j({show:!0,message:I.message||"Erreur lors de la modification",type:"error"})}catch(T){console.error("Erreur:",T),j({show:!0,message:"Erreur lors de la modification de la demande: "+(T.message||"Erreur inconnue"),type:"error"})}},P=A=>{switch(A){case"En attente":return a.jsx(ia,{className:"w-5 h-5 text-lime-500"});case"En cours de traitement":return a.jsx(wa,{className:"w-5 h-5 text-blue-500"});case"En attente de paiement":return a.jsx(Cr,{className:"w-5 h-5 text-orange-500"});case"Valide":case"Inscrit":return a.jsx(mt,{className:"w-5 h-5 text-green-500"});case"Refuse":return a.jsx(Lr,{className:"w-5 h-5 text-red-500"});default:return a.jsx(ia,{className:"w-5 h-5 text-gray-500"})}},C=A=>{switch(A){case"En attente":return"bg-lime-50 border-lime-200 text-lime-800";case"En cours de traitement":return"bg-blue-50 border-blue-200 text-blue-800";case"En attente de paiement":return"bg-orange-50 border-orange-200 text-orange-800";case"Valide":case"Inscrit":return"bg-green-50 border-green-200 text-green-800";case"Refuse":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},M=A=>A?new Date(A).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return t?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:[a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e(Re("TuteurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[a.jsx(wa,{className:"w-8 h-8 text-lime-500"}),"Mes Demandes d'Inscription"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Suivez l'tat de vos demandes d'inscription et grez vos demandes en attente"})]}),l&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 flex items-center gap-2",children:[a.jsx(Ue,{className:"w-5 h-5"}),l]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:["En attente","En cours de traitement","En attente de paiement","Inscrit","Refuse"].map(A=>{const E=n.filter(T=>T.statut===A).length;return a.jsxs(Ig,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:E}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:A})]},A)})}),n.length===0?a.jsxs(Ig,{className:"p-12 text-center",children:[a.jsx(wa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune demande"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Vous n'avez pas encore de demandes d'inscription."}),a.jsx(ne,{onClick:()=>e(Re("TuteurInscription")),className:"bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white",children:"Crer une nouvelle demande"})]}):a.jsx("div",{className:"space-y-4",children:n.map(A=>a.jsxs(Ig,{className:"p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[P(A.statut),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[A.eleve_prenom," ",A.eleve_nom]}),a.jsx("p",{className:"text-sm text-gray-500",children:A.type_demande==="inscription"?"Demande d'inscription":A.type_demande})]})]}),a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium mb-4 ${C(A.statut)}`,children:[P(A.statut),A.statut]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.zone_geographique&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Ut,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Zone: ",A.zone_geographique]})]}),A.eleve_classe&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(pt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Classe: ",A.eleve_classe]})]}),A.bus_numero&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[a.jsx(tt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-medium",children:["Bus: ",A.bus_numero]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Qr,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Cre le: ",M(A.date_creation)]})]})]}),A.type_transport&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Transport:"})," ",A.type_transport," |",a.jsx("span",{className:"font-medium ml-2",children:"Abonnement:"})," ",A.abonnement," |",a.jsx("span",{className:"font-medium ml-2",children:"Groupe:"})," ",A.groupe]})}),A.bus&&A.bus.id&&a.jsxs("div",{className:"bg-green-50 rounded-xl p-4 mb-4 border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(tt,{className:"w-5 h-5 text-green-600"}),a.jsx("h4",{className:"font-semibold text-green-800",children:"Informations de transport"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Bus assign"}),a.jsx("span",{className:"text-lg font-bold text-green-700",children:A.bus.numero?A.bus.numero.toString().replace(/^#\s*/,""):"N/A"})]}),A.bus.immatriculation&&a.jsx("p",{className:"text-xs text-gray-500",children:A.bus.immatriculation}),A.bus.marque&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[A.bus.marque," ",A.bus.modele||""]}),A.bus.capacite&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Capacit: ",A.bus.capacite," places"]})]}),A.bus.chauffeur&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-100",children:[a.jsxs("p",{className:"text-xs font-semibold text-blue-700 mb-1 flex items-center gap-1",children:[a.jsx(pt,{className:"w-3 h-3"}),"Chauffeur"]}),a.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[A.bus.chauffeur.prenom||""," ",A.bus.chauffeur.nom||""]}),A.bus.chauffeur.telephone&&a.jsxs("a",{href:`tel:${A.bus.chauffeur.telephone}`,className:"text-xs text-blue-600 hover:underline flex items-center gap-1 mt-1",children:[a.jsx(Wi,{className:"w-3 h-3"}),A.bus.chauffeur.telephone]})]}),A.bus.responsable&&a.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-100",children:[a.jsxs("p",{className:"text-xs font-semibold text-purple-700 mb-1 flex items-center gap-1",children:[a.jsx(pt,{className:"w-3 h-3"}),"Responsable bus"]}),a.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[A.bus.responsable.prenom||""," ",A.bus.responsable.nom||""]}),A.bus.responsable.telephone&&a.jsxs("a",{href:`tel:${A.bus.responsable.telephone}`,className:"text-xs text-purple-600 hover:underline flex items-center gap-1 mt-1",children:[a.jsx(Wi,{className:"w-3 h-3"}),A.bus.responsable.telephone]})]}),A.bus.trajet&&a.jsxs("div",{className:"bg-amber-50 rounded-lg p-3 border border-amber-100",children:[a.jsx("p",{className:"text-xs font-semibold text-amber-700 mb-1",children:"Trajet"}),a.jsx("p",{className:"text-sm font-medium text-gray-800",children:A.bus.trajet.nom||"N/A"}),A.bus.trajet.heure_depart_matin_a&&a.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Matin"}),a.jsxs("p",{className:"text-xs font-semibold",children:[A.bus.trajet.heure_depart_matin_a," - ",A.bus.trajet.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-white rounded p-2",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Soir"}),a.jsxs("p",{className:"text-xs font-semibold",children:[A.bus.trajet.heure_depart_soir_a," - ",A.bus.trajet.heure_arrivee_soir_a]})]})]})]})]})]}),(A.statut==="En attente"||A.statut==="En cours de traitement")&&a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>b(A),className:"flex items-center gap-2",children:[a.jsx(Un,{className:"w-4 h-4"}),"Modifier"]}),a.jsxs(ne,{variant:"outline",size:"sm",onClick:E=>{E.currentTarget.blur(),S(A.id)},className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:border-red-300",children:[a.jsx(Tt,{className:"w-4 h-4"}),"Supprimer"]})]}),A.statut==="En attente de paiement"&&a.jsxs(ne,{onClick:()=>e(Re(`TuteurPaiement?demandeId=${A.id}`)),className:"mt-4 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white",children:[a.jsx(Cr,{className:"w-4 h-4 mr-2"}),"Payer"]})]})}),u===A.id&&a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Modifier les informations"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Nom"}),a.jsx(me,{value:h.nom||"",onChange:E=>y({...h,nom:E.target.value}),className:"rounded-xl",placeholder:"Nom de l'lve"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Prnom"}),a.jsx(me,{value:h.prenom||"",onChange:E=>y({...h,prenom:E.target.value}),className:"rounded-xl",placeholder:"Prnom de l'lve"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de naissance"}),a.jsx(me,{type:"date",value:h.date_naissance||"",onChange:E=>y({...h,date_naissance:E.target.value}),className:"rounded-xl"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Sexe"}),a.jsxs($e,{value:h.sexe||"",onValueChange:E=>y({...h,sexe:E}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Masculin",children:"Masculin"}),a.jsx(q,{value:"Fminin",children:"Fminin"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Niveau"}),a.jsxs($e,{value:h.niveau||"",onValueChange:E=>{y({...h,niveau:E,classe:""})},children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Primaire",children:"Primaire"}),a.jsx(q,{value:"Collge",children:"Collge"}),a.jsx(q,{value:"Lyce",children:"Lyce"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Classe"}),a.jsxs($e,{value:h.classe||"",onValueChange:E=>y({...h,classe:E}),disabled:!h.niveau,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:h.niveau?"Slectionnez":"Slectionnez d'abord le niveau"})}),a.jsx(ke,{children:x.length>0?x.map(E=>a.jsx(q,{value:E,children:E},E)):a.jsx(q,{value:"",disabled:!0,children:"Aucune classe disponible"})})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Adresse"}),a.jsx(me,{value:h.adresse||"",onChange:E=>y({...h,adresse:E.target.value}),className:"rounded-xl",placeholder:"Adresse complte"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Zone gographique"}),a.jsxs($e,{value:h.zone_geographique||"",onValueChange:E=>y({...h,zone_geographique:E}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez une zone"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Medina",children:"Medina"}),a.jsx(q,{value:"Hay Sina",children:"Hay Sina"}),a.jsx(q,{value:"Hay El Fath",children:"Hay El Fath"}),a.jsx(q,{value:"Souissi",children:"Souissi"}),a.jsx(q,{value:"Akkari",children:"Akkari"}),a.jsx(q,{value:"Manal",children:"Manal"}),a.jsx(q,{value:"Agdal",children:"Agdal"}),a.jsx(q,{value:"Nahda-Takkadoum",children:"Nahda-Takkadoum"}),a.jsx(q,{value:"Temara",children:"Temara"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Type de transport"}),a.jsxs($e,{value:h.type_transport||"",onValueChange:E=>y({...h,type_transport:E}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Aller",children:"Aller uniquement"}),a.jsx(q,{value:"Retour",children:"Retour uniquement"}),a.jsx(q,{value:"Aller-Retour",children:"Aller-Retour"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Type d'abonnement"}),a.jsxs($e,{value:h.abonnement||"",onValueChange:E=>y({...h,abonnement:E}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Mensuel",children:"Mensuel"}),a.jsx(q,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Groupe horaire"}),a.jsxs($e,{value:h.groupe||"",onValueChange:E=>y({...h,groupe:E}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"A",children:"Groupe A"}),a.jsx(q,{value:"B",children:"Groupe B"})]})]})]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(ne,{onClick:E=>_(A.id,E.currentTarget),className:"flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:"Enregistrer"}),a.jsx(ne,{variant:"outline",onClick:()=>f(null),className:"flex-1 rounded-xl",children:"Annuler"})]})]})]})]},A.id))})]})}),a.jsx(en,{isOpen:d.show,title:"Supprimer la demande",message:"tes-vous sr de vouloir supprimer cette demande ? Cette action est irrversible.",onConfirm:w,onCancel:()=>m({show:!1,demandeId:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(vp,{isOpen:g.show,message:g.message,type:g.type,onClose:()=>j({show:!1,message:"",type:"info"})})]})}function Kue(){const e=it(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all"),[u,f]=N.useState("all"),[d,m]=N.useState(!1);N.useEffect(()=>{const b=localStorage.getItem("tuteur_session");if(!b){e(Re("TuteurLogin"));return}const _=JSON.parse(b);r(_),g(_.id)},[e]);const g=async b=>{o(!0);try{const _=await ft.getByUser(b,"tuteur"),C=(Array.isArray(_==null?void 0:_.data)?_.data:Array.isArray(_)?_:[]).sort((M,A)=>{const E=new Date(M.date||M.date_creation||0);return new Date(A.date||A.date_creation||0)-E});s(C)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{o(!1)}},j=async b=>{try{await ft.marquerLue(b),s(_=>_.map(P=>P.id===b?{...P,lue:!0}:P))}catch(_){console.error("Erreur lors de la mise  jour:",_)}},h=async b=>{try{await ft.delete(b),s(_=>_.filter(P=>P.id!==b))}catch(_){console.error("Erreur lors de la suppression:",_)}},y=async()=>{if(t)try{await ft.deleteAll(t.id,"tuteur"),s([])}catch(b){console.error("Erreur lors de la suppression de toutes les notifications:",b)}},p=b=>{if(!b)return"";const _=new Date(b),C=new Date-_,M=Math.floor(C/6e4),A=Math.floor(C/36e5),E=Math.floor(C/864e5);return M<1?" l'instant":M<60?`Il y a ${M} min`:A<24?`Il y a ${A}h`:E<7?`Il y a ${E}j`:_.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},x=(b,_)=>{const P=(_==null?void 0:_.toLowerCase())||"",C=(b==null?void 0:b.toLowerCase())||"";return C==="alerte"||P.includes("accident")||P.includes("urgent")?a.jsx(Ue,{className:"w-5 h-5 text-red-500"}):C==="warning"||P.includes("attention")||P.includes("avertissement")?a.jsx(Os,{className:"w-5 h-5 text-orange-500"}):P.includes("message")||P.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):P.includes("rapport")||P.includes("rapports")?a.jsx(wa,{className:"w-5 h-5 text-purple-500"}):C==="success"||P.includes("confirm")||P.includes("valid")?a.jsx(mt,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},v=(b,_)=>{const P=(b==null?void 0:b.toLowerCase())||"",C=(_==null?void 0:_.toLowerCase())||"";return P==="alerte"||C.includes("accident")||C.includes("urgent")?"bg-red-50 border-red-200":P==="warning"||C.includes("attention")?"bg-orange-50 border-orange-200":P==="success"||C.includes("confirm")||C.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},S=n.filter(b=>{var _;return!(l==="unread"&&b.lue||l==="read"&&!b.lue||u!=="all"&&((_=b.type)==null?void 0:_.toLowerCase())!==u.toLowerCase())}),w=n.filter(b=>!b.lue).length;return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-lime-50 via-white to-lime-50",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:[a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Ff,{to:Re("TuteurDashboard"),children:a.jsxs(ne,{variant:"ghost",size:"sm",className:"rounded-xl",children:[a.jsx(Ot,{className:"w-5 h-5 mr-2"}),"Retour"]})}),a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Vn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:w>0?`${w} notification${w>1?"s":""} non lue${w>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ca,{className:"w-4 h-4 inline mr-1"}),"Filtrer par statut"]}),a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes"}),a.jsxs(q,{value:"unread",children:["Non lues (",n.filter(b=>!b.lue).length,")"]}),a.jsxs(q,{value:"read",children:["Lues (",n.filter(b=>b.lue).length,")"]})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ca,{className:"w-4 h-4 inline mr-1"}),"Filtrer par type"]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les types"}),a.jsx(q,{value:"info",children:"Informations"}),a.jsx(q,{value:"alerte",children:"Alertes"}),a.jsx(q,{value:"warning",children:"Avertissements"}),a.jsx(q,{value:"success",children:"Succs"})]})]})]})]}),n.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200",children:[w>0&&a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{n.filter(b=>!b.lue).forEach(b=>j(b.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50 rounded-xl",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les notifications"]})]})]}),a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:S.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(Vn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:l==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${l==="unread"?"non lue":"lue"} trouve.`})]}):S.map((b,_)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${b.lue?"border-gray-300 opacity-75":"border-lime-500"} ${v(b.type,b.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${b.lue?"opacity-50":""}`,children:x(b.type,b.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${b.lue?"line-through":""}`,children:b.titre}),!b.lue&&a.jsx("span",{className:"px-2 py-1 bg-lime-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:b.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:p(b.date||b.date_creation)}),b.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:b.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!b.lue&&a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>j(b.id),className:"rounded-xl text-lime-600 hover:text-lime-700 hover:bg-lime-50",title:"Marquer comme lu",children:a.jsx(mt,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>h(b.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})})},b.id))})]}),a.jsx(en,{isOpen:d,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{y(),m(!1)},onCancel:()=>m(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function Yue(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=(l,c)=>{var f;if(((f=l==null?void 0:l.response)==null?void 0:f.status)===401||(c==null?void 0:c.status)===401)return"Email ou mot de passe incorrect.";const u=((c==null?void 0:c.message)||(l==null?void 0:l.message)||"").toLowerCase();return u.includes("credentials")||u.includes("invalid")||u.includes("incorrect")?"Email ou mot de passe incorrect.":u.includes("network")||u.includes("fetch")||u.includes("connexion au serveur")?"Impossible de joindre le serveur. Vrifiez votre connexion.":"Email ou mot de passe incorrect."},o=async l=>{r(!0),s("");try{const c=await ts.login(l.email,l.password,"admin");c.success?(ts.saveUser(c.user),localStorage.setItem("admin_session",JSON.stringify(c.user)),e(Re("AdminDashboard"))):s(i(null,c))}catch(c){console.error("Erreur de connexion:",c),s(i(c,null))}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Administrateur",icon:Mi,onLogin:o,showRegister:!1,loading:t,error:n})}function Xue({admin:e,notifications:t=[],newItemsCount:r={inscriptions:0,accidents:0,problemes:0},onLogout:n,onNotificationClick:s}){var h,y;const i=it(),o=Pn(),[l,c]=N.useState(!1),[u,f]=N.useState(!1);N.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&f(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const d=[{title:"Dashboard",icon:Mi,link:"AdminDashboard",path:"/AdminDashboard"},{title:"Statistiques",icon:el,link:"AdminStats",path:"/AdminStats"},{title:"lves",icon:pr,link:"AdminEleves",path:"/AdminEleves"},{title:"Inscriptions",icon:Mx,link:"AdminInscriptions",path:"/AdminInscriptions"},{title:"Bus",icon:tt,link:"AdminBus",path:"/AdminBus"},{title:"Chauffeur & Responsable Bus",icon:Ht,link:"AdminChauffeurs",path:"/AdminChauffeurs"},{title:"Paiements",icon:Cr,link:"AdminPaiements",path:"/AdminPaiements"},{title:"Zones",icon:Ut,link:"AdminZones",path:"/AdminZones"},{title:"Accidents",icon:Ue,link:"AdminAccidents",path:"/AdminAccidents"},{title:"Problmes",icon:ea,link:"AdminProblemes",path:"/AdminProblemes"},{title:"Essence",icon:an,link:"AdminEssence",path:"/AdminEssence"},{title:"Profil",icon:pt,link:"AdminProfile",path:"/AdminProfile"},{title:"Notifications",icon:Vn,link:"AdminNotifications",path:"/AdminNotifications"}],m=p=>{p.path?i(p.path):i(Re(p.link)),f(!1)},g=p=>o.pathname===p||o.pathname.startsWith(p+"/"),j=t.filter(p=>!p.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>f(!u),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-amber-500 text-white rounded-xl shadow-lg hover:bg-amber-600 transition-colors",children:u?a.jsx(Ke,{className:"w-6 h-6"}):a.jsx(tl,{className:"w-6 h-6"})}),a.jsx(Or,{children:u&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(re.aside,{initial:!1,animate:{width:l?"80px":"280px",x:u?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-amber-50 to-white
          border-r-2 border-amber-200 shadow-2xl z-40
          flex flex-col
          ${l?"items-center":""}
        `,children:[a.jsx("div",{className:"p-4 border-b border-amber-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!l&&a.jsxs(re.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(Mi,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-gray-800 text-sm",children:"Mohammed 5"}),a.jsx("p",{className:"text-xs text-gray-500",children:"School Bus"})]})]}),l&&a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsx(Mi,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:()=>c(!l),className:"hidden lg:block p-2 hover:bg-amber-100 rounded-lg transition-colors text-gray-600 hover:text-amber-600",children:l?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ke,{className:"w-5 h-5"})})]})}),!l&&e&&a.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-amber-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold",children:((h=e.prenom)==null?void 0:h[0])||((y=e.nom)==null?void 0:y[0])||"A"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-semibold text-gray-800 text-sm truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:d.map((p,x)=>{const v=g(p.path),S=p.icon;let w=0;p.link==="AdminNotifications"?w=j:p.link==="AdminInscriptions"?w=r.inscriptions||0:p.link==="AdminAccidents"?w=r.accidents||0:p.link==="AdminProblemes"&&(w=r.problemes||0);const b=w>0;return a.jsxs(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.05},onClick:()=>m(p),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${v?"bg-gradient-to-r from-amber-500 to-yellow-500 text-white shadow-lg":"text-gray-700 hover:bg-amber-100 hover:text-amber-700"}
                    ${l?"justify-center":""}
                  `,title:l?p.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:`w-5 h-5 ${v?"text-white":"text-gray-600"}`}),b&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:w>99?"99+":w})]}),!l&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:p.title})]},p.link)})})}),a.jsx("div",{className:"p-4 border-t border-amber-200 space-y-2",children:a.jsxs(re.button,{onClick:n,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${l?"justify-center":""}
            `,title:l?"Dconnexion":"",children:[a.jsx(ki,{className:"w-5 h-5"}),!l&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${l?"ml-[80px]":"ml-[280px]"}
        `})]})}function Wt({children:e,title:t="Administration"}){const r=it(),n=Pn(),[s,i]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState({inscriptions:0,accidents:0,problemes:0});N.useEffect(()=>{const h=localStorage.getItem("admin_session");if(!h){r(Re("AdminLogin"));return}const y=JSON.parse(h);i(y),m(y.id),g(),u(!1)},[r]),N.useEffect(()=>{s&&n.pathname==="/AdminNotifications"&&m(s.id)},[n.pathname,s]),N.useEffect(()=>{if(!s)return;const h=async()=>{await m(s.id),await g()};h();const y=setInterval(h,3e4);return()=>clearInterval(y)},[s]);const m=async h=>{try{const y=await ft.getByUser(h,"admin"),p=(y==null?void 0:y.data)||y||[];l(p.sort((x,v)=>new Date(v.date||0)-new Date(x.date||0)))}catch(y){console.warn("Erreur lors du chargement des notifications:",y),l([])}},g=async()=>{try{const h=await cr.getAll(),p=((h==null?void 0:h.data)||h||[]).filter(P=>P.type_demande==="inscription"&&(P.statut==="En attente"||P.statut==="En cours de traitement")).length,x=await ln.getAll(),S=((x==null?void 0:x.data)||x||[]).filter(P=>P.statut==="En attente").length,w=await ha.getAll(),_=((w==null?void 0:w.data)||w||[]).filter(P=>P.statut==="En attente"||P.statut==="En cours").length;d({inscriptions:p,accidents:S,problemes:_})}catch(h){console.warn("Erreur lors du chargement des compteurs:",h),d({inscriptions:0,accidents:0,problemes:0})}},j=()=>{localStorage.removeItem("admin_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(Re("Home"))};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:[a.jsx(Xue,{admin:s,notifications:o,newItemsCount:f,onLogout:j,onNotificationClick:()=>{}}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function Jue(){return a.jsx(Wt,{title:"Tableau de bord",children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-orange-600 rounded-3xl flex items-center justify-center shadow-xl mx-auto mb-6",children:a.jsx(Mi,{className:"w-12 h-12 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bienvenue dans l'espace administrateur"}),a.jsx("p",{className:"text-gray-500",children:"Utilisez le menu latral pour accder aux diffrentes sections"})]})})})}function Zue(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState("buses"),[g,j]=N.useState(!1),[h,y]=N.useState(!1),[p,x]=N.useState(null),[v,S]=N.useState(null),[w,b]=N.useState(null),[_,P]=N.useState([]),[C,M]=N.useState({show:!1,id:null}),[A,E]=N.useState({show:!1,id:null}),[T,B]=N.useState({numero:"",capacite:"",chauffeur_id:"",responsable_id:"",trajet_id:"",statut:"Actif"}),[I,D]=N.useState({nom:"",zones:[],heure_depart_matin_a:"07:30",heure_arrivee_matin_a:"08:00",heure_depart_soir_a:"17:00",heure_arrivee_soir_a:"17:30",heure_depart_matin_b:"08:00",heure_arrivee_matin_b:"08:30",heure_depart_soir_b:"17:30",heure_arrivee_soir_b:"18:00"});N.useEffect(()=>{$(),O()},[]);const O=async()=>{try{const k=await Cs.getAll(),z=((k==null?void 0:k.data)||k||[]).filter(le=>le.actif!==!1).map(le=>le.nom);P(z)}catch(k){console.error("Erreur lors du chargement des zones:",k)}},$=async()=>{f(!0),b(null);try{const[k,K,z,le]=await Promise.all([wr.getAll(),ra.getAll(),Vr.getAll(),xa.getAll()]),ge=Array.isArray(k==null?void 0:k.data)?k.data:Array.isArray(k)?k:[],ue=Array.isArray(K==null?void 0:K.data)?K.data:Array.isArray(K)?K:[],U=Array.isArray(z==null?void 0:z.data)?z.data:Array.isArray(z)?z:[],xe=Array.isArray(le==null?void 0:le.data)?le.data:Array.isArray(le)?le:[];r(ge),s(ue),o(U),c(xe)}catch(k){console.error("Erreur lors du chargement:",k),b("Erreur lors du chargement des donnes")}finally{f(!1)}},R=async k=>{k.preventDefault(),b(null);try{if(T.chauffeur_id){const z=t.find(le=>le.chauffeur_id===parseInt(T.chauffeur_id)&&(!p||le.id!==p.id));if(z){b(`Ce chauffeur est dj affect au bus ${z.numero}. Veuillez d'abord retirer son affectation de ce bus avant de l'affecter  un autre bus.`);return}}if(T.responsable_id){const z=t.find(le=>le.responsable_id===parseInt(T.responsable_id)&&(!p||le.id!==p.id));if(z){b(`Ce responsable est dj affect au bus ${z.numero}. Veuillez d'abord retirer son affectation de ce bus avant de l'affecter  un autre bus.`);return}}const K={numero:T.numero,capacite:parseInt(T.capacite),chauffeur_id:T.chauffeur_id||null,responsable_id:T.responsable_id||null,trajet_id:T.trajet_id||null,statut:T.statut||"Actif"};p?await wr.update(p.id,K):await wr.create(K),Ee(),await $()}catch(K){console.error("Erreur lors de l'enregistrement:",K),b("Erreur lors de l'enregistrement du bus: "+(K.message||"Erreur inconnue"))}},Q=async k=>{k.preventDefault(),b(null);try{if(I.zones.length===0){b("Veuillez slectionner au moins une zone");return}if(I.zones.length>2){b("Vous ne pouvez slectionner au maximum que 2 zones");return}const K={...I,zones:I.zones};v?await ra.update(v.id,K):await ra.create(K),Y(),await $()}catch(K){console.error("Erreur lors de l'enregistrement:",K),b("Erreur lors de l'enregistrement du trajet")}},ae=k=>{M({show:!0,id:k})},oe=async()=>{if(C.id)try{await wr.delete(C.id),await $(),M({show:!1,id:null})}catch(k){console.error("Erreur lors de la suppression:",k),b("Erreur lors de la suppression du bus"),M({show:!1,id:null})}},Z=k=>{E({show:!0,id:k})},pe=async()=>{if(A.id)try{await ra.delete(A.id),await $(),E({show:!1,id:null})}catch(k){console.error("Erreur lors de la suppression:",k),b("Erreur lors de la suppression du trajet"),E({show:!1,id:null})}},Ee=()=>{B({numero:"",capacite:"",chauffeur_id:"",responsable_id:"",trajet_id:"",statut:"Actif"}),x(null),j(!1)},Y=()=>{D({nom:"",zones:[],heure_depart_matin_a:"07:30",heure_arrivee_matin_a:"08:00",heure_depart_soir_a:"17:00",heure_arrivee_soir_a:"17:30",heure_depart_matin_b:"08:00",heure_arrivee_matin_b:"08:30",heure_depart_soir_b:"17:30",heure_arrivee_soir_b:"18:00"}),S(null),y(!1)},J=k=>{var K,z,le,ge;B({numero:k.numero||"",capacite:((K=k.capacite)==null?void 0:K.toString())||"",chauffeur_id:((z=k.chauffeur_id)==null?void 0:z.toString())||"",responsable_id:((le=k.responsable_id)==null?void 0:le.toString())||"",trajet_id:((ge=k.trajet_id)==null?void 0:ge.toString())||"",statut:k.statut||"Actif"}),x(k),j(!0)},W=k=>{let K=[];Array.isArray(k.zones)?K=k.zones:typeof k.zones=="string"&&k.zones.trim()&&(K=k.zones.split(",").map(z=>z.trim()).filter(z=>z)),D({...k,zones:K}),S(k),y(!0)},X=k=>{b(null),I.zones.includes(k)?D({...I,zones:I.zones.filter(K=>K!==k)}):I.zones.length<2&&D({...I,zones:[...I.zones,k]})};return u?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des Bus et Trajets",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),w&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:w})}),a.jsxs("div",{className:"flex gap-3 mb-8",children:[a.jsxs(ne,{variant:d==="buses"?"default":"outline",onClick:()=>m("buses"),className:`rounded-xl font-semibold transition-all duration-300 ${d==="buses"?"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white shadow-lg shadow-amber-200":"border-2 border-amber-200 hover:border-amber-300 text-amber-700 hover:bg-amber-50"}`,children:[a.jsx(tt,{className:"w-5 h-5 mr-2"}),"Bus (",t.length,")"]}),a.jsxs(ne,{variant:d==="trajets"?"default":"outline",onClick:()=>m("trajets"),className:`rounded-xl font-semibold transition-all duration-300 ${d==="trajets"?"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white shadow-lg shadow-amber-200":"border-2 border-amber-200 hover:border-amber-300 text-amber-700 hover:bg-amber-50"}`,children:[a.jsx(No,{className:"w-5 h-5 mr-2"}),"Trajets (",n.length,")"]})]}),d==="buses"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-amber-700 via-amber-800 to-amber-700 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(tt,{className:"w-7 h-7 text-white"})}),"Gestion des Bus"]}),a.jsxs(ne,{onClick:()=>j(!0),className:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(Na,{className:"w-5 h-5 mr-2"}),"Ajouter un bus"]})]}),g&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-amber-50 via-white to-amber-50 border-b-2 border-amber-200",children:a.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-amber-900 font-semibold mb-2 block",children:"Numro du bus"}),a.jsx(me,{value:T.numero,onChange:k=>B({...T,numero:k.target.value}),placeholder:"Ex: BUS-001",className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-amber-900 font-semibold mb-2 block",children:"Capacit"}),a.jsx(me,{type:"number",value:T.capacite,onChange:k=>B({...T,capacite:k.target.value}),placeholder:"Ex: 40",className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-amber-900 font-semibold mb-2 block",children:"Chauffeur"}),a.jsxs($e,{value:T.chauffeur_id,onValueChange:k=>B({...T,chauffeur_id:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un chauffeur"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"",children:"Aucun"}),i.filter(k=>!t.some(z=>z.chauffeur_id===k.id&&(!p||z.id!==p.id))||p&&p.chauffeur_id===k.id).map(k=>{const K=p&&p.chauffeur_id===k.id?p:null;return a.jsxs(q,{value:k.id.toString(),children:[k.prenom," ",k.nom,K&&` (bus ${K.numero})`]},k.id)})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-amber-900 font-semibold mb-2 block",children:"Responsable"}),a.jsxs($e,{value:T.responsable_id,onValueChange:k=>B({...T,responsable_id:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un responsable"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"",children:"Aucun"}),l.filter(k=>!t.some(z=>z.responsable_id===k.id&&(!p||z.id!==p.id))||p&&p.responsable_id===k.id).map(k=>{const K=p&&p.responsable_id===k.id?p:null;return a.jsxs(q,{value:k.id.toString(),children:[k.prenom," ",k.nom,K&&` (bus ${K.numero})`]},k.id)})]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-amber-900 font-semibold mb-2 block",children:"Trajet"}),a.jsxs($e,{value:T.trajet_id,onValueChange:k=>B({...T,trajet_id:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un trajet"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"",children:"Aucun"}),n.map(k=>a.jsx(q,{value:k.id.toString(),children:k.nom},k.id))]})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-amber-200",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:Ee,className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 font-semibold px-6",children:[a.jsx(Ke,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),p?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-amber-100",children:[t.map(k=>{const K=i.find(ge=>ge.id===k.chauffeur_id),z=l.find(ge=>ge.id===k.responsable_id),le=n.find(ge=>ge.id===k.trajet_id);return a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-amber-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(tt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-amber-900 mb-3",children:k.numero}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold shadow-md",children:[k.capacite," places"]}),K&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md",children:[K.prenom," ",K.nom]}),z&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:["Resp: ",z.prenom," ",z.nom]}),le&&a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl font-semibold shadow-md",children:le.nom})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>J(k),className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 hover:border-amber-400 w-11 h-11 shadow-md",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>ae(k.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})},k.id)}),t.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(tt,{className:"w-10 h-10 text-amber-600 opacity-60"})}),a.jsx("p",{className:"text-amber-700 font-semibold text-lg",children:"Aucun bus enregistr"}),a.jsx("p",{className:"text-amber-600 text-sm mt-2",children:'Cliquez sur "Ajouter un bus" pour commencer'})]})]})]}),d==="trajets"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-gray-700 via-gray-800 to-gray-700 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(No,{className:"w-7 h-7 text-white"})}),"Gestion des Trajets"]}),a.jsxs(ne,{onClick:()=>y(!0),className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(Na,{className:"w-5 h-5 mr-2"}),"Ajouter un trajet"]})]}),h&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-gray-50 via-white to-gray-50 border-b-2 border-gray-200",children:a.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-900 font-semibold mb-2 block",children:"Nom du trajet"}),a.jsx(me,{value:I.nom,onChange:k=>D({...I,nom:k.target.value}),placeholder:"Ex: Trajet Nord",className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-900 font-semibold flex items-center gap-2 mb-2",children:[a.jsx(Ut,{className:"w-5 h-5 text-gray-600"}),"Zones desservies (max 2)"]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[I.zones.length>0&&a.jsx("div",{className:"flex flex-wrap gap-3 mb-4",children:I.zones.map((k,K)=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl text-sm font-semibold shadow-md",children:[a.jsx(Ut,{className:"w-4 h-4"}),k,a.jsx("button",{type:"button",onClick:()=>X(k),className:"ml-1 hover:bg-gray-800 rounded-full p-0.5 transition-colors",children:a.jsx(Ke,{className:"w-4 h-4"})})]},K))}),a.jsxs($e,{value:"",onValueChange:k=>{k&&k!==""&&X(k)},disabled:I.zones.length>=2,children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12",children:a.jsx(De,{placeholder:I.zones.length>=2?"Maximum 2 zones slectionnes":"Slectionnez une zone"})}),a.jsx(ke,{children:_.filter(k=>!I.zones.includes(k)).map(k=>a.jsx(q,{value:k,children:k},k))})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[I.zones.length,"/2 zones slectionnes"]})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Groupe A"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Matin"}),a.jsx(me,{type:"time",value:I.heure_depart_matin_a,onChange:k=>D({...I,heure_depart_matin_a:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Matin"}),a.jsx(me,{type:"time",value:I.heure_arrivee_matin_a,onChange:k=>D({...I,heure_arrivee_matin_a:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Soir"}),a.jsx(me,{type:"time",value:I.heure_depart_soir_a,onChange:k=>D({...I,heure_depart_soir_a:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Soir"}),a.jsx(me,{type:"time",value:I.heure_arrivee_soir_a,onChange:k=>D({...I,heure_arrivee_soir_a:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Groupe B"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Matin"}),a.jsx(me,{type:"time",value:I.heure_depart_matin_b,onChange:k=>D({...I,heure_depart_matin_b:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Matin"}),a.jsx(me,{type:"time",value:I.heure_arrivee_matin_b,onChange:k=>D({...I,heure_arrivee_matin_b:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Soir"}),a.jsx(me,{type:"time",value:I.heure_depart_soir_b,onChange:k=>D({...I,heure_depart_soir_b:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Soir"}),a.jsx(me,{type:"time",value:I.heure_arrivee_soir_b,onChange:k=>D({...I,heure_arrivee_soir_b:k.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]})]})]}),a.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t-2 border-amber-200",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:Y,className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 font-semibold px-6",children:[a.jsx(Ke,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),v?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-gray-100",children:[n.map(k=>{const K=Array.isArray(k.zones)?k.zones:[];return a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(No,{className:"w-9 h-9 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:k.nom})]}),a.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:K.map((z,le)=>a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl text-sm font-semibold shadow-md flex items-center gap-2",children:[a.jsx(Ut,{className:"w-4 h-4"}),z]},le))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-5 rounded-xl border-2 border-blue-200 shadow-sm",children:[a.jsx("p",{className:"text-blue-900 font-bold text-lg mb-3",children:"Groupe A"}),a.jsxs("div",{className:"space-y-2 text-gray-900",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Matin:"})," ",k.heure_depart_matin_a," - ",k.heure_arrivee_matin_a]}),a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Soir:"})," ",k.heure_depart_soir_a," - ",k.heure_arrivee_soir_a]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-5 rounded-xl border-2 border-indigo-200 shadow-sm",children:[a.jsx("p",{className:"text-indigo-900 font-bold text-lg mb-3",children:"Groupe B"}),a.jsxs("div",{className:"space-y-2 text-gray-900",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Matin:"})," ",k.heure_depart_matin_b," - ",k.heure_arrivee_matin_b]}),a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Soir:"})," ",k.heure_depart_soir_b," - ",k.heure_arrivee_soir_b]})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 ml-6",children:[a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>W(k),className:"rounded-xl border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400 w-11 h-11 shadow-md",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>Z(k.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})},k.id)}),n.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(No,{className:"w-10 h-10 text-gray-600 opacity-60"})}),a.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:"Aucun trajet enregistr"}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:'Cliquez sur "Ajouter un trajet" pour commencer'})]})]})]}),a.jsx(en,{isOpen:C.show,title:"Supprimer le bus",message:"tes-vous sr de vouloir supprimer ce bus ? Cette action est irrversible.",onConfirm:oe,onCancel:()=>M({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(en,{isOpen:A.show,title:"Supprimer le trajet",message:"tes-vous sr de vouloir supprimer ce trajet ? Cette action est irrversible.",onConfirm:pe,onCancel:()=>E({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function Que(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState("chauffeurs"),[d,m]=N.useState(!1),[g,j]=N.useState(!1),[h,y]=N.useState(null),[p,x]=N.useState(null),[v,S]=N.useState({}),[w,b]=N.useState(null),[_,P]=N.useState({show:!1,id:null}),[C,M]=N.useState({show:!1,id:null}),[A,E]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:"",date_embauche:""}),[T,B]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:""});N.useEffect(()=>{I()},[]);const I=async()=>{c(!0),b(null);try{const[J,W,X]=await Promise.all([Vr.getAll(),xa.getAll(),wr.getAll()]),k=(J==null?void 0:J.data)||J||[],K=(W==null?void 0:W.data)||W||[],z=(X==null?void 0:X.data)||X||[],le=Array.isArray(k)?k.map(ue=>{const U=Array.isArray(z)?z.find(xe=>xe.chauffeur_id===ue.id):null;return{...ue,bus:U}}):[],ge=Array.isArray(K)?K.map(ue=>{const U=Array.isArray(z)?z.find(xe=>xe.responsable_id===ue.id):null;return{...ue,bus:U}}):[];r(le),s(ge),o(Array.isArray(z)?z:[])}catch(J){console.error("Erreur lors du chargement:",J),b("Erreur lors du chargement des donnes")}finally{c(!1)}},D=async J=>{J.preventDefault(),b(null);try{let W;h?(W={email:A.email,telephone:A.telephone},A.mot_de_passe&&(W.mot_de_passe=A.mot_de_passe),A.salaire!==""&&A.salaire!==null&&A.salaire!==void 0&&(W.salaire=parseFloat(A.salaire)||0)):W={nom:A.nom,prenom:A.prenom,email:A.email,telephone:A.telephone,mot_de_passe:A.mot_de_passe,salaire:parseInt(A.salaire)||0,date_embauche:A.date_embauche||null,nombre_accidents:0,statut:"Actif"},h?await Vr.update(h.id,W):await Vr.create(W),oe(),await I()}catch(W){console.error("Erreur lors de l'enregistrement:",W),b("Erreur lors de l'enregistrement du chauffeur: "+(W.message||"Erreur inconnue"))}},O=async J=>{J.preventDefault(),b(null);try{let W;p?(W={email:T.email,telephone:T.telephone},T.mot_de_passe&&(W.mot_de_passe=T.mot_de_passe),T.salaire!==""&&T.salaire!==null&&T.salaire!==void 0&&(W.salaire=parseFloat(T.salaire)||0)):W={nom:T.nom,prenom:T.prenom,email:T.email,telephone:T.telephone,mot_de_passe:T.mot_de_passe,salaire:parseFloat(T.salaire)||0,role:"responsable",statut:"Actif"},p?await xa.update(p.id,W):await xa.create(W),Z(),await I()}catch(W){console.error("Erreur lors de l'enregistrement:",W),b("Erreur lors de l'enregistrement du responsable: "+(W.message||"Erreur inconnue"))}},$=J=>{P({show:!0,id:J})},R=async()=>{if(_.id)try{await Vr.delete(_.id),await I(),P({show:!1,id:null})}catch(J){console.error("Erreur lors de la suppression:",J),b("Erreur lors de la suppression du chauffeur"),P({show:!1,id:null})}},Q=J=>{M({show:!0,id:J})},ae=async()=>{if(C.id)try{await xa.delete(C.id),await I(),M({show:!1,id:null})}catch(J){console.error("Erreur lors de la suppression:",J),b("Erreur lors de la suppression du responsable"),M({show:!1,id:null})}},oe=()=>{E({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:"",date_embauche:""}),y(null),m(!1)},Z=()=>{B({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:""}),x(null),j(!1)},pe=J=>{E({nom:J.nom||"",prenom:J.prenom||"",email:J.email||"",telephone:J.telephone||"",mot_de_passe:"",salaire:J.salaire!==null&&J.salaire!==void 0?J.salaire.toString():""}),y(J),m(!0)},Ee=J=>{B({nom:J.nom||"",prenom:J.prenom||"",email:J.email||"",telephone:J.telephone||"",mot_de_passe:"",salaire:J.salaire!==null&&J.salaire!==void 0?J.salaire.toString():""}),x(J),j(!0)},Y=J=>{S(W=>({...W,[J]:!W[J]}))};return l?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Chauffeur & Responsable Bus",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),w&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:w})}),a.jsxs("div",{className:"flex gap-3 mb-8",children:[a.jsxs(ne,{variant:u==="chauffeurs"?"default":"outline",onClick:()=>f("chauffeurs"),className:`rounded-xl font-semibold transition-all duration-300 ${u==="chauffeurs"?"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white shadow-lg shadow-emerald-200":"border-2 border-emerald-200 hover:border-emerald-300 text-emerald-700 hover:bg-emerald-50"}`,children:[a.jsx(Ht,{className:"w-5 h-5 mr-2"}),"Chauffeurs (",t.length,")"]}),a.jsxs(ne,{variant:u==="responsables"?"default":"outline",onClick:()=>f("responsables"),className:`rounded-xl font-semibold transition-all duration-300 ${u==="responsables"?"bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-700 hover:to-violet-800 text-white shadow-lg shadow-violet-200":"border-2 border-violet-200 hover:border-violet-300 text-violet-700 hover:bg-violet-50"}`,children:[a.jsx(yc,{className:"w-5 h-5 mr-2"}),"Responsables Bus (",n.length,")"]})]}),u==="chauffeurs"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-emerald-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-emerald-600 via-emerald-700 to-emerald-600 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Ht,{className:"w-7 h-7 text-white"})}),"Gestion des Chauffeurs"]}),a.jsxs(ne,{onClick:()=>m(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(Na,{className:"w-5 h-5 mr-2"}),"Ajouter un chauffeur"]})]}),d&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-emerald-50 via-white to-emerald-50 border-b-2 border-emerald-200",children:a.jsxs("form",{onSubmit:D,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[!h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Nom"}),a.jsx(me,{value:A.nom,onChange:J=>E({...A,nom:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Prnom"}),a.jsx(me,{value:A.prenom,onChange:J=>E({...A,prenom:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Email"}),a.jsx(me,{type:"email",value:A.email,onChange:J=>E({...A,email:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(me,{value:A.telephone,onChange:J=>E({...A,telephone:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Date d'embauche"}),a.jsx(me,{type:"date",value:A.date_embauche,onChange:J=>E({...A,date_embauche:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Mot de passe"}),a.jsx(me,{type:"password",value:A.mot_de_passe,onChange:J=>E({...A,mot_de_passe:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(me,{type:"number",value:A.salaire,onChange:J=>E({...A,salaire:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]})]}),h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Email"}),a.jsx(me,{type:"email",value:A.email,onChange:J=>E({...A,email:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(me,{value:A.telephone,onChange:J=>E({...A,telephone:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(me,{type:"number",value:A.salaire,onChange:J=>E({...A,salaire:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-emerald-900 font-semibold mb-2 block",children:"Mot de passe (laisser vide pour ne pas changer)"}),a.jsx(me,{type:"password",value:A.mot_de_passe,onChange:J=>E({...A,mot_de_passe:J.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12"})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-emerald-200",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:oe,className:"rounded-xl border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 font-semibold px-6",children:[a.jsx(Ke,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),h?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-emerald-100",children:[t.map(J=>a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Ht,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-emerald-900 mb-3",children:[J.prenom," ",J.nom]}),a.jsx("p",{className:"text-gray-500 mb-2",children:J.telephone}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md",children:[J.salaire!==null&&J.salaire!==void 0?parseFloat(J.salaire).toLocaleString("fr-FR"):"0"," DH"]}),J.bus&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),J.bus.numero]}),a.jsxs("span",{className:`px-4 py-2 rounded-xl font-semibold shadow-md ${J.nombre_accidents>=3?"bg-gradient-to-r from-red-500 to-red-600 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 text-white"}`,children:[J.nombre_accidents||0," accident(s)"]}),J.nombre_accidents>=3&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(Ue,{className:"w-4 h-4"}),"Licenciement"]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mot de passe:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-xs border border-gray-200 break-all max-w-md",children:v[J.id]?J.mot_de_passe_plain||J.user_password||J.mot_de_passe||"N/A":""}),a.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(J.id),className:"rounded-lg border-gray-300 hover:bg-gray-100 flex-shrink-0",children:v[J.id]?a.jsx(zf,{className:"w-4 h-4 text-gray-700"}):a.jsx(Ca,{className:"w-4 h-4 text-gray-700"})})]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>pe(J),className:"rounded-xl border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 w-11 h-11 shadow-md",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>$(J.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})},J.id)),t.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Ht,{className:"w-10 h-10 text-emerald-600 opacity-60"})}),a.jsx("p",{className:"text-emerald-700 font-semibold text-lg",children:"Aucun chauffeur enregistr"}),a.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:'Cliquez sur "Ajouter un chauffeur" pour commencer'})]})]})]}),u==="responsables"&&a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-violet-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-violet-600 via-violet-700 to-violet-600 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(yc,{className:"w-7 h-7 text-white"})}),"Gestion des Responsables Bus"]}),a.jsxs(ne,{onClick:()=>j(!0),className:"bg-gradient-to-r from-violet-500 to-violet-600 hover:from-violet-600 hover:to-violet-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(Na,{className:"w-5 h-5 mr-2"}),"Ajouter un responsable"]})]}),g&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-violet-50 via-white to-violet-50 border-b-2 border-violet-200",children:a.jsxs("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[!p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Nom"}),a.jsx(me,{value:T.nom,onChange:J=>B({...T,nom:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Prnom"}),a.jsx(me,{value:T.prenom,onChange:J=>B({...T,prenom:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Email"}),a.jsx(me,{type:"email",value:T.email,onChange:J=>B({...T,email:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(me,{value:T.telephone,onChange:J=>B({...T,telephone:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(me,{type:"number",value:T.salaire,onChange:J=>B({...T,salaire:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Mot de passe"}),a.jsx(me,{type:"password",value:T.mot_de_passe,onChange:J=>B({...T,mot_de_passe:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Email"}),a.jsx(me,{type:"email",value:T.email,onChange:J=>B({...T,email:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(me,{value:T.telephone,onChange:J=>B({...T,telephone:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(me,{type:"number",value:T.salaire,onChange:J=>B({...T,salaire:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-violet-900 font-semibold mb-2 block",children:"Mot de passe (laisser vide pour ne pas changer)"}),a.jsx(me,{type:"password",value:T.mot_de_passe,onChange:J=>B({...T,mot_de_passe:J.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12"})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-violet-200",children:[a.jsxs(ne,{type:"button",variant:"outline",onClick:Z,className:"rounded-xl border-2 border-violet-300 text-violet-700 hover:bg-violet-50 font-semibold px-6",children:[a.jsx(Ke,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(ne,{type:"submit",className:"bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-700 hover:to-violet-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),p?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-violet-100",children:[n.map(J=>{const W=v[J.id]||!1,X=J.mot_de_passe_plain||J.user_password||J.mot_de_passe||"N/A",k=W?X:"";return a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-violet-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-violet-600 to-violet-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(yc,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-violet-900 mb-3",children:[J.prenom," ",J.nom]}),a.jsx("p",{className:"text-gray-500 mb-2",children:J.telephone}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:J.id}),J.salaire!==null&&J.salaire!==void 0&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:[parseFloat(J.salaire).toLocaleString("fr-FR")," DH"]}),J.bus&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),J.bus.numero]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mot de passe:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-xs border border-gray-200 break-all max-w-md",children:k}),a.jsx(ne,{type:"button",variant:"outline",size:"sm",onClick:()=>Y(J.id),className:"rounded-lg border-gray-300 hover:bg-gray-100 flex-shrink-0",children:W?a.jsx(zf,{className:"w-4 h-4 text-gray-700"}):a.jsx(Ca,{className:"w-4 h-4 text-gray-700"})})]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>Ee(J),className:"rounded-xl border-2 border-violet-300 text-violet-700 hover:bg-violet-50 hover:border-violet-400 w-11 h-11 shadow-md",children:a.jsx(Un,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>Q(J.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})},J.id)}),n.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(yc,{className:"w-10 h-10 text-violet-600 opacity-60"})}),a.jsx("p",{className:"text-violet-700 font-semibold text-lg",children:"Aucun responsable enregistr"}),a.jsx("p",{className:"text-violet-600 text-sm mt-2",children:'Cliquez sur "Ajouter un responsable" pour commencer'})]})]})]}),a.jsx(en,{isOpen:_.show,title:"Supprimer le chauffeur",message:"tes-vous sr de vouloir supprimer ce chauffeur ? Cette action est irrversible.",onConfirm:R,onCancel:()=>P({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(en,{isOpen:C.show,title:"Supprimer le responsable",message:"tes-vous sr de vouloir supprimer ce responsable ? Cette action est irrversible.",onConfirm:ae,onCancel:()=>M({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function ede(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState(""),[d,m]=N.useState("all"),[g,j]=N.useState("all"),[h,y]=N.useState("all"),[p,x]=N.useState("all"),[v,S]=N.useState("all"),[w,b]=N.useState("all"),[_,P]=N.useState(null),[C,M]=N.useState(null),[A,E]=N.useState(!1),[T,B]=N.useState({show:!1,eleve:null}),[I,D]=N.useState({nom:"",prenom:"",classe:"",adresse:"",zone:""});N.useEffect(()=>{O()},[]);const O=async()=>{var W,X,k,K,z,le,ge;c(!0),P(null);try{const ue=await Promise.allSettled([Xt.getAll(),ri.getAll(),Kr.getAll(),wr.getAll(),ra.getAll(),cr.getAll(),Cs.getAll()]),U=ue[0].status==="fulfilled"?Array.isArray((W=ue[0].value)==null?void 0:W.data)?ue[0].value.data:Array.isArray(ue[0].value)?ue[0].value:[]:[],xe=ue[1].status==="fulfilled"?Array.isArray((X=ue[1].value)==null?void 0:X.data)?ue[1].value.data:Array.isArray(ue[1].value)?ue[1].value:[]:[],Pe=ue[2].status==="fulfilled"?Array.isArray((k=ue[2].value)==null?void 0:k.data)?ue[2].value.data:Array.isArray(ue[2].value)?ue[2].value:[]:[],ve=ue[3].status==="fulfilled"?Array.isArray((K=ue[3].value)==null?void 0:K.data)?ue[3].value.data:Array.isArray(ue[3].value)?ue[3].value:[]:[],Ae=ue[4].status==="fulfilled"?Array.isArray((z=ue[4].value)==null?void 0:z.data)?ue[4].value.data:Array.isArray(ue[4].value)?ue[4].value:[]:[],Ie=ue[5].status==="fulfilled"?Array.isArray((le=ue[5].value)==null?void 0:le.data)?ue[5].value.data:Array.isArray(ue[5].value)?ue[5].value:[]:[],we=ue[6].status==="fulfilled"?Array.isArray((ge=ue[6].value)==null?void 0:ge.data)?ue[6].value.data:Array.isArray(ue[6].value)?ue[6].value:[]:[],Te=Array.isArray(Ie)?Ie.filter(ze=>ze.type_demande==="inscription"):[],xt=(Array.isArray(U)?U.filter(ze=>{const He=Array.isArray(Pe)?Pe.find(Ct=>Ct.eleve_id===ze.id&&Ct.statut==="Active"):null,Ze=Array.isArray(Te)?Te.filter(Ct=>Ct.eleve_id===ze.id).sort((Ct,Xe)=>new Date(Xe.date_creation||0)-new Date(Ct.date_creation||0))[0]:null;return(Ze==null?void 0:Ze.statut)==="Refuse"?!1:He!==null||Ze&&["Inscrit","Valide","Paye","En attente de paiement","En cours de traitement"].includes(Ze.statut)}):[]).map(ze=>{const He=Array.isArray(xe)?xe.find(ot=>ot.id===ze.tuteur_id):null,Ze=Array.isArray(Pe)?Pe.find(ot=>ot.eleve_id===ze.id&&ot.statut==="Active"):null,dt=Ze!=null&&Ze.bus_id&&Array.isArray(ve)?ve.find(ot=>ot.id===Ze.bus_id):null,Ct=dt!=null&&dt.trajet_id&&Array.isArray(Ae)?Ae.find(ot=>ot.id===dt.trajet_id):null,Xe=Array.isArray(Te)?Te.filter(ot=>ot.eleve_id===ze.id).sort((ot,rr)=>new Date(rr.date_creation||0)-new Date(ot.date_creation||0))[0]:null,At=(Xe==null?void 0:Xe.statut)==="Inscrit"?"Inscrit":(Ze==null?void 0:Ze.statut)||ze.statut;return{...ze,tuteur:He,inscription:Ze,bus:dt,trajet:Ct,demande_inscription:Xe,statut_affichage:At,type_transport:(Xe==null?void 0:Xe.type_transport)||(Ze==null?void 0:Ze.type_transport)||"Non spcifi",type_abonnement:(Xe==null?void 0:Xe.abonnement)||(Ze==null?void 0:Ze.type_abonnement)||"Non spcifi",groupe:(Xe==null?void 0:Xe.groupe)||(Ze==null?void 0:Ze.groupe)||ze.groupe||"Non spcifi",zone:(Xe==null?void 0:Xe.zone_geographique)||null}});r(xt),s(xe),o(we.filter(ze=>ze.actif!==!1))}catch(ue){console.error("Erreur lors du chargement:",ue),P("Erreur lors du chargement des donnes: "+(ue.message||"Erreur de connexion au serveur"))}finally{c(!1)}},$=t.filter(W=>{var U,xe,Pe,ve,Ae,Ie,we,Te,rt,xt,ze,He,Ze,dt,Ct,Xe,At;const X=u===""||((U=W.id)==null?void 0:U.toString().includes(u))||((xe=W.nom)==null?void 0:xe.toLowerCase().includes(u.toLowerCase()))||((Pe=W.prenom)==null?void 0:Pe.toLowerCase().includes(u.toLowerCase()))||((ve=W.classe)==null?void 0:ve.toLowerCase().includes(u.toLowerCase()))||((Ae=W.adresse)==null?void 0:Ae.toLowerCase().includes(u.toLowerCase()))||((Ie=W.zone)==null?void 0:Ie.toLowerCase().includes(u.toLowerCase()))||((Te=(we=W.tuteur)==null?void 0:we.nom)==null?void 0:Te.toLowerCase().includes(u.toLowerCase()))||((xt=(rt=W.tuteur)==null?void 0:rt.prenom)==null?void 0:xt.toLowerCase().includes(u.toLowerCase()))||((He=(ze=W.tuteur)==null?void 0:ze.telephone)==null?void 0:He.toLowerCase().includes(u.toLowerCase())),k=d==="all"||((Ze=W.inscription)==null?void 0:Ze.statut)===d||W.statut_affichage===d,K=g==="all"||W.zone===g||((dt=W.demande_inscription)==null?void 0:dt.zone_geographique)===g,z=h==="all"||W.classe===h,le=p==="all"||W.groupe===p||((Ct=W.demande_inscription)==null?void 0:Ct.groupe)===p,ge=v==="all"||W.type_transport===v||((Xe=W.demande_inscription)==null?void 0:Xe.type_transport)===v,ue=w==="all"||W.type_abonnement===w||((At=W.demande_inscription)==null?void 0:At.abonnement)===w;return X&&k&&K&&z&&le&&ge&&ue}),R=[...new Set(t.map(W=>W.classe).filter(Boolean))].sort(),Q=[...new Set(t.map(W=>{var X;return W.groupe||((X=W.demande_inscription)==null?void 0:X.groupe)}).filter(Boolean))].sort(),ae=[...new Set(t.map(W=>{var X;return W.type_transport||((X=W.demande_inscription)==null?void 0:X.type_transport)}).filter(Boolean))].sort(),oe=[...new Set(t.map(W=>{var X;return W.type_abonnement||((X=W.demande_inscription)==null?void 0:X.abonnement)}).filter(Boolean))].sort(),Z=W=>({Active:"bg-green-100 text-green-700",Suspendue:"bg-orange-100 text-orange-700",Termine:"bg-gray-100 text-gray-700",Actif:"bg-green-100 text-green-700",Inactif:"bg-yellow-100 text-yellow-700",Inscrit:"bg-emerald-100 text-emerald-700"})[W]||"bg-gray-100 text-gray-700",pe=W=>{var X;M(W),D({nom:W.nom||"",prenom:W.prenom||"",classe:W.classe||"",adresse:W.adresse||"",zone:W.zone||((X=W.demande_inscription)==null?void 0:X.zone_geographique)||""}),E(!0)},Ee=async()=>{if(C){P(null);try{await Xt.update(C.id,{nom:I.nom,prenom:I.prenom,classe:I.classe,adresse:I.adresse}),E(!1),M(null),await O()}catch(W){console.error("Erreur lors de la modification:",W),P("Erreur lors de la modification de l'lve: "+(W.message||"Erreur inconnue"))}}},Y=async()=>{if(T.eleve){P(null);try{await Xt.delete(T.eleve.id),B({show:!1,eleve:null}),await O()}catch(W){console.error("Erreur lors de la suppression:",W),P("Erreur lors de la suppression de l'lve: "+(W.message||"Erreur inconnue")),B({show:!1,eleve:null})}}},J=W=>{B({show:!0,eleve:W})};return l?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des lves",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),_&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:_}),a.jsx("button",{onClick:()=>P(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-indigo-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(pr,{className:"w-7 h-7"}),"Liste des lves"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:[t.length," lve(s) inscrit(s) au total"]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(me,{placeholder:"Rechercher par ID, nom, prnom...",value:u,onChange:W=>f(W.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[a.jsxs($e,{value:d,onValueChange:m,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Statut"})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les statuts"}),a.jsx(q,{value:"Active",children:"Active"}),a.jsx(q,{value:"Suspendue",children:"Suspendue"}),a.jsx(q,{value:"Termine",children:"Termine"}),a.jsx(q,{value:"Inscrit",children:"Inscrit"})]})]}),a.jsxs($e,{value:g,onValueChange:j,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Zone"})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les zones"}),i.map(W=>a.jsx(q,{value:W.nom,children:W.nom},W.id))]})]}),a.jsxs($e,{value:h,onValueChange:y,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(pr,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Classe"})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les classes"}),R.map(W=>a.jsx(q,{value:W,children:W},W))]})]}),a.jsxs($e,{value:p,onValueChange:x,children:[a.jsx(Me,{className:"h-12 rounded-xl",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les groupes"}),Q.map(W=>a.jsx(q,{value:W,children:W},W))]})]}),a.jsxs($e,{value:v,onValueChange:S,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(tt,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Transport"})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les types"}),ae.map(W=>a.jsx(q,{value:W,children:W},W))]})]}),a.jsxs($e,{value:w,onValueChange:b,children:[a.jsx(Me,{className:"h-12 rounded-xl",children:a.jsx(De,{placeholder:"Abonnement"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les abonnements"}),oe.map(W=>a.jsx(q,{value:W,children:W},W))]})]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:$.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(pr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun lve trouv"})]}):$.map(W=>{var X,k,K,z,le;return a.jsx("div",{className:"p-6 hover:bg-blue-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(pt,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[W.nom," ",W.prenom]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(pr,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"font-medium",children:"Classe:"}),a.jsx("span",{children:W.classe||"Non spcifi"}),W.groupe&&W.groupe!=="Non spcifi"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"font-medium",children:"Groupe:"}),a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-md",children:W.groupe})]})]}),W.adresse&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Ut,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"font-medium",children:"Adresse:"}),a.jsx("span",{children:W.adresse})]}),W.zone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Ut,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-medium",children:"Zone:"}),a.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-md",children:W.zone})]}),W.tuteur&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(pt,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"font-medium",children:"Tuteur:"}),a.jsxs("span",{children:[W.tuteur.prenom," ",W.tuteur.nom]})]}),W.tuteur.telephone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Wi,{className:"w-4 h-4 text-indigo-500"}),a.jsx("span",{className:"font-medium",children:"Tl:"}),a.jsx("span",{children:W.tuteur.telephone})]})]}),W.bus&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(tt,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-medium",children:"Bus:"}),a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded-md font-semibold",children:W.bus.numero||W.bus.immatriculation})]}),W.type_transport&&W.type_transport!=="Non spcifi"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Transport:"}),a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-md",children:W.type_transport})]}),W.type_abonnement&&W.type_abonnement!=="Non spcifi"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Abonnement:"}),a.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-md",children:W.type_abonnement})]}),((X=W.inscription)==null?void 0:X.date_debut)&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Qr,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"font-medium",children:"Inscription depuis:"}),a.jsx("span",{children:Se(new Date(W.inscription.date_debut),"dd/MM/yyyy")})]}),((k=W.demande_inscription)==null?void 0:k.code_verification)&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(ZD,{className:"w-4 h-4 text-teal-500"}),a.jsx("span",{className:"font-medium",children:"Code de vrification:"}),a.jsx("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 rounded-md font-mono font-semibold",children:W.demande_inscription.code_verification})]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-3",children:[a.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-medium ${Z(W.statut_affichage||((K=W.inscription)==null?void 0:K.statut)||W.statut)}`,children:W.statut_affichage||((z=W.inscription)==null?void 0:z.statut)||W.statut}),((le=W.inscription)==null?void 0:le.montant_mensuel)&&a.jsxs("span",{className:"text-sm text-gray-600 font-semibold",children:[W.inscription.montant_mensuel," DH/mois"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ne,{onClick:()=>pe(W),className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(ne,{onClick:()=>J(W),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})},W.id)})})]}),A&&C&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-amber-500 to-yellow-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Un,{className:"w-6 h-6"}),"Modifier l'lve"]}),a.jsx("button",{onClick:()=>{E(!1),M(null)},className:"text-white hover:text-amber-100 transition-colors",children:a.jsx(Lr,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Nom"}),a.jsx(me,{value:I.nom,onChange:W=>D({...I,nom:W.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Prnom"}),a.jsx(me,{value:I.prenom,onChange:W=>D({...I,prenom:W.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Classe"}),a.jsx(me,{value:I.classe,onChange:W=>D({...I,classe:W.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Adresse"}),a.jsx(me,{value:I.adresse,onChange:W=>D({...I,adresse:W.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500"})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-semibold mb-2 block",children:"Zone gographique"}),a.jsxs($e,{value:I.zone,onValueChange:W=>D({...I,zone:W}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",children:a.jsx(De,{placeholder:"Slectionner une zone"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"",children:"Aucune zone"}),i.map(W=>a.jsx(q,{value:W.nom,children:W.nom},W.id))]})]})]})]}),_&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl",children:_}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[a.jsx(ne,{onClick:()=>{E(!1),M(null)},variant:"outline",className:"rounded-xl",children:"Annuler"}),a.jsx(ne,{onClick:Ee,className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:"Enregistrer"})]})]})]})}),a.jsx(en,{isOpen:T.show,title:"Supprimer l'lve",message:T.eleve?`tes-vous sr de vouloir supprimer l'lve ${T.eleve.prenom} ${T.eleve.nom} ?`:"",onConfirm:Y,onCancel:()=>B({show:!1,eleve:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function tde(){var X,k,K,z,le,ge,ue;const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState(!0),[g,j]=N.useState(""),[h,y]=N.useState("all"),[p,x]=N.useState(null),[v,S]=N.useState(!1),[w,b]=N.useState(!1),[_,P]=N.useState([]),[C,M]=N.useState(null),[A,E]=N.useState(null),[T,B]=N.useState(null),[I,D]=N.useState({date_debut:Se(new Date,"yyyy-MM-dd"),date_fin:"2026-02-01"}),[O,$]=N.useState(null);N.useEffect(()=>{const U=localStorage.getItem("admin_session");if(U)try{const xe=JSON.parse(U);B(xe)}catch(xe){console.warn("Erreur parsing admin session:",xe)}R()},[]);const R=async()=>{var U,xe,Pe,ve,Ae,Ie;m(!0),M(null);try{const we=await Promise.allSettled([Xt.getAll(),wr.getAll(),ra.getAll(),Kr.getAll(),ri.getAll(),cr.getAll()]),Te=we[0].status==="fulfilled"?Array.isArray((U=we[0].value)==null?void 0:U.data)?we[0].value.data:Array.isArray(we[0].value)?we[0].value:[]:[],rt=we[1].status==="fulfilled"?Array.isArray((xe=we[1].value)==null?void 0:xe.data)?we[1].value.data:Array.isArray(we[1].value)?we[1].value:[]:[],xt=we[2].status==="fulfilled"?Array.isArray((Pe=we[2].value)==null?void 0:Pe.data)?we[2].value.data:Array.isArray(we[2].value)?we[2].value:[]:[],ze=we[3].status==="fulfilled"?Array.isArray((ve=we[3].value)==null?void 0:ve.data)?we[3].value.data:Array.isArray(we[3].value)?we[3].value:[]:[],He=we[4].status==="fulfilled"?Array.isArray((Ae=we[4].value)==null?void 0:Ae.data)?we[4].value.data:Array.isArray(we[4].value)?we[4].value:[]:[],Ze=we[5].status==="fulfilled"?Array.isArray((Ie=we[5].value)==null?void 0:Ie.data)?we[5].value.data:Array.isArray(we[5].value)?we[5].value:[]:[],dt=Array.isArray(Ze)?Ze.filter(At=>At.type_demande==="inscription"):[],Ct=Array.isArray(Te)?Te.filter(At=>dt.some(ot=>ot.eleve_id===At.id)).map(At=>{const ot=Array.isArray(He)?He.find(et=>et.id===At.tuteur_id):null,rr=Array.isArray(ze)?ze.find(et=>et.eleve_id===At.id&&et.statut!=="Termine"):null,nn=rr!=null&&rr.bus_id&&Array.isArray(rt)?rt.find(et=>et.id===rr.bus_id):null,Wr=Array.isArray(dt)?dt.filter(et=>et.eleve_id===At.id).sort((et,Da)=>new Date(Da.date_creation||0)-new Date(et.date_creation||0))[0]:null;return{...At,tuteur:ot,inscription:rr,bus:nn,demande_inscription:Wr,statut_demande:(Wr==null?void 0:Wr.statut)||"En attente"}}):[];r(Ct),s(rt),o(xt),c(ze),f(He);const Xe=we.filter(At=>At.status==="rejected").length;Xe>0&&console.warn(`${Xe} appel(s) API ont chou`)}catch(we){console.error("Erreur lors du chargement:",we),M("Erreur lors du chargement des donnes: "+(we.message||"Erreur de connexion au serveur"))}finally{m(!1)}},Q=U=>{const xe=new Date,Pe=Se(xe,"yyyy-MM-dd");let ve;if(U==="Annuel")ve="2026-06-30";else{const Ae=new Date(xe);Ae.setMonth(Ae.getMonth()+1),ve=Se(Ae,"yyyy-MM-dd")}return{dateDebut:Pe,dateFin:ve}},ae=async U=>{var Ae,Ie;x(U),M(null);let xe="Mensuel";if((Ae=U.demande_inscription)!=null&&Ae.description)try{xe=(typeof U.demande_inscription.description=="string"?JSON.parse(U.demande_inscription.description):U.demande_inscription.description).abonnement||"Mensuel"}catch(we){console.warn("Erreur parsing description:",we)}const{dateDebut:Pe,dateFin:ve}=Q(xe);D({date_debut:Pe,date_fin:ve});try{const we=((Ie=U.demande_inscription)==null?void 0:Ie.zone_geographique)||U.zone;if(we){const Te=await wr.getByZone(we);if(console.log(' Rponse getByZone pour zone "'+we+'":',Te),Te.debug&&(E(Te.debug),console.log(" Informations de dbogage:",Te.debug)),Te.success&&Te.data&&Te.data.length>0){const rt=Te.data.map(xt=>{const ze=i.find(He=>He.id===xt.trajet_id);return{...xt,trajet:ze,placesRestantes:xt.places_restantes||0,elevesInscrits:xt.eleves_inscrits||0}});P(rt),M(null)}else P([]),M(Te.message||`Aucun bus disponible pour la zone "${we}"`)}else P([]),M("Aucune zone gographique dfinie pour cet lve")}catch(we){console.error("Erreur lors du chargement des bus:",we),P([]),M("Erreur lors du chargement des bus disponibles: "+(we.message||"Erreur inconnue"))}b(!0)},oe=async()=>{var U;if(!p||!((U=p.demande_inscription)!=null&&U.id)){M("lve ou demande d'inscription manquant.");return}if(!(T!=null&&T.type_id)){M("Session administrateur invalide. Veuillez vous reconnecter.");return}M(null);try{const xe=await cr.traiter(p.demande_inscription.id,"En attente de paiement","Inscription valide par l'administrateur",null,T.type_id);if(!xe||!xe.success)throw new Error((xe==null?void 0:xe.message)||"Erreur lors du traitement de la demande");b(!1),x(null);const Pe=new Date,ve=new Date(Pe);ve.setMonth(ve.getMonth()+1),D({date_debut:Se(Pe,"yyyy-MM-dd"),date_fin:Se(ve,"yyyy-MM-dd")}),await R()}catch(xe){console.error("Erreur lors de la validation:",xe),M("Erreur lors de la validation de l'inscription: "+(xe.message||"Erreur inconnue"))}},Z=async(U,xe)=>{var Pe;if(xe){if(!(T!=null&&T.type_id)){M("Session administrateur invalide. Veuillez vous reconnecter.");return}M(null);try{(Pe=U.demande_inscription)!=null&&Pe.id&&await cr.traiter(U.demande_inscription.id,"Refuse",`Inscription refuse: ${xe}`,xe,T.type_id),U.inscription&&await Kr.update(U.inscription.id,{statut:"Termine"}),await R()}catch(ve){console.error("Erreur lors du refus:",ve),M("Erreur lors du refus de l'inscription: "+ve.message)}}},pe=async U=>{var xe;x(U),M(null);try{let Pe=[];const ve=((xe=U.demande_inscription)==null?void 0:xe.zone_geographique)||U.zone;if(!ve){M("Aucune zone gographique dfinie pour cet lve");return}try{const Ae=await wr.getByZone(ve);Ae.success&&Ae.data&&Ae.data.length>0&&(Pe=Ae.data.map(Ie=>{const we=i.find(Te=>Te.id===Ie.trajet_id);return{...Ie,trajet:we,placesRestantes:Ie.places_restantes||0,elevesInscrits:Ie.eleves_inscrits||0}}))}catch(Ae){console.error("Erreur lors du chargement des bus par zone:",Ae),M("Erreur lors du chargement des bus disponibles pour cette zone");return}if(Pe.length===0){M(`Aucun bus disponible pour la zone "${ve}"`);return}P(Pe),S(!0)}catch(Pe){console.error("Erreur lors de la prparation de l'affectation:",Pe),M("Erreur lors du chargement des bus disponibles")}},Ee=async U=>{var xe,Pe,ve;if(p){M(null);try{const Ae=n.find(ze=>ze.id===U);if(!Ae){M("Bus non trouv");return}let Ie=500;if((xe=p.demande_inscription)!=null&&xe.description){const ze=wy(p.demande_inscription.description),He=ej(ze.type_transport,ze.abonnement);Ie=ze.abonnement==="Annuel"?He/10:He}let we="Mensuel";(Pe=p.demande_inscription)!=null&&Pe.description&&(we=wy(p.demande_inscription.description).abonnement||"Mensuel");const{dateDebut:Te,dateFin:rt}=Q(we),xt=l.find(ze=>ze.eleve_id===p.id&&(ze.statut==="Active"||ze.statut==="active"));if(xt){const ze={bus_id:U,date_debut:Te,date_fin:rt,montant_mensuel:Ie,statut:"Active"},He=await Kr.update(xt.id,ze);if(!He||!He.success)throw new Error((He==null?void 0:He.message)||"Erreur lors de la mise  jour de l'inscription")}else{const ze={eleve_id:p.id,bus_id:U,date_debut:Te,date_fin:rt,montant_mensuel:Ie,statut:"Active"},He=await Kr.create(ze);if(!He||!He.success)throw new Error((He==null?void 0:He.message)||"Erreur lors de la cration de l'inscription")}if((ve=p.demande_inscription)!=null&&ve.id)try{await cr.traiter(p.demande_inscription.id,"Inscrit","lve affect  un bus",null,T==null?void 0:T.type_id)}catch(ze){console.warn("Erreur lors de la mise  jour du statut de la demande:",ze)}try{await Xt.update(p.id,{statut:"Actif"})}catch(ze){console.warn("Erreur lors de l'activation de l'lve:",ze)}if(p.tuteur_id)try{await ft.create({destinataire_id:p.tuteur_id,destinataire_type:"tuteur",titre:"Affectation au bus",message:`${p.prenom} ${p.nom} a t affect(e) au bus ${Ae.numero}.`,type:"info",date:new Date().toISOString()})}catch(ze){console.warn("Erreur lors de l'envoi de la notification:",ze)}S(!1),x(null),await R()}catch(Ae){console.error("Erreur lors de l'affectation:",Ae),M("Erreur lors de l'affectation au bus: "+(Ae.message||"Erreur inconnue"))}}},Y=t.filter(U=>{var ve,Ae,Ie,we;const xe=((ve=U.nom)==null?void 0:ve.toLowerCase().includes(g.toLowerCase()))||((Ae=U.prenom)==null?void 0:Ae.toLowerCase().includes(g.toLowerCase()))||((Ie=U.adresse)==null?void 0:Ie.toLowerCase().includes(g.toLowerCase()))||((we=U.classe)==null?void 0:we.toLowerCase().includes(g.toLowerCase())),Pe=h==="all"||U.statut_demande===h;return xe&&Pe}),J=U=>({"En attente":"bg-yellow-100 text-yellow-700","En cours de traitement":"bg-blue-100 text-blue-700","En attente de paiement":"bg-orange-100 text-orange-700",Paye:"bg-amber-100 text-amber-700",Valide:"bg-green-100 text-green-700",Inscrit:"bg-emerald-100 text-emerald-700",Refuse:"bg-red-100 text-red-700",Active:"bg-emerald-100 text-emerald-700",Suspendue:"bg-orange-100 text-orange-700",Termine:"bg-gray-100 text-gray-700"})[U]||"bg-gray-100 text-gray-700",W=async(U,xe)=>{try{await navigator.clipboard.writeText(U),$(xe),setTimeout(()=>$(null),2e3)}catch(Pe){console.error("Erreur lors de la copie:",Pe)}};return d?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des Inscriptions",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),C&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:C}),a.jsx("button",{onClick:()=>M(null),className:"text-red-500 hover:text-red-700",children:a.jsx(Lr,{className:"w-5 h-5"})})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-cyan-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Mx,{className:"w-7 h-7"}),"Gestion des Inscriptions des lves"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["Inscriptions envoyes par les tuteurs  ",t.length," lve(s)  ",l.filter(U=>U.statut==="Active").length," inscription(s) active(s)"]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(me,{placeholder:"Rechercher par nom, prnom, adresse ou classe...",value:g,onChange:U=>j(U.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs($e,{value:h,onValueChange:y,children:[a.jsxs(Me,{className:"w-full md:w-48 h-12 rounded-xl",children:[a.jsx(ca,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Statut"})]}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les statuts"}),a.jsx(q,{value:"En attente",children:"En attente"}),a.jsx(q,{value:"En cours de traitement",children:"En cours de traitement"}),a.jsx(q,{value:"En attente de paiement",children:"En attente de paiement"}),a.jsx(q,{value:"Paye",children:"Paye"}),a.jsx(q,{value:"Valide",children:"Valide"}),a.jsx(q,{value:"Inscrit",children:"Inscrit"}),a.jsx(q,{value:"Refuse",children:"Refuse"})]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:Y.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Mx,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune inscription trouve"})]}):Y.map(U=>{var xe,Pe,ve;return a.jsx("div",{className:"p-6 hover:bg-amber-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(pt,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[U.nom," ",U.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:U.classe}),U.date_naissance&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:Se(new Date(U.date_naissance),"dd/MM/yyyy")})]}),U.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ut,{className:"w-3 h-3"}),U.adresse]})]})]}),U.tuteur&&a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Tuteur: ",U.tuteur.prenom," ",U.tuteur.nom,"  ",U.tuteur.telephone||U.tuteur.email]}),U.bus&&a.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[a.jsx(tt,{className:"w-3 h-3"}),"Bus: ",U.bus.numero]}),U.inscription&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Inscription du ",Se(new Date(U.inscription.date_inscription),"dd/MM/yyyy")," ",U.inscription.montant_mensuel," DH/mois"]}),((xe=U.demande_inscription)==null?void 0:xe.montant_facture)&&(()=>{try{const Ae=typeof U.demande_inscription.description=="string"?JSON.parse(U.demande_inscription.description):U.demande_inscription.description||{},Ie=Ae.taux_reduction||0,we=Ae.montant_avant_reduction,Te=Ae.montant_reduction||0,rt=Ae.rang_eleve,xt=Ae.rang_eleve_texte||(rt?`${rt}me lve`:"");return Ie>0&&we?a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"text-xs font-semibold text-blue-700 bg-blue-50 px-2 py-1 rounded-lg border border-blue-200",children:xt||"Rduction familiale"}),a.jsxs("span",{className:"text-xs font-medium text-green-700 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:["Rduction ",Math.round(Ie*100),"%"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[a.jsxs("span",{className:"text-gray-500 line-through",children:[parseFloat(we).toFixed(2)," DH"]}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("span",{className:"font-bold text-amber-600",children:[parseFloat(U.demande_inscription.montant_facture).toFixed(2)," DH"]}),a.jsxs("span",{className:"text-green-600 font-medium",children:["(conomie: ",parseFloat(Ae.montant_reduction||0).toFixed(2)," DH)"]})]})]}):null}catch{return null}})(),((Pe=U.demande_inscription)==null?void 0:Pe.code_verification)&&(U.statut_demande==="En attente de paiement"||U.statut_demande==="Paye"||U.statut_demande==="Valide"||U.statut_demande==="Inscrit")&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Code de vrification:"}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-amber-100 text-amber-800 rounded-lg border border-amber-200",children:[a.jsx("span",{className:"font-mono font-bold text-sm",children:U.demande_inscription.code_verification}),a.jsx("button",{onClick:()=>W(U.demande_inscription.code_verification,U.id),className:"p-1 hover:bg-amber-200 rounded transition-colors",title:"Copier le code",children:O===U.id?a.jsx(ya,{className:"w-3 h-3 text-green-600"}):a.jsx(Aw,{className:"w-3 h-3 text-amber-700"})})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-medium ${J(U.statut_demande||"En attente")}`,children:U.statut_demande||"En attente"}),a.jsxs(ne,{variant:"outline",onClick:()=>{var Ae;if(x(U),(U.statut_demande==="En attente"||U.statut_demande==="En cours de traitement")&&!U.inscription){let Ie="Mensuel";if((Ae=U.demande_inscription)!=null&&Ae.description)try{Ie=(typeof U.demande_inscription.description=="string"?JSON.parse(U.demande_inscription.description):U.demande_inscription.description).abonnement||"Mensuel"}catch(rt){console.warn("Erreur parsing description:",rt)}const{dateDebut:we,dateFin:Te}=Q(Ie);D({date_debut:we,date_fin:Te})}b(!0)},className:"rounded-xl",children:[a.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Dtails"]}),(U.statut_demande==="En attente"||U.statut_demande==="En cours de traitement")&&!U.inscription&&a.jsxs(a.Fragment,{children:[a.jsxs(ne,{onClick:()=>ae(U),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Valider"]}),a.jsxs(ne,{onClick:()=>{const Ae=prompt("Motif du refus:");Ae&&Z(U,Ae)},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Lr,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),U.statut_demande==="Paye"&&!((ve=U.inscription)!=null&&ve.bus_id)&&a.jsxs(ne,{onClick:()=>pe(U),className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:[a.jsx(tt,{className:"w-4 h-4 mr-2"}),"Affecter un bus"]})]})]})},U.id)})})]}),w&&p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ca,{className:"w-5 h-5"}),"Dtails de l'inscription"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:[p.prenom," ",p.nom]})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-blue-500"}),"Informations de l'lve"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("p",{className:"text-gray-800",children:p.nom})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Prnom"}),a.jsx("p",{className:"text-gray-800",children:p.prenom})]}),p.date_naissance&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de naissance"}),a.jsx("p",{className:"text-gray-800",children:Se(new Date(p.date_naissance),"dd/MM/yyyy",{locale:Jt})})]}),p.classe&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Classe"}),a.jsx("p",{className:"text-gray-800",children:p.classe})]}),p.adresse&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Adresse"]}),a.jsx("p",{className:"text-gray-800",children:p.adresse})]}),((X=p.demande_inscription)==null?void 0:X.zone_geographique)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Zone gographique"}),a.jsx("p",{className:"text-gray-800",children:p.demande_inscription.zone_geographique})]})]})]}),p.tuteur&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(pt,{className:"w-5 h-5 text-green-500"}),"Informations du tuteur"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.nom})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Prnom"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.prenom})]}),p.tuteur.telephone&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tlphone"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.telephone})]}),p.tuteur.email&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.email})]})]})]}),p.demande_inscription&&(()=>{let U={};try{U=typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{}}catch(xe){console.warn("Erreur parsing description:",xe)}return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(wa,{className:"w-5 h-5 text-amber-500"}),"Informations de l'inscription"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[U.type_transport&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de transport"}),a.jsx("p",{className:"text-gray-800",children:U.type_transport})]}),U.abonnement&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type d'abonnement"}),a.jsx("p",{className:"text-gray-800 font-semibold",children:U.abonnement})]}),U.groupe&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Groupe horaire"}),a.jsx("p",{className:"text-gray-800",children:U.groupe})]}),U.niveau&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Niveau"}),a.jsx("p",{className:"text-gray-800",children:U.niveau})]}),U.lien_parente&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Lien de parent"}),a.jsx("p",{className:"text-gray-800",children:U.lien_parente})]}),p.demande_inscription.date_creation&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de la demande"}),a.jsx("p",{className:"text-gray-800",children:Se(new Date(p.demande_inscription.date_creation),"dd/MM/yyyy  HH:mm",{locale:Jt})})]}),p.demande_inscription.code_verification&&(p.statut_demande==="En attente de paiement"||p.statut_demande==="Paye"||p.statut_demande==="Valide"||p.statut_demande==="Inscrit")&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Code de vrification du paiement"}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex-1 px-4 py-3 bg-amber-50 border-2 border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code  donner au tuteur pour valider le paiement:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono font-bold text-xl text-amber-800",children:p.demande_inscription.code_verification}),a.jsx("button",{onClick:()=>W(p.demande_inscription.code_verification,p.id),className:"p-2 hover:bg-amber-100 rounded-lg transition-colors",title:"Copier le code",children:O===p.id?a.jsx(ya,{className:"w-5 h-5 text-green-600"}):a.jsx(Aw,{className:"w-5 h-5 text-amber-700"})})]}),O===p.id&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Code copi dans le presse-papiers"})]})})]}),p.demande_inscription.montant_facture&&(()=>{try{const xe=typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{},Pe=xe.montant_avant_reduction,ve=xe.taux_reduction||0,Ae=xe.montant_reduction||0,Ie=parseFloat(p.demande_inscription.montant_facture);return ve>0&&Pe?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Dtails de la facture"}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2 border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Prix initial:"}),a.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[parseFloat(Pe).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-green-600",children:["Rduction (",Math.round(ve*100),"%):"]}),a.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",parseFloat(Ae).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]}),a.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between items-center",children:[a.jsx("span",{className:"text-base font-semibold text-gray-800",children:"Prix final  payer:"}),a.jsxs("span",{className:"text-xl font-bold text-amber-600",children:[Ie.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Montant de la facture"}),a.jsxs("p",{className:"text-gray-800 font-semibold text-lg",children:[Ie.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}catch{return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Montant de la facture"}),a.jsxs("p",{className:"text-gray-800 font-semibold text-lg",children:[parseFloat(p.demande_inscription.montant_facture).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}})()]})]})})(),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-blue-500"}),"Bus disponibles pour cette zone"]}),C&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm",children:C}),_.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[a.jsxs("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:[' Aucun bus disponible pour la zone "',((k=p.demande_inscription)==null?void 0:k.zone_geographique)||p.zone||"non spcifie",'"']}),a.jsx("p",{className:"text-xs text-yellow-700 mb-3",children:"Vrifiez que des trajets couvrent cette zone et que des bus actifs y sont assigns avant de valider l'inscription."}),A&&a.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-yellow-300",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Informations de diagnostic:"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("li",{children:[" Total bus actifs: ",A.total_bus_actifs]}),a.jsxs("li",{children:[" Bus sans trajet assign: ",A.bus_sans_trajet]}),a.jsxs("li",{children:[" Trajets sans zones dfinies: ",A.bus_trajets_vides]}),a.jsxs("li",{children:[" Bus avec zones ne correspondant pas: ",A.bus_zones_non_match]}),A.bus_pleins>0&&a.jsxs("li",{children:[" Bus trouvs mais pleins (pas de places): ",A.bus_pleins]})]}),A.exemples_trajets_zones&&A.exemples_trajets_zones.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-yellow-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Exemples de zones dans les trajets:"}),A.exemples_trajets_zones.map((U,xe)=>a.jsxs("div",{className:"text-xs text-gray-600 mb-2 p-2 bg-gray-50 rounded",children:[a.jsxs("p",{className:"font-medium",children:["Bus ",U.bus_numero," - ",U.trajet_nom,":"]}),a.jsxs("p",{className:"text-gray-500",children:["Zones: ",Array.isArray(U.zones)?U.zones.join(", "):U.zones]}),a.jsxs("p",{className:"text-gray-500",children:["Places restantes: ",U.places_restantes]})]},xe))]})]})]}):a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200",children:[a.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Zone de l'lve: ",a.jsx("span",{className:"font-bold",children:((K=p.demande_inscription)==null?void 0:K.zone_geographique)||p.zone||"Non spcifie"})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[_.length," bus disponible(s) pour cette zone (donnes relles de la base de donnes)"]})]}),_.map(U=>{var Pe;let xe=[];if(U.trajet_zones)try{const ve=JSON.parse(U.trajet_zones);xe=Array.isArray(ve)?ve:[U.trajet_zones]}catch{xe=typeof U.trajet_zones=="string"?U.trajet_zones.split(",").map(ve=>ve.trim()):[]}return a.jsx("div",{className:"p-4 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-colors bg-white",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:U.numero}),U.statut==="Actif"&&a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-lg",children:"Actif"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Marque/Modle:"})," ",U.marque||"N/A"," ",U.modele||""]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Plaque:"})," ",U.plaque||"N/A"]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Trajet:"})," ",((Pe=U.trajet)==null?void 0:Pe.nom)||U.trajet_nom||"Non assign"]}),xe.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Zones couvertes:"}),xe.map((ve,Ae)=>{var Ie;return a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${ve.trim().toLowerCase()===(((Ie=p==null?void 0:p.demande_inscription)==null?void 0:Ie.zone_geographique)||(p==null?void 0:p.zone)||"").toLowerCase()?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-600"}`,children:ve.trim()},Ae)})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Capacit:"})," ",U.capacite||"N/A"," places"]}),a.jsxs("span",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"lves inscrits:"})," ",U.elevesInscrits||U.eleves_inscrits||0]})]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsx("p",{className:`text-3xl font-bold ${(U.placesRestantes||U.places_restantes||0)>5?"text-green-600":(U.placesRestantes||U.places_restantes||0)>0?"text-orange-500":"text-red-500"}`,children:U.placesRestantes||U.places_restantes||0}),a.jsx("p",{className:"text-xs text-gray-500",children:"places restantes"})]})]})},U.id)})]})]}),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(mt,{className:"w-5 h-5 text-green-500"}),"Valider l'inscription"]}),_.length===0&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-xl",children:[a.jsx("p",{className:"text-sm text-red-800 font-medium mb-1",children:" Validation impossible"}),a.jsxs("p",{className:"text-xs text-red-700",children:[`Vous ne pouvez pas valider cette inscription car aucun bus n'est disponible pour la zone "`,((z=p.demande_inscription)==null?void 0:z.zone_geographique)||p.zone||"non spcifie",`". Veuillez d'abord crer un trajet couvrant cette zone et y affecter un bus actif.`]})]}),_.length>0&&a.jsx("div",{className:"mb-4 p-4 bg-green-50 border-2 border-green-200 rounded-xl",children:a.jsxs("p",{className:"text-sm text-green-800 font-medium",children:[" ",_.length," bus disponible(s) pour cette zone. Vous pouvez valider l'inscription."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Qr,{className:"w-4 h-4 inline mr-1"}),"Date de dbut"]}),a.jsx(me,{type:"date",value:I.date_debut,disabled:!0,className:"rounded-xl bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Date automatique (date courante)"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Qr,{className:"w-4 h-4 inline mr-1"}),"Date de fin"]}),a.jsx(me,{type:"date",value:I.date_fin,disabled:!0,className:"rounded-xl bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(()=>{var xe;let U="Mensuel";if((xe=p.demande_inscription)!=null&&xe.description)try{U=(typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{}).abonnement||"Mensuel"}catch{}return U==="Annuel"?"Date automatique (30/06/2026 pour abonnement annuel)":"Date automatique (date de dbut + 1 mois pour abonnement mensuel)"})()})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3 justify-end",children:[a.jsx(ne,{variant:"outline",onClick:()=>{b(!1),x(null)},className:"rounded-xl",children:"Fermer"}),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs(ne,{onClick:oe,disabled:_.length===0,className:`rounded-xl ${_.length===0?"bg-gray-400 hover:bg-gray-400 cursor-not-allowed opacity-60":"bg-green-500 hover:bg-green-600"} text-white`,title:_.length===0?"Aucun bus disponible pour cette zone. Impossible de valider l'inscription.":"",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Valider l'inscription"]})]})]})}),v&&p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Affectation de bus"}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Nom:"})," ",p.nom]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Prnom:"})," ",p.prenom]}),((le=p.demande_inscription)==null?void 0:le.zone_geographique)&&a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Zone:"})," ",p.demande_inscription.zone_geographique]}),p.adresse&&a.jsxs("p",{className:"text-gray-700 flex items-center gap-1",children:[a.jsx(Ut,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Adresse:"})," ",p.adresse]})]})]}),a.jsx("div",{className:"p-6",children:_.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-semibold text-gray-600",children:"Aucun bus disponible"}),a.jsxs("p",{className:"text-sm mt-1",children:[`Aucun bus avec des places disponibles n'est assign  un trajet couvrant la zone "`,((ge=p==null?void 0:p.demande_inscription)==null?void 0:ge.zone_geographique)||(p==null?void 0:p.zone)||"inconnue",'"']}),a.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"Vrifiez que des trajets couvrent cette zone et que des bus actifs y sont assigns"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200 mb-4",children:[a.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Zone de l'lve: ",a.jsx("span",{className:"font-bold",children:((ue=p==null?void 0:p.demande_inscription)==null?void 0:ue.zone_geographique)||(p==null?void 0:p.zone)||"Non spcifie"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Seuls les bus dont le trajet couvre cette zone sont affichs"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[_.length," bus disponible(s) pour cette zone:"]}),_.map(U=>{var Pe;let xe=[];if(U.trajet_zones)try{const ve=JSON.parse(U.trajet_zones);xe=Array.isArray(ve)?ve:[U.trajet_zones]}catch{xe=U.trajet_zones.split(",").map(ve=>ve.trim())}return a.jsx("div",{className:"p-4 rounded-2xl border-2 border-gray-100 hover:border-amber-200 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:U.numero}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Trajet: ",((Pe=U.trajet)==null?void 0:Pe.nom)||U.trajet_nom||"Non assign"]}),xe.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Zones couvertes:"}),xe.map((ve,Ae)=>{var Ie;return a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${ve.trim().toLowerCase()===(((Ie=p==null?void 0:p.demande_inscription)==null?void 0:Ie.zone_geographique)||(p==null?void 0:p.zone)||"").toLowerCase()?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-600"}`,children:ve.trim()},Ae)})]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Capacit: ",U.elevesInscrits||U.eleves_inscrits||0,"/",U.capacite]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:`text-2xl font-bold ${(U.placesRestantes||U.places_restantes||0)>5?"text-green-500":"text-orange-500"}`,children:U.placesRestantes||U.places_restantes||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"places restantes"}),a.jsx(ne,{onClick:()=>Ee(U.id),className:"mt-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl",size:"sm",children:"Affecter"})]})]})},U.id)})]})}),a.jsx("div",{className:"p-6 border-t border-gray-100 flex justify-end",children:a.jsx(ne,{variant:"outline",onClick:()=>{S(!1),x(null)},className:"rounded-xl",children:"Fermer"})})]})})]})}function rde(){const e=it(),[t,r]=N.useState(!0),[n,s]=N.useState(Se(Vo(new Date,1),"yyyy-MM-dd")),[i,o]=N.useState(Se(new Date,"yyyy-MM-dd")),[l,c]=N.useState("mois"),[u,f]=N.useState("all"),[d,m]=N.useState("all"),[g,j]=N.useState("all"),[h,y]=N.useState({eleves:[],presences:[],paiements:[],accidents:[],inscriptions:[],buses:[],demandes:[],signalements:[],essence:[],tuteurs:[]}),p=["#F59E0B","#3B82F6","#10B981","#EF4444","#8B5CF6","#EC4899"];N.useEffect(()=>{S();const k=setInterval(S,3e4);return()=>clearInterval(k)},[]);const[x,v]=N.useState(!0);N.useEffect(()=>{if(x){v(!1);return}if(n&&i){const k=setTimeout(()=>{S()},500);return()=>clearTimeout(k)}},[n,i]),N.useEffect(()=>{const k=new Date;switch(l){case"aujourdhui":s(Se(k,"yyyy-MM-dd")),o(Se(k,"yyyy-MM-dd"));break;case"hier":s(Se(Xs(k,1),"yyyy-MM-dd")),o(Se(Xs(k,1),"yyyy-MM-dd"));break;case"semaine":s(Se(ER(k),"yyyy-MM-dd")),o(Se(k,"yyyy-MM-dd"));break;case"mois":s(Se(Vo(k,1),"yyyy-MM-dd")),o(Se(k,"yyyy-MM-dd"));break;case"annee":s(Se(CR(k),"yyyy-MM-dd")),o(Se(k,"yyyy-MM-dd"));break}},[l]);const S=async()=>{var k,K,z,le,ge,ue,U,xe,Pe;r(!0);try{const[ve,Ae,Ie,we,Te,rt,xt,ze,He]=await Promise.allSettled([Xt.getAll(),Fo.getAll(),ln.getAll(),wr.getAll(),Kr.getAll(),cr.getAll(),ri.getAll(),ha.getAll(),Tc.getAll()]),Ze=ve.status==="fulfilled"?((k=ve.value)==null?void 0:k.data)||ve.value||[]:[],dt=Ae.status==="fulfilled"?((K=Ae.value)==null?void 0:K.data)||Ae.value||[]:[],Ct=Ie.status==="fulfilled"?((z=Ie.value)==null?void 0:z.data)||Ie.value||[]:[],Xe=we.status==="fulfilled"?((le=we.value)==null?void 0:le.data)||we.value||[]:[],At=Te.status==="fulfilled"?((ge=Te.value)==null?void 0:ge.data)||Te.value||[]:[],ot=rt.status==="fulfilled"?((ue=rt.value)==null?void 0:ue.data)||rt.value||[]:[],rr=xt.status==="fulfilled"?((U=xt.value)==null?void 0:U.data)||xt.value||[]:[],nn=ze.status==="fulfilled"?((xe=ze.value)==null?void 0:xe.data)||ze.value||[]:[],Wr=He.status==="fulfilled"?((Pe=He.value)==null?void 0:Pe.data)||He.value||[]:[],et=Array.isArray(ot)?ot.filter(ee=>ee.type_demande==="inscription"):[],Da=Array.isArray(Ze)?Ze.filter(ee=>{const Ce=Array.isArray(et)?et.filter(Qe=>Qe.eleve_id===ee.id).sort((Qe,dr)=>new Date(dr.date_creation||0)-new Date(Qe.date_creation||0))[0]:null;return(Ce==null?void 0:Ce.statut)==="Refuse"?!1:(Array.isArray(At)?At.find(Qe=>Qe.eleve_id===ee.id&&Qe.statut==="Active"):null)!==null||Ce&&["Inscrit","Valide","Paye","En attente de paiement","En cours de traitement"].includes(Ce.statut)}):[],lt=Array.isArray(dt)?dt:[],Mt=Array.isArray(et)?et.filter(ee=>ee.statut==="Paye"&&ee.montant_facture).map(ee=>{let Ce=ee.date_traitement||ee.date_creation;return Ce?typeof Ce=="string"&&Ce.includes(" ")&&(Ce=Ce.split(" ")[0]):Ce=new Date().toISOString().split("T")[0],{id:`demande_${ee.id}`,montant:parseFloat(ee.montant_facture)||0,date_paiement:Ce,statut:"Pay",type_paiement:"initial"}}):[],Ar=[...lt,...Mt];let ms=[];try{const ee=new Date(n),Ce=new Date(i),vt=[];for(let Qe=new Date(ee);Qe<=Ce;Qe.setDate(Qe.getDate()+1)){const dr=Se(Qe,"yyyy-MM-dd");vt.push(za.getByDate(dr).catch(()=>({data:[]})))}ms=(await Promise.allSettled(vt)).filter(Qe=>Qe.status==="fulfilled").flatMap(Qe=>{var V;const dr=((V=Qe.value)==null?void 0:V.data)||Qe.value||[];return Array.isArray(dr)?dr:[]})}catch(ee){console.warn("Prsences non disponibles:",ee)}y({eleves:Da,presences:ms,paiements:Ar,accidents:Ct,inscriptions:At,buses:Xe,demandes:ot,tuteurs:rr,signalements:Array.isArray(nn)?nn:[],essence:Array.isArray(Wr)?Wr:[]})}catch(ve){console.error("Erreur lors du chargement des statistiques:",ve),y({eleves:[],presences:[],paiements:[],accidents:[],inscriptions:[],buses:[],demandes:[],tuteurs:[],signalements:[],essence:[]})}finally{r(!1)}},w=(k,K="date")=>k.filter(z=>{const le=z[K]||z.date_creation;if(!le)return!1;const ge=new Date(le);return ge>=new Date(n)&&ge<=new Date(i+"T23:59:59")}),b=["1AP","2AP","3AP","4AP","5AP","6AP","1AC","2AC","3AC","TC","1BAC","2BAC"],_=["Primaire","Collge","Lyce"],P=k=>{const K=(k||"").toUpperCase();return["1AP","2AP","3AP","4AP","5AP","6AP"].includes(K)?"Primaire":["1AC","2AC","3AC"].includes(K)?"Collge":["TC","1BAC","2BAC"].includes(K)?"Lyce":null},C=h.eleves.filter(k=>{var U;const K=h.inscriptions.find(xe=>xe.eleve_id===k.id),z=u==="all"||((U=K==null?void 0:K.bus_id)==null?void 0:U.toString())===u,le=d==="all"||k.classe&&k.classe.toUpperCase()===d.toUpperCase(),ge=P(k.classe);return z&&le&&(g==="all"||ge===g)}),A=(k=>k.filter(K=>{var Pe;const z=h.eleves.find(ve=>ve.id===K.eleve_id);if(!z)return!0;const le=h.inscriptions.find(ve=>ve.eleve_id===z.id),ge=u==="all"||((Pe=le==null?void 0:le.bus_id)==null?void 0:Pe.toString())===u,ue=d==="all"||z.classe&&z.classe.toUpperCase()===d.toUpperCase(),U=P(z.classe);return ge&&ue&&(g==="all"||U===g)}))(w(h.presences)),E=w(h.paiements,"date_paiement"),T=w(h.accidents,"date"),B=w(h.inscriptions,"date_inscription"),I=E.filter(k=>k.statut==="Pay").reduce((k,K)=>k+(parseFloat(K.montant)||0),0),D=A.filter(k=>!k.present_matin).length,O=A.filter(k=>!k.present_soir).length,$=A.filter(k=>k.present_matin).length,R=A.filter(k=>k.present_soir).length,Q=C.filter(k=>{const K=(k.classe||"").toUpperCase();return["1AP","2AP","3AP","4AP","5AP","6AP"].includes(K)}).length,ae=C.filter(k=>{const K=(k.classe||"").toUpperCase();return["1AC","2AC","3AC"].includes(K)}).length,oe=C.filter(k=>{const K=(k.classe||"").toUpperCase();return["TC","1BAC","2BAC"].includes(K)}).length,Z={};A.forEach(k=>{(!k.present_matin||!k.present_soir)&&(Z[k.eleve_id]=(Z[k.eleve_id]||0)+(k.present_matin?0:1)+(k.present_soir?0:1))});const pe=Object.entries(Z).sort(([,k],[,K])=>K-k).slice(0,5).map(([k,K])=>{const z=h.eleves.find(le=>le.id===parseInt(k));return{name:z?`${z.prenom} ${z.nom}`:"Inconnu",absences:K}}),Ee={};A.forEach(k=>{(k.present_matin||k.present_soir)&&(Ee[k.eleve_id]=(Ee[k.eleve_id]||0)+(k.present_matin?1:0)+(k.present_soir?1:0))});const Y=Object.entries(Ee).sort(([,k],[,K])=>K-k).slice(0,5).map(([k,K])=>{const z=C.find(le=>le.id===parseInt(k));return{name:z?`${z.prenom} ${z.nom}`:"Inconnu",presences:K}}),J=[{name:"Primaire",value:Q},{name:"Collge",value:ae},{name:"Lyce",value:oe}],W=[{name:"Matin",Prsents:$,Absents:D},{name:"Soir",Prsents:R,Absents:O}],X={};return C.forEach(k=>{if(k.tuteur_id){const K=k.tuteur_id;X[K]=(X[K]||0)+1}}),Object.entries(X).sort(([,k],[,K])=>K-k).slice(0,5).map(([k,K])=>{const z=Array.isArray(h.tuteurs)?h.tuteurs.find(le=>le.id===parseInt(k)):null;return{name:z&&`${z.prenom||""} ${z.nom||""}`.trim()||"Inconnu",inscriptions:K}}),t?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Statistiques",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2 mb-6",children:[a.jsx(el,{className:"w-7 h-7 text-indigo-500"}),"Statistiques & Historiques"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Priode"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"aujourdhui",children:"Aujourd'hui"}),a.jsx(q,{value:"hier",children:"Hier"}),a.jsx(q,{value:"semaine",children:"Semaine dernire"}),a.jsx(q,{value:"mois",children:"Mois dernier"}),a.jsx(q,{value:"annee",children:"Anne dernire"}),a.jsx(q,{value:"custom",children:"Personnalis"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4 text-gray-400"}),a.jsx(me,{type:"date",value:n,onChange:k=>{s(k.target.value),c("custom")},className:"rounded-xl"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx(me,{type:"date",value:i,onChange:k=>{o(k.target.value),c("custom")},className:"rounded-xl"})]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Bus"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les bus"}),h.buses.map(k=>a.jsx(q,{value:k.id.toString(),children:k.numero},k.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mt-4",children:[a.jsxs($e,{value:g,onValueChange:j,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Niveau"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les niveaux"}),_.map(k=>a.jsx(q,{value:k,children:k},k))]})]}),a.jsxs($e,{value:d,onValueChange:m,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Classe"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les classes"}),b.map(k=>a.jsx(q,{value:k,children:k},k))]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:a.jsx(Ht,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total lves"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:C.length})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Cr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Paiements"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:E.filter(k=>k.statut==="Pay").length}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[I.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(Ue,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Accidents"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:T.length})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:a.jsx(lu,{className:"w-6 h-6 text-amber-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Inscriptions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:B.length})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Prsences vs Absences"}),a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(Vc,{data:W,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Ws,{dataKey:"name"}),a.jsx(Hs,{allowDecimals:!1}),a.jsx(Gr,{}),a.jsx(Aa,{}),a.jsx(un,{dataKey:"Prsents",fill:"#10B981"}),a.jsx(un,{dataKey:"Absents",fill:"#EF4444"})]})})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Rpartition par Niveau"}),a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(kue,{children:[a.jsx(fs,{data:J,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",label:({name:k,value:K})=>`${k}: ${K}`,children:J.map((k,K)=>a.jsx(Gh,{fill:p[K%p.length]},`cell-${K}`))}),a.jsx(Gr,{}),a.jsx(Aa,{})]})})})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"lves les plus absents"}),pe.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Aucune absence enregistre"}):a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(Vc,{data:pe,layout:"vertical",children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Ws,{type:"number",allowDecimals:!1}),a.jsx(Hs,{dataKey:"name",type:"category",width:100}),a.jsx(Gr,{}),a.jsx(un,{dataKey:"absences",fill:"#EF4444"})]})})})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"lves les plus prsents"}),Y.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Aucune prsence enregistre"}):a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(Vc,{data:Y,layout:"vertical",children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Ws,{type:"number",allowDecimals:!1}),a.jsx(Hs,{dataKey:"name",type:"category",width:100}),a.jsx(Gr,{}),a.jsx(un,{dataKey:"presences",fill:"#10B981"})]})})})]})]})]})}function nde(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState(null),[g,j]=N.useState(""),[h,y]=N.useState("all"),[p,x]=N.useState(""),[v,S]=N.useState(null),[w,b]=N.useState(!1),[_,P]=N.useState(!1),[C,M]=N.useState({montant:"",mois:"",annee:"",date_paiement:"",mode_paiement:"Espces"}),[A,E]=N.useState(!1);N.useEffect(()=>{T()},[]);const T=async()=>{f(!0),m(null);try{const[Z,pe,Ee,Y]=await Promise.all([Fo.getAll(),Xt.getAll(),ri.getAll(),Kr.getAll()]),J=(Z==null?void 0:Z.data)||Z||[],W=(pe==null?void 0:pe.data)||pe||[],X=(Ee==null?void 0:Ee.data)||Ee||[],k=(Y==null?void 0:Y.data)||Y||[],K=Array.isArray(J)?J.filter(z=>z.type_paiement==="mensuel"||!z.type_paiement).map(z=>{const le=Array.isArray(k)?k.find(U=>U.id===z.inscription_id):null,ge=le&&Array.isArray(W)?W.find(U=>U.id===le.eleve_id):null,ue=ge&&Array.isArray(X)?X.find(U=>U.id===ge.tuteur_id):null;return{...z,montant:parseFloat(z.montant)||0,eleve:ge,tuteur:ue,inscription:le,type_paiement:"mensuel"}}):[];K.sort((z,le)=>{const ge=new Date(z.date_paiement||0);return new Date(le.date_paiement||0)-ge}),r(K),s(Array.isArray(W)?W:[]),o(Array.isArray(X)?X:[]),c(Array.isArray(k)?k:[])}catch(Z){console.error("Erreur lors du chargement des paiements:",Z),m("Erreur lors du chargement des paiements. Veuillez ressayer."),r([]),s([]),o([]),c([])}finally{f(!1)}},B=t.filter(Z=>{var J,W,X,k,K,z,le,ge,ue;const pe=g===""||((W=(J=Z.eleve)==null?void 0:J.nom)==null?void 0:W.toLowerCase().includes(g.toLowerCase()))||((k=(X=Z.eleve)==null?void 0:X.prenom)==null?void 0:k.toLowerCase().includes(g.toLowerCase()))||((z=(K=Z.tuteur)==null?void 0:K.nom)==null?void 0:z.toLowerCase().includes(g.toLowerCase()))||((ge=(le=Z.tuteur)==null?void 0:le.prenom)==null?void 0:ge.toLowerCase().includes(g.toLowerCase())),Ee=h==="all"||Z.statut===h,Y=!p||((ue=Z.date_paiement)==null?void 0:ue.startsWith(p));return pe&&Ee&&Y}),I=B.filter(Z=>Z.statut==="Pay").reduce((Z,pe)=>Z+(parseFloat(pe.montant)||0),0),D=Z=>({"En attente":"bg-yellow-100 text-yellow-700",Pay:"bg-green-100 text-green-700",chou:"bg-red-100 text-red-700"})[Z]||"bg-gray-100 text-gray-700",O=Z=>({Espces:"bg-blue-100 text-blue-700",Virement:"bg-purple-100 text-purple-700","Carte bancaire":"bg-teal-100 text-teal-700",Chque:"bg-orange-100 text-orange-700"})[Z]||"bg-gray-100 text-gray-700",$=Z=>{if(!Z)return"";try{const pe=new Date(Z);return isNaN(pe.getTime())?Z:Se(pe,"dd MMM yyyy",{locale:Jt})}catch(pe){return console.error("Erreur de formatage de date:",pe),Z}},R=Z=>{S(Z),M({montant:Z.montant||"",mois:Z.mois||"",annee:Z.annee||"",date_paiement:Z.date_paiement?Z.date_paiement.split("T")[0]:"",mode_paiement:Z.mode_paiement||"Espces"}),b(!0)},Q=Z=>{S(Z),P(!0)},ae=async()=>{if(v){E(!0),m(null);try{const Z=await Fo.update(v.id,C);Z.success?(b(!1),S(null),await T()):m(Z.message||"Erreur lors de la mise  jour du paiement")}catch(Z){console.error("Erreur lors de la mise  jour:",Z),m("Erreur lors de la mise  jour du paiement. Veuillez ressayer.")}finally{E(!1)}}},oe=async()=>{if(v){E(!0),m(null);try{const Z=await Fo.delete(v.id);Z.success?(P(!1),S(null),await T()):m(Z.message||"Erreur lors de la suppression du paiement")}catch(Z){console.error("Erreur lors de la suppression:",Z),m("Erreur lors de la suppression du paiement. Veuillez ressayer.")}finally{E(!1)}}};return u?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des Paiements",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),d&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:d}),a.jsx("button",{onClick:()=>m(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-teal-500 to-cyan-500 rounded-3xl p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Total des paiements valids"}),a.jsxs("p",{className:"opacity-90",children:["Priode: ",p||"Tous"]})]}),a.jsxs("div",{className:"text-4xl font-bold mt-4 md:mt-0",children:[I.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 mb-4",children:[a.jsx(Cr,{className:"w-6 h-6 text-teal-500"}),"Historique des Paiements"]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(me,{placeholder:"Rechercher...",value:g,onChange:Z=>j(Z.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs($e,{value:h,onValueChange:y,children:[a.jsx(Me,{className:"w-full md:w-40 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Statut"})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous"}),a.jsx(q,{value:"Pay",children:"Pays"}),a.jsx(q,{value:"En attente",children:"En attente"}),a.jsx(q,{value:"chou",children:"chous"})]})]}),a.jsx(me,{type:"date",value:p,onChange:Z=>x(Z.target.value),className:"w-full md:w-48 h-12 rounded-xl"})]})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:B.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Cr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun paiement trouv"})]}):B.map(Z=>a.jsx("div",{className:"p-6 hover:bg-teal-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center",children:a.jsx(Cr,{className:"w-6 h-6 text-teal-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:Z.eleve?`${Z.eleve.nom} ${Z.eleve.prenom}`:"lve inconnu"}),Z.tuteur&&a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[a.jsx(pt,{className:"w-3 h-3"}),"Tuteur: ",Z.tuteur.prenom," ",Z.tuteur.nom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-sm",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg ${O(Z.mode_paiement)}`,children:Z.mode_paiement}),Z.mois&&Z.annee&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg",children:[Z.mois,"/",Z.annee]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-end md:items-center gap-4",children:[a.jsxs("div",{className:"text-right flex-1",children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[Z.montant.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]}),a.jsxs("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-sm font-medium ${D(Z.statut)}`,children:[Z.statut==="Pay"&&a.jsx(mt,{className:"w-3 h-3 inline mr-1"}),Z.statut]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center justify-end gap-1",children:[a.jsx(Qr,{className:"w-3 h-3"}),$(Z.date_paiement)]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ne,{onClick:()=>R(Z),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl",size:"sm",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(ne,{onClick:()=>Q(Z),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl",size:"sm",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})},Z.id))})]}),w&&v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Modifier le paiement"}),a.jsx("button",{onClick:()=>{b(!1),S(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ke,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Montant (DH)"}),a.jsx(me,{type:"number",step:"0.01",value:C.montant,onChange:Z=>M({...C,montant:Z.target.value}),className:"mt-1"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{children:"Mois"}),a.jsx(me,{type:"number",min:"1",max:"12",value:C.mois,onChange:Z=>M({...C,mois:Z.target.value}),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Anne"}),a.jsx(me,{type:"number",min:"2020",max:"2100",value:C.annee,onChange:Z=>M({...C,annee:Z.target.value}),className:"mt-1"})]})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Date de paiement"}),a.jsx(me,{type:"date",value:C.date_paiement,onChange:Z=>M({...C,date_paiement:Z.target.value}),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(se,{children:"Mode de paiement"}),a.jsxs($e,{value:C.mode_paiement,onValueChange:Z=>M({...C,mode_paiement:Z}),children:[a.jsx(Me,{className:"mt-1",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"Espces",children:"Espces"}),a.jsx(q,{value:"Virement",children:"Virement"}),a.jsx(q,{value:"Carte bancaire",children:"Carte bancaire"}),a.jsx(q,{value:"Chque",children:"Chque"})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx(ne,{onClick:()=>{b(!1),S(null)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800",disabled:A,children:"Annuler"}),a.jsx(ne,{onClick:ae,className:"flex-1 bg-teal-500 hover:bg-teal-600 text-white",disabled:A,children:A?"Enregistrement...":"Enregistrer"})]})]})}),_&&v&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Confirmer la suppression"}),a.jsx("button",{onClick:()=>{P(!1),S(null)},className:"text-gray-400 hover:text-gray-600",disabled:A,children:a.jsx(Ke,{className:"w-5 h-5"})})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["tes-vous sr de vouloir supprimer ce paiement de ",v.montant," DH ? Cette action est irrversible."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{onClick:()=>{P(!1),S(null)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800",disabled:A,children:"Annuler"}),a.jsx(ne,{onClick:oe,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:A,children:A?"Suppression...":"Supprimer"})]})]})})]})}function ade(){const e=it(),[t,r]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(null),[u,f]=N.useState("");N.useEffect(()=>{const m=localStorage.getItem("admin_session");if(!m){e(Re("AdminLogin"));return}const g=JSON.parse(m);c(g),f(g.adresse||"")},[e]);const d=async m=>{m.preventDefault(),r(!0),o("");try{const j={...JSON.parse(localStorage.getItem("admin_session")),adresse:u};localStorage.setItem("admin_session",JSON.stringify(j)),c(j),s(!0),setTimeout(()=>s(!1),3e3)}catch(g){console.error("Erreur lors de la sauvegarde:",g),o("Erreur lors de la sauvegarde de l'adresse. Veuillez ressayer.")}r(!1)};return l?a.jsxs(Wt,{title:"Mon Profil",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-500 to-yellow-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Mi,{className:"w-7 h-7"}),"Mon Profil Administrateur"]}),a.jsx("p",{className:"text-amber-100 mt-1",children:"Informations personnelles (en lecture seule)"})]}),a.jsxs("div",{className:"p-6",children:[n&&a.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(mt,{className:"w-5 h-5"}),"Adresse mise  jour avec succs !"]}),i&&a.jsxs(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(Ue,{className:"w-5 h-5"}),i]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Nom",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(me,{value:l.nom||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Prnom",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(me,{value:l.prenom||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Email",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(me,{type:"email",value:l.email||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(se,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Tlphone",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(me,{value:l.telephone||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(me,{value:u,onChange:m=>f(m.target.value),placeholder:"Entrez votre adresse",className:"mt-1 h-12 rounded-xl"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vous pouvez modifier votre adresse"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx(ne,{type:"button",variant:"outline",onClick:()=>e(Re("AdminDashboard")),className:"rounded-xl",children:"Annuler"}),a.jsx(ne,{type:"submit",disabled:t,className:"flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(rs,{className:"w-5 h-5 mr-2"}),"Enregistrer l'adresse"]})})]})]})]})]})]}):a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})})}function sde(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState({show:!1,id:null}),g=["Rabat","Sal","Temara"],[j,h]=N.useState({nom:"",ville:"",description:"",actif:!0});N.useEffect(()=>{y()},[]);const y=async()=>{s(!0),f(null);try{const b=await Cs.getAll(),_=(b==null?void 0:b.data)||b||[];r(Array.isArray(_)?_:[])}catch(b){console.error("Erreur lors du chargement:",b),f("Erreur lors du chargement des zones")}finally{s(!1)}},p=async b=>{b.preventDefault(),f(null);try{l?await Cs.update({id:l.id,nom:j.nom,ville:j.ville,description:j.description,actif:j.actif}):await Cs.create({nom:j.nom,ville:j.ville,description:j.description,actif:j.actif}),w(),await y()}catch(_){console.error("Erreur lors de la sauvegarde:",_),f(_.message||"Erreur lors de la sauvegarde de la zone")}},x=async()=>{if(d.id)try{await Cs.delete(d.id),m({show:!1,id:null}),await y()}catch(b){console.error("Erreur lors de la suppression:",b),f(b.message||"Erreur lors de la suppression de la zone"),m({show:!1,id:null})}},v=b=>{m({show:!0,id:b})},S=b=>{c(b),h({nom:b.nom||"",ville:b.ville||"",description:b.description||"",actif:b.actif!==void 0?b.actif:!0}),o(!0)},w=()=>{h({nom:"",ville:"",description:"",actif:!0}),c(null),o(!1),f(null)};return n?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des Zones",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),u&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:u}),a.jsx("button",{onClick:()=>f(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-indigo-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Ut,{className:"w-7 h-7"}),"Gestion des Zones"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:[t.length," zone(s) au total"]})]}),a.jsxs(ne,{onClick:()=>{w(),o(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(Na,{className:"w-4 h-4 mr-2"}),"Ajouter une zone"]})]})}),i&&a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gray-50",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Nom de la zone *"}),a.jsx(me,{value:j.nom,onChange:b=>h({...j,nom:b.target.value}),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Ville *"}),a.jsxs("select",{value:j.ville,onChange:b=>h({...j,ville:b.target.value}),className:"mt-1 h-12 rounded-xl w-full px-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Slectionner une ville"}),g.map(b=>a.jsx("option",{value:b,children:b},b))]})]})]}),a.jsxs("div",{children:[a.jsx(se,{className:"text-gray-700 font-medium",children:"Description"}),a.jsx(me,{value:j.description,onChange:b=>h({...j,description:b.target.value}),className:"mt-1 h-12 rounded-xl"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"actif",checked:j.actif,onChange:b=>h({...j,actif:b.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),a.jsx(se,{htmlFor:"actif",className:"text-gray-700 font-medium cursor-pointer",children:"Zone active"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(ne,{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(rs,{className:"w-4 h-4 mr-2"}),l?"Modifier":"Ajouter"]}),a.jsxs(ne,{type:"button",variant:"outline",onClick:w,className:"rounded-xl",children:[a.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Annuler"]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:t.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Ut,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune zone trouve"})]}):t.map(b=>a.jsx("div",{className:"p-6 hover:bg-blue-50/50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(Ut,{className:"w-6 h-6 text-blue-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg flex items-center gap-2",children:[b.nom,b.ville&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:b.ville}),b.actif&&a.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[a.jsx(mt,{className:"w-3 h-3 inline mr-1"}),"Active"]}),!b.actif&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:"Inactive"})]}),b.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ne,{onClick:()=>S(b),variant:"outline",className:"rounded-xl",children:[a.jsx(Un,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(ne,{onClick:()=>v(b.id),variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})},b.id))})]}),a.jsx(en,{isOpen:d.show,title:"Supprimer la zone",message:"tes-vous sr de vouloir supprimer cette zone ?",onConfirm:x,onCancel:()=>m({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function ide(){const e=it(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all"),[u,f]=N.useState("all"),[d,m]=N.useState(!1);N.useEffect(()=>{const b=localStorage.getItem("admin_session");if(!b){e(Re("AdminLogin"));return}const _=JSON.parse(b);r(_),g(_.id)},[e]);const g=async b=>{o(!0);try{const _=await ft.getByUser(b,"admin"),C=(Array.isArray(_==null?void 0:_.data)?_.data:Array.isArray(_)?_:[]).sort((M,A)=>{const E=new Date(M.date||M.date_creation||0);return new Date(A.date||A.date_creation||0)-E});s(C)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{o(!1)}},j=async b=>{try{await ft.marquerLue(b),s(_=>_.map(P=>P.id===b?{...P,lue:!0}:P))}catch(_){console.error("Erreur lors de la mise  jour:",_)}},h=async b=>{try{await ft.delete(b),s(_=>_.filter(P=>P.id!==b))}catch(_){console.error("Erreur lors de la suppression:",_)}},y=async()=>{if(t)try{await ft.deleteAll(t.id,"admin"),s([])}catch(b){console.error("Erreur lors de la suppression de toutes les notifications:",b)}},p=b=>{if(!b)return"";const _=new Date(b),C=new Date-_,M=Math.floor(C/6e4),A=Math.floor(C/36e5),E=Math.floor(C/864e5);return M<1?" l'instant":M<60?`Il y a ${M} min`:A<24?`Il y a ${A}h`:E<7?`Il y a ${E}j`:_.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},x=(b,_)=>{const P=(_==null?void 0:_.toLowerCase())||"",C=(b==null?void 0:b.toLowerCase())||"";return C==="alerte"||P.includes("accident")||P.includes("urgent")||P.includes("requis")?a.jsx(Ue,{className:"w-5 h-5 text-red-500"}):C==="warning"||P.includes("attention")||P.includes("avertissement")?a.jsx(Os,{className:"w-5 h-5 text-orange-500"}):P.includes("message")||P.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):P.includes("rapport")||P.includes("rapports")?a.jsx(wa,{className:"w-5 h-5 text-purple-500"}):C==="success"||P.includes("confirm")||P.includes("valid")?a.jsx(mt,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},v=(b,_)=>{const P=(b==null?void 0:b.toLowerCase())||"",C=(_==null?void 0:_.toLowerCase())||"";return P==="alerte"||C.includes("accident")||C.includes("urgent")||C.includes("requis")?"bg-red-50 border-red-200":P==="warning"||C.includes("attention")?"bg-orange-50 border-orange-200":P==="success"||C.includes("confirm")||C.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},S=n.filter(b=>{var _;return!(l==="unread"&&b.lue||l==="read"&&!b.lue||u!=="all"&&((_=b.type)==null?void 0:_.toLowerCase())!==u.toLowerCase())}),w=n.filter(b=>!b.lue).length;return i?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Mes Notifications",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsx(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(Vn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:w>0?`${w} notification${w>1?"s":""} non lue${w>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ca,{className:"w-4 h-4 inline mr-1"}),"Filtrer par statut"]}),a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes"}),a.jsxs(q,{value:"unread",children:["Non lues (",n.filter(b=>!b.lue).length,")"]}),a.jsxs(q,{value:"read",children:["Lues (",n.filter(b=>b.lue).length,")"]})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(ca,{className:"w-4 h-4 inline mr-1"}),"Filtrer par type"]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les types"}),a.jsx(q,{value:"info",children:"Informations"}),a.jsx(q,{value:"alerte",children:"Alertes"}),a.jsx(q,{value:"warning",children:"Avertissements"}),a.jsx(q,{value:"success",children:"Succs"})]})]})]})]}),n.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200",children:[w>0&&a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>{n.filter(b=>!b.lue).forEach(b=>j(b.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50 rounded-xl",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),a.jsxs(ne,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les notifications"]})]})]}),a.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:S.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(Vn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:l==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${l==="unread"?"non lue":"lue"} trouve.`})]}):S.map((b,_)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${b.lue?"border-gray-300 opacity-75":"border-amber-500"} ${v(b.type,b.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${b.lue?"opacity-50":""}`,children:x(b.type,b.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${b.lue?"line-through":""}`,children:b.titre}),!b.lue&&a.jsx("span",{className:"px-2 py-1 bg-amber-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:b.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:p(b.date||b.date_creation)}),b.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:b.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!b.lue&&a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>j(b.id),className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",title:"Marquer comme lu",children:a.jsx(mt,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"ghost",size:"sm",onClick:()=>h(b.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Tt,{className:"w-5 h-5"})})]})]})})},b.id))}),a.jsx(en,{isOpen:d,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{y(),m(!1)},onCancel:()=>m(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function ode(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,j]=N.useState(!0),[h,y]=N.useState(null),[p,x]=N.useState(!1),[v,S]=N.useState(null),[w,b]=N.useState(null),[_,P]=N.useState(!1),[C,M]=N.useState(null),[A,E]=N.useState(!1),[T,B]=N.useState(null),[I,D]=N.useState({show:!1,message:"",type:"success"}),[O,$]=N.useState({statut:"all",gravite:"all",bus:"all",dateDebut:"",dateFin:""});N.useEffect(()=>{R()},[]);const R=async()=>{var Y,J,W,X,k,K;j(!0),S(null);try{const z=await Promise.allSettled([ln.getAll(),wr.getAll(),Vr.getAll(),Xt.getAll(),Kr.getAll(),ri.getAll()]),le=z[0].status==="fulfilled"?((Y=z[0].value)==null?void 0:Y.data)||z[0].value||[]:[],ge=z[1].status==="fulfilled"?((J=z[1].value)==null?void 0:J.data)||z[1].value||[]:[],ue=z[2].status==="fulfilled"?((W=z[2].value)==null?void 0:W.data)||z[2].value||[]:[],U=z[3].status==="fulfilled"?((X=z[3].value)==null?void 0:X.data)||z[3].value||[]:[],xe=z[4].status==="fulfilled"?((k=z[4].value)==null?void 0:k.data)||z[4].value||[]:[],Pe=z[5].status==="fulfilled"?((K=z[5].value)==null?void 0:K.data)||z[5].value||[]:[],ve=Array.isArray(le)?le.sort((Ie,we)=>{const Te=Ie.date?new Date(Ie.date):new Date(0);return(we.date?new Date(we.date):new Date(0))-Te}):[];r(ve),s(Array.isArray(ge)?ge:[]),o(Array.isArray(ue)?ue:[]),c(Array.isArray(U)?U:[]),f(Array.isArray(xe)?xe:[]),m(Array.isArray(Pe)?Pe:[]);const Ae=z.filter(Ie=>Ie.status==="rejected").length;Ae>0&&(console.warn(`${Ae} appel(s) API ont chou`),S(`Certaines donnes n'ont pas pu tre charges (${Ae} erreur(s))`))}catch(z){console.error("Erreur lors du chargement:",z),S("Erreur lors du chargement des donnes: "+(z.message||"Erreur inconnue"))}finally{j(!1)}},Q=async Y=>{try{await ln.validate(Y),await R(),D({show:!0,message:"Accident marqu comme lu avec succs",type:"success"})}catch(J){console.error("Erreur lors de la validation:",J),S("Erreur lors du marquage comme lu"),D({show:!0,message:"Erreur lors du marquage comme lu",type:"error"})}},ae=async Y=>{try{await Vr.licencier(Y),await R(),P(!1),M(null),D({show:!0,message:"Chauffeur licenci avec succs. Le responsable a t notifi.",type:"success"})}catch(J){console.error("Erreur lors du licenciement:",J),S("Erreur lors du licenciement du chauffeur"),D({show:!0,message:"Erreur lors du licenciement du chauffeur",type:"error"})}},oe=async()=>{if(T)try{const Y=await ln.delete(T.id);if(Y&&Y.success)await R(),E(!1),B(null),D({show:!0,message:"Accident supprim avec succs",type:"success"});else throw new Error((Y==null?void 0:Y.message)||"Erreur lors de la suppression")}catch(Y){console.error("Erreur lors de la suppression:",Y),S("Erreur lors de la suppression de l'accident"),D({show:!0,message:Y.message||"Erreur lors de la suppression de l'accident",type:"error"})}},Z=async Y=>{if(!Y.bus_id){S("Aucun bus associ  cet accident");return}try{const J=u.filter(ue=>ue.bus_id===Y.bus_id&&ue.statut==="Active"),W=l.filter(ue=>J.some(U=>U.eleve_id===ue.id)),X=[...new Set(W.map(ue=>ue.tuteur_id).filter(Boolean))],k=d.filter(ue=>X.includes(ue.id));if(k.length===0){S("Aucun tuteur trouv pour les lves de ce bus");return}const K=n.find(ue=>ue.id===Y.bus_id),z=(K==null?void 0:K.numero)||"Inconnu";let le=`Un accident a t dclar concernant le bus ${z}.

`;le+=`Date: ${Se(new Date(Y.date),"dd/MM/yyyy",{locale:Jt})}`,Y.heure&&(le+=`  ${Y.heure}`),le+=`
Lieu: ${Y.lieu||"Non spcifi"}
`,le+=`Gravit: ${Y.gravite}

`,le+=`Description: ${Y.description}
`,Y.degats&&(le+=`Dgts: ${Y.degats}
`),Y.nombre_eleves!==null&&Y.nombre_eleves!==void 0&&(le+=`Nombre d'lves dans le bus: ${Y.nombre_eleves}
`),Y.nombre_blesses!==null&&Y.nombre_blesses!==void 0&&Y.nombre_blesses>0&&(le+=`Nombre de blesss: ${Y.nombre_blesses}
`),Y.eleves_concernees&&Array.isArray(Y.eleves_concernees)&&Y.eleves_concernees.length>0&&(le+=`
lves prsents dans le bus:
`,Y.eleves_concernees.forEach((ue,U)=>{const xe=typeof ue=="object"&&ue.nom?`${ue.prenom} ${ue.nom}`:ue;le+=`- ${xe}
`})),le+=`
Veuillez contacter l'cole pour plus d'informations.`;const ge=k.map(ue=>{const U=ue.utilisateur_id||ue.id;return ft.create({destinataire_id:U,destinataire_type:"tuteur",titre:"Accident dclar - Bus "+z,message:le,type:"alerte"})});await Promise.all(ge),D({show:!0,message:`Notifications envoyes  ${k.length} tuteur(s)`,type:"success"})}catch(J){console.error("Erreur lors de l'envoi des notifications:",J),S("Erreur lors de l'envoi des notifications aux tuteurs"),D({show:!0,message:"Erreur lors de l'envoi des notifications aux tuteurs",type:"error"})}},pe=Y=>({Lgre:"bg-yellow-100 text-yellow-700",Moyenne:"bg-orange-100 text-orange-700",Grave:"bg-red-100 text-red-700"})[Y]||"bg-gray-100 text-gray-700",Ee=N.useMemo(()=>Array.isArray(t)?t.filter(Y=>{var J;if(O.statut!=="all"&&Y.statut!==O.statut||O.gravite!=="all"&&Y.gravite!==O.gravite||O.bus!=="all"&&((J=Y.bus_id)==null?void 0:J.toString())!==O.bus)return!1;if(O.dateDebut){const W=new Date(Y.date),X=new Date(O.dateDebut);if(W<X)return!1}if(O.dateFin){const W=new Date(Y.date),X=new Date(O.dateFin);if(X.setHours(23,59,59,999),W>X)return!1}return!0}):[],[t,O]);return g?a.jsx(Wt,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{children:[a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-yellow-50 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),v&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:v}),a.jsx("button",{onClick:()=>S(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6"}),"Rapports d'Accidents"]}),a.jsx("p",{className:"text-red-100 mt-1",children:"Rapports reus des chauffeurs et responsables bus"})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ca,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtres"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),a.jsxs($e,{value:O.statut,onValueChange:Y=>$({...O,statut:Y}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les statuts"}),a.jsx(q,{value:"En attente",children:"En attente"}),a.jsx(q,{value:"Valid",children:"Valid"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gravit"}),a.jsxs($e,{value:O.gravite,onValueChange:Y=>$({...O,gravite:Y}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les gravits"}),a.jsx(q,{value:"Lgre",children:"Lgre"}),a.jsx(q,{value:"Moyenne",children:"Moyenne"}),a.jsx(q,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus"}),a.jsxs($e,{value:O.bus,onValueChange:Y=>$({...O,bus:Y}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les bus"}),n.map(Y=>a.jsx(q,{value:Y.id.toString(),children:Y.numero},Y.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date dbut"}),a.jsx(me,{type:"date",value:O.dateDebut,onChange:Y=>$({...O,dateDebut:Y.target.value}),className:"rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date fin"}),a.jsx(me,{type:"date",value:O.dateFin,onChange:Y=>$({...O,dateFin:Y.target.value}),className:"rounded-xl"})]})]}),(O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin)&&a.jsx(ne,{variant:"outline",onClick:()=>$({statut:"all",gravite:"all",bus:"all",dateDebut:"",dateFin:""}),className:"mt-4 rounded-xl",children:"Rinitialiser les filtres"})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:Ee.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Ue,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsxs("p",{children:["Aucun accident dclar",O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin?" (aprs filtrage)":""]})]}):a.jsxs(a.Fragment,{children:[(O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin)&&a.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:Ee.length})," accident(s) trouv(s)",Ee.length!==t.length&&a.jsxs("span",{children:[" sur ",t.length," total"]})]})}),Ee.map(Y=>{const J=n.find(K=>K.id===Y.bus_id),W=Y.chauffeur_id?i.find(K=>K.id===Y.chauffeur_id):null,k=(Y.chauffeur_id?t.filter(K=>K.chauffeur_id===Y.chauffeur_id):[]).length>=3;return a.jsx("div",{className:"p-6 hover:bg-red-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3 flex-wrap",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${pe(Y.gravite)}`,children:Y.gravite}),Y.statut==="En attente"&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-700",children:"En attente"}),Y.statut==="Valid"&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:"Valid"}),Y.blesses&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:"Blesss"}),k&&Y.chauffeur_id&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-500 text-white font-bold",children:"  LICENCIER (3 accidents)"})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Qr,{className:"w-4 h-4 text-gray-400"}),Se(new Date(Y.date),"dd MMMM yyyy",{locale:Jt}),Y.heure&&`  ${Y.heure}`]}),J&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(tt,{className:"w-4 h-4 text-amber-500"}),J.numero]}),(Y.chauffeur_prenom||Y.chauffeur_nom)&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(pt,{className:"w-4 h-4 text-green-500"}),Y.chauffeur_prenom||""," ",Y.chauffeur_nom||""]}),(Y.responsable_prenom||Y.responsable_nom)&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(pt,{className:"w-4 h-4 text-blue-500"}),Y.responsable_prenom||""," ",Y.responsable_nom||""," (Responsable)"]}),Y.lieu&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ut,{className:"w-4 h-4 text-red-500"}),Y.lieu]}),Y.nombre_eleves!==null&&Y.nombre_eleves!==void 0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ht,{className:"w-4 h-4 text-blue-500"}),Y.nombre_eleves," lve(s)"]}),Y.nombre_blesses!==null&&Y.nombre_blesses!==void 0&&Y.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-1 text-red-600 font-semibold",children:[a.jsx(Ue,{className:"w-4 h-4"}),Y.nombre_blesses," bless(s)"]})]}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Y.description}),Y.degats&&a.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[a.jsx("strong",{children:"Dgts:"})," ",Y.degats]}),Y.photos&&(()=>{try{let K=!1;if(Array.isArray(Y.photos)&&Y.photos.length>0)K=!0;else if(typeof Y.photos=="string"&&Y.photos.trim()!=="")if(Y.photos.startsWith("data:image"))K=!0;else try{const z=JSON.parse(Y.photos);K=Array.isArray(z)&&z.length>0}catch{K=!1}return K?a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-sm mt-2",children:[a.jsx(Od,{className:"w-4 h-4"}),a.jsx("span",{children:"Photos disponibles"})]}):null}catch{return null}})()]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(ne,{variant:"outline",onClick:()=>{y(Y),x(!0)},className:"rounded-xl",children:[a.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Dtails"]}),Y.statut==="En attente"&&a.jsxs(ne,{onClick:()=>Q(Y.id),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(_w,{className:"w-4 h-4 mr-2"}),"Marquer comme lu"]}),Y.bus_id&&a.jsxs(ne,{onClick:()=>Z(Y),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Informer les tuteurs"]}),k&&Y.chauffeur_id&&a.jsxs(ne,{onClick:()=>{M({id:Y.chauffeur_id,nom:Y.chauffeur_nom||(W==null?void 0:W.nom)||"",prenom:Y.chauffeur_prenom||(W==null?void 0:W.prenom)||""}),P(!0)},className:"bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold",children:[a.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Licencier"]}),a.jsxs(ne,{onClick:()=>{B(Y),E(!0)},variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})},Y.id)})]})})]})]})}),_&&C&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Ue,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Licencier le chauffeur"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Cette action est irrversible"})]})]}),a.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-xl border border-red-200",children:[a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("strong",{children:"Chauffeur:"})," ",C.prenom," ",C.nom]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Le chauffeur sera supprim de la base de donnes, le bus sera dsaffect et le responsable sera notifi."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{onClick:()=>{P(!1),M(null)},variant:"outline",className:"flex-1 rounded-xl",children:"Annuler"}),a.jsx(ne,{onClick:()=>ae(C.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold",children:"Confirmer le licenciement"})]})]})}),A&&T&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Tt,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Supprimer l'accident"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Cette action est irrversible"})]})]}),a.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-xl border border-red-200",children:[a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("strong",{children:"Date:"})," ",Se(new Date(T.date),"dd MMMM yyyy",{locale:Jt}),T.heure&&`  ${T.heure}`]}),a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("strong",{children:"Description:"})," ",T.description]}),(()=>{const Y=n.find(J=>J.id===T.bus_id);return Y?a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("strong",{children:"Bus:"})," ",Y.numero]}):null})(),a.jsx("p",{className:"text-sm text-red-600 font-medium mt-3",children:" Attention : Cette action supprimera dfinitivement l'accident de la base de donnes."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(ne,{onClick:()=>{E(!1),B(null)},variant:"outline",className:"flex-1 rounded-xl",children:"Annuler"}),a.jsxs(ne,{onClick:oe,className:"flex-1 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Confirmer la suppression"]})]})]})}),p&&h&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Ue,{className:"w-6 h-6"}),"Dtails de l'Accident"]}),a.jsx("button",{onClick:()=>{x(!1),y(null)},className:"text-white hover:text-red-100 transition-colors",children:""})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date"}),a.jsxs("p",{className:"text-gray-800",children:[Se(new Date(h.date),"dd MMMM yyyy",{locale:Jt}),h.heure&&`  ${h.heure}`]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Gravit"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium inline-block ${pe(h.gravite)}`,children:h.gravite})]}),h.lieu&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Lieu"}),a.jsx("p",{className:"text-gray-800",children:h.lieu})]}),(()=>{const Y=n.find(J=>J.id===h.bus_id);return Y?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Bus"}),a.jsx("p",{className:"text-gray-800",children:Y.numero})]}):null})(),(h.chauffeur_prenom||h.chauffeur_nom||h.chauffeur_id)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Chauffeur"}),a.jsxs("p",{className:"text-gray-800",children:[h.chauffeur_prenom||""," ",h.chauffeur_nom||"",!h.chauffeur_prenom&&!h.chauffeur_nom&&h.chauffeur_id&&"Chauffeur ID: "+h.chauffeur_id]})]}),(h.responsable_prenom||h.responsable_nom||h.responsable_id)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Responsable"}),a.jsxs("p",{className:"text-gray-800",children:[h.responsable_prenom||""," ",h.responsable_nom||"",!h.responsable_prenom&&!h.responsable_nom&&h.responsable_id&&"Responsable ID: "+h.responsable_id]})]}),h.nombre_eleves!==null&&h.nombre_eleves!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre d'lves"}),a.jsx("p",{className:"text-gray-800",children:h.nombre_eleves})]}),h.nombre_blesses!==null&&h.nombre_blesses!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de blesss"}),a.jsx("p",{className:"text-red-600 font-semibold",children:h.nombre_blesses})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-800",children:h.description})]}),h.degats&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Dgts"}),a.jsx("p",{className:"text-gray-800",children:h.degats})]}),h.eleves_concernees&&Array.isArray(h.eleves_concernees)&&h.eleves_concernees.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(Ht,{className:"w-4 h-4"}),"lves prsents dans le bus"]}),a.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:a.jsx("ul",{className:"space-y-2",children:h.eleves_concernees.map((Y,J)=>a.jsx("li",{className:"text-gray-800",children:typeof Y=="object"&&Y.nom?`${Y.prenom} ${Y.nom}`:Y},J))})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(Od,{className:"w-4 h-4"}),"Photos"]}),(()=>{try{let Y=[];const J=h.photos;if(!J)return a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[a.jsx(Od,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune photo disponible"})]});if(Array.isArray(J))Y=J;else if(typeof J=="string"&&J.trim()!=="")try{if(J.trim().startsWith("[")||J.trim().startsWith("{")){const X=JSON.parse(J);Array.isArray(X)?Y=X:X&&typeof X=="object"&&(Array.isArray(X.photos)?Y=X.photos:X.data&&Array.isArray(X.data)?Y=X.data:(X.data||X.src||X.url)&&(Y=[X.data||X.src||X.url]))}else J.startsWith("data:image")&&(Y=[J])}catch(X){console.error("Erreur parsing photos:",X,J),J.startsWith("data:image")&&(Y=[J])}const W=Y.map((X,k)=>typeof X=="string"?X.trim()!==""&&(X.startsWith("data:image")||X.startsWith("http"))?X:null:X&&typeof X=="object"&&(X.data||X.src||X.url||X.base64)||null).filter(X=>X&&typeof X=="string"&&X.trim()!==""&&(X.startsWith("data:image")||X.startsWith("http")));return W.length===0?a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[a.jsx(Od,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune photo valide"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Les photos peuvent tre corrompues ou dans un format non support"})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:W.map((X,k)=>a.jsx(re.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>b(X),children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-gray-200 group-hover:border-red-400 transition-colors bg-gray-100",children:[a.jsx("img",{src:X,alt:`Photo ${k+1}`,className:"w-full h-32 object-cover",onError:K=>{console.error("Erreur chargement image:",k,X==null?void 0:X.substring(0,50)),K.target.parentElement.style.display="none"},onLoad:()=>{console.log("Image charge avec succs:",k)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(Di,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),a.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:["Photo ",k+1]})]})},k))})}catch(Y){return console.error("Erreur traitement photos:",Y,h.photos),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Erreur lors du chargement des photos"}),a.jsx("p",{className:"text-red-500 text-xs mt-1",children:Y.message})]})}})()]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[a.jsx(ne,{variant:"outline",onClick:()=>{x(!1),y(null)},className:"rounded-xl",children:"Fermer"}),h.statut==="En attente"&&a.jsxs(ne,{onClick:()=>{Q(h.id),x(!1),y(null)},className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(_w,{className:"w-4 h-4 mr-2"}),"Marquer comme lu"]}),h.bus_id&&a.jsxs(ne,{onClick:()=>Z(h),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Informer les tuteurs"]}),a.jsxs(ne,{onClick:()=>{B(h),x(!1),y(null),E(!0)},variant:"outline",className:"border-red-300 text-red-600 hover:bg-red-50 rounded-xl",children:[a.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),a.jsx(Or,{children:w&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",onClick:()=>b(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:Y=>Y.stopPropagation(),children:[a.jsx("button",{onClick:()=>b(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})}),a.jsx("img",{src:w,alt:"Photo accident",className:"w-full h-auto rounded-lg shadow-2xl"})]})})}),a.jsx(vp,{isOpen:I.show,message:I.message,type:I.type,onClose:()=>D({show:!1,message:"",type:"success"})})]})}function lde(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState(null),[d,m]=N.useState(!1),[g,j]=N.useState(null),[h,y]=N.useState("all"),[p,x]=N.useState("all"),[v,S]=N.useState(null),[w,b]=N.useState({show:!1,id:null}),[_,P]=N.useState({show:!1,message:"",type:"success"});N.useEffect(()=>{C()},[]);const C=async()=>{c(!0),j(null);try{const[O,$,R]=await Promise.all([ha.getAll(),wr.getAll(),Vr.getAll()]),Q=(O==null?void 0:O.data)||O||[],ae=($==null?void 0:$.data)||$||[],oe=(R==null?void 0:R.data)||R||[];r(Array.isArray(Q)?Q.sort((Z,pe)=>new Date(pe.date_creation||0)-new Date(Z.date_creation||0)):[]),s(Array.isArray(ae)?ae:[]),o(Array.isArray(oe)?oe:[])}catch(O){console.error("Erreur lors du chargement:",O),j("Erreur lors du chargement des donnes")}finally{c(!1)}},M=async(O,$)=>{try{await ha.update(O,{statut:$}),await C(),P({show:!0,message:`Signalement marqu comme ${$==="resolu"?"rsolu":$==="en_cours"?"en cours":"en attente"}`,type:"success"})}catch(R){console.error("Erreur lors de la mise  jour:",R),j("Erreur lors de la mise  jour du statut"),P({show:!0,message:"Erreur lors de la mise  jour du statut",type:"error"})}},A=O=>{b({show:!0,id:O})},E=async()=>{if(w.id)try{await ha.delete(w.id),await C(),b({show:!1,id:null})}catch(O){console.error("Erreur lors de la suppression:",O),j("Erreur lors de la suppression du signalement"),b({show:!1,id:null})}},T=O=>{switch(O){case"haute":return"bg-red-100 text-red-700 border-red-300";case"moyenne":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"faible":return"bg-green-100 text-green-700 border-green-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},B=O=>{switch(O){case"resolu":return"bg-green-100 text-green-700 border-green-300";case"en_cours":return"bg-blue-100 text-blue-700 border-blue-300";case"en_attente":return"bg-yellow-100 text-yellow-700 border-yellow-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},I=O=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[O]||O,D=t.filter(O=>!(h!=="all"&&O.statut!==h||p!=="all"&&O.urgence!==p));return l?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion des Problmes de Maintenance",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),g&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:g})}),a.jsxs("div",{className:"mb-6 flex gap-4 items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par statut"}),a.jsxs($e,{value:h,onValueChange:y,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les statuts"}),a.jsx(q,{value:"en_attente",children:"En attente"}),a.jsx(q,{value:"en_cours",children:"En cours"}),a.jsx(q,{value:"resolu",children:"Rsolu"})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par urgence"}),a.jsxs($e,{value:p,onValueChange:x,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Toutes les urgences"}),a.jsx(q,{value:"haute",children:"Haute"}),a.jsx(q,{value:"moyenne",children:"Moyenne"}),a.jsx(q,{value:"faible",children:"Faible"})]})]})]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-orange-600 via-orange-700 to-orange-600 flex justify-between items-center",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(ea,{className:"w-7 h-7 text-white"})}),"Gestion des Problmes de Maintenance"]})}),a.jsxs("div",{className:"divide-y divide-orange-100",children:[D.map(O=>{const $=n.find(Q=>Q.id===O.bus_id),R=i.find(Q=>Q.id===O.chauffeur_id);return a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-orange-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6 flex-1",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg ${O.urgence==="haute"?"bg-gradient-to-br from-red-600 to-red-700":O.urgence==="moyenne"?"bg-gradient-to-br from-yellow-600 to-yellow-700":"bg-gradient-to-br from-green-600 to-green-700"}`,children:a.jsx(ea,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:I(O.type_probleme)}),a.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold border-2 ${T(O.urgence)}`,children:O.urgence==="haute"?"URGENT":O.urgence==="moyenne"?"Moyenne":"Faible"}),a.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold border-2 ${B(O.statut)}`,children:O.statut==="resolu"?"Rsolu":O.statut==="en_cours"?"En cours":"En attente"})]}),a.jsx("p",{className:"text-gray-700 mb-4",children:O.description}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[$&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),$.numero]}),R&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(pt,{className:"w-4 h-4"}),R.prenom," ",R.nom]}),a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),Se(new Date(O.date_creation),"dd/MM/yyyy HH:mm",{locale:Jt})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 ml-6",children:[a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>{f(O),m(!0)},className:"rounded-xl border-2 border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400 w-11 h-11 shadow-md",children:a.jsx(Ca,{className:"w-5 h-5"})}),O.statut!=="resolu"&&a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>M(O.id,"resolu"),className:"rounded-xl border-2 border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400 w-11 h-11 shadow-md",children:a.jsx(mt,{className:"w-5 h-5"})}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>A(O.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ke,{className:"w-5 h-5"})})]})]})},O.id)}),D.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ea,{className:"w-10 h-10 text-orange-600 opacity-60"})}),a.jsx("p",{className:"text-orange-700 font-semibold text-lg",children:"Aucun problme signal"}),a.jsx("p",{className:"text-orange-600 text-sm mt-2",children:"Les signalements de maintenance apparatront ici"})]})]})]}),d&&u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(ea,{className:"w-8 h-8 text-orange-600"}),"Dtails du Signalement"]}),a.jsx(ne,{variant:"outline",size:"icon",onClick:()=>{m(!1),f(null)},className:"rounded-xl",children:a.jsx(Ke,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de problme"}),a.jsx("p",{className:"text-gray-800 font-semibold",children:I(u.type_probleme)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Urgence"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-lg font-semibold ${T(u.urgence)}`,children:u.urgence==="haute"?"URGENT":u.urgence==="moyenne"?"Moyenne":"Faible"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Statut"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-lg font-semibold ${B(u.statut)}`,children:u.statut==="resolu"?"Rsolu":u.statut==="en_cours"?"En cours":"En attente"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de signalement"}),a.jsx("p",{className:"text-gray-800",children:Se(new Date(u.date_creation),"dd/MM/yyyy  HH:mm",{locale:Jt})})]})]}),u.bus_id&&(()=>{const O=n.find($=>$.id===u.bus_id);return O?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),"Bus concern"]}),a.jsx("p",{className:"text-gray-800 font-semibold",children:O.numero})]}):null})(),u.chauffeur_id&&(()=>{const O=i.find($=>$.id===u.chauffeur_id);return O?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-2",children:[a.jsx(pt,{className:"w-4 h-4"}),"Chauffeur"]}),a.jsxs("p",{className:"text-gray-800",children:[O.prenom," ",O.nom]})]}):null})(),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-800 bg-gray-50 p-4 rounded-xl",children:u.description})]}),u.photos&&(()=>{try{let O=[];if(Array.isArray(u.photos)?O=u.photos:typeof u.photos=="string"&&(O=JSON.parse(u.photos)),Array.isArray(O)&&O.length>0)return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(Jn,{className:"w-4 h-4"}),"Photos (",O.length,")"]}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:O.map(($,R)=>{const Q=typeof $=="string"?$:($==null?void 0:$.data)||($==null?void 0:$.src)||$;return Q?a.jsx("div",{className:"relative group cursor-pointer",onClick:()=>S(Q),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 group-hover:border-orange-400 transition-colors",children:[a.jsx("img",{src:Q,alt:`Photo problme ${R+1}`,className:"w-full h-32 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(Di,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},R):null})})]})}catch(O){console.error("Erreur parsing photos:",O)}return null})(),u.date_resolution&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de rsolution"}),a.jsx("p",{className:"text-gray-800",children:Se(new Date(u.date_resolution),"dd/MM/yyyy  HH:mm",{locale:Jt})})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3 mt-6",children:[a.jsx(ne,{variant:"outline",onClick:()=>{m(!1),f(null)},className:"rounded-xl",children:"Fermer"}),u.statut!=="resolu"&&a.jsxs(ne,{onClick:()=>{M(u.id,"resolu"),m(!1),f(null)},className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(mt,{className:"w-4 h-4 mr-2"}),"Marquer comme rsolu"]})]})]})})}),v&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>S(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:O=>O.stopPropagation(),children:[a.jsx("button",{onClick:()=>S(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})}),a.jsx("img",{src:v,alt:"Photo problme",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),a.jsx(en,{isOpen:w.show,title:"Supprimer le signalement",message:"tes-vous sr de vouloir supprimer ce signalement ? Cette action est irrversible.",onConfirm:E,onCancel:()=>b({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(vp,{isOpen:_.show,message:_.message,type:_.type,onClose:()=>P({show:!1,message:"",type:"success"})})]})}function cde(){const e=it(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState("all"),[d,m]=N.useState(""),[g,j]=N.useState("mois"),[h,y]=N.useState(null);N.useEffect(()=>{p()},[]);const p=async()=>{c(!0);try{const[w,b,_]=await Promise.all([Tc.getAll(),wr.getAll(),Vr.getAll()]),P=(w==null?void 0:w.data)||w||[],C=(b==null?void 0:b.data)||b||[],M=(_==null?void 0:_.data)||_||[];r(Array.isArray(P)?P:[]),s(Array.isArray(C)?C:[]),o(Array.isArray(M)?M:[])}catch(w){console.error("Erreur lors du chargement:",w)}finally{c(!1)}},x=N.useMemo(()=>{let w=t;u!=="all"&&(w=w.filter(_=>_.bus_id===parseInt(u))),d&&(w=w.filter(_=>_.date===d));const b=new Date;if(g==="jour"){const _=Se(b,"yyyy-MM-dd");w=w.filter(P=>P.date===_)}else if(g==="semaine"){const _=new Date(b);_.setDate(_.getDate()-7),w=w.filter(P=>new Date(P.date)>=_)}else if(g==="mois"){const _=new Date(b.getFullYear(),b.getMonth(),1);w=w.filter(P=>new Date(P.date)>=_)}return w},[t,u,d,g]),v=N.useMemo(()=>{const w={};return x.forEach(b=>{const _=b.bus_id;w[_]||(w[_]={bus_numero:b.bus_numero,bus_marque:b.bus_marque,bus_modele:b.bus_modele,totalLitres:0,totalCout:0,nombrePrises:0,prixMoyenLitre:0}),w[_].totalLitres+=parseFloat(b.quantite_litres||0),w[_].totalCout+=parseFloat(b.prix_total||0),w[_].nombrePrises+=1}),Object.keys(w).forEach(b=>{const _=w[b];_.totalLitres>0&&(_.prixMoyenLitre=_.totalCout/_.totalLitres)}),Object.values(w).sort((b,_)=>_.totalLitres-b.totalLitres)},[x]),S=N.useMemo(()=>{const w=x.reduce((C,M)=>C+parseFloat(M.quantite_litres||0),0),b=x.reduce((C,M)=>C+parseFloat(M.prix_total||0),0),_=x.length,P=w>0?b/w:0;return{totalLitres:w,totalCout:b,nombrePrises:_,prixMoyenLitre:P}},[x]);return l?a.jsx(Wt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Wt,{title:"Gestion de la Consommation d'Essence",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(Re("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(Ot,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs("div",{className:"mb-6 flex gap-4 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par bus"}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"all",children:"Tous les bus"}),n.map(w=>a.jsxs(q,{value:w.id.toString(),children:[w.numero," - ",w.marque," ",w.modele]},w.id))]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priode"}),a.jsxs($e,{value:g,onValueChange:j,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(ke,{children:[a.jsx(q,{value:"tous",children:"Toutes les priodes"}),a.jsx(q,{value:"jour",children:"Aujourd'hui"}),a.jsx(q,{value:"semaine",children:"7 derniers jours"}),a.jsx(q,{value:"mois",children:"Ce mois"})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date spcifique"}),a.jsx(me,{type:"date",value:d,onChange:w=>m(w.target.value),className:"rounded-xl border-2 border-amber-200"})]}),a.jsx("div",{})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(an,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total litres"}),a.jsxs("p",{className:"text-3xl font-bold",children:[S.totalLitres.toFixed(1)," L"]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(lu,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Cot total"}),a.jsxs("p",{className:"text-3xl font-bold",children:[S.totalCout.toFixed(2)," DH"]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(Qr,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Nombre de prises"}),a.jsx("p",{className:"text-3xl font-bold",children:S.nombrePrises})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(t$,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Prix moyen /L"}),a.jsxs("p",{className:"text-3xl font-bold",children:[S.prixMoyenLitre.toFixed(2)," DH"]})]})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100 mb-6",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-amber-600 via-amber-700 to-amber-600",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(tt,{className:"w-7 h-7 text-white"})}),"Consommation par Bus"]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:v.length===0?a.jsxs("div",{className:"p-16 text-center",children:[a.jsx(an,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-semibold",children:"Aucune consommation enregistre"})]}):v.map((w,b)=>a.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:b*.1},className:"p-8 hover:bg-gradient-to-r hover:from-amber-50 hover:to-white transition-all duration-300",children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(tt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-amber-900 mb-3",children:w.bus_numero}),a.jsxs("p",{className:"text-gray-600 mb-4",children:[w.bus_marque," ",w.bus_modele]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total litres"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[w.totalLitres.toFixed(1)," L"]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cot total"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[w.totalCout.toFixed(2)," DH"]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nombre de prises"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:w.nombrePrises})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Prix moyen /L"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[w.prixMoyenLitre.toFixed(2)," DH"]})]})]})]})]})})},w.bus_numero))})]}),a.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-gray-700 via-gray-800 to-gray-700",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Qr,{className:"w-7 h-7 text-white"})}),"Historique des Prises d'Essence"]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:x.length===0?a.jsxs("div",{className:"p-16 text-center",children:[a.jsx(an,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-semibold",children:"Aucune prise d'essence enregistre"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Les remplissages d'essence effectus par les chauffeurs apparatront ici"})]}):x.map(w=>a.jsx(re.div,{className:"p-8 hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(an,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[Se(new Date(w.date),"dd MMMM yyyy",{locale:Jt}),"  ",w.heure]}),w.bus_numero&&a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md",children:w.bus_numero})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Quantit"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[w.quantite_litres," L"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prix total"}),a.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[parseFloat(w.prix_total).toFixed(2)," DH"]})]}),w.kilometrage_actuel&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Kilomtrage"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[w.kilometrage_actuel," km"]})]}),w.station_service&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Station"}),a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:w.station_service})]}),w.chauffeur_prenom&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Chauffeur"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(pt,{className:"w-4 h-4"}),w.chauffeur_prenom," ",w.chauffeur_nom]})]})]}),w.photo_ticket&&w.photo_ticket!=="null"&&w.photo_ticket!==""&&w.photo_ticket!==null&&(()=>{try{let b=w.photo_ticket;if(typeof b=="string"&&b.trim().startsWith("["))try{const _=JSON.parse(b);Array.isArray(_)&&_.length>0&&(b=_[0])}catch{}return typeof b=="string"&&(b=b.replace(/^["']+|["']+$/g,"")),typeof b=="string"&&(b.startsWith("data:image")||b.startsWith("http"))?a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Jn,{className:"w-5 h-5 text-amber-600"}),a.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Photo du ticket"})]}),a.jsxs("div",{className:"relative group cursor-pointer inline-block",onClick:()=>y(b),children:[a.jsx("img",{src:b,alt:"Ticket essence",className:"max-w-xs h-40 object-contain rounded-lg border-2 border-amber-200 bg-gray-50 hover:border-amber-400 transition-colors shadow-md",onError:_=>{console.error("Erreur chargement image ticket"),_.target.style.display="none"}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center rounded-lg pointer-events-none",children:a.jsx(Di,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})]}):null}catch(b){return console.error("Erreur traitement photo:",b),null}})()]})]})})},w.id))})]}),h&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>y(null),children:a.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:w=>w.stopPropagation(),children:[a.jsx("button",{onClick:()=>y(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ke,{className:"w-6 h-6"})}),a.jsx("img",{src:h,alt:"Photo ticket essence",className:"w-full h-auto rounded-lg shadow-2xl"})]})})]})}function ude(){return a.jsx(VD,{children:a.jsxs($D,{children:[a.jsx(ht,{path:"/",element:a.jsx(T1,{})}),a.jsx(ht,{path:"/Home",element:a.jsx(T1,{})}),a.jsx(ht,{path:"/ChauffeurLogin",element:a.jsx(vL,{})}),a.jsx(ht,{path:"/ChauffeurDashboard",element:a.jsx(o8,{})}),a.jsx(ht,{path:"/ChauffeurNotifications",element:a.jsx(l8,{})}),a.jsx(ht,{path:"/ResponsableLogin",element:a.jsx(c8,{})}),a.jsx(ht,{path:"/ResponsableDashboard",element:a.jsx(d8,{})}),a.jsx(ht,{path:"/ResponsableEleveDetails",element:a.jsx(Mue,{})}),a.jsx(ht,{path:"/TuteurLogin",element:a.jsx(Due,{})}),a.jsx(ht,{path:"/TuteurRegister",element:a.jsx(Bue,{})}),a.jsx(ht,{path:"/TuteurDashboard",element:a.jsx(Rue,{})}),a.jsx(ht,{path:"/TuteurProfile",element:a.jsx(Fue,{})}),a.jsx(ht,{path:"/TuteurInscription",element:a.jsx(Uue,{})}),a.jsx(ht,{path:"/TuteurPaiement",element:a.jsx(Wue,{})}),a.jsx(ht,{path:"/TuteurEleveDetails",element:a.jsx(que,{})}),a.jsx(ht,{path:"/TuteurDemandes",element:a.jsx(Gue,{})}),a.jsx(ht,{path:"/TuteurNotifications",element:a.jsx(Kue,{})}),a.jsx(ht,{path:"/AdminLogin",element:a.jsx(Yue,{})}),a.jsx(ht,{path:"/AdminDashboard",element:a.jsx(Jue,{})}),a.jsx(ht,{path:"/AdminEleves",element:a.jsx(ede,{})}),a.jsx(ht,{path:"/AdminBus",element:a.jsx(Zue,{})}),a.jsx(ht,{path:"/AdminChauffeurs",element:a.jsx(Que,{})}),a.jsx(ht,{path:"/AdminInscriptions",element:a.jsx(tde,{})}),a.jsx(ht,{path:"/AdminStats",element:a.jsx(rde,{})}),a.jsx(ht,{path:"/AdminPaiements",element:a.jsx(nde,{})}),a.jsx(ht,{path:"/AdminZones",element:a.jsx(sde,{})}),a.jsx(ht,{path:"/AdminProfile",element:a.jsx(ade,{})}),a.jsx(ht,{path:"/AdminNotifications",element:a.jsx(ide,{})}),a.jsx(ht,{path:"/AdminAccidents",element:a.jsx(ode,{})}),a.jsx(ht,{path:"/AdminProblemes",element:a.jsx(lde,{})}),a.jsx(ht,{path:"/AdminEssence",element:a.jsx(cde,{})}),a.jsx(ht,{path:"*",element:a.jsx(MD,{to:"/",replace:!0})})]})})}Lg.createRoot(document.getElementById("root")).render(a.jsx(H.StrictMode,{children:a.jsx(ude,{})}));
