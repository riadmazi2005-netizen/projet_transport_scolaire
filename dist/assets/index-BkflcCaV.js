function m5(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var fd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C_={exports:{}},Jm={},O_={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ku=Symbol.for("react.element"),h5=Symbol.for("react.portal"),p5=Symbol.for("react.fragment"),g5=Symbol.for("react.strict_mode"),x5=Symbol.for("react.profiler"),y5=Symbol.for("react.provider"),v5=Symbol.for("react.context"),b5=Symbol.for("react.forward_ref"),j5=Symbol.for("react.suspense"),w5=Symbol.for("react.memo"),N5=Symbol.for("react.lazy"),aj=Symbol.iterator;function S5(e){return e===null||typeof e!="object"?null:(e=aj&&e[aj]||e["@@iterator"],typeof e=="function"?e:null)}var T_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k_=Object.assign,M_={};function El(e,t,r){this.props=e,this.context=t,this.refs=M_,this.updater=r||T_}El.prototype.isReactComponent={};El.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};El.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function D_(){}D_.prototype=El.prototype;function Ny(e,t,r){this.props=e,this.context=t,this.refs=M_,this.updater=r||T_}var Sy=Ny.prototype=new D_;Sy.constructor=Ny;k_(Sy,El.prototype);Sy.isPureReactComponent=!0;var sj=Array.isArray,$_=Object.prototype.hasOwnProperty,_y={current:null},I_={key:!0,ref:!0,__self:!0,__source:!0};function L_(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$_.call(t,n)&&!I_.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ku,type:e,key:i,ref:o,props:s,_owner:_y.current}}function _5(e,t){return{$$typeof:Ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ay(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ku}function A5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ij=/\/+/g;function jp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A5(""+e.key):t.toString(36)}function Xd(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ku:case h5:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+jp(o,0):n,sj(s)?(r="",e!=null&&(r=e.replace(ij,"$&/")+"/"),Xd(s,t,r,"",function(u){return u})):s!=null&&(Ay(s)&&(s=_5(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ij,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",sj(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+jp(i,l);o+=Xd(i,t,r,c,s)}else if(c=S5(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+jp(i,l++),o+=Xd(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function md(e,t,r){if(e==null)return e;var n=[],s=0;return Xd(e,n,"","",function(i){return t.call(r,i,s++)}),n}function P5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Zr={current:null},Jd={transition:null},E5={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:_y};function R_(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:md,forEach:function(e,t,r){md(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return md(e,function(){t++}),t},toArray:function(e){return md(e,function(t){return t})||[]},only:function(e){if(!Ay(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ot.Component=El;ot.Fragment=p5;ot.Profiler=x5;ot.PureComponent=Ny;ot.StrictMode=g5;ot.Suspense=j5;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E5;ot.act=R_;ot.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=k_({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_y.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)$_.call(t,c)&&!I_.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Ku,type:e.type,key:s,ref:i,props:n,_owner:o}};ot.createContext=function(e){return e={$$typeof:v5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:y5,_context:e},e.Consumer=e};ot.createElement=L_;ot.createFactory=function(e){var t=L_.bind(null,e);return t.type=e,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(e){return{$$typeof:b5,render:e}};ot.isValidElement=Ay;ot.lazy=function(e){return{$$typeof:N5,_payload:{_status:-1,_result:e},_init:P5}};ot.memo=function(e,t){return{$$typeof:w5,type:e,compare:t===void 0?null:t}};ot.startTransition=function(e){var t=Jd.transition;Jd.transition={};try{e()}finally{Jd.transition=t}};ot.unstable_act=R_;ot.useCallback=function(e,t){return Zr.current.useCallback(e,t)};ot.useContext=function(e){return Zr.current.useContext(e)};ot.useDebugValue=function(){};ot.useDeferredValue=function(e){return Zr.current.useDeferredValue(e)};ot.useEffect=function(e,t){return Zr.current.useEffect(e,t)};ot.useId=function(){return Zr.current.useId()};ot.useImperativeHandle=function(e,t,r){return Zr.current.useImperativeHandle(e,t,r)};ot.useInsertionEffect=function(e,t){return Zr.current.useInsertionEffect(e,t)};ot.useLayoutEffect=function(e,t){return Zr.current.useLayoutEffect(e,t)};ot.useMemo=function(e,t){return Zr.current.useMemo(e,t)};ot.useReducer=function(e,t,r){return Zr.current.useReducer(e,t,r)};ot.useRef=function(e){return Zr.current.useRef(e)};ot.useState=function(e){return Zr.current.useState(e)};ot.useSyncExternalStore=function(e,t,r){return Zr.current.useSyncExternalStore(e,t,r)};ot.useTransition=function(){return Zr.current.useTransition()};ot.version="18.3.1";O_.exports=ot;var N=O_.exports;const V=jt(N),C5=m5({__proto__:null,default:V},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O5=N,T5=Symbol.for("react.element"),k5=Symbol.for("react.fragment"),M5=Object.prototype.hasOwnProperty,D5=O5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$5={key:!0,ref:!0,__self:!0,__source:!0};function B_(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)M5.call(t,n)&&!$5.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:T5,type:e,key:i,ref:o,props:s,_owner:D5.current}}Jm.Fragment=k5;Jm.jsx=B_;Jm.jsxs=B_;C_.exports=Jm;var a=C_.exports,Lg={},F_={exports:{}},_n={},z_={exports:{}},V_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,z){var I=B.length;B.push(z);e:for(;0<I;){var X=I-1>>>1,re=B[X];if(0<s(re,z))B[X]=z,B[I]=re,I=X;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var z=B[0],I=B.pop();if(I!==z){B[0]=I;e:for(var X=0,re=B.length,W=re>>>1;X<W;){var de=2*(X+1)-1,Ae=B[de],Be=de+1,K=B[Be];if(0>s(Ae,I))Be<re&&0>s(K,Ae)?(B[X]=K,B[Be]=I,X=Be):(B[X]=Ae,B[de]=I,X=de);else if(Be<re&&0>s(K,I))B[X]=K,B[Be]=I,X=Be;else break e}}return z}function s(B,z){var I=B.sortIndex-z.sortIndex;return I!==0?I:B.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,m=3,g=!1,b=!1,h=!1,j=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(B){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=B)n(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(u)}}function S(B){if(h=!1,x(B),!b)if(r(c)!==null)b=!0,F(w);else{var z=r(u);z!==null&&R(S,z.startTime-B)}}function w(B,z){b=!1,h&&(h=!1,p(P),P=-1),g=!0;var I=m;try{for(x(z),d=r(c);d!==null&&(!(d.expirationTime>z)||B&&!A());){var X=d.callback;if(typeof X=="function"){d.callback=null,m=d.priorityLevel;var re=X(d.expirationTime<=z);z=e.unstable_now(),typeof re=="function"?d.callback=re:d===r(c)&&n(c),x(z)}else n(c);d=r(c)}if(d!==null)var W=!0;else{var de=r(u);de!==null&&R(S,de.startTime-z),W=!1}return W}finally{d=null,m=I,g=!1}}var v=!1,_=null,P=-1,C=5,$=-1;function A(){return!(e.unstable_now()-$<C)}function T(){if(_!==null){var B=e.unstable_now();$=B;var z=!0;try{z=_(!0,B)}finally{z?O():(v=!1,_=null)}}else v=!1}var O;if(typeof y=="function")O=function(){y(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=T,O=function(){M.postMessage(null)}}else O=function(){j(T,0)};function F(B){_=B,v||(v=!0,O())}function R(B,z){P=j(function(){B(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){b||g||(b=!0,F(w))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var I=m;m=z;try{return B()}finally{m=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var I=m;m=B;try{return z()}finally{m=I}},e.unstable_scheduleCallback=function(B,z,I){var X=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?X+I:X):I=X,B){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=I+re,B={id:f++,callback:z,priorityLevel:B,startTime:I,expirationTime:re,sortIndex:-1},I>X?(B.sortIndex=I,t(u,B),r(c)===null&&B===r(u)&&(h?(p(P),P=-1):h=!0,R(S,I-X))):(B.sortIndex=re,t(c,B),b||g||(b=!0,F(w))),B},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(B){var z=m;return function(){var I=m;m=z;try{return B.apply(this,arguments)}finally{m=I}}}})(V_);z_.exports=V_;var I5=z_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5=N,Nn=I5;function ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U_=new Set,Vc={};function Xi(e,t){Go(e,t),Go(e+"Capture",t)}function Go(e,t){for(Vc[e]=t,e=0;e<t.length;e++)U_.add(t[e])}var Xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,R5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oj={},lj={};function B5(e){return Rg.call(lj,e)?!0:Rg.call(oj,e)?!1:R5.test(e)?lj[e]=!0:(oj[e]=!0,!1)}function F5(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function z5(e,t,r,n){if(t===null||typeof t>"u"||F5(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qr(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Cr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Cr[e]=new Qr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Cr[t]=new Qr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Cr[e]=new Qr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Cr[e]=new Qr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Cr[e]=new Qr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Cr[e]=new Qr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Cr[e]=new Qr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Cr[e]=new Qr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Cr[e]=new Qr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Py=/[\-:]([a-z])/g;function Ey(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Py,Ey);Cr[t]=new Qr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Py,Ey);Cr[t]=new Qr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Py,Ey);Cr[t]=new Qr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Cr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!1,!1)});Cr.xlinkHref=new Qr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Cr[e]=new Qr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Cy(e,t,r,n){var s=Cr.hasOwnProperty(t)?Cr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(z5(t,r,s,n)&&(r=null),n||s===null?B5(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var os=L5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hd=Symbol.for("react.element"),uo=Symbol.for("react.portal"),fo=Symbol.for("react.fragment"),Oy=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),W_=Symbol.for("react.provider"),H_=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),Fg=Symbol.for("react.suspense"),zg=Symbol.for("react.suspense_list"),ky=Symbol.for("react.memo"),gs=Symbol.for("react.lazy"),q_=Symbol.for("react.offscreen"),cj=Symbol.iterator;function Gl(e){return e===null||typeof e!="object"?null:(e=cj&&e[cj]||e["@@iterator"],typeof e=="function"?e:null)}var Zt=Object.assign,wp;function hc(e){if(wp===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);wp=t&&t[1]||""}return`
`+wp+e}var Np=!1;function Sp(e,t){if(!e||Np)return"";Np=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Np=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?hc(e):""}function V5(e){switch(e.tag){case 5:return hc(e.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return e=Sp(e.type,!1),e;case 11:return e=Sp(e.type.render,!1),e;case 1:return e=Sp(e.type,!0),e;default:return""}}function Vg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fo:return"Fragment";case uo:return"Portal";case Bg:return"Profiler";case Oy:return"StrictMode";case Fg:return"Suspense";case zg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case H_:return(e.displayName||"Context")+".Consumer";case W_:return(e._context.displayName||"Context")+".Provider";case Ty:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ky:return t=e.displayName||null,t!==null?t:Vg(e.type)||"Memo";case gs:t=e._payload,e=e._init;try{return Vg(e(t))}catch{}}return null}function U5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vg(t);case 8:return t===Oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function G_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function W5(e){var t=G_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function pd(e){e._valueTracker||(e._valueTracker=W5(e))}function K_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function pf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ug(e,t){var r=t.checked;return Zt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function uj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Hs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Y_(e,t){t=t.checked,t!=null&&Cy(e,"checked",t,!1)}function Wg(e,t){Y_(e,t);var r=Hs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Hg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Hg(e,t.type,Hs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function dj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Hg(e,t,r){(t!=="number"||pf(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pc=Array.isArray;function Do(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Hs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function qg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Zt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ge(92));if(pc(r)){if(1<r.length)throw Error(ge(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hs(r)}}function X_(e,t){var r=Hs(t.value),n=Hs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function mj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function J_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?J_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var gd,Z_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(gd=gd||document.createElement("div"),gd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=gd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H5=["Webkit","ms","Moz","O"];Object.keys(jc).forEach(function(e){H5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jc[t]=jc[e]})});function Q_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||jc.hasOwnProperty(e)&&jc[e]?(""+t).trim():t+"px"}function eA(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Q_(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var q5=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kg(e,t){if(t){if(q5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ge(62))}}function Yg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xg=null;function My(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jg=null,$o=null,Io=null;function hj(e){if(e=Ju(e)){if(typeof Jg!="function")throw Error(ge(280));var t=e.stateNode;t&&(t=rh(t),Jg(e.stateNode,e.type,t))}}function tA(e){$o?Io?Io.push(e):Io=[e]:$o=e}function rA(){if($o){var e=$o,t=Io;if(Io=$o=null,hj(e),t)for(e=0;e<t.length;e++)hj(t[e])}}function nA(e,t){return e(t)}function aA(){}var _p=!1;function sA(e,t,r){if(_p)return e(t,r);_p=!0;try{return nA(e,t,r)}finally{_p=!1,($o!==null||Io!==null)&&(aA(),rA())}}function Wc(e,t){var r=e.stateNode;if(r===null)return null;var n=rh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ge(231,t,typeof r));return r}var Zg=!1;if(Xa)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){Zg=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{Zg=!1}function G5(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var wc=!1,gf=null,xf=!1,Qg=null,K5={onError:function(e){wc=!0,gf=e}};function Y5(e,t,r,n,s,i,o,l,c){wc=!1,gf=null,G5.apply(K5,arguments)}function X5(e,t,r,n,s,i,o,l,c){if(Y5.apply(this,arguments),wc){if(wc){var u=gf;wc=!1,gf=null}else throw Error(ge(198));xf||(xf=!0,Qg=u)}}function Ji(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function iA(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pj(e){if(Ji(e)!==e)throw Error(ge(188))}function J5(e){var t=e.alternate;if(!t){if(t=Ji(e),t===null)throw Error(ge(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return pj(s),e;if(i===n)return pj(s),t;i=i.sibling}throw Error(ge(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?e:t}function oA(e){return e=J5(e),e!==null?lA(e):null}function lA(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lA(e);if(t!==null)return t;e=e.sibling}return null}var cA=Nn.unstable_scheduleCallback,gj=Nn.unstable_cancelCallback,Z5=Nn.unstable_shouldYield,Q5=Nn.unstable_requestPaint,nr=Nn.unstable_now,eM=Nn.unstable_getCurrentPriorityLevel,Dy=Nn.unstable_ImmediatePriority,uA=Nn.unstable_UserBlockingPriority,yf=Nn.unstable_NormalPriority,tM=Nn.unstable_LowPriority,dA=Nn.unstable_IdlePriority,Zm=null,ga=null;function rM(e){if(ga&&typeof ga.onCommitFiberRoot=="function")try{ga.onCommitFiberRoot(Zm,e,void 0,(e.current.flags&128)===128)}catch{}}var ta=Math.clz32?Math.clz32:sM,nM=Math.log,aM=Math.LN2;function sM(e){return e>>>=0,e===0?32:31-(nM(e)/aM|0)|0}var xd=64,yd=4194304;function gc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=gc(l):(i&=o,i!==0&&(n=gc(i)))}else o=r&~s,o!==0?n=gc(o):i!==0&&(n=gc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ta(t),s=1<<r,n|=e[r],t&=~s;return n}function iM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ta(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=iM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ex(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fA(){var e=xd;return xd<<=1,!(xd&4194240)&&(xd=64),e}function Ap(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Yu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ta(t),e[t]=r}function lM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ta(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function $y(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ta(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var bt=0;function mA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hA,Iy,pA,gA,xA,tx=!1,vd=[],Os=null,Ts=null,ks=null,Hc=new Map,qc=new Map,js=[],cM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xj(e,t){switch(e){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":ks=null;break;case"pointerover":case"pointerout":Hc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(t.pointerId)}}function Yl(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ju(t),t!==null&&Iy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function uM(e,t,r,n,s){switch(t){case"focusin":return Os=Yl(Os,e,t,r,n,s),!0;case"dragenter":return Ts=Yl(Ts,e,t,r,n,s),!0;case"mouseover":return ks=Yl(ks,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Hc.set(i,Yl(Hc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,qc.set(i,Yl(qc.get(i)||null,e,t,r,n,s)),!0}return!1}function yA(e){var t=wi(e.target);if(t!==null){var r=Ji(t);if(r!==null){if(t=r.tag,t===13){if(t=iA(r),t!==null){e.blockedOn=t,xA(e.priority,function(){pA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=rx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Xg=n,r.target.dispatchEvent(n),Xg=null}else return t=Ju(r),t!==null&&Iy(t),e.blockedOn=r,!1;t.shift()}return!0}function yj(e,t,r){Zd(e)&&r.delete(t)}function dM(){tx=!1,Os!==null&&Zd(Os)&&(Os=null),Ts!==null&&Zd(Ts)&&(Ts=null),ks!==null&&Zd(ks)&&(ks=null),Hc.forEach(yj),qc.forEach(yj)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,tx||(tx=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,dM)))}function Gc(e){function t(s){return Xl(s,e)}if(0<vd.length){Xl(vd[0],e);for(var r=1;r<vd.length;r++){var n=vd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Os!==null&&Xl(Os,e),Ts!==null&&Xl(Ts,e),ks!==null&&Xl(ks,e),Hc.forEach(t),qc.forEach(t),r=0;r<js.length;r++)n=js[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<js.length&&(r=js[0],r.blockedOn===null);)yA(r),r.blockedOn===null&&js.shift()}var Lo=os.ReactCurrentBatchConfig,bf=!0;function fM(e,t,r,n){var s=bt,i=Lo.transition;Lo.transition=null;try{bt=1,Ly(e,t,r,n)}finally{bt=s,Lo.transition=i}}function mM(e,t,r,n){var s=bt,i=Lo.transition;Lo.transition=null;try{bt=4,Ly(e,t,r,n)}finally{bt=s,Lo.transition=i}}function Ly(e,t,r,n){if(bf){var s=rx(e,t,r,n);if(s===null)Ip(e,t,n,jf,r),xj(e,n);else if(uM(s,e,t,r,n))n.stopPropagation();else if(xj(e,n),t&4&&-1<cM.indexOf(e)){for(;s!==null;){var i=Ju(s);if(i!==null&&hA(i),i=rx(e,t,r,n),i===null&&Ip(e,t,n,jf,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Ip(e,t,n,null,r)}}var jf=null;function rx(e,t,r,n){if(jf=null,e=My(n),e=wi(e),e!==null)if(t=Ji(e),t===null)e=null;else if(r=t.tag,r===13){if(e=iA(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return jf=e,null}function vA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eM()){case Dy:return 1;case uA:return 4;case yf:case tM:return 16;case dA:return 536870912;default:return 16}default:return 16}}var Ss=null,Ry=null,Qd=null;function bA(){if(Qd)return Qd;var e,t=Ry,r=t.length,n,s="value"in Ss?Ss.value:Ss.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Qd=s.slice(e,1<n?1-n:void 0)}function ef(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bd(){return!0}function vj(){return!1}function An(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bd:vj,this.isPropagationStopped=vj,this}return Zt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bd)},persist:function(){},isPersistent:bd}),t}var Cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},By=An(Cl),Xu=Zt({},Cl,{view:0,detail:0}),hM=An(Xu),Pp,Ep,Jl,Qm=Zt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jl&&(Jl&&e.type==="mousemove"?(Pp=e.screenX-Jl.screenX,Ep=e.screenY-Jl.screenY):Ep=Pp=0,Jl=e),Pp)},movementY:function(e){return"movementY"in e?e.movementY:Ep}}),bj=An(Qm),pM=Zt({},Qm,{dataTransfer:0}),gM=An(pM),xM=Zt({},Xu,{relatedTarget:0}),Cp=An(xM),yM=Zt({},Cl,{animationName:0,elapsedTime:0,pseudoElement:0}),vM=An(yM),bM=Zt({},Cl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jM=An(bM),wM=Zt({},Cl,{data:0}),jj=An(wM),NM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_M={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_M[e])?!!t[e]:!1}function Fy(){return AM}var PM=Zt({},Xu,{key:function(e){if(e.key){var t=NM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ef(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fy,charCode:function(e){return e.type==="keypress"?ef(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ef(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),EM=An(PM),CM=Zt({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wj=An(CM),OM=Zt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fy}),TM=An(OM),kM=Zt({},Cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),MM=An(kM),DM=Zt({},Qm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$M=An(DM),IM=[9,13,27,32],zy=Xa&&"CompositionEvent"in window,Nc=null;Xa&&"documentMode"in document&&(Nc=document.documentMode);var LM=Xa&&"TextEvent"in window&&!Nc,jA=Xa&&(!zy||Nc&&8<Nc&&11>=Nc),Nj=" ",Sj=!1;function wA(e,t){switch(e){case"keyup":return IM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mo=!1;function RM(e,t){switch(e){case"compositionend":return NA(t);case"keypress":return t.which!==32?null:(Sj=!0,Nj);case"textInput":return e=t.data,e===Nj&&Sj?null:e;default:return null}}function BM(e,t){if(mo)return e==="compositionend"||!zy&&wA(e,t)?(e=bA(),Qd=Ry=Ss=null,mo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jA&&t.locale!=="ko"?null:t.data;default:return null}}var FM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _j(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FM[e.type]:t==="textarea"}function SA(e,t,r,n){tA(n),t=wf(t,"onChange"),0<t.length&&(r=new By("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Sc=null,Kc=null;function zM(e){$A(e,0)}function eh(e){var t=go(e);if(K_(t))return e}function VM(e,t){if(e==="change")return t}var _A=!1;if(Xa){var Op;if(Xa){var Tp="oninput"in document;if(!Tp){var Aj=document.createElement("div");Aj.setAttribute("oninput","return;"),Tp=typeof Aj.oninput=="function"}Op=Tp}else Op=!1;_A=Op&&(!document.documentMode||9<document.documentMode)}function Pj(){Sc&&(Sc.detachEvent("onpropertychange",AA),Kc=Sc=null)}function AA(e){if(e.propertyName==="value"&&eh(Kc)){var t=[];SA(t,Kc,e,My(e)),sA(zM,t)}}function UM(e,t,r){e==="focusin"?(Pj(),Sc=t,Kc=r,Sc.attachEvent("onpropertychange",AA)):e==="focusout"&&Pj()}function WM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eh(Kc)}function HM(e,t){if(e==="click")return eh(t)}function qM(e,t){if(e==="input"||e==="change")return eh(t)}function GM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var aa=typeof Object.is=="function"?Object.is:GM;function Yc(e,t){if(aa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Rg.call(t,s)||!aa(e[s],t[s]))return!1}return!0}function Ej(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cj(e,t){var r=Ej(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ej(r)}}function PA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?PA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function EA(){for(var e=window,t=pf();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=pf(e.document)}return t}function Vy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function KM(e){var t=EA(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&PA(r.ownerDocument.documentElement,r)){if(n!==null&&Vy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Cj(r,i);var o=Cj(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var YM=Xa&&"documentMode"in document&&11>=document.documentMode,ho=null,nx=null,_c=null,ax=!1;function Oj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ax||ho==null||ho!==pf(n)||(n=ho,"selectionStart"in n&&Vy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_c&&Yc(_c,n)||(_c=n,n=wf(nx,"onSelect"),0<n.length&&(t=new By("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ho)))}function jd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var po={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},kp={},CA={};Xa&&(CA=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function th(e){if(kp[e])return kp[e];if(!po[e])return e;var t=po[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in CA)return kp[e]=t[r];return e}var OA=th("animationend"),TA=th("animationiteration"),kA=th("animationstart"),MA=th("transitionend"),DA=new Map,Tj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(e,t){DA.set(e,t),Xi(t,[e])}for(var Mp=0;Mp<Tj.length;Mp++){var Dp=Tj[Mp],XM=Dp.toLowerCase(),JM=Dp[0].toUpperCase()+Dp.slice(1);Js(XM,"on"+JM)}Js(OA,"onAnimationEnd");Js(TA,"onAnimationIteration");Js(kA,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(MA,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZM=new Set("cancel close invalid load scroll toggle".split(" ").concat(xc));function kj(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,X5(n,t,void 0,e),e.currentTarget=null}function $A(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;kj(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;kj(s,l,u),i=c}}}if(xf)throw e=Qg,xf=!1,Qg=null,e}function Dt(e,t){var r=t[cx];r===void 0&&(r=t[cx]=new Set);var n=e+"__bubble";r.has(n)||(IA(t,e,2,!1),r.add(n))}function $p(e,t,r){var n=0;t&&(n|=4),IA(r,e,n,t)}var wd="_reactListening"+Math.random().toString(36).slice(2);function Xc(e){if(!e[wd]){e[wd]=!0,U_.forEach(function(r){r!=="selectionchange"&&(ZM.has(r)||$p(r,!1,e),$p(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wd]||(t[wd]=!0,$p("selectionchange",!1,t))}}function IA(e,t,r,n){switch(vA(t)){case 1:var s=fM;break;case 4:s=mM;break;default:s=Ly}r=s.bind(null,t,r,e),s=void 0,!Zg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Ip(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=wi(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}sA(function(){var u=i,f=My(r),d=[];e:{var m=DA.get(e);if(m!==void 0){var g=By,b=e;switch(e){case"keypress":if(ef(r)===0)break e;case"keydown":case"keyup":g=EM;break;case"focusin":b="focus",g=Cp;break;case"focusout":b="blur",g=Cp;break;case"beforeblur":case"afterblur":g=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=bj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=gM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=TM;break;case OA:case TA:case kA:g=vM;break;case MA:g=MM;break;case"scroll":g=hM;break;case"wheel":g=$M;break;case"copy":case"cut":case"paste":g=jM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wj}var h=(t&4)!==0,j=!h&&e==="scroll",p=h?m!==null?m+"Capture":null:m;h=[];for(var y=u,x;y!==null;){x=y;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,p!==null&&(S=Wc(y,p),S!=null&&h.push(Jc(y,S,x)))),j)break;y=y.return}0<h.length&&(m=new g(m,b,null,r,f),d.push({event:m,listeners:h}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&r!==Xg&&(b=r.relatedTarget||r.fromElement)&&(wi(b)||b[Ja]))break e;if((g||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=u,b=b?wi(b):null,b!==null&&(j=Ji(b),b!==j||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=u),g!==b)){if(h=bj,S="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(h=wj,S="onPointerLeave",p="onPointerEnter",y="pointer"),j=g==null?m:go(g),x=b==null?m:go(b),m=new h(S,y+"leave",g,r,f),m.target=j,m.relatedTarget=x,S=null,wi(f)===u&&(h=new h(p,y+"enter",b,r,f),h.target=x,h.relatedTarget=j,S=h),j=S,g&&b)t:{for(h=g,p=b,y=0,x=h;x;x=so(x))y++;for(x=0,S=p;S;S=so(S))x++;for(;0<y-x;)h=so(h),y--;for(;0<x-y;)p=so(p),x--;for(;y--;){if(h===p||p!==null&&h===p.alternate)break t;h=so(h),p=so(p)}h=null}else h=null;g!==null&&Mj(d,m,g,h,!1),b!==null&&j!==null&&Mj(d,j,b,h,!0)}}e:{if(m=u?go(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var w=VM;else if(_j(m))if(_A)w=qM;else{w=WM;var v=UM}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=HM);if(w&&(w=w(e,u))){SA(d,w,r,f);break e}v&&v(e,m,u),e==="focusout"&&(v=m._wrapperState)&&v.controlled&&m.type==="number"&&Hg(m,"number",m.value)}switch(v=u?go(u):window,e){case"focusin":(_j(v)||v.contentEditable==="true")&&(ho=v,nx=u,_c=null);break;case"focusout":_c=nx=ho=null;break;case"mousedown":ax=!0;break;case"contextmenu":case"mouseup":case"dragend":ax=!1,Oj(d,r,f);break;case"selectionchange":if(YM)break;case"keydown":case"keyup":Oj(d,r,f)}var _;if(zy)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else mo?wA(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(jA&&r.locale!=="ko"&&(mo||P!=="onCompositionStart"?P==="onCompositionEnd"&&mo&&(_=bA()):(Ss=f,Ry="value"in Ss?Ss.value:Ss.textContent,mo=!0)),v=wf(u,P),0<v.length&&(P=new jj(P,e,null,r,f),d.push({event:P,listeners:v}),_?P.data=_:(_=NA(r),_!==null&&(P.data=_)))),(_=LM?RM(e,r):BM(e,r))&&(u=wf(u,"onBeforeInput"),0<u.length&&(f=new jj("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=_))}$A(d,t)})}function Jc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function wf(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wc(e,r),i!=null&&n.unshift(Jc(e,i,s)),i=Wc(e,t),i!=null&&n.push(Jc(e,i,s))),e=e.return}return n}function so(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mj(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Wc(r,i),c!=null&&o.unshift(Jc(r,c,l))):s||(c=Wc(r,i),c!=null&&o.push(Jc(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var QM=/\r\n?/g,e4=/\u0000|\uFFFD/g;function Dj(e){return(typeof e=="string"?e:""+e).replace(QM,`
`).replace(e4,"")}function Nd(e,t,r){if(t=Dj(t),Dj(e)!==t&&r)throw Error(ge(425))}function Nf(){}var sx=null,ix=null;function ox(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lx=typeof setTimeout=="function"?setTimeout:void 0,t4=typeof clearTimeout=="function"?clearTimeout:void 0,$j=typeof Promise=="function"?Promise:void 0,r4=typeof queueMicrotask=="function"?queueMicrotask:typeof $j<"u"?function(e){return $j.resolve(null).then(e).catch(n4)}:lx;function n4(e){setTimeout(function(){throw e})}function Lp(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Gc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Gc(t)}function Ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ij(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),ca="__reactFiber$"+Ol,Zc="__reactProps$"+Ol,Ja="__reactContainer$"+Ol,cx="__reactEvents$"+Ol,a4="__reactListeners$"+Ol,s4="__reactHandles$"+Ol;function wi(e){var t=e[ca];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ja]||r[ca]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ij(e);e!==null;){if(r=e[ca])return r;e=Ij(e)}return t}e=r,r=e.parentNode}return null}function Ju(e){return e=e[ca]||e[Ja],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function go(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ge(33))}function rh(e){return e[Zc]||null}var ux=[],xo=-1;function Zs(e){return{current:e}}function Lt(e){0>xo||(e.current=ux[xo],ux[xo]=null,xo--)}function Ct(e,t){xo++,ux[xo]=e.current,e.current=t}var qs={},Fr=Zs(qs),ln=Zs(!1),Ri=qs;function Ko(e,t){var r=e.type.contextTypes;if(!r)return qs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function cn(e){return e=e.childContextTypes,e!=null}function Sf(){Lt(ln),Lt(Fr)}function Lj(e,t,r){if(Fr.current!==qs)throw Error(ge(168));Ct(Fr,t),Ct(ln,r)}function LA(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ge(108,U5(e)||"Unknown",s));return Zt({},r,n)}function _f(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qs,Ri=Fr.current,Ct(Fr,e),Ct(ln,ln.current),!0}function Rj(e,t,r){var n=e.stateNode;if(!n)throw Error(ge(169));r?(e=LA(e,t,Ri),n.__reactInternalMemoizedMergedChildContext=e,Lt(ln),Lt(Fr),Ct(Fr,e)):Lt(ln),Ct(ln,r)}var Ia=null,nh=!1,Rp=!1;function RA(e){Ia===null?Ia=[e]:Ia.push(e)}function i4(e){nh=!0,RA(e)}function Qs(){if(!Rp&&Ia!==null){Rp=!0;var e=0,t=bt;try{var r=Ia;for(bt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ia=null,nh=!1}catch(s){throw Ia!==null&&(Ia=Ia.slice(e+1)),cA(Dy,Qs),s}finally{bt=t,Rp=!1}}return null}var yo=[],vo=0,Af=null,Pf=0,kn=[],Mn=0,Bi=null,Ra=1,Ba="";function fi(e,t){yo[vo++]=Pf,yo[vo++]=Af,Af=e,Pf=t}function BA(e,t,r){kn[Mn++]=Ra,kn[Mn++]=Ba,kn[Mn++]=Bi,Bi=e;var n=Ra;e=Ba;var s=32-ta(n)-1;n&=~(1<<s),r+=1;var i=32-ta(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Ra=1<<32-ta(t)+s|r<<s|n,Ba=i+e}else Ra=1<<i|r<<s|n,Ba=e}function Uy(e){e.return!==null&&(fi(e,1),BA(e,1,0))}function Wy(e){for(;e===Af;)Af=yo[--vo],yo[vo]=null,Pf=yo[--vo],yo[vo]=null;for(;e===Bi;)Bi=kn[--Mn],kn[Mn]=null,Ba=kn[--Mn],kn[Mn]=null,Ra=kn[--Mn],kn[Mn]=null}var bn=null,yn=null,Vt=!1,Jn=null;function FA(e,t){var r=$n(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Bj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bn=e,yn=Ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bn=e,yn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Bi!==null?{id:Ra,overflow:Ba}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=$n(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bn=e,yn=null,!0):!1;default:return!1}}function dx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function fx(e){if(Vt){var t=yn;if(t){var r=t;if(!Bj(e,t)){if(dx(e))throw Error(ge(418));t=Ms(r.nextSibling);var n=bn;t&&Bj(e,t)?FA(n,r):(e.flags=e.flags&-4097|2,Vt=!1,bn=e)}}else{if(dx(e))throw Error(ge(418));e.flags=e.flags&-4097|2,Vt=!1,bn=e}}}function Fj(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bn=e}function Sd(e){if(e!==bn)return!1;if(!Vt)return Fj(e),Vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ox(e.type,e.memoizedProps)),t&&(t=yn)){if(dx(e))throw zA(),Error(ge(418));for(;t;)FA(e,t),t=Ms(t.nextSibling)}if(Fj(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yn=Ms(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yn=null}}else yn=bn?Ms(e.stateNode.nextSibling):null;return!0}function zA(){for(var e=yn;e;)e=Ms(e.nextSibling)}function Yo(){yn=bn=null,Vt=!1}function Hy(e){Jn===null?Jn=[e]:Jn.push(e)}var o4=os.ReactCurrentBatchConfig;function Zl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,e))}return e}function _d(e,t){throw e=Object.prototype.toString.call(t),Error(ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zj(e){var t=e._init;return t(e._payload)}function VA(e){function t(p,y){if(e){var x=p.deletions;x===null?(p.deletions=[y],p.flags|=16):x.push(y)}}function r(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function n(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function s(p,y){return p=Ls(p,y),p.index=0,p.sibling=null,p}function i(p,y,x){return p.index=x,e?(x=p.alternate,x!==null?(x=x.index,x<y?(p.flags|=2,y):x):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,y,x,S){return y===null||y.tag!==6?(y=Hp(x,p.mode,S),y.return=p,y):(y=s(y,x),y.return=p,y)}function c(p,y,x,S){var w=x.type;return w===fo?f(p,y,x.props.children,S,x.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===gs&&zj(w)===y.type)?(S=s(y,x.props),S.ref=Zl(p,y,x),S.return=p,S):(S=lf(x.type,x.key,x.props,null,p.mode,S),S.ref=Zl(p,y,x),S.return=p,S)}function u(p,y,x,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=qp(x,p.mode,S),y.return=p,y):(y=s(y,x.children||[]),y.return=p,y)}function f(p,y,x,S,w){return y===null||y.tag!==7?(y=ki(x,p.mode,S,w),y.return=p,y):(y=s(y,x),y.return=p,y)}function d(p,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Hp(""+y,p.mode,x),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case hd:return x=lf(y.type,y.key,y.props,null,p.mode,x),x.ref=Zl(p,null,y),x.return=p,x;case uo:return y=qp(y,p.mode,x),y.return=p,y;case gs:var S=y._init;return d(p,S(y._payload),x)}if(pc(y)||Gl(y))return y=ki(y,p.mode,x,null),y.return=p,y;_d(p,y)}return null}function m(p,y,x,S){var w=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:l(p,y,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hd:return x.key===w?c(p,y,x,S):null;case uo:return x.key===w?u(p,y,x,S):null;case gs:return w=x._init,m(p,y,w(x._payload),S)}if(pc(x)||Gl(x))return w!==null?null:f(p,y,x,S,null);_d(p,x)}return null}function g(p,y,x,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return p=p.get(x)||null,l(y,p,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hd:return p=p.get(S.key===null?x:S.key)||null,c(y,p,S,w);case uo:return p=p.get(S.key===null?x:S.key)||null,u(y,p,S,w);case gs:var v=S._init;return g(p,y,x,v(S._payload),w)}if(pc(S)||Gl(S))return p=p.get(x)||null,f(y,p,S,w,null);_d(y,S)}return null}function b(p,y,x,S){for(var w=null,v=null,_=y,P=y=0,C=null;_!==null&&P<x.length;P++){_.index>P?(C=_,_=null):C=_.sibling;var $=m(p,_,x[P],S);if($===null){_===null&&(_=C);break}e&&_&&$.alternate===null&&t(p,_),y=i($,y,P),v===null?w=$:v.sibling=$,v=$,_=C}if(P===x.length)return r(p,_),Vt&&fi(p,P),w;if(_===null){for(;P<x.length;P++)_=d(p,x[P],S),_!==null&&(y=i(_,y,P),v===null?w=_:v.sibling=_,v=_);return Vt&&fi(p,P),w}for(_=n(p,_);P<x.length;P++)C=g(_,p,P,x[P],S),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?P:C.key),y=i(C,y,P),v===null?w=C:v.sibling=C,v=C);return e&&_.forEach(function(A){return t(p,A)}),Vt&&fi(p,P),w}function h(p,y,x,S){var w=Gl(x);if(typeof w!="function")throw Error(ge(150));if(x=w.call(x),x==null)throw Error(ge(151));for(var v=w=null,_=y,P=y=0,C=null,$=x.next();_!==null&&!$.done;P++,$=x.next()){_.index>P?(C=_,_=null):C=_.sibling;var A=m(p,_,$.value,S);if(A===null){_===null&&(_=C);break}e&&_&&A.alternate===null&&t(p,_),y=i(A,y,P),v===null?w=A:v.sibling=A,v=A,_=C}if($.done)return r(p,_),Vt&&fi(p,P),w;if(_===null){for(;!$.done;P++,$=x.next())$=d(p,$.value,S),$!==null&&(y=i($,y,P),v===null?w=$:v.sibling=$,v=$);return Vt&&fi(p,P),w}for(_=n(p,_);!$.done;P++,$=x.next())$=g(_,p,P,$.value,S),$!==null&&(e&&$.alternate!==null&&_.delete($.key===null?P:$.key),y=i($,y,P),v===null?w=$:v.sibling=$,v=$);return e&&_.forEach(function(T){return t(p,T)}),Vt&&fi(p,P),w}function j(p,y,x,S){if(typeof x=="object"&&x!==null&&x.type===fo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case hd:e:{for(var w=x.key,v=y;v!==null;){if(v.key===w){if(w=x.type,w===fo){if(v.tag===7){r(p,v.sibling),y=s(v,x.props.children),y.return=p,p=y;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===gs&&zj(w)===v.type){r(p,v.sibling),y=s(v,x.props),y.ref=Zl(p,v,x),y.return=p,p=y;break e}r(p,v);break}else t(p,v);v=v.sibling}x.type===fo?(y=ki(x.props.children,p.mode,S,x.key),y.return=p,p=y):(S=lf(x.type,x.key,x.props,null,p.mode,S),S.ref=Zl(p,y,x),S.return=p,p=S)}return o(p);case uo:e:{for(v=x.key;y!==null;){if(y.key===v)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){r(p,y.sibling),y=s(y,x.children||[]),y.return=p,p=y;break e}else{r(p,y);break}else t(p,y);y=y.sibling}y=qp(x,p.mode,S),y.return=p,p=y}return o(p);case gs:return v=x._init,j(p,y,v(x._payload),S)}if(pc(x))return b(p,y,x,S);if(Gl(x))return h(p,y,x,S);_d(p,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(r(p,y.sibling),y=s(y,x),y.return=p,p=y):(r(p,y),y=Hp(x,p.mode,S),y.return=p,p=y),o(p)):r(p,y)}return j}var Xo=VA(!0),UA=VA(!1),Ef=Zs(null),Cf=null,bo=null,qy=null;function Gy(){qy=bo=Cf=null}function Ky(e){var t=Ef.current;Lt(Ef),e._currentValue=t}function mx(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ro(e,t){Cf=e,qy=bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(nn=!0),e.firstContext=null)}function Bn(e){var t=e._currentValue;if(qy!==e)if(e={context:e,memoizedValue:t,next:null},bo===null){if(Cf===null)throw Error(ge(308));bo=e,Cf.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var Ni=null;function Yy(e){Ni===null?Ni=[e]:Ni.push(e)}function WA(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Yy(t)):(r.next=s.next,s.next=r),t.interleaved=r,Za(e,n)}function Za(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xs=!1;function Xy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,mt&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Za(e,r)}return s=n.interleaved,s===null?(t.next=t,Yy(n)):(t.next=s.next,s.next=t),n.interleaved=t,Za(e,r)}function tf(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$y(e,r)}}function Vj(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Of(e,t,r,n){var s=e.updateQueue;xs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,f=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((n&m)===m){f!==null&&(f=f.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,h=l;switch(m=t,g=r,h.tag){case 1:if(b=h.payload,typeof b=="function"){d=b.call(g,d,m);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=h.payload,m=typeof b=="function"?b.call(g,d,m):b,m==null)break e;d=Zt({},d,m);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=g,c=d):f=f.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);zi|=o,e.lanes=o,e.memoizedState=d}}function Uj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ge(191,s));s.call(n)}}}var Zu={},xa=Zs(Zu),Qc=Zs(Zu),eu=Zs(Zu);function Si(e){if(e===Zu)throw Error(ge(174));return e}function Jy(e,t){switch(Ct(eu,t),Ct(Qc,e),Ct(xa,Zu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gg(t,e)}Lt(xa),Ct(xa,t)}function Jo(){Lt(xa),Lt(Qc),Lt(eu)}function qA(e){Si(eu.current);var t=Si(xa.current),r=Gg(t,e.type);t!==r&&(Ct(Qc,e),Ct(xa,r))}function Zy(e){Qc.current===e&&(Lt(xa),Lt(Qc))}var Gt=Zs(0);function Tf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bp=[];function Qy(){for(var e=0;e<Bp.length;e++)Bp[e]._workInProgressVersionPrimary=null;Bp.length=0}var rf=os.ReactCurrentDispatcher,Fp=os.ReactCurrentBatchConfig,Fi=0,Jt=null,mr=null,vr=null,kf=!1,Ac=!1,tu=0,l4=0;function Tr(){throw Error(ge(321))}function ev(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!aa(e[r],t[r]))return!1;return!0}function tv(e,t,r,n,s,i){if(Fi=i,Jt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rf.current=e===null||e.memoizedState===null?f4:m4,e=r(n,s),Ac){i=0;do{if(Ac=!1,tu=0,25<=i)throw Error(ge(301));i+=1,vr=mr=null,t.updateQueue=null,rf.current=h4,e=r(n,s)}while(Ac)}if(rf.current=Mf,t=mr!==null&&mr.next!==null,Fi=0,vr=mr=Jt=null,kf=!1,t)throw Error(ge(300));return e}function rv(){var e=tu!==0;return tu=0,e}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Jt.memoizedState=vr=e:vr=vr.next=e,vr}function Fn(){if(mr===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=mr.next;var t=vr===null?Jt.memoizedState:vr.next;if(t!==null)vr=t,mr=e;else{if(e===null)throw Error(ge(310));mr=e,e={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},vr===null?Jt.memoizedState=vr=e:vr=vr.next=e}return vr}function ru(e,t){return typeof t=="function"?t(e):t}function zp(e){var t=Fn(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var n=mr,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var f=u.lane;if((Fi&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,Jt.lanes|=f,zi|=f}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,aa(n,t.memoizedState)||(nn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,Jt.lanes|=i,zi|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Vp(e){var t=Fn(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);aa(i,t.memoizedState)||(nn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function GA(){}function KA(e,t){var r=Jt,n=Fn(),s=t(),i=!aa(n.memoizedState,s);if(i&&(n.memoizedState=s,nn=!0),n=n.queue,nv(JA.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||vr!==null&&vr.memoizedState.tag&1){if(r.flags|=2048,nu(9,XA.bind(null,r,n,s,t),void 0,null),jr===null)throw Error(ge(349));Fi&30||YA(r,t,s)}return s}function YA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function XA(e,t,r,n){t.value=r,t.getSnapshot=n,ZA(t)&&QA(e)}function JA(e,t,r){return r(function(){ZA(t)&&QA(e)})}function ZA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!aa(e,r)}catch{return!0}}function QA(e){var t=Za(e,1);t!==null&&ra(t,e,1,-1)}function Wj(e){var t=la();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:e},t.queue=e,e=e.dispatch=d4.bind(null,Jt,e),[t.memoizedState,e]}function nu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Jt.updateQueue,t===null?(t={lastEffect:null,stores:null},Jt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function eP(){return Fn().memoizedState}function nf(e,t,r,n){var s=la();Jt.flags|=e,s.memoizedState=nu(1|t,r,void 0,n===void 0?null:n)}function ah(e,t,r,n){var s=Fn();n=n===void 0?null:n;var i=void 0;if(mr!==null){var o=mr.memoizedState;if(i=o.destroy,n!==null&&ev(n,o.deps)){s.memoizedState=nu(t,r,i,n);return}}Jt.flags|=e,s.memoizedState=nu(1|t,r,i,n)}function Hj(e,t){return nf(8390656,8,e,t)}function nv(e,t){return ah(2048,8,e,t)}function tP(e,t){return ah(4,2,e,t)}function rP(e,t){return ah(4,4,e,t)}function nP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aP(e,t,r){return r=r!=null?r.concat([e]):null,ah(4,4,nP.bind(null,t,e),r)}function av(){}function sP(e,t){var r=Fn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function iP(e,t){var r=Fn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&ev(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function oP(e,t,r){return Fi&21?(aa(r,t)||(r=fA(),Jt.lanes|=r,zi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,nn=!0),e.memoizedState=r)}function c4(e,t){var r=bt;bt=r!==0&&4>r?r:4,e(!0);var n=Fp.transition;Fp.transition={};try{e(!1),t()}finally{bt=r,Fp.transition=n}}function lP(){return Fn().memoizedState}function u4(e,t,r){var n=Is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cP(e))uP(t,r);else if(r=WA(e,t,r,n),r!==null){var s=Xr();ra(r,e,n,s),dP(r,t,n)}}function d4(e,t,r){var n=Is(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cP(e))uP(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,aa(l,o)){var c=t.interleaved;c===null?(s.next=s,Yy(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=WA(e,t,s,n),r!==null&&(s=Xr(),ra(r,e,n,s),dP(r,t,n))}}function cP(e){var t=e.alternate;return e===Jt||t!==null&&t===Jt}function uP(e,t){Ac=kf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function dP(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,$y(e,r)}}var Mf={readContext:Bn,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},f4={readContext:Bn,useCallback:function(e,t){return la().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:Hj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,nf(4194308,4,nP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return nf(4194308,4,e,t)},useInsertionEffect:function(e,t){return nf(4,2,e,t)},useMemo:function(e,t){var r=la();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=la();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=u4.bind(null,Jt,e),[n.memoizedState,e]},useRef:function(e){var t=la();return e={current:e},t.memoizedState=e},useState:Wj,useDebugValue:av,useDeferredValue:function(e){return la().memoizedState=e},useTransition:function(){var e=Wj(!1),t=e[0];return e=c4.bind(null,e[1]),la().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Jt,s=la();if(Vt){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=t(),jr===null)throw Error(ge(349));Fi&30||YA(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Hj(JA.bind(null,n,i,e),[e]),n.flags|=2048,nu(9,XA.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=la(),t=jr.identifierPrefix;if(Vt){var r=Ba,n=Ra;r=(n&~(1<<32-ta(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=tu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=l4++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},m4={readContext:Bn,useCallback:sP,useContext:Bn,useEffect:nv,useImperativeHandle:aP,useInsertionEffect:tP,useLayoutEffect:rP,useMemo:iP,useReducer:zp,useRef:eP,useState:function(){return zp(ru)},useDebugValue:av,useDeferredValue:function(e){var t=Fn();return oP(t,mr.memoizedState,e)},useTransition:function(){var e=zp(ru)[0],t=Fn().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:KA,useId:lP,unstable_isNewReconciler:!1},h4={readContext:Bn,useCallback:sP,useContext:Bn,useEffect:nv,useImperativeHandle:aP,useInsertionEffect:tP,useLayoutEffect:rP,useMemo:iP,useReducer:Vp,useRef:eP,useState:function(){return Vp(ru)},useDebugValue:av,useDeferredValue:function(e){var t=Fn();return mr===null?t.memoizedState=e:oP(t,mr.memoizedState,e)},useTransition:function(){var e=Vp(ru)[0],t=Fn().memoizedState;return[e,t]},useMutableSource:GA,useSyncExternalStore:KA,useId:lP,unstable_isNewReconciler:!1};function Kn(e,t){if(e&&e.defaultProps){t=Zt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hx(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Zt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var sh={isMounted:function(e){return(e=e._reactInternals)?Ji(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Xr(),s=Is(e),i=Ha(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ds(e,i,s),t!==null&&(ra(t,e,s,n),tf(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Xr(),s=Is(e),i=Ha(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ds(e,i,s),t!==null&&(ra(t,e,s,n),tf(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xr(),n=Is(e),s=Ha(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ds(e,s,n),t!==null&&(ra(t,e,n,r),tf(t,e,n))}};function qj(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Yc(r,n)||!Yc(s,i):!0}function fP(e,t,r){var n=!1,s=qs,i=t.contextType;return typeof i=="object"&&i!==null?i=Bn(i):(s=cn(t)?Ri:Fr.current,n=t.contextTypes,i=(n=n!=null)?Ko(e,s):qs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Gj(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&sh.enqueueReplaceState(t,t.state,null)}function px(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Xy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Bn(i):(i=cn(t)?Ri:Fr.current,s.context=Ko(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hx(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&sh.enqueueReplaceState(s,s.state,null),Of(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Zo(e,t){try{var r="",n=t;do r+=V5(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Up(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function gx(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var p4=typeof WeakMap=="function"?WeakMap:Map;function mP(e,t,r){r=Ha(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$f||($f=!0,Ax=n),gx(e,t)},r}function hP(e,t,r){r=Ha(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){gx(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){gx(e,t),typeof n!="function"&&($s===null?$s=new Set([this]):$s.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Kj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new p4;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=C4.bind(null,e,t,r),t.then(e,e))}function Yj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Xj(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ha(-1,1),t.tag=2,Ds(r,t,1))),r.lanes|=1),e)}var g4=os.ReactCurrentOwner,nn=!1;function Hr(e,t,r,n){t.child=e===null?UA(t,null,r,n):Xo(t,e.child,r,n)}function Jj(e,t,r,n,s){r=r.render;var i=t.ref;return Ro(t,s),n=tv(e,t,r,n,i,s),r=rv(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qa(e,t,s)):(Vt&&r&&Uy(t),t.flags|=1,Hr(e,t,n,s),t.child)}function Zj(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!fv(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,pP(e,t,i,n,s)):(e=lf(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Yc,r(o,n)&&e.ref===t.ref)return Qa(e,t,s)}return t.flags|=1,e=Ls(i,n),e.ref=t.ref,e.return=t,t.child=e}function pP(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Yc(i,n)&&e.ref===t.ref)if(nn=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(nn=!0);else return t.lanes=e.lanes,Qa(e,t,s)}return xx(e,t,r,n,s)}function gP(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(wo,pn),pn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ct(wo,pn),pn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ct(wo,pn),pn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ct(wo,pn),pn|=n;return Hr(e,t,s,r),t.child}function xP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xx(e,t,r,n,s){var i=cn(r)?Ri:Fr.current;return i=Ko(t,i),Ro(t,s),r=tv(e,t,r,n,i,s),n=rv(),e!==null&&!nn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qa(e,t,s)):(Vt&&n&&Uy(t),t.flags|=1,Hr(e,t,r,s),t.child)}function Qj(e,t,r,n,s){if(cn(r)){var i=!0;_f(t)}else i=!1;if(Ro(t,s),t.stateNode===null)af(e,t),fP(t,r,n),px(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Bn(u):(u=cn(r)?Ri:Fr.current,u=Ko(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Gj(t,o,n,u),xs=!1;var m=t.memoizedState;o.state=m,Of(t,n,o,s),c=t.memoizedState,l!==n||m!==c||ln.current||xs?(typeof f=="function"&&(hx(t,r,f,n),c=t.memoizedState),(l=xs||qj(t,r,l,n,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,HA(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Kn(t.type,l),o.props=u,d=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Bn(c):(c=cn(r)?Ri:Fr.current,c=Ko(t,c));var g=r.getDerivedStateFromProps;(f=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||m!==c)&&Gj(t,o,n,c),xs=!1,m=t.memoizedState,o.state=m,Of(t,n,o,s);var b=t.memoizedState;l!==d||m!==b||ln.current||xs?(typeof g=="function"&&(hx(t,r,g,n),b=t.memoizedState),(u=xs||qj(t,r,u,n,m,b,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),o.props=n,o.state=b,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return yx(e,t,r,n,i,s)}function yx(e,t,r,n,s,i){xP(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Rj(t,r,!1),Qa(e,t,i);n=t.stateNode,g4.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Xo(t,e.child,null,i),t.child=Xo(t,null,l,i)):Hr(e,t,l,i),t.memoizedState=n.state,s&&Rj(t,r,!0),t.child}function yP(e){var t=e.stateNode;t.pendingContext?Lj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lj(e,t.context,!1),Jy(e,t.containerInfo)}function ew(e,t,r,n,s){return Yo(),Hy(s),t.flags|=256,Hr(e,t,r,n),t.child}var vx={dehydrated:null,treeContext:null,retryLane:0};function bx(e){return{baseLanes:e,cachePool:null,transitions:null}}function vP(e,t,r){var n=t.pendingProps,s=Gt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ct(Gt,s&1),e===null)return fx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lh(o,n,0,null),e=ki(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=bx(r),t.memoizedState=vx,e):sv(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return x4(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ls(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ls(l,i):(i=ki(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?bx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=vx,n}return i=e.child,e=i.sibling,n=Ls(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function sv(e,t){return t=lh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ad(e,t,r,n){return n!==null&&Hy(n),Xo(t,e.child,null,r),e=sv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x4(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Up(Error(ge(422))),Ad(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=lh({mode:"visible",children:n.children},s,0,null),i=ki(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Xo(t,e.child,null,o),t.child.memoizedState=bx(o),t.memoizedState=vx,i);if(!(t.mode&1))return Ad(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(ge(419)),n=Up(i,n,void 0),Ad(e,t,o,n)}if(l=(o&e.childLanes)!==0,nn||l){if(n=jr,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Za(e,s),ra(n,e,s,-1))}return dv(),n=Up(Error(ge(421))),Ad(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=O4.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,yn=Ms(s.nextSibling),bn=t,Vt=!0,Jn=null,e!==null&&(kn[Mn++]=Ra,kn[Mn++]=Ba,kn[Mn++]=Bi,Ra=e.id,Ba=e.overflow,Bi=t),t=sv(t,n.children),t.flags|=4096,t)}function tw(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),mx(e.return,t,r)}function Wp(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function bP(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Hr(e,t,n.children,r),n=Gt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tw(e,r,t);else if(e.tag===19)tw(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ct(Gt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Tf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Wp(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Tf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Wp(t,!0,r,null,i);break;case"together":Wp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function af(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ge(153));if(t.child!==null){for(e=t.child,r=Ls(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ls(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function y4(e,t,r){switch(t.tag){case 3:yP(t),Yo();break;case 5:qA(t);break;case 1:cn(t.type)&&_f(t);break;case 4:Jy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ct(Ef,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ct(Gt,Gt.current&1),t.flags|=128,null):r&t.child.childLanes?vP(e,t,r):(Ct(Gt,Gt.current&1),e=Qa(e,t,r),e!==null?e.sibling:null);Ct(Gt,Gt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return bP(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(Gt,Gt.current),n)break;return null;case 22:case 23:return t.lanes=0,gP(e,t,r)}return Qa(e,t,r)}var jP,jx,wP,NP;jP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};jx=function(){};wP=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Si(xa.current);var i=null;switch(r){case"input":s=Ug(e,s),n=Ug(e,n),i=[];break;case"select":s=Zt({},s,{value:void 0}),n=Zt({},n,{value:void 0}),i=[];break;case"textarea":s=qg(e,s),n=qg(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nf)}Kg(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Dt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};NP=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ql(e,t){if(!Vt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function v4(e,t,r){var n=t.pendingProps;switch(Wy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(t),null;case 1:return cn(t.type)&&Sf(),kr(t),null;case 3:return n=t.stateNode,Jo(),Lt(ln),Lt(Fr),Qy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Jn!==null&&(Cx(Jn),Jn=null))),jx(e,t),kr(t),null;case 5:Zy(t);var s=Si(eu.current);if(r=t.type,e!==null&&t.stateNode!=null)wP(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ge(166));return kr(t),null}if(e=Si(xa.current),Sd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ca]=t,n[Zc]=i,e=(t.mode&1)!==0,r){case"dialog":Dt("cancel",n),Dt("close",n);break;case"iframe":case"object":case"embed":Dt("load",n);break;case"video":case"audio":for(s=0;s<xc.length;s++)Dt(xc[s],n);break;case"source":Dt("error",n);break;case"img":case"image":case"link":Dt("error",n),Dt("load",n);break;case"details":Dt("toggle",n);break;case"input":uj(n,i),Dt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Dt("invalid",n);break;case"textarea":fj(n,i),Dt("invalid",n)}Kg(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Nd(n.textContent,l,e),s=["children",""+l]):Vc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",n)}switch(r){case"input":pd(n),dj(n,i,!0);break;case"textarea":pd(n),mj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nf)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=J_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ca]=t,e[Zc]=n,jP(e,t,!1,!1),t.stateNode=e;e:{switch(o=Yg(r,n),r){case"dialog":Dt("cancel",e),Dt("close",e),s=n;break;case"iframe":case"object":case"embed":Dt("load",e),s=n;break;case"video":case"audio":for(s=0;s<xc.length;s++)Dt(xc[s],e);s=n;break;case"source":Dt("error",e),s=n;break;case"img":case"image":case"link":Dt("error",e),Dt("load",e),s=n;break;case"details":Dt("toggle",e),s=n;break;case"input":uj(e,n),s=Ug(e,n),Dt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Zt({},n,{value:void 0}),Dt("invalid",e);break;case"textarea":fj(e,n),s=qg(e,n),Dt("invalid",e);break;default:s=n}Kg(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?eA(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Z_(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Uc(e,c):typeof c=="number"&&Uc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Vc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Dt("scroll",e):c!=null&&Cy(e,i,c,o))}switch(r){case"input":pd(e),dj(e,n,!1);break;case"textarea":pd(e),mj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Hs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Do(e,!!n.multiple,i,!1):n.defaultValue!=null&&Do(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Nf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return kr(t),null;case 6:if(e&&t.stateNode!=null)NP(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ge(166));if(r=Si(eu.current),Si(xa.current),Sd(t)){if(n=t.stateNode,r=t.memoizedProps,n[ca]=t,(i=n.nodeValue!==r)&&(e=bn,e!==null))switch(e.tag){case 3:Nd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Nd(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ca]=t,t.stateNode=n}return kr(t),null;case 13:if(Lt(Gt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Vt&&yn!==null&&t.mode&1&&!(t.flags&128))zA(),Yo(),t.flags|=98560,i=!1;else if(i=Sd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ge(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[ca]=t}else Yo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kr(t),i=!1}else Jn!==null&&(Cx(Jn),Jn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Gt.current&1?pr===0&&(pr=3):dv())),t.updateQueue!==null&&(t.flags|=4),kr(t),null);case 4:return Jo(),jx(e,t),e===null&&Xc(t.stateNode.containerInfo),kr(t),null;case 10:return Ky(t.type._context),kr(t),null;case 17:return cn(t.type)&&Sf(),kr(t),null;case 19:if(Lt(Gt),i=t.memoizedState,i===null)return kr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ql(i,!1);else{if(pr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Tf(e),o!==null){for(t.flags|=128,Ql(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ct(Gt,Gt.current&1|2),t.child}e=e.sibling}i.tail!==null&&nr()>Qo&&(t.flags|=128,n=!0,Ql(i,!1),t.lanes=4194304)}else{if(!n)if(e=Tf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ql(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Vt)return kr(t),null}else 2*nr()-i.renderingStartTime>Qo&&r!==1073741824&&(t.flags|=128,n=!0,Ql(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=nr(),t.sibling=null,r=Gt.current,Ct(Gt,n?r&1|2:r&1),t):(kr(t),null);case 22:case 23:return uv(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?pn&1073741824&&(kr(t),t.subtreeFlags&6&&(t.flags|=8192)):kr(t),null;case 24:return null;case 25:return null}throw Error(ge(156,t.tag))}function b4(e,t){switch(Wy(t),t.tag){case 1:return cn(t.type)&&Sf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jo(),Lt(ln),Lt(Fr),Qy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zy(t),null;case 13:if(Lt(Gt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ge(340));Yo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Lt(Gt),null;case 4:return Jo(),null;case 10:return Ky(t.type._context),null;case 22:case 23:return uv(),null;case 24:return null;default:return null}}var Pd=!1,Ir=!1,j4=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function jo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){er(e,t,n)}else r.current=null}function wx(e,t,r){try{r()}catch(n){er(e,t,n)}}var rw=!1;function w4(e,t){if(sx=bf,e=EA(),Vy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,f=0,d=e,m=null;t:for(;;){for(var g;d!==r||s!==0&&d.nodeType!==3||(l=o+s),d!==i||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)m=d,d=g;for(;;){if(d===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++f===n&&(c=o),(g=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ix={focusedElem:e,selectionRange:r},bf=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var h=b.memoizedProps,j=b.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?h:Kn(t.type,h),j);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(S){er(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return b=rw,rw=!1,b}function Pc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&wx(t,r,i)}s=s.next}while(s!==n)}}function ih(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Nx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function SP(e){var t=e.alternate;t!==null&&(e.alternate=null,SP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ca],delete t[Zc],delete t[cx],delete t[a4],delete t[s4])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _P(e){return e.tag===5||e.tag===3||e.tag===4}function nw(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_P(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sx(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nf));else if(n!==4&&(e=e.child,e!==null))for(Sx(e,t,r),e=e.sibling;e!==null;)Sx(e,t,r),e=e.sibling}function _x(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(_x(e,t,r),e=e.sibling;e!==null;)_x(e,t,r),e=e.sibling}var _r=null,Yn=!1;function ms(e,t,r){for(r=r.child;r!==null;)AP(e,t,r),r=r.sibling}function AP(e,t,r){if(ga&&typeof ga.onCommitFiberUnmount=="function")try{ga.onCommitFiberUnmount(Zm,r)}catch{}switch(r.tag){case 5:Ir||jo(r,t);case 6:var n=_r,s=Yn;_r=null,ms(e,t,r),_r=n,Yn=s,_r!==null&&(Yn?(e=_r,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_r.removeChild(r.stateNode));break;case 18:_r!==null&&(Yn?(e=_r,r=r.stateNode,e.nodeType===8?Lp(e.parentNode,r):e.nodeType===1&&Lp(e,r),Gc(e)):Lp(_r,r.stateNode));break;case 4:n=_r,s=Yn,_r=r.stateNode.containerInfo,Yn=!0,ms(e,t,r),_r=n,Yn=s;break;case 0:case 11:case 14:case 15:if(!Ir&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wx(r,t,o),s=s.next}while(s!==n)}ms(e,t,r);break;case 1:if(!Ir&&(jo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){er(r,t,l)}ms(e,t,r);break;case 21:ms(e,t,r);break;case 22:r.mode&1?(Ir=(n=Ir)||r.memoizedState!==null,ms(e,t,r),Ir=n):ms(e,t,r);break;default:ms(e,t,r)}}function aw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new j4),t.forEach(function(n){var s=T4.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function qn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:_r=l.stateNode,Yn=!1;break e;case 3:_r=l.stateNode.containerInfo,Yn=!0;break e;case 4:_r=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(_r===null)throw Error(ge(160));AP(i,o,s),_r=null,Yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){er(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)PP(t,e),t=t.sibling}function PP(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(qn(t,e),oa(e),n&4){try{Pc(3,e,e.return),ih(3,e)}catch(h){er(e,e.return,h)}try{Pc(5,e,e.return)}catch(h){er(e,e.return,h)}}break;case 1:qn(t,e),oa(e),n&512&&r!==null&&jo(r,r.return);break;case 5:if(qn(t,e),oa(e),n&512&&r!==null&&jo(r,r.return),e.flags&32){var s=e.stateNode;try{Uc(s,"")}catch(h){er(e,e.return,h)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Y_(s,i),Yg(l,o);var u=Yg(l,i);for(o=0;o<c.length;o+=2){var f=c[o],d=c[o+1];f==="style"?eA(s,d):f==="dangerouslySetInnerHTML"?Z_(s,d):f==="children"?Uc(s,d):Cy(s,f,d,u)}switch(l){case"input":Wg(s,i);break;case"textarea":X_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Do(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Do(s,!!i.multiple,i.defaultValue,!0):Do(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zc]=i}catch(h){er(e,e.return,h)}}break;case 6:if(qn(t,e),oa(e),n&4){if(e.stateNode===null)throw Error(ge(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){er(e,e.return,h)}}break;case 3:if(qn(t,e),oa(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gc(t.containerInfo)}catch(h){er(e,e.return,h)}break;case 4:qn(t,e),oa(e);break;case 13:qn(t,e),oa(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(lv=nr())),n&4&&aw(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Ir=(u=Ir)||f,qn(t,e),Ir=u):qn(t,e),oa(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(Ie=e,f=e.child;f!==null;){for(d=Ie=f;Ie!==null;){switch(m=Ie,g=m.child,m.tag){case 0:case 11:case 14:case 15:Pc(4,m,m.return);break;case 1:jo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(h){er(n,r,h)}}break;case 5:jo(m,m.return);break;case 22:if(m.memoizedState!==null){iw(d);continue}}g!==null?(g.return=m,Ie=g):iw(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Q_("display",o))}catch(h){er(e,e.return,h)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(h){er(e,e.return,h)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qn(t,e),oa(e),n&4&&aw(e);break;case 21:break;default:qn(t,e),oa(e)}}function oa(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(_P(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Uc(s,""),n.flags&=-33);var i=nw(e);_x(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=nw(e);Sx(e,l,o);break;default:throw Error(ge(161))}}catch(c){er(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function N4(e,t,r){Ie=e,EP(e)}function EP(e,t,r){for(var n=(e.mode&1)!==0;Ie!==null;){var s=Ie,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Pd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ir;l=Pd;var u=Ir;if(Pd=o,(Ir=c)&&!u)for(Ie=s;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?ow(s):c!==null?(c.return=o,Ie=c):ow(s);for(;i!==null;)Ie=i,EP(i),i=i.sibling;Ie=s,Pd=l,Ir=u}sw(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ie=i):sw(e)}}function sw(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ir||ih(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ir)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Kn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Uj(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Uj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Gc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Ir||t.flags&512&&Nx(t)}catch(m){er(t,t.return,m)}}if(t===e){Ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function iw(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ie=r;break}Ie=t.return}}function ow(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ih(4,t)}catch(c){er(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){er(t,s,c)}}var i=t.return;try{Nx(t)}catch(c){er(t,i,c)}break;case 5:var o=t.return;try{Nx(t)}catch(c){er(t,o,c)}}}catch(c){er(t,t.return,c)}if(t===e){Ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ie=l;break}Ie=t.return}}var S4=Math.ceil,Df=os.ReactCurrentDispatcher,iv=os.ReactCurrentOwner,Ln=os.ReactCurrentBatchConfig,mt=0,jr=null,lr=null,Er=0,pn=0,wo=Zs(0),pr=0,au=null,zi=0,oh=0,ov=0,Ec=null,rn=null,lv=0,Qo=1/0,Da=null,$f=!1,Ax=null,$s=null,Ed=!1,_s=null,If=0,Cc=0,Px=null,sf=-1,of=0;function Xr(){return mt&6?nr():sf!==-1?sf:sf=nr()}function Is(e){return e.mode&1?mt&2&&Er!==0?Er&-Er:o4.transition!==null?(of===0&&(of=fA()),of):(e=bt,e!==0||(e=window.event,e=e===void 0?16:vA(e.type)),e):1}function ra(e,t,r,n){if(50<Cc)throw Cc=0,Px=null,Error(ge(185));Yu(e,r,n),(!(mt&2)||e!==jr)&&(e===jr&&(!(mt&2)&&(oh|=r),pr===4&&ws(e,Er)),un(e,n),r===1&&mt===0&&!(t.mode&1)&&(Qo=nr()+500,nh&&Qs()))}function un(e,t){var r=e.callbackNode;oM(e,t);var n=vf(e,e===jr?Er:0);if(n===0)r!==null&&gj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&gj(r),t===1)e.tag===0?i4(lw.bind(null,e)):RA(lw.bind(null,e)),r4(function(){!(mt&6)&&Qs()}),r=null;else{switch(mA(n)){case 1:r=Dy;break;case 4:r=uA;break;case 16:r=yf;break;case 536870912:r=dA;break;default:r=yf}r=IP(r,CP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function CP(e,t){if(sf=-1,of=0,mt&6)throw Error(ge(327));var r=e.callbackNode;if(Bo()&&e.callbackNode!==r)return null;var n=vf(e,e===jr?Er:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Lf(e,n);else{t=n;var s=mt;mt|=2;var i=TP();(jr!==e||Er!==t)&&(Da=null,Qo=nr()+500,Ti(e,t));do try{P4();break}catch(l){OP(e,l)}while(!0);Gy(),Df.current=i,mt=s,lr!==null?t=0:(jr=null,Er=0,t=pr)}if(t!==0){if(t===2&&(s=ex(e),s!==0&&(n=s,t=Ex(e,s))),t===1)throw r=au,Ti(e,0),ws(e,n),un(e,nr()),r;if(t===6)ws(e,n);else{if(s=e.current.alternate,!(n&30)&&!_4(s)&&(t=Lf(e,n),t===2&&(i=ex(e),i!==0&&(n=i,t=Ex(e,i))),t===1))throw r=au,Ti(e,0),ws(e,n),un(e,nr()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ge(345));case 2:mi(e,rn,Da);break;case 3:if(ws(e,n),(n&130023424)===n&&(t=lv+500-nr(),10<t)){if(vf(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Xr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=lx(mi.bind(null,e,rn,Da),t);break}mi(e,rn,Da);break;case 4:if(ws(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ta(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=nr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*S4(n/1960))-n,10<n){e.timeoutHandle=lx(mi.bind(null,e,rn,Da),n);break}mi(e,rn,Da);break;case 5:mi(e,rn,Da);break;default:throw Error(ge(329))}}}return un(e,nr()),e.callbackNode===r?CP.bind(null,e):null}function Ex(e,t){var r=Ec;return e.current.memoizedState.isDehydrated&&(Ti(e,t).flags|=256),e=Lf(e,t),e!==2&&(t=rn,rn=r,t!==null&&Cx(t)),e}function Cx(e){rn===null?rn=e:rn.push.apply(rn,e)}function _4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!aa(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ws(e,t){for(t&=~ov,t&=~oh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ta(t),n=1<<r;e[r]=-1,t&=~n}}function lw(e){if(mt&6)throw Error(ge(327));Bo();var t=vf(e,0);if(!(t&1))return un(e,nr()),null;var r=Lf(e,t);if(e.tag!==0&&r===2){var n=ex(e);n!==0&&(t=n,r=Ex(e,n))}if(r===1)throw r=au,Ti(e,0),ws(e,t),un(e,nr()),r;if(r===6)throw Error(ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mi(e,rn,Da),un(e,nr()),null}function cv(e,t){var r=mt;mt|=1;try{return e(t)}finally{mt=r,mt===0&&(Qo=nr()+500,nh&&Qs())}}function Vi(e){_s!==null&&_s.tag===0&&!(mt&6)&&Bo();var t=mt;mt|=1;var r=Ln.transition,n=bt;try{if(Ln.transition=null,bt=1,e)return e()}finally{bt=n,Ln.transition=r,mt=t,!(mt&6)&&Qs()}}function uv(){pn=wo.current,Lt(wo)}function Ti(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,t4(r)),lr!==null)for(r=lr.return;r!==null;){var n=r;switch(Wy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Sf();break;case 3:Jo(),Lt(ln),Lt(Fr),Qy();break;case 5:Zy(n);break;case 4:Jo();break;case 13:Lt(Gt);break;case 19:Lt(Gt);break;case 10:Ky(n.type._context);break;case 22:case 23:uv()}r=r.return}if(jr=e,lr=e=Ls(e.current,null),Er=pn=t,pr=0,au=null,ov=oh=zi=0,rn=Ec=null,Ni!==null){for(t=0;t<Ni.length;t++)if(r=Ni[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Ni=null}return e}function OP(e,t){do{var r=lr;try{if(Gy(),rf.current=Mf,kf){for(var n=Jt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}kf=!1}if(Fi=0,vr=mr=Jt=null,Ac=!1,tu=0,iv.current=null,r===null||r.return===null){pr=1,au=t,lr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Er,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=Yj(o);if(g!==null){g.flags&=-257,Xj(g,o,l,i,t),g.mode&1&&Kj(i,u,t),t=g,c=u;var b=t.updateQueue;if(b===null){var h=new Set;h.add(c),t.updateQueue=h}else b.add(c);break e}else{if(!(t&1)){Kj(i,u,t),dv();break e}c=Error(ge(426))}}else if(Vt&&l.mode&1){var j=Yj(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Xj(j,o,l,i,t),Hy(Zo(c,l));break e}}i=c=Zo(c,l),pr!==4&&(pr=2),Ec===null?Ec=[i]:Ec.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=mP(i,c,t);Vj(i,p);break e;case 1:l=c;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($s===null||!$s.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=hP(i,l,t);Vj(i,S);break e}}i=i.return}while(i!==null)}MP(r)}catch(w){t=w,lr===r&&r!==null&&(lr=r=r.return);continue}break}while(!0)}function TP(){var e=Df.current;return Df.current=Mf,e===null?Mf:e}function dv(){(pr===0||pr===3||pr===2)&&(pr=4),jr===null||!(zi&268435455)&&!(oh&268435455)||ws(jr,Er)}function Lf(e,t){var r=mt;mt|=2;var n=TP();(jr!==e||Er!==t)&&(Da=null,Ti(e,t));do try{A4();break}catch(s){OP(e,s)}while(!0);if(Gy(),mt=r,Df.current=n,lr!==null)throw Error(ge(261));return jr=null,Er=0,pr}function A4(){for(;lr!==null;)kP(lr)}function P4(){for(;lr!==null&&!Z5();)kP(lr)}function kP(e){var t=$P(e.alternate,e,pn);e.memoizedProps=e.pendingProps,t===null?MP(e):lr=t,iv.current=null}function MP(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=b4(r,t),r!==null){r.flags&=32767,lr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{pr=6,lr=null;return}}else if(r=v4(r,t,pn),r!==null){lr=r;return}if(t=t.sibling,t!==null){lr=t;return}lr=t=e}while(t!==null);pr===0&&(pr=5)}function mi(e,t,r){var n=bt,s=Ln.transition;try{Ln.transition=null,bt=1,E4(e,t,r,n)}finally{Ln.transition=s,bt=n}return null}function E4(e,t,r,n){do Bo();while(_s!==null);if(mt&6)throw Error(ge(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ge(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lM(e,i),e===jr&&(lr=jr=null,Er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ed||(Ed=!0,IP(yf,function(){return Bo(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ln.transition,Ln.transition=null;var o=bt;bt=1;var l=mt;mt|=4,iv.current=null,w4(e,r),PP(r,e),KM(ix),bf=!!sx,ix=sx=null,e.current=r,N4(r),Q5(),mt=l,bt=o,Ln.transition=i}else e.current=r;if(Ed&&(Ed=!1,_s=e,If=s),i=e.pendingLanes,i===0&&($s=null),rM(r.stateNode),un(e,nr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if($f)throw $f=!1,e=Ax,Ax=null,e;return If&1&&e.tag!==0&&Bo(),i=e.pendingLanes,i&1?e===Px?Cc++:(Cc=0,Px=e):Cc=0,Qs(),null}function Bo(){if(_s!==null){var e=mA(If),t=Ln.transition,r=bt;try{if(Ln.transition=null,bt=16>e?16:e,_s===null)var n=!1;else{if(e=_s,_s=null,If=0,mt&6)throw Error(ge(331));var s=mt;for(mt|=4,Ie=e.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ie=u;Ie!==null;){var f=Ie;switch(f.tag){case 0:case 11:case 15:Pc(8,f,i)}var d=f.child;if(d!==null)d.return=f,Ie=d;else for(;Ie!==null;){f=Ie;var m=f.sibling,g=f.return;if(SP(f),f===u){Ie=null;break}if(m!==null){m.return=g,Ie=m;break}Ie=g}}}var b=i.alternate;if(b!==null){var h=b.child;if(h!==null){b.child=null;do{var j=h.sibling;h.sibling=null,h=j}while(h!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Pc(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Ie=p;break e}Ie=i.return}}var y=e.current;for(Ie=y;Ie!==null;){o=Ie;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Ie=x;else e:for(o=y;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ih(9,l)}}catch(w){er(l,l.return,w)}if(l===o){Ie=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Ie=S;break e}Ie=l.return}}if(mt=s,Qs(),ga&&typeof ga.onPostCommitFiberRoot=="function")try{ga.onPostCommitFiberRoot(Zm,e)}catch{}n=!0}return n}finally{bt=r,Ln.transition=t}}return!1}function cw(e,t,r){t=Zo(r,t),t=mP(e,t,1),e=Ds(e,t,1),t=Xr(),e!==null&&(Yu(e,1,t),un(e,t))}function er(e,t,r){if(e.tag===3)cw(e,e,r);else for(;t!==null;){if(t.tag===3){cw(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($s===null||!$s.has(n))){e=Zo(r,e),e=hP(t,e,1),t=Ds(t,e,1),e=Xr(),t!==null&&(Yu(t,1,e),un(t,e));break}}t=t.return}}function C4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Xr(),e.pingedLanes|=e.suspendedLanes&r,jr===e&&(Er&r)===r&&(pr===4||pr===3&&(Er&130023424)===Er&&500>nr()-lv?Ti(e,0):ov|=r),un(e,t)}function DP(e,t){t===0&&(e.mode&1?(t=yd,yd<<=1,!(yd&130023424)&&(yd=4194304)):t=1);var r=Xr();e=Za(e,t),e!==null&&(Yu(e,t,r),un(e,r))}function O4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DP(e,r)}function T4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(t),DP(e,r)}var $P;$P=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ln.current)nn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return nn=!1,y4(e,t,r);nn=!!(e.flags&131072)}else nn=!1,Vt&&t.flags&1048576&&BA(t,Pf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;af(e,t),e=t.pendingProps;var s=Ko(t,Fr.current);Ro(t,r),s=tv(null,t,n,e,s,r);var i=rv();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cn(n)?(i=!0,_f(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xy(t),s.updater=sh,t.stateNode=s,s._reactInternals=t,px(t,n,e,r),t=yx(null,t,n,!0,i,r)):(t.tag=0,Vt&&i&&Uy(t),Hr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(af(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=M4(n),e=Kn(n,e),s){case 0:t=xx(null,t,n,e,r);break e;case 1:t=Qj(null,t,n,e,r);break e;case 11:t=Jj(null,t,n,e,r);break e;case 14:t=Zj(null,t,n,Kn(n.type,e),r);break e}throw Error(ge(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Kn(n,s),xx(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Kn(n,s),Qj(e,t,n,s,r);case 3:e:{if(yP(t),e===null)throw Error(ge(387));n=t.pendingProps,i=t.memoizedState,s=i.element,HA(e,t),Of(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Zo(Error(ge(423)),t),t=ew(e,t,n,r,s);break e}else if(n!==s){s=Zo(Error(ge(424)),t),t=ew(e,t,n,r,s);break e}else for(yn=Ms(t.stateNode.containerInfo.firstChild),bn=t,Vt=!0,Jn=null,r=UA(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yo(),n===s){t=Qa(e,t,r);break e}Hr(e,t,n,r)}t=t.child}return t;case 5:return qA(t),e===null&&fx(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ox(n,s)?o=null:i!==null&&ox(n,i)&&(t.flags|=32),xP(e,t),Hr(e,t,o,r),t.child;case 6:return e===null&&fx(t),null;case 13:return vP(e,t,r);case 4:return Jy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Xo(t,null,n,r):Hr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Kn(n,s),Jj(e,t,n,s,r);case 7:return Hr(e,t,t.pendingProps,r),t.child;case 8:return Hr(e,t,t.pendingProps.children,r),t.child;case 12:return Hr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Ct(Ef,n._currentValue),n._currentValue=o,i!==null)if(aa(i.value,o)){if(i.children===s.children&&!ln.current){t=Qa(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Ha(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),mx(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),mx(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Hr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ro(t,r),s=Bn(s),n=n(s),t.flags|=1,Hr(e,t,n,r),t.child;case 14:return n=t.type,s=Kn(n,t.pendingProps),s=Kn(n.type,s),Zj(e,t,n,s,r);case 15:return pP(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Kn(n,s),af(e,t),t.tag=1,cn(n)?(e=!0,_f(t)):e=!1,Ro(t,r),fP(t,n,s),px(t,n,s,r),yx(null,t,n,!0,e,r);case 19:return bP(e,t,r);case 22:return gP(e,t,r)}throw Error(ge(156,t.tag))};function IP(e,t){return cA(e,t)}function k4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(e,t,r,n){return new k4(e,t,r,n)}function fv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function M4(e){if(typeof e=="function")return fv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ty)return 11;if(e===ky)return 14}return 2}function Ls(e,t){var r=e.alternate;return r===null?(r=$n(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lf(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")fv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case fo:return ki(r.children,s,i,t);case Oy:o=8,s|=8;break;case Bg:return e=$n(12,r,t,s|2),e.elementType=Bg,e.lanes=i,e;case Fg:return e=$n(13,r,t,s),e.elementType=Fg,e.lanes=i,e;case zg:return e=$n(19,r,t,s),e.elementType=zg,e.lanes=i,e;case q_:return lh(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case W_:o=10;break e;case H_:o=9;break e;case Ty:o=11;break e;case ky:o=14;break e;case gs:o=16,n=null;break e}throw Error(ge(130,e==null?e:typeof e,""))}return t=$n(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ki(e,t,r,n){return e=$n(7,e,n,t),e.lanes=r,e}function lh(e,t,r,n){return e=$n(22,e,n,t),e.elementType=q_,e.lanes=r,e.stateNode={isHidden:!1},e}function Hp(e,t,r){return e=$n(6,e,null,t),e.lanes=r,e}function qp(e,t,r){return t=$n(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function D4(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ap(0),this.expirationTimes=Ap(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ap(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mv(e,t,r,n,s,i,o,l,c){return e=new D4(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=$n(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xy(i),e}function $4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function LP(e){if(!e)return qs;e=e._reactInternals;e:{if(Ji(e)!==e||e.tag!==1)throw Error(ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ge(171))}if(e.tag===1){var r=e.type;if(cn(r))return LA(e,r,t)}return t}function RP(e,t,r,n,s,i,o,l,c){return e=mv(r,n,!0,e,s,i,o,l,c),e.context=LP(null),r=e.current,n=Xr(),s=Is(r),i=Ha(n,s),i.callback=t??null,Ds(r,i,s),e.current.lanes=s,Yu(e,s,n),un(e,n),e}function ch(e,t,r,n){var s=t.current,i=Xr(),o=Is(s);return r=LP(r),t.context===null?t.context=r:t.pendingContext=r,t=Ha(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ds(s,t,o),e!==null&&(ra(e,s,o,i),tf(e,s,o)),o}function Rf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function hv(e,t){uw(e,t),(e=e.alternate)&&uw(e,t)}function I4(){return null}var BP=typeof reportError=="function"?reportError:function(e){console.error(e)};function pv(e){this._internalRoot=e}uh.prototype.render=pv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ge(409));ch(e,t,null,null)};uh.prototype.unmount=pv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vi(function(){ch(null,e,null,null)}),t[Ja]=null}};function uh(e){this._internalRoot=e}uh.prototype.unstable_scheduleHydration=function(e){if(e){var t=gA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<js.length&&t!==0&&t<js[r].priority;r++);js.splice(r,0,e),r===0&&yA(e)}};function gv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dw(){}function L4(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Rf(o);i.call(u)}}var o=RP(t,n,e,0,null,!1,!1,"",dw);return e._reactRootContainer=o,e[Ja]=o.current,Xc(e.nodeType===8?e.parentNode:e),Vi(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Rf(c);l.call(u)}}var c=mv(e,0,!1,null,null,!1,!1,"",dw);return e._reactRootContainer=c,e[Ja]=c.current,Xc(e.nodeType===8?e.parentNode:e),Vi(function(){ch(t,c,r,n)}),c}function fh(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Rf(o);l.call(c)}}ch(t,o,e,s)}else o=L4(r,t,e,s,n);return Rf(o)}hA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gc(t.pendingLanes);r!==0&&($y(t,r|1),un(t,nr()),!(mt&6)&&(Qo=nr()+500,Qs()))}break;case 13:Vi(function(){var n=Za(e,1);if(n!==null){var s=Xr();ra(n,e,1,s)}}),hv(e,1)}};Iy=function(e){if(e.tag===13){var t=Za(e,134217728);if(t!==null){var r=Xr();ra(t,e,134217728,r)}hv(e,134217728)}};pA=function(e){if(e.tag===13){var t=Is(e),r=Za(e,t);if(r!==null){var n=Xr();ra(r,e,t,n)}hv(e,t)}};gA=function(){return bt};xA=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}};Jg=function(e,t,r){switch(t){case"input":if(Wg(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=rh(n);if(!s)throw Error(ge(90));K_(n),Wg(n,s)}}}break;case"textarea":X_(e,r);break;case"select":t=r.value,t!=null&&Do(e,!!r.multiple,t,!1)}};nA=cv;aA=Vi;var R4={usingClientEntryPoint:!1,Events:[Ju,go,rh,tA,rA,cv]},ec={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},B4={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:os.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oA(e),e===null?null:e.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||I4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Zm=Cd.inject(B4),ga=Cd}catch{}}_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R4;_n.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gv(t))throw Error(ge(200));return $4(e,t,null,r)};_n.createRoot=function(e,t){if(!gv(e))throw Error(ge(299));var r=!1,n="",s=BP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=mv(e,1,!1,null,null,r,!1,n,s),e[Ja]=t.current,Xc(e.nodeType===8?e.parentNode:e),new pv(t)};_n.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ge(188)):(e=Object.keys(e).join(","),Error(ge(268,e)));return e=oA(t),e=e===null?null:e.stateNode,e};_n.flushSync=function(e){return Vi(e)};_n.hydrate=function(e,t,r){if(!dh(t))throw Error(ge(200));return fh(null,e,t,!0,r)};_n.hydrateRoot=function(e,t,r){if(!gv(e))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=BP;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=RP(t,null,e,1,r??null,s,!1,i,o),e[Ja]=t.current,Xc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new uh(t)};_n.render=function(e,t,r){if(!dh(t))throw Error(ge(200));return fh(null,e,t,!1,r)};_n.unmountComponentAtNode=function(e){if(!dh(e))throw Error(ge(40));return e._reactRootContainer?(Vi(function(){fh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ja]=null})}),!0):!1};_n.unstable_batchedUpdates=cv;_n.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!dh(r))throw Error(ge(200));if(e==null||e._reactInternals===void 0)throw Error(ge(38));return fh(e,t,r,!1,n)};_n.version="18.3.1-next-f1338f8080-20240426";function FP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FP)}catch(e){console.error(e)}}FP(),F_.exports=_n;var F4=F_.exports,fw=F4;Lg.createRoot=fw.createRoot,Lg.hydrateRoot=fw.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function su(){return su=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},su.apply(this,arguments)}var As;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(As||(As={}));const mw="popstate";function z4(e){e===void 0&&(e={});function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return Ox("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Bf(s)}return U4(t,r,null,e)}function sr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function V4(){return Math.random().toString(36).substr(2,8)}function hw(e,t){return{usr:e.state,key:e.key,idx:t}}function Ox(e,t,r,n){return r===void 0&&(r=null),su({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Tl(t):t,{state:r,key:t&&t.key||n||V4()})}function Bf(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Tl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function U4(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=As.Pop,c=null,u=f();u==null&&(u=0,o.replaceState(su({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function d(){l=As.Pop;let j=f(),p=j==null?null:j-u;u=j,c&&c({action:l,location:h.location,delta:p})}function m(j,p){l=As.Push;let y=Ox(h.location,j,p);u=f()+1;let x=hw(y,u),S=h.createHref(y);try{o.pushState(x,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;s.location.assign(S)}i&&c&&c({action:l,location:h.location,delta:1})}function g(j,p){l=As.Replace;let y=Ox(h.location,j,p);u=f();let x=hw(y,u),S=h.createHref(y);o.replaceState(x,"",S),i&&c&&c({action:l,location:h.location,delta:0})}function b(j){let p=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof j=="string"?j:Bf(j);return y=y.replace(/ $/,"%20"),sr(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let h={get action(){return l},get location(){return e(s,o)},listen(j){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(mw,d),c=j,()=>{s.removeEventListener(mw,d),c=null}},createHref(j){return t(s,j)},createURL:b,encodeLocation(j){let p=b(j);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:g,go(j){return o.go(j)}};return h}var pw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pw||(pw={}));function W4(e,t,r){return r===void 0&&(r="/"),H4(e,t,r)}function H4(e,t,r,n){let s=typeof t=="string"?Tl(t):t,i=yv(s.pathname||"/",r);if(i==null)return null;let o=zP(e);q4(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=aD(i);l=tD(o[c],u)}return l}function zP(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(sr(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Rs([n,c.relativePath]),f=r.concat(c);i.children&&i.children.length>0&&(sr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),zP(i.children,t,f,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Q4(u,i.index),routesMeta:f})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of VP(i.path))s(i,o,c)}),t}function VP(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=VP(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function q4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:eD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const G4=/^:[\w-]+$/,K4=3,Y4=2,X4=1,J4=10,Z4=-2,gw=e=>e==="*";function Q4(e,t){let r=e.split("/"),n=r.length;return r.some(gw)&&(n+=Z4),t&&(n+=Y4),r.filter(s=>!gw(s)).reduce((s,i)=>s+(G4.test(i)?K4:i===""?X4:J4),n)}function eD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function tD(e,t,r){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",d=rD({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),m=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Rs([i,d.pathname]),pathnameBase:cD(Rs([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=Rs([i,d.pathnameBase]))}return o}function rD(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=nD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:m,isOptional:g}=f;if(m==="*"){let h=l[d]||"";o=i.slice(0,i.length-h.length).replace(/(.)\/+$/,"$1")}const b=l[d];return g&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function nD(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),xv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function aD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function yv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const sD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,iD=e=>sD.test(e);function oD(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Tl(e):e,i;if(r)if(iD(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),xv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=xw(r.substring(1),"/"):i=xw(r,t)}else i=t;return{pathname:i,search:uD(n),hash:dD(s)}}function xw(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Gp(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function vv(e,t){let r=lD(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bv(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Tl(e):(s=su({},e),sr(!s.pathname||!s.pathname.includes("?"),Gp("?","pathname","search",s)),sr(!s.pathname||!s.pathname.includes("#"),Gp("#","pathname","hash",s)),sr(!s.search||!s.search.includes("#"),Gp("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}l=d>=0?t[d]:"/"}let c=oD(s,l),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Rs=e=>e.join("/").replace(/\/\/+/g,"/"),cD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const UP=["post","put","patch","delete"];new Set(UP);const mD=["get",...UP];new Set(mD);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iu(){return iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iu.apply(this,arguments)}const jv=N.createContext(null),hD=N.createContext(null),ei=N.createContext(null),mh=N.createContext(null),ti=N.createContext({outlet:null,matches:[],isDataRoute:!1}),WP=N.createContext(null);function pD(e,t){let{relative:r}=t===void 0?{}:t;kl()||sr(!1);let{basename:n,navigator:s}=N.useContext(ei),{hash:i,pathname:o,search:l}=qP(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Rs([n,o])),s.createHref({pathname:c,search:l,hash:i})}function kl(){return N.useContext(mh)!=null}function fn(){return kl()||sr(!1),N.useContext(mh).location}function HP(e){N.useContext(ei).static||N.useLayoutEffect(e)}function at(){let{isDataRoute:e}=N.useContext(ti);return e?ED():gD()}function gD(){kl()||sr(!1);let e=N.useContext(jv),{basename:t,future:r,navigator:n}=N.useContext(ei),{matches:s}=N.useContext(ti),{pathname:i}=fn(),o=JSON.stringify(vv(s,r.v7_relativeSplatPath)),l=N.useRef(!1);return HP(()=>{l.current=!0}),N.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=bv(u,JSON.parse(o),i,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Rs([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,o,i,e])}function qP(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=N.useContext(ei),{matches:s}=N.useContext(ti),{pathname:i}=fn(),o=JSON.stringify(vv(s,n.v7_relativeSplatPath));return N.useMemo(()=>bv(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function xD(e,t){return yD(e,t)}function yD(e,t,r,n){kl()||sr(!1);let{navigator:s}=N.useContext(ei),{matches:i}=N.useContext(ti),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=fn(),f;if(t){var d;let j=typeof t=="string"?Tl(t):t;c==="/"||(d=j.pathname)!=null&&d.startsWith(c)||sr(!1),f=j}else f=u;let m=f.pathname||"/",g=m;if(c!=="/"){let j=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let b=W4(e,{pathname:g}),h=ND(b&&b.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Rs([c,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?c:Rs([c,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return t&&h?N.createElement(mh.Provider,{value:{location:iu({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:As.Pop}},h):h}function vD(){let e=PD(),t=fD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,null)}const bD=N.createElement(vD,null);class jD extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(ti.Provider,{value:this.props.routeContext},N.createElement(WP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wD(e){let{routeContext:t,match:r,children:n}=e,s=N.useContext(jv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(ti.Provider,{value:t},n)}function ND(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(s=r)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||sr(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let d=o[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:m,errors:g}=r,b=d.route.loader&&m[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,d,m)=>{let g,b=!1,h=null,j=null;r&&(g=l&&d.route.id?l[d.route.id]:void 0,h=d.route.errorElement||bD,c&&(u<0&&m===0?(CD("route-fallback"),b=!0,j=null):u===m&&(b=!0,j=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,m+1)),y=()=>{let x;return g?x=h:b?x=j:d.route.Component?x=N.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,N.createElement(wD,{match:d,routeContext:{outlet:f,matches:p,isDataRoute:r!=null},children:x})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?N.createElement(jD,{location:r.location,revalidation:r.revalidation,component:h,error:g,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var GP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GP||{}),KP=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(KP||{});function SD(e){let t=N.useContext(jv);return t||sr(!1),t}function _D(e){let t=N.useContext(hD);return t||sr(!1),t}function AD(e){let t=N.useContext(ti);return t||sr(!1),t}function YP(e){let t=AD(),r=t.matches[t.matches.length-1];return r.route.id||sr(!1),r.route.id}function PD(){var e;let t=N.useContext(WP),r=_D(),n=YP();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ED(){let{router:e}=SD(GP.UseNavigateStable),t=YP(KP.UseNavigateStable),r=N.useRef(!1);return HP(()=>{r.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,iu({fromRouteId:t},i)))},[e,t])}const yw={};function CD(e,t,r){yw[e]||(yw[e]=!0)}function OD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function TD(e){let{to:t,replace:r,state:n,relative:s}=e;kl()||sr(!1);let{future:i,static:o}=N.useContext(ei),{matches:l}=N.useContext(ti),{pathname:c}=fn(),u=at(),f=bv(t,vv(l,i.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(f);return N.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:s}),[u,d,s,r,n]),null}function dt(e){sr(!1)}function kD(e){let{basename:t="/",children:r=null,location:n,navigationType:s=As.Pop,navigator:i,static:o=!1,future:l}=e;kl()&&sr(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:o,future:iu({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Tl(n));let{pathname:f="/",search:d="",hash:m="",state:g=null,key:b="default"}=n,h=N.useMemo(()=>{let j=yv(f,c);return j==null?null:{location:{pathname:j,search:d,hash:m,state:g,key:b},navigationType:s}},[c,f,d,m,g,b,s]);return h==null?null:N.createElement(ei.Provider,{value:u},N.createElement(mh.Provider,{children:r,value:h}))}function MD(e){let{children:t,location:r}=e;return xD(Tx(t),r)}new Promise(()=>{});function Tx(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,s)=>{if(!N.isValidElement(n))return;let i=[...t,s];if(n.type===N.Fragment){r.push.apply(r,Tx(n.props.children,i));return}n.type!==dt&&sr(!1),!n.props.index||!n.props.children||sr(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Tx(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(this,arguments)}function DD(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function $D(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ID(e,t){return e.button===0&&(!t||t==="_self")&&!$D(e)}const LD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RD="6";try{window.__reactRouterVersion=RD}catch{}const BD="startTransition",vw=C5[BD];function FD(e){let{basename:t,children:r,future:n,window:s}=e,i=N.useRef();i.current==null&&(i.current=z4({window:s,v5Compat:!0}));let o=i.current,[l,c]=N.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},f=N.useCallback(d=>{u&&vw?vw(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>o.listen(f),[o,f]),N.useEffect(()=>OD(n),[n]),N.createElement(kD,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const zD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ff=N.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:f,viewTransition:d}=t,m=DD(t,LD),{basename:g}=N.useContext(ei),b,h=!1;if(typeof u=="string"&&VD.test(u)&&(b=u,zD))try{let x=new URL(window.location.href),S=u.startsWith("//")?new URL(x.protocol+u):new URL(u),w=yv(S.pathname,g);S.origin===x.origin&&w!=null?u=w+S.search+S.hash:h=!0}catch{}let j=pD(u,{relative:s}),p=UD(u,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:d});function y(x){n&&n(x),x.defaultPrevented||p(x)}return N.createElement("a",kx({},m,{href:b||j,onClick:h||i?n:y,ref:r,target:c}))});var bw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(bw||(bw={}));var jw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(jw||(jw={}));function UD(e,t){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=at(),u=fn(),f=qP(e,{relative:o});return N.useCallback(d=>{if(ID(d,r)){d.preventDefault();let m=n!==void 0?n:Bf(u)===Bf(f);c(e,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,f,n,s,r,e,i,o,l])}const ke=e=>`/${e}`,ww="http://localhost/backend/api",be=async(e,t={})=>{const r=localStorage.getItem("token"),n={method:t.method||"GET",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`},...t.headers},...t.body&&{body:t.body},...t};try{const s=`${ww}${e}`;console.log(`[API] ${t.method||"GET"} ${s}`);const i=await fetch(s,n);let o;const l=i.headers.get("content-type"),c=await i.text();if(l&&l.includes("application/json"))try{o=JSON.parse(c)}catch(u){throw console.error("[API] Error parsing JSON:",u),console.error("[API] Response text:",c),new Error("Rponse invalide du serveur. Le backend ne renvoie pas du JSON valide.")}else throw console.error("[API] Non-JSON response:",c),new Error(c||"Erreur lors de la requte");if(!i.ok)throw console.error(`[API] Error ${i.status}:`,o),new Error(o.message||`Erreur ${i.status}: Erreur lors de la requte`);return console.log("[API] Success:",o),o}catch(s){throw s.name==="TypeError"&&s.message.includes("fetch")?(console.error("[API] Network Error:",s),new Error(`Impossible de se connecter au serveur. Vrifiez que:
1. XAMPP Apache est dmarr
2. Le backend est dans C:\\xampp\\htdocs\\backend
3. L'URL ${ww} est accessible dans votre navigateur`)):s instanceof Error?(console.error("[API] Error:",s),s):(console.error("[API] Unknown Error:",s),new Error("Erreur de connexion au serveur"))}},es={login:async(e,t,r=null)=>{const s=e.includes("@")?{email:e,password:t}:{telephone:e,password:t};return r&&(s.expected_role=r),be("/auth/login.php",{method:"POST",body:JSON.stringify(s)})},register:async e=>be("/auth/register.php",{method:"POST",body:JSON.stringify(e)}),logout:async()=>{try{await be("/auth/logout.php",{method:"POST"})}catch(e){console.error("Erreur lors de la dconnexion:",e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user")}},getCurrentUser:()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},saveUser:e=>{localStorage.setItem("user",JSON.stringify(e))}},an={getAll:()=>be("/chauffeurs/getAll.php"),getById:e=>be(`/chauffeurs/getById.php?id=${e}`),create:e=>be("/chauffeurs/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/chauffeurs/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/chauffeurs/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),getAccidents:e=>be(`/chauffeurs/accidents.php?chauffeur_id=${e}`),licencier:e=>be("/chauffeurs/licencier.php",{method:"POST",body:JSON.stringify({chauffeur_id:e})})},Fa={getAll:()=>be("/responsables/getAll.php"),getById:e=>be(`/responsables/getById.php?id=${e}`),create:e=>be("/responsables/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/responsables/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/responsables/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},ri={getAll:()=>be("/tuteurs/getAll.php"),getById:e=>be(`/tuteurs/getById.php?id=${e}`),create:e=>be("/tuteurs/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/tuteurs/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),getEleves:e=>be(`/tuteurs/eleves.php?tuteur_id=${e}`),getPaiements:e=>be(`/tuteurs/paiements.php?tuteur_id=${e}`)},Yt={getAll:()=>be("/eleves/getAll.php"),getById:e=>be(`/eleves/getById.php?id=${e}`),getByBus:e=>be(`/eleves/getByBus.php?bus_id=${e}`),create:e=>be("/eleves/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/eleves/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/eleves/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},Pr={getAll:()=>be("/bus/getAll.php"),getById:e=>be(`/bus/getById.php?id=${e}`),create:e=>be("/bus/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/bus/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/bus/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),getEleves:e=>be(`/bus/eleves.php?bus_id=${e}`),getByZone:e=>be(`/bus/getByZone.php?zone=${encodeURIComponent(e)}`)},ha={getAll:()=>be("/trajets/getAll.php"),getById:e=>be(`/trajets/getById.php?id=${e}`),create:e=>be("/trajets/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/trajets/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/trajets/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},ua={getByDate:(e,t=null)=>{const r=t?`/presences/getByDate.php?date=${e}&bus_id=${t}`:`/presences/getByDate.php?date=${e}`;return be(r)},getByEleve:(e,t,r)=>be(`/presences/getByEleve.php?eleve_id=${e}&start_date=${t}&end_date=${r}`),marquer:e=>be("/presences/marquer.php",{method:"POST",body:JSON.stringify(e)}),getStatistiques:e=>be(`/presences/statistiques.php?eleve_id=${e}`)},vn={getAll:()=>be("/accidents/getAll.php"),getById:e=>be(`/accidents/getById.php?id=${e}`),getByChauffeur:e=>be(`/accidents/getByChauffeur.php?chauffeur_id=${e}`),getByResponsable:e=>be(`/accidents/getByResponsable.php?responsable_id=${e}`),create:e=>be("/accidents/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/accidents/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),validate:e=>be("/accidents/validate.php",{method:"PUT",body:JSON.stringify({id:e})}),delete:e=>be("/accidents/delete.php",{method:"DELETE",body:JSON.stringify({id:e})})},lt={getByUser:(e,t)=>be(`/notifications/getByUser.php?user_id=${e}&user_type=${t}`),getSentByResponsable:e=>be(`/notifications/getSentByResponsable.php?responsable_id=${e}`),marquerLue:e=>be("/notifications/marquerLue.php",{method:"PUT",body:JSON.stringify({id:e})}),create:e=>be("/notifications/create.php",{method:"POST",body:JSON.stringify(e)}),delete:e=>be("/notifications/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),deleteAll:(e,t)=>be("/notifications/deleteAll.php",{method:"DELETE",body:JSON.stringify({user_id:e,user_type:t})})},cr={getAll:()=>be("/demandes/getAll.php"),getByUser:(e,t)=>be(`/demandes/getByUser.php?user_id=${e}&user_type=${t}`),getByTuteur:e=>be(`/demandes/getByTuteur.php?tuteur_id=${e}`),create:e=>be("/demandes/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/demandes/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be("/demandes/delete.php",{method:"DELETE",body:JSON.stringify({id:e})}),traiter:(e,t,r,n,s)=>be("/demandes/traiter.php",{method:"PUT",body:JSON.stringify({id:e,statut:t,commentaire:r,raison_refus:n,traite_par:s})}),verifierCode:(e,t)=>be("/demandes/verifierCode.php",{method:"POST",body:JSON.stringify({demande_id:e,code_verification:t})})},jn={getAll:()=>be("/inscriptions/getAll.php"),getByEleve:e=>be(`/inscriptions/getByEleve.php?eleve_id=${e}`),create:e=>be("/inscriptions/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/inscriptions/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})})},Fo={getAll:()=>be("/paiements/getAll.php"),getByTuteur:e=>be(`/paiements/getByTuteur.php?tuteur_id=${e}`),getByEleve:e=>be(`/paiements/getByEleve.php?eleve_id=${e}`),create:e=>be("/paiements/create.php",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>be("/paiements/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be(`/paiements/delete.php?id=${e}`,{method:"DELETE"}),getImpaye:()=>be("/paiements/getImpaye.php")},Ps={getAll:()=>be("/zones/getAll.php"),create:e=>be("/zones/create.php",{method:"POST",body:JSON.stringify(e)}),update:e=>be("/zones/update.php",{method:"PUT",body:JSON.stringify(e)}),delete:e=>be(`/zones/delete.php?id=${e}`,{method:"DELETE"})},WD={sendMessage:e=>be("/contact/create.php",{method:"POST",body:JSON.stringify(e)})},Oc={getAll:()=>be("/essence/getAll.php"),create:e=>be("/essence/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>be(`/essence/getByChauffeur.php?chauffeur_id=${e}`)},XP={create:e=>be("/rapports/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>be(`/rapports/getByChauffeur.php?chauffeur_id=${e}`)},da={getAll:()=>be("/signalements/getAll.php"),create:e=>be("/signalements/create.php",{method:"POST",body:JSON.stringify(e)}),getByChauffeur:e=>be(`/signalements/getByChauffeur.php?chauffeur_id=${e}`),update:(e,t)=>be("/signalements/update.php",{method:"PUT",body:JSON.stringify({id:e,...t})}),delete:e=>be(`/signalements/delete.php?id=${e}`,{method:"DELETE"})};var HD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GD=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>N.createElement("svg",{ref:u,...HD,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${qD(e)}`,...c},[...t.map(([f,d])=>N.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var Ve=GD;const qe=Ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Es=Ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),rr=Ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),el=Ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),zn=Ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Nw=Ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),KD=Ve("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),tt=Ve("Bus",[["path",{d:"M19 17h2l.64-2.54c.24-.959.24-1.962 0-2.92l-1.07-4.27A3 3 0 0 0 17.66 5H4a2 2 0 0 0-2 2v10h2",key:"wfsdqh"}],["path",{d:"M14 17H9",key:"o2noo5"}],["circle",{cx:"6.5",cy:"17.5",r:"2.5",key:"gc8oob"}],["circle",{cx:"16.5",cy:"17.5",r:"2.5",key:"4btu0q"}]]),Jr=Ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Od=Ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ct=Ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Bs=Ve("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),YD=Ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Mx=Ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Gs=Ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Sw=Ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Ar=Ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),cf=Ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),zf=Ve("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),_a=Ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ya=Ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),sa=Ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),tn=Ve("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),hr=Ve("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),wv=Ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),La=Ve("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Qu=Ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),XD=Ve("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Td=Ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),JD=Ve("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Mi=Ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ui=Ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Rt=Ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),tl=Ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),uf=Ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),No=Ve("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),Vn=Ve("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ou=Ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),va=Ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_w=Ve("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),ts=Ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Nv=Ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Dx=Ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Di=Ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ZD=Ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ut=Ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),QD=Ve("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),lu=Ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),yc=Ve("UserCog",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["circle",{cx:"19",cy:"11",r:"2",key:"1rxg02"}],["path",{d:"M19 8v1",key:"1iffrw"}],["path",{d:"M19 13v1",key:"z4xc62"}],["path",{d:"m21.6 9.5-.87.5",key:"6lxupl"}],["path",{d:"m17.27 12-.87.5",key:"1rwhxx"}],["path",{d:"m21.6 12.5-.87-.5",key:"agvc9a"}],["path",{d:"m17.27 10-.87-.5",key:"12d57s"}]]),hh=Ve("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ft=Ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),zt=Ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zn=Ve("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Dr=Ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Ze=Ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_i=Ve("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),JP=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ph=N.createContext({}),gh=N.createContext(null),xh=typeof document<"u",Sv=xh?N.useLayoutEffect:N.useEffect,ZP=N.createContext({strict:!1}),_v=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e$="framerAppearId",QP="data-"+_v(e$);function t$(e,t,r,n){const{visualElement:s}=N.useContext(ph),i=N.useContext(ZP),o=N.useContext(gh),l=N.useContext(JP).reducedMotion,c=N.useRef();n=n||i.renderer,!c.current&&n&&(c.current=n(e,{visualState:t,parent:s,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;N.useInsertionEffect(()=>{u&&u.update(r,o)});const f=N.useRef(!!(r[QP]&&!window.HandoffComplete));return Sv(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),N.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),u}function So(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function r$(e,t,r){return N.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):So(r)&&(r.current=n))},[t])}function cu(e){return typeof e=="string"||Array.isArray(e)}function yh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Av=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pv=["initial",...Av];function vh(e){return yh(e.animate)||Pv.some(t=>cu(e[t]))}function eE(e){return!!(vh(e)||e.variants)}function n$(e,t){if(vh(e)){const{initial:r,animate:n}=e;return{initial:r===!1||cu(r)?r:void 0,animate:cu(n)?n:void 0}}return e.inherit!==!1?t:{}}function a$(e){const{initial:t,animate:r}=n$(e,N.useContext(ph));return N.useMemo(()=>({initial:t,animate:r}),[Aw(t),Aw(r)])}function Aw(e){return Array.isArray(e)?e.join(" "):e}const Pw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uu={};for(const e in Pw)uu[e]={isEnabled:t=>Pw[e].some(r=>!!t[r])};function s$(e){for(const t in e)uu[t]={...uu[t],...e[t]}}const Ev=N.createContext({}),tE=N.createContext({}),i$=Symbol.for("motionComponentSymbol");function o$({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:s}){e&&s$(e);function i(l,c){let u;const f={...N.useContext(JP),...l,layoutId:l$(l)},{isStatic:d}=f,m=a$(l),g=n(l,d);if(!d&&xh){m.visualElement=t$(s,g,f,t);const b=N.useContext(tE),h=N.useContext(ZP).strict;m.visualElement&&(u=m.visualElement.loadFeatures(f,h,e,b))}return N.createElement(ph.Provider,{value:m},u&&m.visualElement?N.createElement(u,{visualElement:m.visualElement,...f}):null,r(s,l,r$(g,m.visualElement,c),g,d,m.visualElement))}const o=N.forwardRef(i);return o[i$]=s,o}function l$({layoutId:e}){const t=N.useContext(Ev).id;return t&&e!==void 0?t+"-"+e:e}function c$(e){function t(n,s={}){return o$(e(n,s))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(n,s)=>(r.has(s)||r.set(s,t(s)),r.get(s))})}const u$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cv(e){return typeof e!="string"||e.includes("-")?!1:!!(u$.indexOf(e)>-1||/[A-Z]/.test(e))}const Vf={};function d$(e){Object.assign(Vf,e)}const ed=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zi=new Set(ed);function rE(e,{layout:t,layoutId:r}){return Zi.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!Vf[e]||e==="opacity")}const dn=e=>!!(e&&e.getVelocity),f$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},m$=ed.length;function h$(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,s){let i="";for(let o=0;o<m$;o++){const l=ed[o];if(e[l]!==void 0){const c=f$[l]||l;i+=`${c}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):r&&n&&(i="none"),i}const nE=e=>t=>typeof t=="string"&&t.startsWith(e),aE=nE("--"),$x=nE("var(--"),p$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,g$=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ks=(e,t,r)=>Math.min(Math.max(r,e),t),Qi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Tc={...Qi,transform:e=>Ks(0,1,e)},kd={...Qi,default:1},kc=e=>Math.round(e*1e5)/1e5,bh=/(-)?([\d]*\.?[\d])+/g,sE=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,x$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function td(e){return typeof e=="string"}const rd=e=>({test:t=>td(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),ps=rd("deg"),ba=rd("%"),He=rd("px"),y$=rd("vh"),v$=rd("vw"),Ew={...ba,parse:e=>ba.parse(e)/100,transform:e=>ba.transform(e*100)},Cw={...Qi,transform:Math.round},iE={borderWidth:He,borderTopWidth:He,borderRightWidth:He,borderBottomWidth:He,borderLeftWidth:He,borderRadius:He,radius:He,borderTopLeftRadius:He,borderTopRightRadius:He,borderBottomRightRadius:He,borderBottomLeftRadius:He,width:He,maxWidth:He,height:He,maxHeight:He,size:He,top:He,right:He,bottom:He,left:He,padding:He,paddingTop:He,paddingRight:He,paddingBottom:He,paddingLeft:He,margin:He,marginTop:He,marginRight:He,marginBottom:He,marginLeft:He,rotate:ps,rotateX:ps,rotateY:ps,rotateZ:ps,scale:kd,scaleX:kd,scaleY:kd,scaleZ:kd,skew:ps,skewX:ps,skewY:ps,distance:He,translateX:He,translateY:He,translateZ:He,x:He,y:He,z:He,perspective:He,transformPerspective:He,opacity:Tc,originX:Ew,originY:Ew,originZ:He,zIndex:Cw,fillOpacity:Tc,strokeOpacity:Tc,numOctaves:Cw};function Ov(e,t,r,n){const{style:s,vars:i,transform:o,transformOrigin:l}=e;let c=!1,u=!1,f=!0;for(const d in t){const m=t[d];if(aE(d)){i[d]=m;continue}const g=iE[d],b=g$(m,g);if(Zi.has(d)){if(c=!0,o[d]=b,!f)continue;m!==(g.default||0)&&(f=!1)}else d.startsWith("origin")?(u=!0,l[d]=b):s[d]=b}if(t.transform||(c||n?s.transform=h$(e.transform,r,f,n):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:m="50%",originZ:g=0}=l;s.transformOrigin=`${d} ${m} ${g}`}}const Tv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function oE(e,t,r){for(const n in t)!dn(t[n])&&!rE(n,r)&&(e[n]=t[n])}function b$({transformTemplate:e},t,r){return N.useMemo(()=>{const n=Tv();return Ov(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}function j$(e,t,r){const n=e.style||{},s={};return oE(s,n,e),Object.assign(s,b$(e,t,r)),e.transformValues?e.transformValues(s):s}function w$(e,t,r){const n={},s=j$(e,t,r);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const N$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uf(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||N$.has(e)}let lE=e=>!Uf(e);function S$(e){e&&(lE=t=>t.startsWith("on")?!Uf(t):e(t))}try{S$(require("@emotion/is-prop-valid").default)}catch{}function _$(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(lE(s)||r===!0&&Uf(s)||!t&&!Uf(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}function Ow(e,t,r){return typeof e=="string"?e:He.transform(t+r*e)}function A$(e,t,r){const n=Ow(t,e.x,e.width),s=Ow(r,e.y,e.height);return`${n} ${s}`}const P$={offset:"stroke-dashoffset",array:"stroke-dasharray"},E$={offset:"strokeDashoffset",array:"strokeDasharray"};function C$(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?P$:E$;e[i.offset]=He.transform(-n);const o=He.transform(t),l=He.transform(r);e[i.array]=`${o} ${l}`}function kv(e,{attrX:t,attrY:r,attrScale:n,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},f,d,m){if(Ov(e,u,f,m),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:b,dimensions:h}=e;g.transform&&(h&&(b.transform=g.transform),delete g.transform),h&&(s!==void 0||i!==void 0||b.transform)&&(b.transformOrigin=A$(h,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),r!==void 0&&(g.y=r),n!==void 0&&(g.scale=n),o!==void 0&&C$(g,o,l,c,!1)}const cE=()=>({...Tv(),attrs:{}}),Mv=e=>typeof e=="string"&&e.toLowerCase()==="svg";function O$(e,t,r,n){const s=N.useMemo(()=>{const i=cE();return kv(i,t,{enableHardwareAcceleration:!1},Mv(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};oE(i,e.style,e),s.style={...i,...s.style}}return s}function T$(e=!1){return(r,n,s,{latestValues:i},o)=>{const c=(Cv(r)?O$:w$)(n,i,o,r),f={..._$(n,typeof r=="string",e),...c,ref:s},{children:d}=n,m=N.useMemo(()=>dn(d)?d.get():d,[d]);return N.createElement(r,{...f,children:m})}}function uE(e,{style:t,vars:r},n,s){Object.assign(e.style,t,s&&s.getProjectionStyles(n));for(const i in r)e.style.setProperty(i,r[i])}const dE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function fE(e,t,r,n){uE(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(dE.has(s)?s:_v(s),t.attrs[s])}function Dv(e,t){const{style:r}=e,n={};for(const s in r)(dn(r[s])||t.style&&dn(t.style[s])||rE(s,e))&&(n[s]=r[s]);return n}function mE(e,t){const r=Dv(e,t);for(const n in e)if(dn(e[n])||dn(t[n])){const s=ed.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[s]=e[n]}return r}function $v(e,t,r,n={},s={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,n,s)),t}function hE(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const Wf=e=>Array.isArray(e),k$=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),M$=e=>Wf(e)?e[e.length-1]||0:e;function df(e){const t=dn(e)?e.get():e;return k$(t)?t.toValue():t}function D$({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,s,i){const o={latestValues:$$(n,s,i,e),renderState:t()};return r&&(o.mount=l=>r(n,l,o)),o}const pE=e=>(t,r)=>{const n=N.useContext(ph),s=N.useContext(gh),i=()=>D$(e,t,n,s);return r?i():hE(i)};function $$(e,t,r,n){const s={},i=n(e,{});for(const m in i)s[m]=df(i[m]);let{initial:o,animate:l}=e;const c=vh(e),u=eE(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let f=r?r.initial===!1:!1;f=f||o===!1;const d=f?l:o;return d&&typeof d!="boolean"&&!yh(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const b=$v(e,g);if(!b)return;const{transitionEnd:h,transition:j,...p}=b;for(const y in p){let x=p[y];if(Array.isArray(x)){const S=f?x.length-1:0;x=x[S]}x!==null&&(s[y]=x)}for(const y in h)s[y]=h[y]}),s}const ar=e=>e;class Tw{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const r=this.order.indexOf(t);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function I$(e){let t=new Tw,r=new Tw,n=0,s=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,f=!1)=>{const d=f&&s,m=d?t:r;return u&&o.add(c),m.add(c)&&d&&s&&(n=t.order.length),c},cancel:c=>{r.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,r]=[r,t],r.clear(),n=t.order.length,n)for(let u=0;u<n;u++){const f=t.order[u];f(c),o.has(f)&&(l.schedule(f),e())}s=!1,i&&(i=!1,l.process(c))}};return l}const Md=["prepare","read","update","preRender","render","postRender"],L$=40;function R$(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Md.reduce((d,m)=>(d[m]=I$(()=>r=!0),d),{}),o=d=>i[d].process(s),l=()=>{const d=performance.now();r=!1,s.delta=n?1e3/60:Math.max(Math.min(d-s.timestamp,L$),1),s.timestamp=d,s.isProcessing=!0,Md.forEach(o),s.isProcessing=!1,r&&t&&(n=!1,e(l))},c=()=>{r=!0,n=!0,s.isProcessing||e(l)};return{schedule:Md.reduce((d,m)=>{const g=i[m];return d[m]=(b,h=!1,j=!1)=>(r||c(),g.schedule(b,h,j)),d},{}),cancel:d=>Md.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:Ot,cancel:rs,state:Mr,steps:Kp}=R$(typeof requestAnimationFrame<"u"?requestAnimationFrame:ar,!0),B$={useVisualState:pE({scrapeMotionValuesFromProps:mE,createRenderState:cE,onMount:(e,t,{renderState:r,latestValues:n})=>{Ot.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Ot.render(()=>{kv(r,n,{enableHardwareAcceleration:!1},Mv(t.tagName),e.transformTemplate),fE(t,r)})}})},F$={useVisualState:pE({scrapeMotionValuesFromProps:Dv,createRenderState:Tv})};function z$(e,{forwardMotionProps:t=!1},r,n){return{...Cv(e)?B$:F$,preloadedFeatures:r,useRender:T$(t),createVisualElement:n,Component:e}}function za(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const gE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function jh(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const V$=e=>t=>gE(t)&&e(t,jh(t));function qa(e,t,r,n){return za(e,t,V$(r),n)}const U$=(e,t)=>r=>t(e(r)),Fs=(...e)=>e.reduce(U$);function xE(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const kw=xE("dragHorizontal"),Mw=xE("dragVertical");function yE(e){let t=!1;if(e==="y")t=Mw();else if(e==="x")t=kw();else{const r=kw(),n=Mw();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function vE(){const e=yE(!0);return e?(e(),!1):!0}class ni{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Dw(e,t){const r="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||vE())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ot.update(()=>l[n](i,o))};return qa(e.current,r,s,{passive:!e.getProps()[n]})}class W$ extends ni{mount(){this.unmount=Fs(Dw(this.node,!0),Dw(this.node,!1))}unmount(){}}class H$ extends ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fs(za(this.node.current,"focus",()=>this.onFocus()),za(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const bE=(e,t)=>t?e===t?!0:bE(e,t.parentElement):!1;function Yp(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,jh(r))}class q$ extends ni{constructor(){super(...arguments),this.removeStartListeners=ar,this.removeEndListeners=ar,this.removeAccessibleListeners=ar,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=qa(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f,globalTapTarget:d}=this.node.getProps();Ot.update(()=>{!d&&!bE(this.node.current,l.target)?f&&f(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=qa(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Fs(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Yp("up",(c,u)=>{const{onTap:f}=this.node.getProps();f&&Ot.update(()=>f(c,u))})};this.removeEndListeners(),this.removeEndListeners=za(this.node.current,"keyup",o),Yp("down",(l,c)=>{this.startPress(l,c)})},r=za(this.node.current,"keydown",t),n=()=>{this.isPressing&&Yp("cancel",(i,o)=>this.cancelPress(i,o))},s=za(this.node.current,"blur",n);this.removeAccessibleListeners=Fs(r,s)}}startPress(t,r){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ot.update(()=>n(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!vE()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ot.update(()=>n(t,r))}mount(){const t=this.node.getProps(),r=qa(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=za(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fs(r,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ix=new WeakMap,Xp=new WeakMap,G$=e=>{const t=Ix.get(e.target);t&&t(e)},K$=e=>{e.forEach(G$)};function Y$({root:e,...t}){const r=e||document;Xp.has(r)||Xp.set(r,{});const n=Xp.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(K$,{root:e,...t})),n[s]}function X$(e,t,r){const n=Y$(t);return Ix.set(e,r),n.observe(e),()=>{Ix.delete(e),n.unobserve(e)}}const J$={some:0,all:1};class Z$ extends ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:J$[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:d}=this.node.getProps(),m=u?f:d;m&&m(c)};return X$(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Q$(t,r))&&this.startObserver()}unmount(){}}function Q$({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const e6={inView:{Feature:Z$},tap:{Feature:q$},focus:{Feature:H$},hover:{Feature:W$}};function jE(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function t6(e){const t={};return e.values.forEach((r,n)=>t[n]=r.get()),t}function r6(e){const t={};return e.values.forEach((r,n)=>t[n]=r.getVelocity()),t}function wh(e,t,r){const n=e.getProps();return $v(n,t,r!==void 0?r:n.custom,t6(e),r6(e))}let Iv=ar;const $i=e=>e*1e3,Ga=e=>e/1e3,n6={current:!1},wE=e=>Array.isArray(e)&&typeof e[0]=="number";function NE(e){return!!(!e||typeof e=="string"&&SE[e]||wE(e)||Array.isArray(e)&&e.every(NE))}const vc=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,SE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:vc([0,.65,.55,1]),circOut:vc([.55,0,1,.45]),backIn:vc([.31,.01,.66,-.59]),backOut:vc([.33,1.53,.69,.99])};function _E(e){if(e)return wE(e)?vc(e):Array.isArray(e)?e.map(_E):SE[e]}function a6(e,t,r,{delay:n=0,duration:s,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[t]:r};c&&(u.offset=c);const f=_E(l);return Array.isArray(f)&&(u.easing=f),e.animate(u,{delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function s6(e,{repeat:t,repeatType:r="loop"}){const n=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[n]}const AE=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,i6=1e-7,o6=12;function l6(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=AE(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>i6&&++l<o6);return o}function nd(e,t,r,n){if(e===t&&r===n)return ar;const s=i=>l6(i,0,1,e,r);return i=>i===0||i===1?i:AE(s(i),t,n)}const c6=nd(.42,0,1,1),u6=nd(0,0,.58,1),PE=nd(.42,0,.58,1),d6=e=>Array.isArray(e)&&typeof e[0]!="number",EE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,CE=e=>t=>1-e(1-t),Lv=e=>1-Math.sin(Math.acos(e)),OE=CE(Lv),f6=EE(Lv),TE=nd(.33,1.53,.69,.99),Rv=CE(TE),m6=EE(Rv),h6=e=>(e*=2)<1?.5*Rv(e):.5*(2-Math.pow(2,-10*(e-1))),p6={linear:ar,easeIn:c6,easeInOut:PE,easeOut:u6,circIn:Lv,circInOut:f6,circOut:OE,backIn:Rv,backInOut:m6,backOut:TE,anticipate:h6},$w=e=>{if(Array.isArray(e)){Iv(e.length===4);const[t,r,n,s]=e;return nd(t,r,n,s)}else if(typeof e=="string")return p6[e];return e},Bv=(e,t)=>r=>!!(td(r)&&x$.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),kE=(e,t,r)=>n=>{if(!td(n))return n;const[s,i,o,l]=n.match(bh);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},g6=e=>Ks(0,255,e),Jp={...Qi,transform:e=>Math.round(g6(e))},Ai={test:Bv("rgb","red"),parse:kE("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Jp.transform(e)+", "+Jp.transform(t)+", "+Jp.transform(r)+", "+kc(Tc.transform(n))+")"};function x6(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Lx={test:Bv("#"),parse:x6,transform:Ai.transform},_o={test:Bv("hsl","hue"),parse:kE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+ba.transform(kc(t))+", "+ba.transform(kc(r))+", "+kc(Tc.transform(n))+")"},Wr={test:e=>Ai.test(e)||Lx.test(e)||_o.test(e),parse:e=>Ai.test(e)?Ai.parse(e):_o.test(e)?_o.parse(e):Lx.parse(e),transform:e=>td(e)?e:e.hasOwnProperty("red")?Ai.transform(e):_o.transform(e)},Kt=(e,t,r)=>-r*e+r*t+e;function Zp(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function y6({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Zp(c,l,e+1/3),i=Zp(c,l,e),o=Zp(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Qp=(e,t,r)=>{const n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},v6=[Lx,Ai,_o],b6=e=>v6.find(t=>t.test(e));function Iw(e){const t=b6(e);let r=t.parse(e);return t===_o&&(r=y6(r)),r}const ME=(e,t)=>{const r=Iw(e),n=Iw(t),s={...r};return i=>(s.red=Qp(r.red,n.red,i),s.green=Qp(r.green,n.green,i),s.blue=Qp(r.blue,n.blue,i),s.alpha=Kt(r.alpha,n.alpha,i),Ai.transform(s))};function j6(e){var t,r;return isNaN(e)&&td(e)&&(((t=e.match(bh))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(sE))===null||r===void 0?void 0:r.length)||0)>0}const DE={regex:p$,countKey:"Vars",token:"${v}",parse:ar},$E={regex:sE,countKey:"Colors",token:"${c}",parse:Wr.parse},IE={regex:bh,countKey:"Numbers",token:"${n}",parse:Qi.parse};function eg(e,{regex:t,countKey:r,token:n,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+r]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(s)))}function Hf(e){const t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&eg(r,DE),eg(r,$E),eg(r,IE),r}function LE(e){return Hf(e).values}function RE(e){const{values:t,numColors:r,numVars:n,tokenised:s}=Hf(e),i=t.length;return o=>{let l=s;for(let c=0;c<i;c++)c<n?l=l.replace(DE.token,o[c]):c<n+r?l=l.replace($E.token,Wr.transform(o[c])):l=l.replace(IE.token,kc(o[c]));return l}}const w6=e=>typeof e=="number"?0:e;function N6(e){const t=LE(e);return RE(e)(t.map(w6))}const Ys={test:j6,parse:LE,createTransformer:RE,getAnimatableNone:N6},BE=(e,t)=>r=>`${r>0?t:e}`;function FE(e,t){return typeof e=="number"?r=>Kt(e,t,r):Wr.test(e)?ME(e,t):e.startsWith("var(")?BE(e,t):VE(e,t)}const zE=(e,t)=>{const r=[...e],n=r.length,s=e.map((i,o)=>FE(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}},S6=(e,t)=>{const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=FE(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}},VE=(e,t)=>{const r=Ys.createTransformer(t),n=Hf(e),s=Hf(t);return n.numVars===s.numVars&&n.numColors===s.numColors&&n.numNumbers>=s.numNumbers?Fs(zE(n.values,s.values),r):BE(e,t)},du=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n},Lw=(e,t)=>r=>Kt(e,t,r);function _6(e){return typeof e=="number"?Lw:typeof e=="string"?Wr.test(e)?ME:VE:Array.isArray(e)?zE:typeof e=="object"?S6:Lw}function A6(e,t,r){const n=[],s=r||_6(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ar:t;l=Fs(c,l)}n.push(l)}return n}function UE(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(Iv(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=A6(t,n,s),l=o.length,c=u=>{let f=0;if(l>1)for(;f<e.length-2&&!(u<e[f+1]);f++);const d=du(e[f],e[f+1],u);return o[f](d)};return r?u=>c(Ks(e[0],e[i-1],u)):c}function P6(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=du(0,t,n);e.push(Kt(r,1,s))}}function E6(e){const t=[0];return P6(t,e.length-1),t}function C6(e,t){return e.map(r=>r*t)}function O6(e,t){return e.map(()=>t||PE).splice(0,e.length-1)}function qf({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=d6(n)?n.map($w):$w(n),i={done:!1,value:t[0]},o=C6(r&&r.length===t.length?r:E6(t),e),l=UE(o,t,{ease:Array.isArray(s)?s:O6(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}function WE(e,t){return t?e*(1e3/t):0}const T6=5;function HE(e,t,r){const n=Math.max(t-T6,0);return WE(r-e(n),t-n)}const tg=.001,k6=.01,M6=10,D6=.05,$6=1;function I6({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let s,i,o=1-t;o=Ks(D6,$6,o),e=Ks(k6,M6,Ga(e)),o<1?(s=u=>{const f=u*o,d=f*e,m=f-r,g=Rx(u,o),b=Math.exp(-d);return tg-m/g*b},i=u=>{const d=u*o*e,m=d*r+r,g=Math.pow(o,2)*Math.pow(u,2)*e,b=Math.exp(-d),h=Rx(Math.pow(u,2),o);return(-s(u)+tg>0?-1:1)*((m-g)*b)/h}):(s=u=>{const f=Math.exp(-u*e),d=(u-r)*e+1;return-tg+f*d},i=u=>{const f=Math.exp(-u*e),d=(r-u)*(e*e);return f*d});const l=5/e,c=R6(s,i,l);if(e=$i(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const L6=12;function R6(e,t,r){let n=r;for(let s=1;s<L6;s++)n=n-e(n)/t(n);return n}function Rx(e,t){return e*Math.sqrt(1-t*t)}const B6=["duration","bounce"],F6=["stiffness","damping","mass"];function Rw(e,t){return t.some(r=>e[r]!==void 0)}function z6(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Rw(e,F6)&&Rw(e,B6)){const r=I6(e);t={...t,...r,mass:1},t.isResolvedFromDuration=!0}return t}function qE({keyframes:e,restDelta:t,restSpeed:r,...n}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:d,isResolvedFromDuration:m}=z6({...n,velocity:-Ga(n.velocity||0)}),g=d||0,b=c/(2*Math.sqrt(l*u)),h=i-s,j=Ga(Math.sqrt(l/u)),p=Math.abs(h)<5;r||(r=p?.01:2),t||(t=p?.005:.5);let y;if(b<1){const x=Rx(j,b);y=S=>{const w=Math.exp(-b*j*S);return i-w*((g+b*j*h)/x*Math.sin(x*S)+h*Math.cos(x*S))}}else if(b===1)y=x=>i-Math.exp(-j*x)*(h+(g+j*h)*x);else{const x=j*Math.sqrt(b*b-1);y=S=>{const w=Math.exp(-b*j*S),v=Math.min(x*S,300);return i-w*((g+b*j*h)*Math.sinh(v)+x*h*Math.cosh(v))/x}}return{calculatedDuration:m&&f||null,next:x=>{const S=y(x);if(m)o.done=x>=f;else{let w=g;x!==0&&(b<1?w=HE(y,x,S):w=0);const v=Math.abs(w)<=r,_=Math.abs(i-S)<=t;o.done=v&&_}return o.value=o.done?i:S,o}}}function Bw({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:f}){const d=e[0],m={done:!1,value:d},g=P=>l!==void 0&&P<l||c!==void 0&&P>c,b=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let h=r*t;const j=d+h,p=o===void 0?j:o(j);p!==j&&(h=p-d);const y=P=>-h*Math.exp(-P/n),x=P=>p+y(P),S=P=>{const C=y(P),$=x(P);m.done=Math.abs(C)<=u,m.value=m.done?p:$};let w,v;const _=P=>{g(m.value)&&(w=P,v=qE({keyframes:[m.value,b(m.value)],velocity:HE(x,P,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:f}))};return _(0),{calculatedDuration:null,next:P=>{let C=!1;return!v&&w===void 0&&(C=!0,S(P),_(P)),w!==void 0&&P>w?v.next(P-w):(!C&&S(P),m)}}}const V6=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Ot.update(t,!0),stop:()=>rs(t),now:()=>Mr.isProcessing?Mr.timestamp:performance.now()}},Fw=2e4;function zw(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Fw;)t+=r,n=e.next(t);return t>=Fw?1/0:t}const U6={decay:Bw,inertia:Bw,tween:qf,keyframes:qf,spring:qE};function Gf({autoplay:e=!0,delay:t=0,driver:r=V6,keyframes:n,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:f,onUpdate:d,...m}){let g=1,b=!1,h,j;const p=()=>{j=new Promise(X=>{h=X})};p();let y;const x=U6[s]||qf;let S;x!==qf&&typeof n[0]!="number"&&(S=UE([0,100],n,{clamp:!1}),n=[0,100]);const w=x({...m,keyframes:n});let v;l==="mirror"&&(v=x({...m,keyframes:[...n].reverse(),velocity:-(m.velocity||0)}));let _="idle",P=null,C=null,$=null;w.calculatedDuration===null&&i&&(w.calculatedDuration=zw(w));const{calculatedDuration:A}=w;let T=1/0,O=1/0;A!==null&&(T=A+o,O=T*(i+1)-o);let L=0;const M=X=>{if(C===null)return;g>0&&(C=Math.min(C,X)),g<0&&(C=Math.min(X-O/g,C)),P!==null?L=P:L=Math.round(X-C)*g;const re=L-t*(g>=0?1:-1),W=g>=0?re<0:re>O;L=Math.max(re,0),_==="finished"&&P===null&&(L=O);let de=L,Ae=w;if(i){const J=Math.min(L,O)/T;let D=Math.floor(J),Y=J%1;!Y&&J>=1&&(Y=1),Y===1&&D--,D=Math.min(D,i+1),!!(D%2)&&(l==="reverse"?(Y=1-Y,o&&(Y-=o/T)):l==="mirror"&&(Ae=v)),de=Ks(0,1,Y)*T}const Be=W?{done:!1,value:n[0]}:Ae.next(de);S&&(Be.value=S(Be.value));let{done:K}=Be;!W&&A!==null&&(K=g>=0?L>=O:L<=0);const U=P===null&&(_==="finished"||_==="running"&&K);return d&&d(Be.value),U&&B(),Be},F=()=>{y&&y.stop(),y=void 0},R=()=>{_="idle",F(),h(),p(),C=$=null},B=()=>{_="finished",f&&f(),F(),h()},z=()=>{if(b)return;y||(y=r(M));const X=y.now();c&&c(),P!==null?C=X-P:(!C||_==="finished")&&(C=X),_==="finished"&&p(),$=C,P=null,_="running",y.start()};e&&z();const I={then(X,re){return j.then(X,re)},get time(){return Ga(L)},set time(X){X=$i(X),L=X,P!==null||!y||g===0?P=X:C=y.now()-X/g},get duration(){const X=w.calculatedDuration===null?zw(w):w.calculatedDuration;return Ga(X)},get speed(){return g},set speed(X){X===g||!y||(g=X,I.time=Ga(L))},get state(){return _},play:z,pause:()=>{_="paused",P=L},stop:()=>{b=!0,_!=="idle"&&(_="idle",u&&u(),R())},cancel:()=>{$!==null&&M($),R()},complete:()=>{_="finished"},sample:X=>(C=0,M(X))};return I}function W6(e){let t;return()=>(t===void 0&&(t=e()),t)}const H6=W6(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),q6=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Dd=10,G6=2e4,K6=(e,t)=>t.type==="spring"||e==="backgroundColor"||!NE(t.ease);function Y6(e,t,{onUpdate:r,onComplete:n,...s}){if(!(H6()&&q6.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const f=()=>{c=new Promise(x=>{l=x})};f();let{keyframes:d,duration:m=300,ease:g,times:b}=s;if(K6(t,s)){const x=Gf({...s,repeat:0,delay:0});let S={done:!1,value:d[0]};const w=[];let v=0;for(;!S.done&&v<G6;)S=x.sample(v),w.push(S.value),v+=Dd;b=void 0,d=w,m=v-Dd,g="linear"}const h=a6(e.owner.current,t,d,{...s,duration:m,ease:g,times:b}),j=()=>{u=!1,h.cancel()},p=()=>{u=!0,Ot.update(j),l(),f()};return h.onfinish=()=>{u||(e.set(s6(d,s)),n&&n(),p())},{then(x,S){return c.then(x,S)},attachTimeline(x){return h.timeline=x,h.onfinish=null,ar},get time(){return Ga(h.currentTime||0)},set time(x){h.currentTime=$i(x)},get speed(){return h.playbackRate},set speed(x){h.playbackRate=x},get duration(){return Ga(m)},play:()=>{o||(h.play(),rs(j))},pause:()=>h.pause(),stop:()=>{if(o=!0,h.playState==="idle")return;const{currentTime:x}=h;if(x){const S=Gf({...s,autoplay:!1});e.setWithVelocity(S.sample(x-Dd).value,S.sample(x).value,Dd)}p()},complete:()=>{u||h.finish()},cancel:p}}function X6({keyframes:e,delay:t,onUpdate:r,onComplete:n}){const s=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:ar,pause:ar,stop:ar,then:i=>(i(),Promise.resolve()),cancel:ar,complete:ar});return t?Gf({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const J6={type:"spring",stiffness:500,damping:25,restSpeed:10},Z6=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Q6={type:"keyframes",duration:.8},e3={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t3=(e,{keyframes:t})=>t.length>2?Q6:Zi.has(e)?e.startsWith("scale")?Z6(t[1]):J6:e3,Bx=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ys.test(t)||t==="0")&&!t.startsWith("url(")),r3=new Set(["brightness","contrast","saturate","opacity"]);function n3(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(bh)||[];if(!n)return e;const s=r.replace(n,"");let i=r3.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const a3=/([a-z-]*)\(.*?\)/g,Fx={...Ys,getAnimatableNone:e=>{const t=e.match(a3);return t?t.map(n3).join(" "):e}},s3={...iE,color:Wr,backgroundColor:Wr,outlineColor:Wr,fill:Wr,stroke:Wr,borderColor:Wr,borderTopColor:Wr,borderRightColor:Wr,borderBottomColor:Wr,borderLeftColor:Wr,filter:Fx,WebkitFilter:Fx},Fv=e=>s3[e];function GE(e,t){let r=Fv(e);return r!==Fx&&(r=Ys),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const KE=e=>/^0[^.\s]+$/.test(e);function i3(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||KE(e)}function o3(e,t,r,n){const s=Bx(t,r);let i;Array.isArray(r)?i=[...r]:i=[null,r];const o=n.from!==void 0?n.from:e.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),i3(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const f=c[u];i[f]=GE(t,l)}return i}function l3({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}function zv(e,t){return e[t]||e.default||e}const c3={skipAnimations:!1},Vv=(e,t,r,n={})=>s=>{const i=zv(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-$i(o);const c=o3(t,e,r,i),u=c[0],f=c[c.length-1],d=Bx(e,u),m=Bx(e,f);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:b=>{t.set(b),i.onUpdate&&i.onUpdate(b)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(l3(i)||(g={...g,...t3(e,g)}),g.duration&&(g.duration=$i(g.duration)),g.repeatDelay&&(g.repeatDelay=$i(g.repeatDelay)),!d||!m||n6.current||i.type===!1||c3.skipAnimations)return X6(g);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const b=Y6(t,e,g);if(b)return b}return Gf(g)};function Kf(e){return!!(dn(e)&&e.add)}const YE=e=>/^\-?\d*\.?\d+$/.test(e);function Uv(e,t){e.indexOf(t)===-1&&e.push(t)}function Wv(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class Hv{constructor(){this.subscriptions=[]}add(t){return Uv(this.subscriptions,t),()=>Wv(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const u3=e=>!isNaN(parseFloat(e));class d3{constructor(t,r={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,s=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=Mr;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ot.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ot.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=u3(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Hv);const n=this.events[t].add(r);return t==="change"?()=>{n(),Ot.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,n){this.set(r),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?WE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rl(e,t){return new d3(e,t)}const XE=e=>t=>t.test(e),f3={test:e=>e==="auto",parse:e=>e},JE=[Qi,He,ba,ps,v$,y$,f3],tc=e=>JE.find(XE(e)),m3=[...JE,Wr,Ys],h3=e=>m3.find(XE(e));function p3(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,rl(r))}function g3(e,t){const r=wh(e,t);let{transitionEnd:n={},transition:s={},...i}=r?e.makeTargetAnimatable(r,!1):{};i={...i,...n};for(const o in i){const l=M$(i[o]);p3(e,o,l)}}function x3(e,t,r){var n,s;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=t[c];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(s=(n=r[c])!==null&&n!==void 0?n:e.readValue(c))!==null&&s!==void 0?s:t[c]),f!=null&&(typeof f=="string"&&(YE(f)||KE(f))?f=parseFloat(f):!h3(f)&&Ys.test(u)&&(f=GE(c,u)),e.addValue(c,rl(f,{owner:e})),r[c]===void 0&&(r[c]=f),f!==null&&e.setBaseTarget(c,f))}}function y3(e,t){return t?(t[e]||t.default||t).from:void 0}function v3(e,t,r){const n={};for(const s in e){const i=y3(s,t);if(i!==void 0)n[s]=i;else{const o=r.getValue(s);o&&(n[s]=o.get())}}return n}function b3({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function j3(e,t){const r=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==r)return!0}else return r!==t}function ZE(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");n&&(i=n);const u=[],f=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const m=e.getValue(d),g=l[d];if(!m||g===void 0||f&&b3(f,d))continue;const b={delay:r,elapsed:0,...zv(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[QP];if(p){const y=window.HandoffAppearAnimations(p,d,m,Ot);y!==null&&(b.elapsed=y,b.isHandoff=!0)}}let h=!b.isHandoff&&!j3(m,g);if(b.type==="spring"&&(m.getVelocity()||b.velocity)&&(h=!1),m.animation&&(h=!1),h)continue;m.start(Vv(d,m,g,e.shouldReduceMotion&&Zi.has(d)?{type:!1}:b));const j=m.animation;Kf(c)&&(c.add(d),j.then(()=>c.remove(d))),u.push(j)}return o&&Promise.all(u).then(()=>{o&&g3(e,o)}),u}function zx(e,t,r={}){const n=wh(e,t,r.custom);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(ZE(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:d}=s;return w3(e,t,u+c,f,d,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function w3(e,t,r=0,n=0,s=1,i){const o=[],l=(e.variantChildren.size-1)*n,c=s===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(e.variantChildren).sort(N3).forEach((u,f)=>{u.notify("AnimationStart",t),o.push(zx(u,t,{...i,delay:r+c(f)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function N3(e,t){return e.sortNodePosition(t)}function S3(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>zx(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=zx(e,t,r);else{const s=typeof t=="function"?wh(e,t,r.custom):t;n=Promise.all(ZE(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}const _3=[...Av].reverse(),A3=Av.length;function P3(e){return t=>Promise.all(t.map(({animation:r,options:n})=>S3(e,r,n)))}function E3(e){let t=P3(e);const r=O3();let n=!0;const s=(c,u)=>{const f=wh(e,u);if(f){const{transition:d,transitionEnd:m,...g}=f;c={...c,...g,...m}}return c};function i(c){t=c(e)}function o(c,u){const f=e.getProps(),d=e.getVariantContext(!0)||{},m=[],g=new Set;let b={},h=1/0;for(let p=0;p<A3;p++){const y=_3[p],x=r[y],S=f[y]!==void 0?f[y]:d[y],w=cu(S),v=y===u?x.isActive:null;v===!1&&(h=p);let _=S===d[y]&&S!==f[y]&&w;if(_&&n&&e.manuallyAnimateOnMount&&(_=!1),x.protectedKeys={...b},!x.isActive&&v===null||!S&&!x.prevProp||yh(S)||typeof S=="boolean")continue;let C=C3(x.prevProp,S)||y===u&&x.isActive&&!_&&w||p>h&&w,$=!1;const A=Array.isArray(S)?S:[S];let T=A.reduce(s,{});v===!1&&(T={});const{prevResolvedValues:O={}}=x,L={...O,...T},M=F=>{C=!0,g.has(F)&&($=!0,g.delete(F)),x.needsAnimating[F]=!0};for(const F in L){const R=T[F],B=O[F];if(b.hasOwnProperty(F))continue;let z=!1;Wf(R)&&Wf(B)?z=!jE(R,B):z=R!==B,z?R!==void 0?M(F):g.add(F):R!==void 0&&g.has(F)?M(F):x.protectedKeys[F]=!0}x.prevProp=S,x.prevResolvedValues=T,x.isActive&&(b={...b,...T}),n&&e.blockInitialAnimation&&(C=!1),C&&(!_||$)&&m.push(...A.map(F=>({animation:F,options:{type:y,...c}})))}if(g.size){const p={};g.forEach(y=>{const x=e.getBaseTarget(y);x!==void 0&&(p[y]=x)}),m.push({animation:p})}let j=!!m.length;return n&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(j=!1),n=!1,j?t(m):Promise.resolve()}function l(c,u,f){var d;if(r[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var b;return(b=g.animationState)===null||b===void 0?void 0:b.setActive(c,u)}),r[c].isActive=u;const m=o(f,c);for(const g in r)r[g].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r}}function C3(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jE(t,e):!1}function li(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function O3(){return{animate:li(!0),whileInView:li(),whileHover:li(),whileTap:li(),whileDrag:li(),whileFocus:li(),exit:li()}}class T3 extends ni{constructor(t){super(t),t.animationState||(t.animationState=E3(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),yh(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let k3=0;class M3 extends ni{constructor(){super(...arguments),this.id=k3++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});r&&!t&&i.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const D3={animation:{Feature:T3},exit:{Feature:M3}},Vw=(e,t)=>Math.abs(e-t);function $3(e,t){const r=Vw(e.x,t.x),n=Vw(e.y,t.y);return Math.sqrt(r**2+n**2)}class QE{constructor(t,r,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ng(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=$3(d.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:b}=d,{timestamp:h}=Mr;this.history.push({...b,timestamp:h});const{onStart:j,onMove:p}=this.handlers;m||(j&&j(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=rg(m,this.transformPagePoint),Ot.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:h}=this.handlers;if(this.dragSnapToOrigin&&h&&h(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=ng(d.type==="pointercancel"?this.lastMoveEventInfo:rg(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,j),b&&b(d,j)},!gE(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.contextWindow=s||window;const o=jh(t),l=rg(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Mr;this.history=[{...c,timestamp:u}];const{onSessionStart:f}=r;f&&f(t,ng(l,this.history)),this.removeListeners=Fs(qa(this.contextWindow,"pointermove",this.handlePointerMove),qa(this.contextWindow,"pointerup",this.handlePointerUp),qa(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),rs(this.updatePoint)}}function rg(e,t){return t?{point:t(e.point)}:e}function Uw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ng({point:e},t){return{point:e,delta:Uw(e,eC(t)),offset:Uw(e,I3(t)),velocity:L3(t,.1)}}function I3(e){return e[0]}function eC(e){return e[e.length-1]}function L3(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=eC(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>$i(t)));)r--;if(!n)return{x:0,y:0};const i=Ga(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Sn(e){return e.max-e.min}function Vx(e,t=0,r=.01){return Math.abs(e-t)<=r}function Ww(e,t,r,n=.5){e.origin=n,e.originPoint=Kt(t.min,t.max,e.origin),e.scale=Sn(r)/Sn(t),(Vx(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Kt(r.min,r.max,e.origin)-e.originPoint,(Vx(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Mc(e,t,r,n){Ww(e.x,t.x,r.x,n?n.originX:void 0),Ww(e.y,t.y,r.y,n?n.originY:void 0)}function Hw(e,t,r){e.min=r.min+t.min,e.max=e.min+Sn(t)}function R3(e,t,r){Hw(e.x,t.x,r.x),Hw(e.y,t.y,r.y)}function qw(e,t,r){e.min=t.min-r.min,e.max=e.min+Sn(t)}function Dc(e,t,r){qw(e.x,t.x,r.x),qw(e.y,t.y,r.y)}function B3(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Kt(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Kt(r,e,n.max):Math.min(e,r)),e}function Gw(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function F3(e,{top:t,left:r,bottom:n,right:s}){return{x:Gw(e.x,r,s),y:Gw(e.y,t,n)}}function Kw(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function z3(e,t){return{x:Kw(e.x,t.x),y:Kw(e.y,t.y)}}function V3(e,t){let r=.5;const n=Sn(e),s=Sn(t);return s>n?r=du(t.min,t.max-n,e.min):n>s&&(r=du(e.min,e.max-s,t.min)),Ks(0,1,r)}function U3(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Ux=.35;function W3(e=Ux){return e===!1?e=0:e===!0&&(e=Ux),{x:Yw(e,"left","right"),y:Yw(e,"top","bottom")}}function Yw(e,t,r){return{min:Xw(e,t),max:Xw(e,r)}}function Xw(e,t){return typeof e=="number"?e:e[t]||0}const Jw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ao=()=>({x:Jw(),y:Jw()}),Zw=()=>({min:0,max:0}),ir=()=>({x:Zw(),y:Zw()});function Tn(e){return[e("x"),e("y")]}function tC({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function H3({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function q3(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function ag(e){return e===void 0||e===1}function Wx({scale:e,scaleX:t,scaleY:r}){return!ag(e)||!ag(t)||!ag(r)}function hi(e){return Wx(e)||rC(e)||e.z||e.rotate||e.rotateX||e.rotateY}function rC(e){return Qw(e.x)||Qw(e.y)}function Qw(e){return e&&e!=="0%"}function Yf(e,t,r){const n=e-r,s=t*n;return r+s}function e1(e,t,r,n,s){return s!==void 0&&(e=Yf(e,s,n)),Yf(e,r,n)+t}function Hx(e,t=0,r=1,n,s){e.min=e1(e.min,t,r,n,s),e.max=e1(e.max,t,r,n,s)}function nC(e,{x:t,y:r}){Hx(e.x,t.translate,t.scale,t.originPoint),Hx(e.y,r.translate,r.scale,r.originPoint)}function G3(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Po(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,nC(e,o)),n&&hi(i.latestValues)&&Po(e,i.latestValues))}t.x=t1(t.x),t.y=t1(t.y)}function t1(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ys(e,t){e.min=e.min+t,e.max=e.max+t}function r1(e,t,[r,n,s]){const i=t[s]!==void 0?t[s]:.5,o=Kt(e.min,e.max,i);Hx(e,t[r],t[n],o,t.scale)}const K3=["x","scaleX","originX"],Y3=["y","scaleY","originY"];function Po(e,t){r1(e.x,t,K3),r1(e.y,t,Y3)}function aC(e,t){return tC(q3(e.getBoundingClientRect(),t))}function X3(e,t,r){const n=aC(e,r),{scroll:s}=t;return s&&(ys(n.x,s.offset.x),ys(n.y,s.offset.y)),n}const sC=({current:e})=>e?e.ownerDocument.defaultView:null,J3=new WeakMap;class Z3{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ir(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(jh(f,"page").point)},i=(f,d)=>{const{drag:m,dragPropagation:g,onDragStart:b}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=yE(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Tn(j=>{let p=this.getAxisMotionValue(j).get()||0;if(ba.test(p)){const{projection:y}=this.visualElement;if(y&&y.layout){const x=y.layout.layoutBox[j];x&&(p=Sn(x)*(parseFloat(p)/100))}}this.originPoint[j]=p}),b&&Ot.update(()=>b(f,d),!1,!0);const{animationState:h}=this.visualElement;h&&h.setActive("whileDrag",!0)},o=(f,d)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:b,onDrag:h}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:j}=d;if(g&&this.currentDirection===null){this.currentDirection=Q3(j),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",d.point,j),this.updateAxis("y",d.point,j),this.visualElement.render(),h&&h(f,d)},l=(f,d)=>this.stop(f,d),c=()=>Tn(f=>{var d;return this.getAnimationState(f)==="paused"&&((d=this.getAxisMotionValue(f).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new QE(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:sC(this.visualElement)})}stop(t,r){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=r;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ot.update(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!$d(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=B3(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&So(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&s?this.constraints=F3(s.layoutBox,r):this.constraints=!1,this.elastic=W3(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Tn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=U3(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!So(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=X3(n,s.root,this.visualElement.getTransformPagePoint());let o=z3(s.layout.layoutBox,i);if(r){const l=r(H3(o));this.hasMutatedConstraints=!!l,l&&(o=tC(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Tn(f=>{if(!$d(f,r,this.currentDirection))return;let d=c&&c[f]||{};o&&(d={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,b={type:"inertia",velocity:n?t[f]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(f,b)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return n.start(Vv(t,n,0,r))}stopAnimation(){Tn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Tn(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Tn(r=>{const{drag:n}=this.getProps();if(!$d(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r];i.set(t[r]-Kt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!So(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Tn(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();s[o]=V3({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Tn(o=>{if(!$d(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Kt(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;J3.set(this.visualElement,this);const t=this.visualElement.current,r=qa(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();So(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),n();const o=za(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Tn(f=>{const d=this.getAxisMotionValue(f);d&&(this.originPoint[f]+=c[f].translate,d.set(d.get()+c[f].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ux,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function $d(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Q3(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class eI extends ni{constructor(t){super(t),this.removeGroupControls=ar,this.removeListeners=ar,this.controls=new Z3(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ar}unmount(){this.removeGroupControls(),this.removeListeners()}}const n1=e=>(t,r)=>{e&&Ot.update(()=>e(t,r))};class tI extends ni{constructor(){super(...arguments),this.removePointerDownListener=ar}onPointerDown(t){this.session=new QE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sC(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:n1(t),onStart:n1(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&Ot.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=qa(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function rI(){const e=N.useContext(gh);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:n}=e,s=N.useId();return N.useEffect(()=>n(s),[]),!t&&r?[!1,()=>r&&r(s)]:[!0]}const ff={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function a1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(He.test(e))e=parseFloat(e);else return e;const r=a1(e,t.target.x),n=a1(e,t.target.y);return`${r}% ${n}%`}},nI={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Ys.parse(e);if(s.length>5)return n;const i=Ys.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=Kt(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class aI extends V.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;d$(sI),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ff.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ot.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function iC(e){const[t,r]=rI(),n=N.useContext(Ev);return V.createElement(aI,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(tE),isPresent:t,safeToRemove:r})}const sI={borderRadius:{...rc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rc,borderTopRightRadius:rc,borderBottomLeftRadius:rc,borderBottomRightRadius:rc,boxShadow:nI},oC=["TopLeft","TopRight","BottomLeft","BottomRight"],iI=oC.length,s1=e=>typeof e=="string"?parseFloat(e):e,i1=e=>typeof e=="number"||He.test(e);function oI(e,t,r,n,s,i){s?(e.opacity=Kt(0,r.opacity!==void 0?r.opacity:1,lI(n)),e.opacityExit=Kt(t.opacity!==void 0?t.opacity:1,0,cI(n))):i&&(e.opacity=Kt(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,n));for(let o=0;o<iI;o++){const l=`border${oC[o]}Radius`;let c=o1(t,l),u=o1(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||i1(c)===i1(u)?(e[l]=Math.max(Kt(s1(c),s1(u),n),0),(ba.test(u)||ba.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Kt(t.rotate||0,r.rotate||0,n))}function o1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lI=lC(0,.5,OE),cI=lC(.5,.95,ar);function lC(e,t,r){return n=>n<e?0:n>t?1:r(du(e,t,n))}function l1(e,t){e.min=t.min,e.max=t.max}function Pn(e,t){l1(e.x,t.x),l1(e.y,t.y)}function c1(e,t,r,n,s){return e-=t,e=Yf(e,1/r,n),s!==void 0&&(e=Yf(e,1/s,n)),e}function uI(e,t=0,r=1,n=.5,s,i=e,o=e){if(ba.test(t)&&(t=parseFloat(t),t=Kt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Kt(i.min,i.max,n);e===i&&(l-=t),e.min=c1(e.min,t,r,l,s),e.max=c1(e.max,t,r,l,s)}function u1(e,t,[r,n,s],i,o){uI(e,t[r],t[n],t[s],t.scale,i,o)}const dI=["x","scaleX","originX"],fI=["y","scaleY","originY"];function d1(e,t,r,n){u1(e.x,t,dI,r?r.x:void 0,n?n.x:void 0),u1(e.y,t,fI,r?r.y:void 0,n?n.y:void 0)}function f1(e){return e.translate===0&&e.scale===1}function cC(e){return f1(e.x)&&f1(e.y)}function mI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function uC(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function m1(e){return Sn(e.x)/Sn(e.y)}class hI{constructor(){this.members=[]}add(t){Uv(this.members,t),t.scheduleRender()}remove(t){if(Wv(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function h1(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(n=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:c,rotateX:u,rotateY:f}=r;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),f&&(n+=`rotateY(${f}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const pI=(e,t)=>e.depth-t.depth;class gI{constructor(){this.children=[],this.isDirty=!1}add(t){Uv(this.children,t),this.isDirty=!0}remove(t){Wv(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(pI),this.isDirty=!1,this.children.forEach(t)}}function xI(e,t){const r=performance.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(rs(n),e(i-t))};return Ot.read(n,!0),()=>rs(n)}function yI(e){window.MotionDebug&&window.MotionDebug.record(e)}function vI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function bI(e,t,r){const n=dn(e)?e:rl(e);return n.start(Vv("",n,t,r)),n.animation}const p1=["","X","Y","Z"],jI={visibility:"hidden"},g1=1e3;let wI=0;const pi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function dC({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t==null?void 0:t()){this.id=wI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pi.totalNodes=pi.resolvedTargetDeltas=pi.recalculatedProjection=0,this.nodes.forEach(_I),this.nodes.forEach(OI),this.nodes.forEach(TI),this.nodes.forEach(AI),yI(pi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gI)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Hv),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vI(o),this.instance=o;const{layoutId:c,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=xI(m,250),ff.hasAnimatedSinceResize&&(ff.hasAnimatedSinceResize=!1,this.nodes.forEach(y1))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const h=this.options.transition||f.getDefaultTransition()||II,{onLayoutAnimationStart:j,onLayoutAnimationComplete:p}=f.getProps(),y=!this.targetLayout||!uC(this.targetLayout,b)||g,x=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const S={...zv(h,"layout"),onPlay:j,onComplete:p};(f.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else m||y1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,rs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kI),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const d=this.path[f];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(x1);return}this.isUpdating||this.nodes.forEach(EI),this.isUpdating=!1,this.nodes.forEach(CI),this.nodes.forEach(NI),this.nodes.forEach(SI),this.clearAllSnapshots();const l=performance.now();Mr.delta=Ks(0,1e3/60,l-Mr.timestamp),Mr.timestamp=l,Mr.isProcessing=!0,Kp.update.process(Mr),Kp.preRender.process(Mr),Kp.render.process(Mr),Mr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(PI),this.sharedNodes.forEach(MI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!cC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;o&&(l||hi(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),LI(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ir();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ys(l.x,c.offset.x),ys(l.y,c.offset.y)),l}removeElementScroll(o){const l=ir();Pn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:d}=u;if(u!==this.root&&f&&d.layoutScroll){if(f.isRoot){Pn(l,o);const{scroll:m}=this.root;m&&(ys(l.x,-m.offset.x),ys(l.y,-m.offset.y))}ys(l.x,f.offset.x),ys(l.y,f.offset.y)}}return l}applyTransform(o,l=!1){const c=ir();Pn(c,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Po(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),hi(f.latestValues)&&Po(c,f.latestValues)}return hi(this.latestValues)&&Po(c,this.latestValues),c}removeTransform(o){const l=ir();Pn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!hi(u.latestValues))continue;Wx(u.latestValues)&&u.updateSnapshot();const f=ir(),d=u.measurePageBox();Pn(f,d),d1(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return hi(this.latestValues)&&d1(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Mr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Mr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),Dc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ir(),this.targetWithTransforms=ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),R3(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pn(this.target,this.layout.layoutBox),nC(this.target,this.targetDelta)):Pn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ir(),this.relativeTargetOrigin=ir(),Dc(this.relativeTargetOrigin,this.target,g.target),Pn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Wx(this.parent.latestValues)||rC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Mr.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Pn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;G3(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:b}=l;if(!b){this.projectionTransform&&(this.projectionDelta=Ao(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ao(),this.projectionDeltaWithTransform=Ao());const h=this.projectionTransform;Mc(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=h1(this.projectionDelta,this.treeScale),(this.projectionTransform!==h||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),pi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},d=Ao();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ir(),g=c?c.source:void 0,b=this.layout?this.layout.source:void 0,h=g!==b,j=this.getStack(),p=!j||j.members.length<=1,y=!!(h&&!p&&this.options.crossfade===!0&&!this.path.some($I));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const w=S/1e3;v1(d.x,o.x,w),v1(d.y,o.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Dc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DI(this.relativeTarget,this.relativeTargetOrigin,m,w),x&&mI(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ir()),Pn(x,this.relativeTarget)),h&&(this.animationValues=f,oI(f,u,this.latestValues,w,y,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(rs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ot.update(()=>{ff.hasAnimatedSinceResize=!0,this.currentAnimation=bI(0,g1,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(g1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&fC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ir();const d=Sn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=Sn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Pn(l,c),Po(l,f),Mc(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hI),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let f=0;f<p1.length;f++){const d="rotate"+p1[f];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const f in u)o.setStaticValue(f,u[f]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return jI;const u={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=df(o==null?void 0:o.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const h={};return this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=df(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!hi(this.latestValues)&&(h.transform=f?f({},""):"none",this.hasProjected=!1),h}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=h1(this.projectionDeltaWithTransform,this.treeScale,m),f&&(u.transform=f(m,u.transform));const{x:g,y:b}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const h in Vf){if(m[h]===void 0)continue;const{correct:j,applyTo:p}=Vf[h],y=u.transform==="none"?m[h]:j(m[h],d);if(p){const x=p.length;for(let S=0;S<x;S++)u[p[S]]=y}else u[h]=y}return this.options.layoutId&&(u.pointerEvents=d===this?df(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(x1),this.root.sharedNodes.clear()}}}function NI(e){e.updateLayout()}function SI(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?Tn(d=>{const m=o?r.measuredBox[d]:r.layoutBox[d],g=Sn(m);m.min=n[d].min,m.max=m.min+g}):fC(i,r.layoutBox,n)&&Tn(d=>{const m=o?r.measuredBox[d]:r.layoutBox[d],g=Sn(n[d]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const l=Ao();Mc(l,n,r.layoutBox);const c=Ao();o?Mc(c,e.applyTransform(s,!0),r.measuredBox):Mc(c,n,r.layoutBox);const u=!cC(l);let f=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:g}=d;if(m&&g){const b=ir();Dc(b,r.layoutBox,m.layoutBox);const h=ir();Dc(h,n,g.layoutBox),uC(b,h)||(f=!0),d.options.layoutRoot&&(e.relativeTarget=h,e.relativeTargetOrigin=b,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function _I(e){pi.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function AI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function PI(e){e.clearSnapshot()}function x1(e){e.clearMeasurements()}function EI(e){e.isLayoutDirty=!1}function CI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function y1(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function OI(e){e.resolveTargetDelta()}function TI(e){e.calcProjection()}function kI(e){e.resetRotation()}function MI(e){e.removeLeadSnapshot()}function v1(e,t,r){e.translate=Kt(t.translate,0,r),e.scale=Kt(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function b1(e,t,r,n){e.min=Kt(t.min,r.min,n),e.max=Kt(t.max,r.max,n)}function DI(e,t,r,n){b1(e.x,t.x,r.x,n),b1(e.y,t.y,r.y,n)}function $I(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const II={duration:.45,ease:[.4,0,.1,1]},j1=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),w1=j1("applewebkit/")&&!j1("chrome/")?Math.round:ar;function N1(e){e.min=w1(e.min),e.max=w1(e.max)}function LI(e){N1(e.x),N1(e.y)}function fC(e,t,r){return e==="position"||e==="preserve-aspect"&&!Vx(m1(t),m1(r),.2)}const RI=dC({attachResizeListener:(e,t)=>za(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sg={current:void 0},mC=dC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!sg.current){const e=new RI({});e.mount(window),e.setOptions({layoutScroll:!0}),sg.current=e}return sg.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),BI={pan:{Feature:tI},drag:{Feature:eI,ProjectionNode:mC,MeasureLayout:iC}},FI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function zI(e){const t=FI.exec(e);if(!t)return[,];const[,r,n]=t;return[r,n]}function qx(e,t,r=1){const[n,s]=zI(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return YE(o)?parseFloat(o):o}else return $x(s)?qx(s,t,r+1):s}function VI(e,{...t},r){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(s=>{const i=s.get();if(!$x(i))return;const o=qx(i,n);o&&s.set(o)});for(const s in t){const i=t[s];if(!$x(i))continue;const o=qx(i,n);o&&(t[s]=o,r||(r={}),r[s]===void 0&&(r[s]=i))}return{target:t,transitionEnd:r}}const UI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),hC=e=>UI.has(e),WI=e=>Object.keys(e).some(hC),S1=e=>e===Qi||e===He,_1=(e,t)=>parseFloat(e.split(", ")[t]),A1=(e,t)=>(r,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/);if(s)return _1(s[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?_1(i[1],e):0}},HI=new Set(["x","y","z"]),qI=ed.filter(e=>!HI.has(e));function GI(e){const t=[];return qI.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const nl={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:A1(4,13),y:A1(5,14)};nl.translateX=nl.x;nl.translateY=nl.y;const KI=(e,t,r)=>{const n=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(u=>{l[u]=nl[u](n,i)}),t.render();const c=t.measureViewportBox();return r.forEach(u=>{const f=t.getValue(u);f&&f.jump(l[u]),e[u]=nl[u](c,i)}),e},YI=(e,t,r={},n={})=>{t={...t},n={...n};const s=Object.keys(t).filter(hC);let i=[],o=!1;const l=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let f=r[c],d=tc(f);const m=t[c];let g;if(Wf(m)){const b=m.length,h=m[0]===null?1:0;f=m[h],d=tc(f);for(let j=h;j<b&&m[j]!==null;j++)g?Iv(tc(m[j])===g):g=tc(m[j])}else g=tc(m);if(d!==g)if(S1(d)&&S1(g)){const b=u.get();typeof b=="string"&&u.set(parseFloat(b)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&g===He&&(t[c]=m.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(f===0||m===0)?f===0?u.set(g.transform(f)):t[c]=d.transform(m):(o||(i=GI(e),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:t[c],u.jump(m))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=KI(t,e,l);return i.length&&i.forEach(([f,d])=>{e.getValue(f).set(d)}),e.render(),xh&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:t,transitionEnd:n}};function XI(e,t,r,n){return WI(t)?YI(e,t,r,n):{target:t,transitionEnd:n}}const JI=(e,t,r,n)=>{const s=VI(e,t,n);return t=s.target,n=s.transitionEnd,XI(e,t,r,n)},Gx={current:null},pC={current:!1};function ZI(){if(pC.current=!0,!!xh)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Gx.current=e.matches;e.addListener(t),t()}else Gx.current=!1}function QI(e,t,r){const{willChange:n}=t;for(const s in t){const i=t[s],o=r[s];if(dn(i))e.addValue(s,i),Kf(n)&&n.add(s);else if(dn(o))e.addValue(s,rl(i,{owner:e})),Kf(n)&&n.remove(s);else if(o!==i)if(e.hasValue(s)){const l=e.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(s);e.addValue(s,rl(l!==void 0?l:i,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const P1=new WeakMap,gC=Object.keys(uu),eL=gC.length,E1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tL=Pv.length;class rL{constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ot.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=vh(r),this.isVariantNode=eE(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{});for(const d in f){const m=f[d];l[d]!==void 0&&dn(m)&&(m.set(l[d],!1),Kf(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,P1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),pC.current||ZI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Gx.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){P1.delete(this.current),this.projection&&this.projection.unmount(),rs(this.notifyUpdate),rs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const n=Zi.has(t),s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ot.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},n,s,i){let o,l;for(let c=0;c<eL;c++){const u=gC[c],{isEnabled:f,Feature:d,ProjectionNode:m,MeasureLayout:g}=uu[u];m&&(o=m),f(r)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(l=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:f,dragConstraints:d,layoutScroll:m,layoutRoot:g}=r;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!f||d&&So(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return l}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<E1.length;n++){const s=E1[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=QI(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const r={};for(let n=0;n<tL;n++){const s=Pv[n],i=this.props[s];(cu(i)||i===!1)&&(r[s]=i)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=rl(r,{owner:this}),this.addValue(t,n)),n}readValue(t){var r;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:n}=this.props,s=typeof n=="string"||typeof n=="object"?(r=$v(this.props,n))===null||r===void 0?void 0:r[t]:void 0;if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!dn(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Hv),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class xC extends rL{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...n},{transformValues:s},i){let o=v3(n,t||{},this);if(s&&(r&&(r=s(r)),n&&(n=s(n)),o&&(o=s(o))),i){x3(this,n,o);const l=JI(this,n,o,r);r=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:r,...n}}}function nL(e){return window.getComputedStyle(e)}class aL extends xC{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,r){if(Zi.has(r)){const n=Fv(r);return n&&n.default||0}else{const n=nL(t),s=(aE(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return aC(t,r)}build(t,r,n,s){Ov(t,r,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,r){return Dv(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;dn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,n,s){uE(t,r,n,s)}}class sL extends xC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Zi.has(r)){const n=Fv(r);return n&&n.default||0}return r=dE.has(r)?r:_v(r),t.getAttribute(r)}measureInstanceViewportBox(){return ir()}scrapeMotionValuesFromProps(t,r){return mE(t,r)}build(t,r,n,s){kv(t,r,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,n,s){fE(t,r,n,s)}mount(t){this.isSVGTag=Mv(t.tagName),super.mount(t)}}const iL=(e,t)=>Cv(e)?new sL(t,{enableHardwareAcceleration:!1}):new aL(t,{enableHardwareAcceleration:!0}),oL={layout:{ProjectionNode:mC,MeasureLayout:iC}},lL={...D3,...e6,...BI,...oL},ee=c$((e,t)=>z$(e,t,lL,iL));function yC(){const e=N.useRef(!1);return Sv(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function cL(){const e=yC(),[t,r]=N.useState(0),n=N.useCallback(()=>{e.current&&r(t+1)},[t]);return[N.useCallback(()=>Ot.postRender(n),[n]),t]}class uL extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function dL({children:e,isPresent:t}){const r=N.useId(),n=N.useRef(null),s=N.useRef({width:0,height:0,top:0,left:0});return N.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=s.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=r;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),N.createElement(uL,{isPresent:t,childRef:n,sizeRef:s},N.cloneElement(e,{ref:n}))}const ig=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=hE(fL),c=N.useId(),u=N.useMemo(()=>({id:c,initial:t,isPresent:r,custom:s,onExitComplete:f=>{l.set(f,!0);for(const d of l.values())if(!d)return;n&&n()},register:f=>(l.set(f,!1),()=>l.delete(f))}),i?void 0:[r]);return N.useMemo(()=>{l.forEach((f,d)=>l.set(d,!1))},[r]),N.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(e=N.createElement(dL,{isPresent:r},e)),N.createElement(gh.Provider,{value:u},e)};function fL(){return new Map}function mL(e){return N.useEffect(()=>()=>e(),[])}const gi=e=>e.key||"";function hL(e,t){e.forEach(r=>{const n=gi(r);t.set(n,r)})}function pL(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const Br=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=N.useContext(Ev).forceRender||cL()[0],c=yC(),u=pL(e);let f=u;const d=N.useRef(new Map).current,m=N.useRef(f),g=N.useRef(new Map).current,b=N.useRef(!0);if(Sv(()=>{b.current=!1,hL(u,g),m.current=f}),mL(()=>{b.current=!0,g.clear(),d.clear()}),b.current)return N.createElement(N.Fragment,null,f.map(y=>N.createElement(ig,{key:gi(y),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:i,mode:o},y)));f=[...f];const h=m.current.map(gi),j=u.map(gi),p=h.length;for(let y=0;y<p;y++){const x=h[y];j.indexOf(x)===-1&&!d.has(x)&&d.set(x,void 0)}return o==="wait"&&d.size&&(f=[]),d.forEach((y,x)=>{if(j.indexOf(x)!==-1)return;const S=g.get(x);if(!S)return;const w=h.indexOf(x);let v=y;if(!v){const _=()=>{d.delete(x);const P=Array.from(g.keys()).filter(C=>!j.includes(C));if(P.forEach(C=>g.delete(C)),m.current=u.filter(C=>{const $=gi(C);return $===x||P.includes($)}),!d.size){if(c.current===!1)return;l(),n&&n()}};v=N.createElement(ig,{key:gi(S),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:i,mode:o},S),d.set(x,v)}f.splice(w,0,v)}),f=f.map(y=>{const x=y.key;return d.has(x)?y:N.createElement(ig,{key:gi(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),N.createElement(N.Fragment,null,d.size?f:f.map(y=>N.cloneElement(y)))},te=V.forwardRef(({className:e="",variant:t="default",size:r="default",disabled:n=!1,type:s="button",children:i,...o},l)=>{const c="inline-flex items-center justify-center rounded-xl font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",u={default:"bg-amber-500 text-white hover:bg-amber-600 focus:ring-amber-500 shadow-lg hover:shadow-xl",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",destructive:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-lg hover:shadow-xl",outline:"border-2 border-amber-500 text-amber-600 hover:bg-amber-50 focus:ring-amber-500",ghost:"hover:bg-gray-100 text-gray-700 focus:ring-gray-500",link:"text-amber-600 underline-offset-4 hover:underline focus:ring-amber-500"},f={default:"h-11 px-6 py-2",sm:"h-9 px-4 text-sm",lg:"h-12 px-8 text-lg",icon:"h-10 w-10"};return a.jsx(ee.button,{ref:l,type:s,whileHover:n?{}:{scale:1.02},whileTap:n?{}:{scale:.98},className:`${c} ${u[t]} ${f[r]} ${e}`,disabled:n,...o,children:i})});te.displayName="Button";const le=V.forwardRef(({className:e="",type:t="text",error:r=!1,...n},s)=>{const i="flex w-full rounded-xl border bg-white px-4 py-2 text-sm transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-0 disabled:cursor-not-allowed disabled:opacity-50",o=r?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-200 focus:ring-amber-500 focus:border-amber-500";return a.jsx("input",{type:t,className:`${i} ${o} ${e}`,ref:s,...n})});le.displayName="Input";const ne=V.forwardRef(({className:e="",required:t=!1,children:r,...n},s)=>a.jsxs("label",{ref:s,className:`text-sm font-medium text-gray-700 leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${e}`,...n,children:[r,t&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}));ne.displayName="Label";const ja=V.forwardRef(({className:e="",...t},r)=>a.jsx("textarea",{ref:r,className:`w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent ${e}`,...t}));ja.displayName="Textarea";function gL(){const[e,t]=N.useState({nom:"",email:"",message:""}),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(null),c=async u=>{u.preventDefault(),n(!0),i(!1),l(null);try{const f=await WD.sendMessage(e);f.success?(i(!0),t({nom:"",email:"",message:""}),setTimeout(()=>i(!1),5e3)):l(f.message||"Erreur lors de l'envoi du message")}catch(f){console.error("Erreur:",f),l("Erreur de connexion. Veuillez ressayer.")}finally{n(!1)}};return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl text-green-700",children:"Message envoy avec succs ! Nous vous rpondrons dans les plus brefs dlais."}),o&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-700",children:o}),a.jsxs("form",{onSubmit:c,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"nom",className:"text-gray-700 font-medium mb-2 block",children:"Votre nom"}),a.jsx(le,{id:"nom",value:e.nom,onChange:u=>t({...e,nom:u.target.value}),placeholder:"Votre nom",className:"h-12 rounded-xl border-gray-300",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"email",className:"text-gray-700 font-medium mb-2 block",children:"Votre email"}),a.jsx(le,{id:"email",type:"email",value:e.email,onChange:u=>t({...e,email:u.target.value}),placeholder:"Votre email",className:"h-12 rounded-xl border-gray-300",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"message",className:"text-gray-700 font-medium mb-2 block",children:"Votre message"}),a.jsx(ja,{id:"message",value:e.message,onChange:u=>t({...e,message:u.target.value}),placeholder:"Votre message",className:"min-h-[120px] rounded-xl border-gray-300",required:!0})]}),a.jsx(te,{type:"submit",disabled:r,className:"w-full h-12 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2",children:r?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Dx,{className:"w-5 h-5"}),"Envoyer le message"]})})]})]})}function C1(){const e=[{title:"Espace Tuteur",icon:zt,description:"Grez les inscriptions et suivez vos enfants",link:"TuteurLogin",gradient:"from-amber-400 to-yellow-500"},{title:"Espace Responsable Bus",icon:yc,description:"Supervisez le bus et grez les prsences",link:"ResponsableLogin",gradient:"from-amber-500 to-orange-500"},{title:"Espace Chauffeur",icon:tt,description:"Consultez vos trajets et informations",link:"ChauffeurLogin",gradient:"from-yellow-400 to-amber-500"},{title:"Espace Administrateur",icon:Di,description:"Grez l'ensemble du systme",link:"AdminLogin",gradient:"from-orange-400 to-amber-600"}];return a.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-100 via-white to-yellow-50",children:[a.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-amber-200 rounded-full opacity-20 blur-3xl transform translate-x-1/2 -translate-y-1/2"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-yellow-200 rounded-full opacity-20 blur-3xl transform -translate-x-1/2 translate-y-1/2"})]}),a.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-8",children:[a.jsxs(ee.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-3xl rotate-6 absolute inset-0 opacity-30"}),a.jsx("div",{className:"w-32 h-32 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-3xl flex items-center justify-center relative shadow-2xl",children:a.jsx(tt,{className:"w-16 h-16 text-white"})})]})}),a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-800 mb-4",children:["Mohammed ",a.jsx("span",{className:"text-amber-500",children:"5"})," School Bus"]}),a.jsx("p",{className:"text-xl md:text-2xl text-amber-600 font-medium italic",children:"Votre service est notre priorit"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-6",children:[a.jsx(hr,{className:"w-6 h-6 text-amber-500"}),a.jsx("span",{className:"text-gray-600",children:"Transport Scolaire Scuris"})]})]}),a.jsx(ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.2},className:"w-full mb-16 -mx-4 md:-mx-8 rounded-2xl overflow-hidden shadow-2xl",children:a.jsx("div",{className:"relative w-full",style:{height:"70vh",minHeight:"500px"},children:a.jsx("img",{src:"https://qtrypzzcjebvfcihiynt.supabase.co/storage/v1/object/public/base44-prod/public/694e9878090ae6571e82701e/c7a2d12a6_WhatsAppImage2026-01-05at112241PM.jpg",alt:"Mohammed V School Bus - Transport Scolaire",className:"w-full h-full object-cover"})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:e.map((t,r)=>a.jsx(ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3+r*.1},children:a.jsx(Ff,{to:ke(t.link),children:a.jsxs("div",{className:"group relative bg-white rounded-3xl p-8 shadow-lg hover:shadow-2xl transition-all duration-500 transform hover:-translate-y-2 overflow-hidden",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-500`}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:`w-16 h-16 bg-gradient-to-br ${t.gradient} rounded-2xl flex items-center justify-center mb-6 group-hover:bg-white/20 transition-colors shadow-lg`,children:a.jsx(t.icon,{className:"w-8 h-8 text-white group-hover:text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-800 group-hover:text-white mb-2 transition-colors",children:t.title}),a.jsx("p",{className:"text-gray-500 group-hover:text-white/90 text-sm transition-colors",children:t.description}),a.jsxs("div",{className:"mt-6 flex items-center text-amber-500 group-hover:text-white font-medium transition-colors",children:[a.jsx("span",{children:"Accder"}),a.jsx("svg",{className:"w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})},t.title))}),a.jsx(ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},className:"mt-20 mb-16",id:"contact",children:a.jsx("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 min-h-[500px]",children:[a.jsxs("div",{className:"bg-gradient-to-br from-amber-700 to-orange-700 p-8 md:p-12 flex flex-col justify-center text-white",children:[a.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Contactez-nous"}),a.jsx("p",{className:"text-amber-100 text-lg mb-8",children:"Notre quipe est disponible pour rpondre  toutes vos questions concernant le service de transport scolaire."}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(ou,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Tlphone"}),a.jsx("p",{className:"text-white font-semibold",children:"+212 714390289"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(ou,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Tlphone"}),a.jsx("p",{className:"text-white font-semibold",children:"+212 669-266176"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Ui,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Email"}),a.jsx("p",{className:"text-white font-semibold",children:"mohammed5@gmail.com"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Rt,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-amber-100 text-sm",children:"Adresse"}),a.jsx("p",{className:"text-white font-semibold",children:"Rabat, Maroc"})]})]})]})]}),a.jsxs("div",{className:"bg-white p-8 md:p-12 flex flex-col justify-center",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Envoyez-nous un message"}),a.jsx(gL,{})]})]})})}),a.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:1},className:"text-center mt-8 text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx(tt,{className:"w-5 h-5 text-amber-500"}),a.jsx("span",{className:"font-semibold",children:"Mohammed V School Bus"})]}),a.jsx("p",{children:" 2025 Mohammed V School Bus. Tous droits rservs."})]})]})]})}function Nh({title:e,icon:t,onLogin:r,onRegister:n,showRegister:s=!1,loginFields:i=[{name:"email",label:"Email ou Tlphone",type:"text",placeholder:"Entrez votre email ou tlphone"},{name:"password",label:"Mot de passe",type:"password",placeholder:"Entrez votre mot de passe"}],loading:o=!1,error:l=""}){const[c,u]=N.useState({}),[f,d]=N.useState(!1),m=at(),g=h=>{h.preventDefault(),r(c)},b=(h,j)=>{u(p=>({...p,[h]:j}))};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:a.jsx(ee.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full max-w-md",children:a.jsxs("div",{className:"relative bg-white rounded-3xl shadow-2xl p-8 border border-amber-100",children:[a.jsx("button",{type:"button",onClick:()=>m("/"),className:"absolute top-6 left-6 p-2 text-gray-400 hover:text-amber-600 hover:bg-amber-50 rounded-full transition-all duration-200",title:"Retour",children:a.jsx(rr,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(t,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:e}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Connectez-vous pour accder"})]}),l&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-center",children:l}),a.jsxs("form",{onSubmit:g,className:"space-y-5",children:[i.map(h=>a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:h.label}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(le,{type:h.type==="password"&&f?"text":h.type,placeholder:h.placeholder,value:c[h.name]||"",onChange:j=>b(h.name,j.target.value),className:"h-12 rounded-xl border-gray-200 focus:border-amber-400 focus:ring-amber-400",required:!0}),h.type==="password"&&a.jsx("button",{type:"button",onClick:()=>d(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?a.jsx(zf,{className:"w-5 h-5"}):a.jsx(_a,{className:"w-5 h-5"})})]})]},h.name)),a.jsx(te,{type:"submit",disabled:o,className:"w-full h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300",children:o?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(JD,{className:"w-5 h-5 mr-2"}),"Se connecter"]})})]}),s&&a.jsxs("div",{className:"mt-6 text-center",children:[a.jsx("p",{className:"text-gray-500",children:"Pas encore de compte ?"}),a.jsxs(te,{variant:"ghost",onClick:n,className:"mt-2 text-amber-600 hover:text-amber-700 hover:bg-amber-50",children:[a.jsx(hh,{className:"w-4 h-4 mr-2"}),"Crer un compte"]})]})]})})})}function xL(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=async o=>{r(!0),s("");try{const l=await es.login(o.email,o.password,"chauffeur");l.success?(localStorage.setItem("chauffeur_session",JSON.stringify(l.user)),es.saveUser(l.user),e(ke("ChauffeurDashboard"))):s(l.message||"Email ou mot de passe incorrect.")}catch(l){console.error("Erreur de connexion:",l),l.response&&l.response.status,s("Email ou mot de passe incorrect.")}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Chauffeur",icon:tt,onLogin:i,showRegister:!1,loading:t,error:n})}const $e=({children:e,value:t,onValueChange:r,...n})=>{const[s,i]=N.useState(!1),o=N.useRef(null);N.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]);let l=[];return V.Children.forEach(e,c=>{c&&c.type===Te&&V.Children.toArray(c.props.children).forEach(f=>{f&&f.type===H&&l.push(f)})}),a.jsx("div",{ref:o,className:"relative",...n,children:V.Children.map(e,c=>c.type===Me?V.cloneElement(c,{isOpen:s,onClick:()=>i(!s),value:t,selectItems:l}):c.type===Te?V.cloneElement(c,{isOpen:s,onSelect:u=>{r(u),i(!1)},value:t}):c)})},Me=({className:e="",children:t,isOpen:r,onClick:n,value:s,selectItems:i=[],...o})=>a.jsxs("button",{type:"button",onClick:n,className:`flex w-full items-center justify-between rounded-xl border border-gray-200 bg-white px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all ${e}`,...o,children:[V.Children.map(t,l=>l.type===De?V.cloneElement(l,{value:s,selectItems:i}):l),a.jsx(YD,{className:`w-4 h-4 text-gray-500 transition-transform ${r?"rotate-180":""}`})]}),De=({placeholder:e,children:t,value:r,selectItems:n=[]})=>{if(t)return a.jsx("span",{className:"text-gray-900",children:t});if(r&&n.length>0){const s=n.find(i=>i.props.value===r);if(s)return a.jsx("span",{className:"text-gray-900",children:s.props.children})}return a.jsx("span",{className:"text-gray-500",children:e})},Te=({children:e,isOpen:t,onSelect:r,value:n,className:s=""})=>t?a.jsx("div",{className:`absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden animate-fadeIn ${s}`,children:a.jsx("div",{className:"max-h-60 overflow-y-auto",children:V.Children.map(e,i=>V.cloneElement(i,{onSelect:r,selectedValue:n}))})}):null,H=({value:e,children:t,onSelect:r,selectedValue:n,className:s=""})=>{const i=e===n;return a.jsxs("button",{type:"button",onClick:()=>r(e),className:`w-full flex items-center justify-between px-4 py-2.5 text-sm text-left hover:bg-amber-50 transition-colors ${i?"bg-amber-50 text-amber-700 font-medium":"text-gray-700"} ${s}`,children:[t,i&&a.jsx(Bs,{className:"w-4 h-4 text-amber-600"})]})};function zr({isOpen:e,title:t="Confirmation",message:r,onConfirm:n,onCancel:s,confirmText:i="Confirmer",cancelText:o="Annuler",variant:l="destructive"}){return e?a.jsx(Br,{children:a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:a.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:c=>c.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:`p-6 ${l==="destructive"?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-amber-500 to-amber-600"}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:a.jsx(qe,{className:"w-6 h-6 text-white"})}),a.jsx("h3",{className:"text-xl font-bold text-white",children:t})]})}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:r})}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3 bg-gray-50",children:[a.jsx(te,{variant:"outline",onClick:s,className:"rounded-xl",children:o}),a.jsx(te,{variant:l,onClick:n,className:`rounded-xl ${l==="destructive"?"bg-red-500 hover:bg-red-600":""}`,children:i})]})]})})}):null}function yL({notifications:e=[],onMarkAsRead:t,onDelete:r,onDeleteAll:n,onClose:s,isOpen:i}){const[o,l]=N.useState("all"),[c,u]=N.useState(!1),f=e.filter(h=>o==="unread"?!h.lue:o==="read"?h.lue===!0:!0),d=e.filter(h=>!h.lue).length,m=h=>{if(!h)return"";const j=new Date(h),y=new Date-j,x=Math.floor(y/6e4),S=Math.floor(y/36e5),w=Math.floor(y/864e5);return x<1?" l'instant":x<60?`Il y a ${x} min`:S<24?`Il y a ${S}h`:w<7?`Il y a ${w}j`:j.toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},g=h=>{const j=(h==null?void 0:h.toLowerCase())||"";return j.includes("urgent")||j.includes("alerte")?a.jsx(qe,{className:"w-5 h-5 text-red-500"}):j.includes("attention")||j.includes("avertissement")?a.jsx(qe,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-green-500"})},b=h=>{const j=(h==null?void 0:h.toLowerCase())||"";return j.includes("urgent")||j.includes("alerte")?"border-l-red-500 bg-red-50":(j.includes("attention")||j.includes("avertissement"),"border-l-green-500 bg-green-50")};return i?a.jsx(Br,{children:a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:a.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:h=>h.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(zn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white",children:"Notifications"}),a.jsxs("p",{className:"text-white/80 text-sm",children:[d," non lue(s)"]})]})]}),a.jsx("button",{onClick:s,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors",children:a.jsx(Ze,{className:"w-5 h-5 text-white"})})]}),a.jsx("div",{className:"flex gap-2",children:["all","unread","read"].map(h=>a.jsxs("button",{onClick:()=>l(h),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all ${o===h?"bg-white text-green-600 shadow-lg":"bg-white/20 text-white hover:bg-white/30"}`,children:[h==="all"?"Toutes":h==="unread"?"Non lues":"Lues",h==="unread"&&d>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-red-500 text-white rounded-full text-xs",children:d})]},h))})]}),a.jsx("div",{className:"overflow-y-auto max-h-[calc(80vh-200px)] p-6 space-y-3",children:a.jsx(Br,{children:f.length===0?a.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 text-gray-400",children:[a.jsx(zn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune notification"})]}):f.map((h,j)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:j*.05},className:`relative border-l-4 rounded-xl p-4 transition-all ${b(h.titre)} ${h.lue?"opacity-75":"shadow-md"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:g(h.titre)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h4",{className:"font-semibold text-gray-800 text-sm",children:h.titre}),!h.lue&&a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full flex-shrink-0 mt-1"})]}),a.jsx("p",{className:"text-gray-600 text-sm mt-1 leading-relaxed",children:h.message}),a.jsxs("div",{className:"flex items-center justify-between mt-3",children:[a.jsx("p",{className:"text-xs text-gray-400",children:m(h.date||h.date_creation)}),a.jsxs("div",{className:"flex gap-2",children:[!h.lue&&a.jsxs("button",{onClick:()=>t&&t(h.id),className:"text-xs text-green-600 hover:text-green-700 font-medium flex items-center gap-1",children:[a.jsx(ct,{className:"w-3 h-3"}),"Marquer comme lue"]}),r&&a.jsxs("button",{onClick:()=>r(h.id),className:"text-xs text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[a.jsx(Ut,{className:"w-3 h-3"}),"Supprimer"]})]})]})]})]})},h.id))})}),f.length>0&&a.jsxs("div",{className:"p-4 bg-gray-50 border-t border-gray-100 flex flex-col sm:flex-row justify-between items-center gap-3",children:[a.jsxs("p",{className:"text-sm text-gray-500",children:[f.length," notification(s)"]}),a.jsxs("div",{className:"flex gap-2",children:[d>0&&t&&a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>{e.filter(h=>!h.lue).forEach(h=>t(h.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),n&&e.length>0&&a.jsxs(a.Fragment,{children:[a.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>u(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer toutes"]}),a.jsx(zr,{isOpen:c,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{n(),u(!1)},onCancel:()=>u(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})]})]})]})})}):null}function ea({title:e,value:t,icon:r,color:n="amber",trend:s,subtitle:i}){const o={amber:"from-amber-400 to-yellow-500",lime:"from-lime-400 to-lime-500",green:"from-green-400 to-emerald-500",blue:"from-blue-400 to-cyan-500",red:"from-red-400 to-rose-500",purple:"from-purple-400 to-violet-500",orange:"from-orange-400 to-amber-500"};return a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5,transition:{duration:.2}},className:"bg-white rounded-3xl p-6 shadow-lg hover:shadow-xl transition-shadow duration-300",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-sm font-medium mb-1",children:e}),a.jsx("h3",{className:"text-3xl font-bold text-gray-800",children:t}),i&&a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i}),s&&a.jsxs("div",{className:`flex items-center gap-1 mt-2 text-sm ${s>0?"text-green-500":"text-red-500"}`,children:[a.jsx("span",{children:s>0?"":""}),a.jsxs("span",{children:[Math.abs(s),"%"]})]})]}),a.jsx("div",{className:`w-14 h-14 rounded-2xl bg-gradient-to-br ${o[n]} flex items-center justify-center shadow-lg`,children:a.jsx(r,{className:"w-7 h-7 text-white"})})]})})}function wr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Aa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function vC(e,t){const r=wr(e);return isNaN(t)?Aa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function bC(e,t){const r=wr(e);if(isNaN(t))return Aa(e,NaN);if(!t)return r;const n=r.getDate(),s=Aa(e,r.getTime());s.setMonth(r.getMonth()+t+1,0);const i=s.getDate();return n>=i?s:(r.setFullYear(s.getFullYear(),s.getMonth(),n),r)}const jC=6048e5,vL=864e5;let bL={};function Sh(){return bL}function fu(e,t){var l,c,u,f;const r=Sh(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,s=wr(e),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Xf(e){return fu(e,{weekStartsOn:1})}function wC(e){const t=wr(e),r=t.getFullYear(),n=Aa(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=Xf(n),i=Aa(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Xf(i);return t.getTime()>=s.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Jf(e){const t=wr(e);return t.setHours(0,0,0,0),t}function O1(e){const t=wr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function jL(e,t){const r=Jf(e),n=Jf(t),s=+r-O1(r),i=+n-O1(n);return Math.round((s-i)/vL)}function wL(e){const t=wC(e),r=Aa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Xf(r)}function NL(e,t){const r=t*7;return vC(e,r)}function SL(e,t){return bC(e,t*12)}function _L(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function AL(e){if(!_L(e)&&typeof e!="number")return!1;const t=wr(e);return!isNaN(Number(t))}function qv(e){const t=wr(e);return t.setHours(23,59,59,999),t}function mf(e){const t=wr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function PL(e){const t=wr(e),r=Aa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const EL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},CL=(e,t,r)=>{let n;const s=EL[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function zo(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const OL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},TL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ML={date:zo({formats:OL,defaultWidth:"full"}),time:zo({formats:TL,defaultWidth:"full"}),dateTime:zo({formats:kL,defaultWidth:"full"})},DL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$L=(e,t,r,n)=>DL[e];function fa(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const IL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},LL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},BL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},FL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VL=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},UL={ordinalNumber:VL,era:fa({values:IL,defaultWidth:"wide"}),quarter:fa({values:LL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fa({values:RL,defaultWidth:"wide"}),day:fa({values:BL,defaultWidth:"wide"}),dayPeriod:fa({values:FL,defaultWidth:"wide",formattingValues:zL,defaultFormattingWidth:"wide"})};function ma(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?HL(l,d=>d.test(o)):WL(l,d=>d.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const f=t.slice(o.length);return{value:u,rest:f}}}function WL(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function HL(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function NC(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const qL=/^(\d+)(th|st|nd|rd)?/i,GL=/\d+/i,KL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},YL={any:[/^b/i,/^(a|c)/i]},XL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},JL={any:[/1/i,/2/i,/3/i,/4/i]},ZL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},QL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},eR={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},tR={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},rR={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},nR={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},aR={ordinalNumber:NC({matchPattern:qL,parsePattern:GL,valueCallback:e=>parseInt(e,10)}),era:ma({matchPatterns:KL,defaultMatchWidth:"wide",parsePatterns:YL,defaultParseWidth:"any"}),quarter:ma({matchPatterns:XL,defaultMatchWidth:"wide",parsePatterns:JL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ma({matchPatterns:ZL,defaultMatchWidth:"wide",parsePatterns:QL,defaultParseWidth:"any"}),day:ma({matchPatterns:eR,defaultMatchWidth:"wide",parsePatterns:tR,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:rR,defaultMatchWidth:"any",parsePatterns:nR,defaultParseWidth:"any"})},sR={code:"en-US",formatDistance:CL,formatLong:ML,formatRelative:$L,localize:UL,match:aR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iR(e){const t=wr(e);return jL(t,PL(t))+1}function oR(e){const t=wr(e),r=+Xf(t)-+wL(t);return Math.round(r/jC)+1}function SC(e,t){var f,d,m,g;const r=wr(e),n=r.getFullYear(),s=Sh(),i=(t==null?void 0:t.firstWeekContainsDate)??((d=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((g=(m=s.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Aa(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=fu(o,t),c=Aa(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=fu(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function lR(e,t){var l,c,u,f;const r=Sh(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(u=r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,s=SC(e,t),i=Aa(e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),fu(i,t)}function cR(e,t){const r=wr(e),n=+fu(r,t)-+lR(r,t);return Math.round(n/jC)+1}function yt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const hs={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return yt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):yt(r+1,2)},d(e,t){return yt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return yt(e.getHours()%12||12,t.length)},H(e,t){return yt(e.getHours(),t.length)},m(e,t){return yt(e.getMinutes(),t.length)},s(e,t){return yt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return yt(s,t.length)}},io={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},T1={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return hs.y(e,t)},Y:function(e,t,r,n){const s=SC(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return yt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):yt(i,t.length)},R:function(e,t){const r=wC(e);return yt(r,t.length)},u:function(e,t){const r=e.getFullYear();return yt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return yt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return yt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return hs.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return yt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=cR(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):yt(s,t.length)},I:function(e,t,r){const n=oR(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):yt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):hs.d(e,t)},D:function(e,t,r){const n=iR(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):yt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return yt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return yt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return yt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=io.noon:n===0?s=io.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=io.evening:n>=12?s=io.afternoon:n>=4?s=io.morning:s=io.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return hs.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):hs.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):yt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):yt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):hs.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):hs.s(e,t)},S:function(e,t){return hs.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return M1(n);case"XXXX":case"XX":return xi(n);case"XXXXX":case"XXX":default:return xi(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return M1(n);case"xxxx":case"xx":return xi(n);case"xxxxx":case"xxx":default:return xi(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+k1(n,":");case"OOOO":default:return"GMT"+xi(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+k1(n,":");case"zzzz":default:return"GMT"+xi(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return yt(n,t.length)},T:function(e,t,r){const n=e.getTime();return yt(n,t.length)}};function k1(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+yt(i,2)}function M1(e,t){return e%60===0?(e>0?"-":"+")+yt(Math.abs(e)/60,2):xi(e,t)}function xi(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=yt(Math.trunc(n/60),2),i=yt(n%60,2);return r+s+t+i}const D1=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},_C=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},uR=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return D1(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",D1(n,t)).replace("{{time}}",_C(s,t))},dR={p:_C,P:uR},fR=/^D+$/,mR=/^Y+$/,hR=["D","DD","YY","YYYY"];function pR(e){return fR.test(e)}function gR(e){return mR.test(e)}function xR(e,t,r){const n=yR(e,t,r);if(console.warn(n),hR.includes(e))throw new RangeError(n)}function yR(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vR=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,bR=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jR=/^'([^]*?)'?$/,wR=/''/g,NR=/[a-zA-Z]/;function je(e,t,r){var f,d,m,g,b,h,j,p;const n=Sh(),s=(r==null?void 0:r.locale)??n.locale??sR,i=(r==null?void 0:r.firstWeekContainsDate)??((d=(f=r==null?void 0:r.locale)==null?void 0:f.options)==null?void 0:d.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(m=n.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((h=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((p=(j=n.locale)==null?void 0:j.options)==null?void 0:p.weekStartsOn)??0,l=wr(e);if(!AL(l))throw new RangeError("Invalid time value");let c=t.match(bR).map(y=>{const x=y[0];if(x==="p"||x==="P"){const S=dR[x];return S(y,s.formatLong)}return y}).join("").match(vR).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const x=y[0];if(x==="'")return{isToken:!1,value:SR(y)};if(T1[x])return{isToken:!0,value:y};if(x.match(NR))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(y=>{if(!y.isToken)return y.value;const x=y.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&gR(x)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&pR(x))&&xR(x,t,String(e));const S=T1[x[0]];return S(l,x,s.localize,u)}).join("")}function SR(e){const t=e.match(jR);return t?t[1].replace(wR,"'"):e}function _R(e,t){const r=+wr(e),[n,s]=[+wr(t.start),+wr(t.end)].sort((i,o)=>i-o);return r>=n&&r<=s}function Xs(e,t){return vC(e,-t)}function Vo(e,t){return bC(e,-t)}function AR(e,t){return NL(e,-1)}function PR(e,t){return SL(e,-1)}const ER={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},CR=(e,t,r)=>{let n;const s=ER[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",String(t)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+n:"il y a "+n:n},OR={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},TR={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},kR={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},MR={date:zo({formats:OR,defaultWidth:"full"}),time:zo({formats:TR,defaultWidth:"full"}),dateTime:zo({formats:kR,defaultWidth:"full"})},DR={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},$R=(e,t,r,n)=>DR[e],IR={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},LR={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},RR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},BR={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},FR={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},zR=(e,t)=>{const r=Number(e),n=t==null?void 0:t.unit;if(r===0)return"0";const s=["year","week","hour","minute","second"];let i;return r===1?i=n&&s.includes(n)?"re":"er":i="me",r+i},VR=["MMM","MMMM"],UR={preprocessor:(e,t)=>e.getDate()===1||!t.some(n=>n.isToken&&VR.includes(n.value))?t:t.map(n=>n.isToken&&n.value==="do"?{isToken:!0,value:"d"}:n),ordinalNumber:zR,era:fa({values:IR,defaultWidth:"wide"}),quarter:fa({values:LR,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fa({values:RR,defaultWidth:"wide"}),day:fa({values:BR,defaultWidth:"wide"}),dayPeriod:fa({values:FR,defaultWidth:"wide"})},WR=/^(\d+)(ime|re|me|er|e)?/i,HR=/\d+/i,qR={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},GR={any:[/^av/i,/^ap/i]},KR={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},YR={any:[/1/i,/2/i,/3/i,/4/i]},XR={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},JR={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZR={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},QR={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},e8={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},t8={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},r8={ordinalNumber:NC({matchPattern:WR,parsePattern:HR,valueCallback:e=>parseInt(e)}),era:ma({matchPatterns:qR,defaultMatchWidth:"wide",parsePatterns:GR,defaultParseWidth:"any"}),quarter:ma({matchPatterns:KR,defaultMatchWidth:"wide",parsePatterns:YR,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ma({matchPatterns:XR,defaultMatchWidth:"wide",parsePatterns:JR,defaultParseWidth:"any"}),day:ma({matchPatterns:ZR,defaultMatchWidth:"wide",parsePatterns:QR,defaultParseWidth:"any"}),dayPeriod:ma({matchPatterns:e8,defaultMatchWidth:"any",parsePatterns:t8,defaultParseWidth:"any"})},Xt={code:"fr",formatDistance:CR,formatLong:MR,formatRelative:$R,localize:UR,match:r8,options:{weekStartsOn:1,firstWeekContainsDate:4}};function n8({chauffeur:e,notifications:t=[],onLogout:r,activeTab:n,setActiveTab:s,onCollapseChange:i}){var h,j,p,y;const o=at(),l=fn(),[c,u]=N.useState(!1),[f,d]=N.useState(!1);N.useEffect(()=>{i&&i(c)},[c,i]),N.useEffect(()=>{const x=()=>{window.innerWidth>=1024&&d(!1)};return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const m=[{title:"Dashboard",icon:wv,id:null,link:null},{title:"Mon Bus & Trajet",icon:tt,id:"bus",link:null},{title:"Essence",icon:tn,id:"essence",link:null},{title:"Problmes",icon:Zn,id:"signalements",link:null},{title:"Mes Accidents",icon:qe,id:"accidents",link:null},{title:"Notifications",icon:zn,id:"notifications",link:"ChauffeurNotifications"},{title:"Profil",icon:ft,id:"profile",link:null}],g=x=>{if(x.link){o(ke(x.link)),window.innerWidth<1024&&d(!1);return}s&&s(x.id),window.innerWidth<1024&&d(!1)},b=t.filter(x=>!x.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{typeof window<"u"&&window.innerWidth>=1024?(u(!c),d(!1)):d(!f)},className:"fixed top-4 left-4 z-50 p-2.5 bg-green-500 text-white rounded-xl shadow-lg hover:bg-green-600 transition-colors",children:!f&&c?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ze,{className:"w-5 h-5"})}),a.jsx(Br,{children:f&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>d(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(ee.aside,{initial:!1,animate:{width:c?"80px":"280px",x:f?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-green-50 to-white
          border-r-2 border-green-200 shadow-2xl z-40
          flex flex-col
          ${c?"items-center":""}
        `,children:[!c&&e&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-green-200 mt-16",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",children:((h=e.prenom)==null?void 0:h[0])||((j=e.nom)==null?void 0:j[0])||"C"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-bold text-gray-800 text-base truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.email})]})]})}),c&&e&&a.jsx("div",{className:"mt-16 w-12 h-12 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md mx-auto",children:((p=e.prenom)==null?void 0:p[0])||((y=e.nom)==null?void 0:y[0])||"C"}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:m.map((x,S)=>{const w=n===x.id,v=x.icon,_=x.id==="accidents",P=x.id==="notifications",C=P&&l.pathname==="/ChauffeurNotifications";return a.jsxs(ee.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:S*.05},onClick:()=>g(x),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${w||C?_?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg":"bg-gradient-to-r from-green-500 to-green-600 text-white shadow-lg":"text-gray-700 hover:bg-green-100 hover:text-green-700"}
                    ${c?"justify-center":""}
                  `,title:c?x.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(v,{className:`w-5 h-5 ${w||C?"text-white":"text-gray-600"}`}),P&&b>0&&a.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:b>99?"99+":b})]}),!c&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:x.title})]},x.id||"dashboard")})})}),a.jsx("div",{className:"p-4 border-t border-green-200 space-y-2",children:a.jsxs(ee.button,{onClick:r,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${c?"justify-center":""}
            `,title:c?"Dconnexion":"",children:[a.jsx(Mi,{className:"w-5 h-5"}),!c&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${c?"ml-[80px]":"ml-[280px]"}
        `})]})}function Kx({children:e,title:t="Espace Chauffeur",activeTab:r,setActiveTab:n}){const s=at();fn();const[i,o]=N.useState(null),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState(!1);N.useEffect(()=>{const h=localStorage.getItem("chauffeur_session");if(!h){s(ke("ChauffeurLogin"));return}const j=JSON.parse(h);o(j),g(j.id),f(!1)},[s]),N.useEffect(()=>{if(!i)return;const h=async()=>{await g(i.id)};h();const j=setInterval(h,3e4);return()=>clearInterval(j)},[i]);const g=async h=>{try{const j=await lt.getByUser(h,"chauffeur"),p=(j==null?void 0:j.data)||j||[];c(p.sort((y,x)=>new Date(x.date||x.date_creation||0)-new Date(y.date||y.date_creation||0)))}catch(j){console.warn("Erreur lors du chargement des notifications:",j),c([])}},b=()=>{localStorage.removeItem("chauffeur_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),s(ke("Home"))};return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50",children:[a.jsx(n8,{chauffeur:i,notifications:l,onLogout:b,activeTab:r,setActiveTab:n,onCollapseChange:m}),a.jsx("main",{className:`min-h-screen p-4 md:p-8 pt-20 lg:pt-8 transition-all duration-300 ${d?"lg:ml-[80px]":"lg:ml-[280px]"}`,children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function a8({activeTab:e,setActiveTab:t}){const r=at(),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState([]),[g,b]=N.useState([]),[h,j]=N.useState([]),[p,y]=N.useState([]),[x,S]=N.useState(!0),[w,v]=N.useState(je(new Date,"yyyy-MM-dd")),[_,P]=N.useState(!1),[C,$]=N.useState(null),[A,T]=N.useState({show:!1,id:null}),[O,L]=N.useState(""),[M,F]=N.useState("tous"),[R,B]=N.useState({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),[z,I]=N.useState([]),[X,re]=N.useState(!1),[W,de]=N.useState(!1),[Ae,Be]=N.useState(!1),[K,U]=N.useState(!1),[J,D]=N.useState([]),[Y,G]=N.useState("all"),[ie,pe]=N.useState(""),[xe,q]=N.useState([]),[oe,Oe]=N.useState([]),[_e,Ce]=N.useState("all"),[Fe,ye]=N.useState("all"),[Re,rt]=N.useState([]),[ht,et]=N.useState(null),[Ke,Ye]=N.useState(null),[kt,Ft]=N.useState(null),[ze,Nt]=N.useState(null),[Qe,Qt]=N.useState({nom:"",prenom:"",email:"",telephone:""});N.useEffect(()=>{n&&Qt({nom:n.nom||"",prenom:n.prenom||"",email:n.email||"",telephone:n.telephone||""})},[n]);const[Vr,Ur]=N.useState(null),[Mt,Oa]=N.useState("success"),gt=(k,Z="success")=>{Ur(k),Oa(Z),setTimeout(()=>{Ur(null)},4e3)},[Ht,en]=N.useState({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),quantite_litres:"",prix_total:"",station_service:""}),[Ta,E]=N.useState({date:je(new Date,"yyyy-MM-dd"),periode:"matin",heure_depart_reelle:"",heure_arrivee_reelle:"",nombre_eleves:d.length,kilometres_parcourus:"",problemes:"",observations:""}),[Q,he]=N.useState({date:je(new Date,"yyyy-MM-dd"),periode:"matin",essence_verifiee:!1,pneus_ok:!1,portes_ok:!1,eclairage_ok:!1,nettoyage_fait:!1,trousse_secours:!1,autres_verifications:""}),[Ee,Ne]=N.useState({type_probleme:"mecanique",description:"",urgence:"moyenne"}),ve=(k,Z=1200,fe=1200,Pe=.7)=>new Promise(me=>{const se=new FileReader;se.onload=ce=>{const Ue=new Image;Ue.onload=()=>{const _t=document.createElement("canvas");let st=Ue.width,qt=Ue.height;st>qt?st>Z&&(qt=qt*Z/st,st=Z):qt>fe&&(st=st*fe/qt,qt=fe),_t.width=st,_t.height=qt,_t.getContext("2d").drawImage(Ue,0,0,st,qt);const Xe=_t.toDataURL("image/jpeg",Pe);me({data:Xe,name:k.name,type:"image/jpeg"})},Ue.src=ce.target.result},se.readAsDataURL(k)});N.useEffect(()=>{const k=localStorage.getItem("chauffeur_session");if(!k){r(ke("ChauffeurLogin"));return}const Z=JSON.parse(k);s(Z),Se(Z)},[r]);const ue=(n==null?void 0:n.nombre_accidents)>=3||h.length>=3,Se=async k=>{try{let Z=k;if(k.type_id)try{const ce=await an.getById(k.type_id);Z=(ce==null?void 0:ce.data)||ce||k,s(Z)}catch(ce){console.warn("Erreur chargement donnes chauffeur:",ce)}const fe=await Pr.getAll(),Pe=(fe==null?void 0:fe.data)||fe||[],me=k.type_id||k.id,se=Pe.find(ce=>ce.chauffeur_id===me);if(se){if(o(se),se.trajet_id)try{const ce=await ha.getById(se.trajet_id),Ue=(ce==null?void 0:ce.data)||ce;c(Ue)}catch(ce){console.error("Erreur chargement trajet:",ce)}if(se.responsable_id)try{const ce=await Fa.getById(se.responsable_id),Ue=(ce==null?void 0:ce.data)||ce;f(Ue)}catch(ce){console.error("Erreur chargement responsable:",ce)}try{const ce=await Yt.getByBus(se.id),Ue=(ce==null?void 0:ce.data)||ce||[];m(Ue)}catch(ce){console.error("Erreur chargement lves:",ce)}}try{const ce=await vn.getByChauffeur(me),Ue=(ce==null?void 0:ce.data)||ce||[];j(Ue),Ue.length>=3}catch(ce){console.error("Erreur chargement accidents:",ce)}try{const ce=await ua.getByDate(w);b((ce==null?void 0:ce.data)||ce||[])}catch(ce){console.error("Erreur chargement prsences:",ce)}try{const ce=await lt.getByUser(me,"chauffeur"),Ue=(ce==null?void 0:ce.data)||ce||[];y(Ue.sort((_t,st)=>new Date(st.date||0)-new Date(_t.date||0)))}catch(ce){console.error("Erreur chargement notifications:",ce)}try{const ce=await Oc.getByChauffeur(me),Ue=(ce==null?void 0:ce.data)||ce||[];D(Ue)}catch(ce){console.error("Erreur chargement essence:",ce)}try{const ce=await XP.getByChauffeur(me),Ue=(ce==null?void 0:ce.data)||ce||[];q(Ue)}catch(ce){console.error("Erreur chargement rapports:",ce)}try{const ce=await da.getByChauffeur(me),Ue=(ce==null?void 0:ce.data)||ce||[];console.log("Signalements chargs:",Ue),Ue.forEach((_t,st)=>{_t.photos&&console.log(`Signalement ${st} a des photos:`,typeof _t.photos,Array.isArray(_t.photos)?_t.photos.length:"non-array")}),Oe(Ue)}catch(ce){console.error("Erreur chargement signalements:",ce)}}catch(Z){console.error("Erreur gnrale:",Z)}S(!1)};return N.useEffect(()=>{!x&&n&&ua.getByDate(w).then(k=>b(k)).catch(k=>console.error("Erreur chargement prsences:",k))},[w]),x?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
        .chauffeur-dashboard [role="option"]:hover,
        .chauffeur-dashboard [role="option"][data-highlighted],
        .chauffeur-dashboard [role="option"][data-state="checked"] {
          background-color: rgb(220 252 231) !important;
          color: rgb(22 101 52) !important;
        }
        .chauffeur-dashboard [role="option"][data-state="checked"] {
          background-color: rgb(220 252 231) !important;
          color: rgb(22 101 52) !important;
        }
      `}),a.jsxs("div",{className:"chauffeur-dashboard",children:[a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zt,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",n==null?void 0:n.prenom," ",n==null?void 0:n.nom]}),a.jsx("p",{className:"text-gray-500",children:n==null?void 0:n.email})]})]})}),e===null&&a.jsxs(a.Fragment,{children:[ue&&a.jsx(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-6 bg-red-50 border-2 border-red-500 rounded-xl text-red-700",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(qe,{className:"w-8 h-8 flex-shrink-0 text-red-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Tu es licenci"}),a.jsx("p",{className:"text-base mb-2",children:"Tu as atteint 3 accidents. Selon le rglement, tu es licenci et tu dois payer une amende de 1000 DH  l'cole."}),a.jsx("p",{className:"text-base font-semibold text-red-800",children:"Sinon l'cole va te poursuivre."})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ea,{title:"Mon Bus",value:(i==null?void 0:i.numero)||"-",icon:tt,color:"green"}),(()=>{const k=J.filter(me=>{const se=new Date(me.date),ce=new Date;return se.getMonth()===ce.getMonth()&&se.getFullYear()===ce.getFullYear()}),Z=k.reduce((me,se)=>me+parseFloat(se.quantite_litres||0),0),fe=k.reduce((me,se)=>me+parseFloat(se.prix_total||0),0),Pe=k.length;return a.jsx(ea,{title:"Essence (ce mois)",value:`${Z.toFixed(1)} L`,subtitle:Pe>0?`${Pe} prise${Pe>1?"s":""}  ${fe.toFixed(2)} DH`:"Aucune prise",icon:tn,color:"green"})})(),a.jsx(ea,{title:"Mes Accidents",value:`${(n==null?void 0:n.nombre_accidents)||0} / 3`,icon:qe,color:(n==null?void 0:n.nombre_accidents)>=2?"red":"green"}),a.jsx(ea,{title:"Mon Salaire",value:`${(n==null?void 0:n.salaire)||0} DH`,icon:cf,color:"green"})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(tt,{className:"w-6 h-6 text-green-500"}),"Vue d'ensemble"]}),i&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Informations du Bus"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Numro"}),a.jsx("span",{className:"text-2xl font-bold text-green-700",children:i.numero})]}),l&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Trajet"}),a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:l.nom||"N/A"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 md:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"Informations Personnelles"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Nom complet"}),a.jsxs("span",{className:"font-semibold text-gray-800",children:[n==null?void 0:n.prenom," ",n==null?void 0:n.nom]})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Email"}),a.jsx("span",{className:"font-semibold text-gray-800",children:n==null?void 0:n.email})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Tlphone"}),a.jsx("span",{className:"font-semibold text-gray-800",children:n==null?void 0:n.telephone})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm text-gray-600 mb-1",children:"Salaire"}),a.jsxs("span",{className:"font-semibold text-green-600 text-lg",children:[(n==null?void 0:n.salaire)||0," DH"]})]})]})]})]})]})]}),e==="profile"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(zt,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500",children:"Modifiez vos informations personnelles"})]}),a.jsxs("form",{onSubmit:async k=>{k.preventDefault();try{if(!(n!=null&&n.id)&&!(n!=null&&n.type_id)){gt("Erreur: ID chauffeur non trouv","error");return}const Z=(n==null?void 0:n.id)||(n==null?void 0:n.type_id),fe={nom:Qe.nom,prenom:Qe.prenom,email:Qe.email,telephone:Qe.telephone};await an.update(Z,fe);const Pe=localStorage.getItem("chauffeur_session");if(Pe){const me=JSON.parse(Pe);await Se(me)}gt("Profil mis  jour avec succs","success")}catch(Z){console.error("Erreur mise  jour profil:",Z),gt("Erreur lors de la mise  jour: "+(Z.message||"Erreur inconnue"),"error")}},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"nom",children:"Nom"}),a.jsx(le,{id:"nom",value:Qe.nom,onChange:k=>Qt({...Qe,nom:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"prenom",children:"Prnom"}),a.jsx(le,{id:"prenom",value:Qe.prenom,onChange:k=>Qt({...Qe,prenom:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"email",children:"Email"}),a.jsx(le,{id:"email",type:"email",value:Qe.email,onChange:k=>Qt({...Qe,email:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"telephone",children:"Tlphone"}),a.jsx(le,{id:"telephone",value:Qe.telephone,onChange:k=>Qt({...Qe,telephone:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl py-6 text-lg font-semibold shadow-lg flex items-center justify-center gap-3",children:[a.jsx(ts,{className:"w-5 h-5"}),"Enregistrer les modifications"]})]})]}),e==="bus"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-green-500"}),"Mon Bus"]}),i?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-5xl font-bold text-green-600",children:i.numero}),a.jsxs("p",{className:"text-gray-500 mt-2",children:[i.marque," ",i.modele]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[i.capacite," places"]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Places occupes"}),a.jsx("span",{className:"font-medium",children:d.length})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-500",children:"Statut"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${i.statut==="Actif"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:i.statut})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun bus assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(No,{className:"w-5 h-5 text-green-500"}),"Mon Trajet"]}),l?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-2xl p-4",children:[a.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Trajet"}),a.jsx("p",{className:"text-xl font-bold text-gray-800",children:l.nom})]}),l.zones&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[a.jsx(Rt,{className:"w-4 h-4"}),"Zones desservies"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(l.zones)?l.zones:JSON.parse(l.zones||"[]")).map((k,Z)=>a.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm",children:k},Z))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe A - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_matin_a," - ",l.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe A - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_soir_a," - ",l.heure_arrivee_soir_a]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Groupe B - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_matin_b," - ",l.heure_arrivee_matin_b]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Groupe B - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[l.heure_depart_soir_b," - ",l.heure_arrivee_soir_b]})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun trajet assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:col-span-2",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-green-500"}),"Responsable Bus"]}),u?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center",children:a.jsx(ft,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[u.prenom," ",u.nom]}),a.jsx("p",{className:"text-gray-500",children:u.telephone}),a.jsx("p",{className:"text-gray-400 text-sm",children:u.email})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-4",children:"Aucun responsable assign"})]})]}),e==="accidents"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6 text-red-500"}),"Historique des Accidents"]}),!ue&&a.jsxs(te,{onClick:()=>P(!0),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Dclarer un accident"]})]}),ue&&a.jsx("div",{className:"p-6 bg-red-50 border-b-2 border-red-500",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(qe,{className:"w-8 h-8 flex-shrink-0 text-red-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2 text-red-800",children:"Tu es licenci"}),a.jsx("p",{className:"text-base mb-2 text-red-700",children:"Tu as atteint 3 accidents. Selon le rglement, tu es licenci et tu dois payer une amende de 1000 DH  l'cole."}),a.jsx("p",{className:"text-base font-semibold text-red-900",children:"Sinon l'cole va te poursuivre."})]})]})}),h.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ct,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun accident enregistr"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Continuez  conduire prudemment !"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:h.map(k=>{let Z=[];try{if(k.photos){if(Array.isArray(k.photos))Z=k.photos;else if(typeof k.photos=="string"&&k.photos.trim()!=="")if(k.photos.trim().startsWith("[")||k.photos.trim().startsWith("{")){const me=JSON.parse(k.photos);Array.isArray(me)?Z=me:me&&typeof me=="object"&&Array.isArray(me.photos)&&(Z=me.photos)}else k.photos.startsWith("data:image")&&(Z=[k.photos])}var fe=Z.map(me=>typeof me=="string"?me.startsWith("data:image")||me.startsWith("http")?me:null:me&&typeof me=="object"&&(me.data||me.src||me.url||me.base64)||null).filter(me=>me&&me.trim()!=="")}catch(Pe){console.error("Erreur parsing photos accident:",Pe);var fe=[]}return a.jsxs("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k.gravite==="Grave"?"bg-red-100 text-red-700 border border-red-300":k.gravite==="Moyenne"?"bg-orange-100 text-orange-700 border border-orange-300":"bg-green-100 text-green-700 border border-green-300"}`,children:k.gravite}),k.statut&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${k.statut==="Valid"?"bg-green-100 text-green-700":k.statut==="En attente"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:k.statut})]}),a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[a.jsx(Jr,{className:"w-4 h-4"}),je(new Date(k.date),"dd MMMM yyyy",{locale:Xt}),k.heure&&`  ${k.heure}`]})]}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:k.description}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mb-3",children:[k.lieu&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"Lieu:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:k.lieu})]}),k.degats&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Es,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"Dgts:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:k.degats})]}),k.nombre_eleves!==null&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-500",children:"lves dans le bus:"}),a.jsx("span",{className:"ml-1 font-medium text-gray-800",children:k.nombre_eleves})]}),k.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[a.jsx(qe,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:["Blesss: ",k.nombre_blesses]})]})]}),fe.length>0&&a.jsxs("div",{className:"mt-4 p-3 bg-red-50 rounded-lg border border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(La,{className:"w-4 h-4 text-red-600"}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Photos (",fe.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:fe.map((Pe,me)=>a.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>et(Pe),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-red-300 group-hover:border-red-500 transition-colors bg-white",children:[a.jsx("img",{src:Pe,alt:`Photo accident ${me+1}`,className:"w-full h-20 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(_i,{className:"w-4 h-4 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},me))})]}),k.blesses&&a.jsxs("div",{className:"mt-3 p-3 bg-red-50 rounded-xl text-red-700 text-sm border border-red-200",children:[a.jsx(qe,{className:"w-4 h-4 inline mr-2"}),"Des blesss ont t signals"]}),a.jsxs("div",{className:"mt-4 flex gap-2 justify-end",children:[a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{var Pe,me;$(k),B({date:k.date?je(new Date(k.date),"yyyy-MM-dd"):je(new Date,"yyyy-MM-dd"),heure:k.heure||je(new Date,"HH:mm"),lieu:k.lieu||"",description:k.description||"",degats:k.degats||"",gravite:k.gravite||"Lgre",nombre_eleves:((Pe=k.nombre_eleves)==null?void 0:Pe.toString())||"",nombre_blesses:((me=k.nombre_blesses)==null?void 0:me.toString())||"0"}),fe.length>0?I(fe.map((se,ce)=>({preview:se,file:null,id:`existing-${ce}`}))):I([]),P(!0)},className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>T({show:!0,id:k.id}),className:"rounded-xl text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]},k.id)})})]}),e==="essence"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-green-50 to-emerald-50",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(tn,{className:"w-6 h-6 text-green-500"}),"Gestion de l'Essence",a.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["(",J.length," prises)"]})]}),a.jsxs(te,{onClick:()=>re(!0),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Nouvelle prise d'essence"]})]}),a.jsxs("div",{className:"p-6 grid grid-cols-1 md:grid-cols-4 gap-4 bg-gradient-to-br from-green-50 via-emerald-50 to-green-50",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Prises ce mois"}),a.jsx(Jr,{className:"w-5 h-5 text-green-500"})]}),a.jsx("p",{className:"text-3xl font-bold text-gray-800",children:J.filter(k=>{const Z=new Date(k.date),fe=new Date;return Z.getMonth()===fe.getMonth()&&Z.getFullYear()===fe.getFullYear()}).length})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-emerald-500",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Total litres"}),a.jsx(tn,{className:"w-5 h-5 text-emerald-500"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[J.reduce((k,Z)=>k+parseFloat(Z.quantite_litres||0),0).toFixed(1)," ",a.jsx("span",{className:"text-lg text-gray-500",children:"L"})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-green-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Cot total"}),a.jsx(cf,{className:"w-5 h-5 text-green-600"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[J.reduce((k,Z)=>k+parseFloat(Z.prix_total||0),0).toFixed(2)," ",a.jsx("span",{className:"text-lg text-gray-500",children:"DH"})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl p-5 shadow-md hover:shadow-lg transition-shadow border-l-4 border-emerald-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Prix moyen/L"}),a.jsx(lu,{className:"w-5 h-5 text-emerald-600"})]}),a.jsxs("p",{className:"text-3xl font-bold text-gray-800",children:[J.length>0?(J.reduce((k,Z)=>k+parseFloat(Z.prix_total||0),0)/J.reduce((k,Z)=>k+parseFloat(Z.quantite_litres||0),0)).toFixed(2):"0.00"," ",a.jsx("span",{className:"text-lg text-gray-500",children:"DH"})]})]})]}),a.jsxs("div",{className:"p-6",children:[J.length>0&&a.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl border border-green-100",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[a.jsx(le,{type:"text",placeholder:"Rechercher par station...",value:ie,onChange:k=>pe(k.target.value),className:"rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500"}),a.jsxs($e,{value:Y,onValueChange:G,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par date"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les prises"}),a.jsx(H,{value:"thisMonth",children:"Ce mois"}),a.jsx(H,{value:"lastMonth",children:"Mois dernier"}),a.jsx(H,{value:"last3Months",children:"3 derniers mois"})]})]})]}),ie||Y!=="all"?a.jsxs(te,{variant:"outline",onClick:()=>{pe(""),G("all")},className:"rounded-xl border-green-200 text-green-600 hover:bg-green-50",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Rinitialiser"]}):null]}),(()=>{let k=[...J];if(Y!=="all"){const Z=new Date,fe=(()=>{switch(Y){case"thisMonth":return{start:mf(Z),end:Z};case"lastMonth":const Pe=Vo(Z,1);return{start:mf(Pe),end:qv(Vo(mf(Z),1))};case"last3Months":return{start:Vo(Z,3),end:Z};default:return null}})();fe&&(k=k.filter(Pe=>{const me=new Date(Pe.date);return _R(me,fe)}))}return ie&&(k=k.filter(Z=>{var fe;return(fe=Z.station_service)==null?void 0:fe.toLowerCase().includes(ie.toLowerCase())})),k.sort((Z,fe)=>new Date(fe.date+" "+fe.heure)-new Date(Z.date+" "+Z.heure)),k.length===0?a.jsxs(ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"p-12 text-center",children:[a.jsx(tn,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucune prise d'essence trouve"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:ie||Y!=="all"?"Essayez de modifier vos filtres":"Commencez par enregistrer votre premire prise d'essence"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-sm text-gray-500 mb-2",children:[k.length," prise",k.length>1?"s":""," trouve",k.length>1?"s":""]}),a.jsx(Br,{children:k.map((Z,fe)=>{const Pe=parseFloat(Z.prix_total)/parseFloat(Z.quantite_litres),me=(()=>{const se=new Date(Z.date),ce=new Date;return se.getMonth()===ce.getMonth()&&se.getFullYear()===ce.getFullYear()})();return a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:fe*.05},className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden",children:a.jsxs("div",{className:"p-5",children:[a.jsx("div",{className:"flex justify-between items-start mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-green-100 text-green-600",children:a.jsx(tn,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:je(new Date(Z.date),"dd MMMM yyyy",{locale:Xt})}),me&&a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:"Ce mois"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Gs,{className:"w-4 h-4"}),a.jsx("span",{children:Z.heure})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(tn,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Quantit"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[parseFloat(Z.quantite_litres).toFixed(1)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"L"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(cf,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Prix total"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[parseFloat(Z.prix_total).toFixed(2)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"DH"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(lu,{className:"w-4 h-4 text-emerald-500"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Prix/L"})]}),a.jsxs("p",{className:"text-xl font-bold text-gray-800",children:[Pe.toFixed(2)," ",a.jsx("span",{className:"text-sm text-gray-500",children:"DH"})]})]}),Z.station_service&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-green-100",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(KD,{className:"w-4 h-4 text-emerald-600"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Station"})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800 truncate",children:Z.station_service})]})]}),Z.photo_ticket&&(()=>{let se=Z.photo_ticket;try{if(se.trim().startsWith("[")||se.trim().startsWith("{")){const ce=JSON.parse(se);Array.isArray(ce)&&ce.length>0?se=ce[0]:ce&&typeof ce=="object"&&ce.data&&(se=ce.data)}}catch{}return se&&se.startsWith("data:image")?a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(La,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Photo du ticket"})]}),a.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>Ft(se),children:[a.jsx("img",{src:se,alt:"Ticket essence",className:"w-full h-32 object-contain rounded-lg border-2 border-green-200 bg-gray-50 hover:border-green-400 transition-colors"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center rounded-lg",children:a.jsx(_i,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})]}):null})()]})},Z.id)})})]})})()]})]}),e==="signalements"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-green-50 to-emerald-50",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Zn,{className:"w-6 h-6 text-green-500"}),"Signalements de Problmes"]}),a.jsxs(te,{onClick:()=>U(!0),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Signaler un problme"]})]}),oe.length>0&&a.jsxs("div",{className:"p-6 bg-white border-b border-gray-100 flex flex-col md:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[a.jsxs($e,{value:_e,onValueChange:Ce,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par statut"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les statuts"}),a.jsx(H,{value:"en_attente",children:"En attente"}),a.jsx(H,{value:"en_cours",children:"En cours"}),a.jsx(H,{value:"resolu",children:"Rsolu"})]})]}),a.jsxs($e,{value:Fe,onValueChange:ye,children:[a.jsx(Me,{className:"w-full md:w-[200px] rounded-xl border-green-200 focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{placeholder:"Filtrer par urgence"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les urgences"}),a.jsx(H,{value:"haute",children:"Haute"}),a.jsx(H,{value:"moyenne",children:"Moyenne"}),a.jsx(H,{value:"faible",children:"Faible"})]})]})]}),(_e!=="all"||Fe!=="all")&&a.jsxs(te,{variant:"outline",onClick:()=>{Ce("all"),ye("all")},className:"rounded-xl border-green-200 text-green-600 hover:bg-green-50",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Rinitialiser"]})]}),a.jsx("div",{className:"p-6",children:(()=>{let k=[...oe];if(_e!=="all"&&(k=k.filter(se=>se.statut===_e)),Fe!=="all"&&(k=k.filter(se=>se.urgence===Fe)),k.sort((se,ce)=>new Date(ce.date_creation||0)-new Date(se.date_creation||0)),k.length===0)return a.jsxs(ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"p-12 text-center",children:[a.jsx(Zn,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun signalement trouv"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:_e!=="all"||Fe!=="all"?"Essayez de modifier vos filtres":"Commencez par signaler votre premier problme"})]});const Z=se=>{switch(se){case"mecanique":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",icon:"text-red-500",badge:"bg-red-100 text-red-700"};case"eclairage":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-700",icon:"text-yellow-500",badge:"bg-yellow-100 text-yellow-700"};case"portes":return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-700",icon:"text-blue-500",badge:"bg-blue-100 text-blue-700"};case"climatisation":return{bg:"bg-cyan-50",border:"border-cyan-200",text:"text-cyan-700",icon:"text-cyan-500",badge:"bg-cyan-100 text-cyan-700"};case"pneus":return{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700",icon:"text-orange-500",badge:"bg-orange-100 text-orange-700"};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-700",icon:"text-gray-500",badge:"bg-gray-100 text-gray-700"}}},fe=se=>{switch(se){case"haute":return{bg:"bg-red-100",text:"text-red-700",border:"border-red-300",icon:"text-red-500"};case"moyenne":return{bg:"bg-yellow-100",text:"text-yellow-700",border:"border-yellow-300",icon:"text-yellow-500"};default:return{bg:"bg-green-100",text:"text-green-700",border:"border-green-300",icon:"text-green-500"}}},Pe=se=>{switch(se){case"resolu":return{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"};case"en_cours":return{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"};default:return{bg:"bg-gray-100",text:"text-gray-700",border:"border-gray-300"}}},me=se=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[se]||se;return a.jsx("div",{className:"space-y-4",children:a.jsx(Br,{children:k.map((se,ce)=>{const Ue=Z(se.type_probleme),_t=fe(se.urgence),st=Pe(se.statut);return a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:ce*.05},className:`${Ue.bg} ${Ue.border} border-2 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden`,children:a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:`p-2 rounded-lg ${Ue.bg} ${Ue.icon}`,children:a.jsx(Zn,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[a.jsx("h3",{className:"font-semibold text-gray-800 text-lg",children:me(se.type_probleme)}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Ue.badge} border ${Ue.border}`,children:me(se.type_probleme)}),a.jsxs("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${_t.bg} ${_t.text} border ${_t.border} flex items-center gap-1`,children:[se.urgence==="haute"&&a.jsx(Es,{className:"w-3 h-3"}),se.urgence==="haute"?"URGENT":se.urgence==="moyenne"?"Moyenne":"Faible"]}),a.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${st.bg} ${st.text} border ${st.border}`,children:se.statut==="resolu"?"Rsolu":se.statut==="en_cours"?"En cours":"En attente"})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[a.jsx(Gs,{className:"w-4 h-4"}),a.jsx("span",{children:se.date_creation?je(new Date(se.date_creation),"dd MMMM yyyy  HH:mm",{locale:Xt}):"Date inconnue"})]})]})]}),a.jsx(te,{variant:"outline",size:"sm",onClick:()=>Nt(se),className:"ml-4 text-red-600 border-red-300 hover:bg-red-50 hover:border-red-400 rounded-xl",children:a.jsx(Ut,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200 mb-4",children:a.jsx("p",{className:"text-gray-800 leading-relaxed",children:se.description})}),(()=>{try{if(!se.photos||se.photos===null||se.photos==="null"||se.photos==="")return null;let qt=[];if(Array.isArray(se.photos))qt=se.photos;else if(typeof se.photos=="string"&&se.photos.trim()!=="")try{let Xe=se.photos;(Xe.trim().startsWith("[")||Xe.trim().startsWith("{"))&&(Xe=JSON.parse(Xe)),Array.isArray(Xe)?qt=Xe:Xe&&typeof Xe=="object"&&Array.isArray(Xe.photos)?qt=Xe.photos:typeof Xe=="string"&&Xe.startsWith("data:image")&&(qt=[Xe])}catch(Xe){if(se.photos.startsWith("data:image"))qt=[se.photos];else return console.error("Erreur parsing photos:",Xe),null}else return null;if(!Array.isArray(qt)||qt.length===0)return null;const ao=qt.map(Xe=>typeof Xe=="string"?Xe:Xe&&typeof Xe=="object"&&(Xe.data||Xe.src||Xe.url)||null).filter(Xe=>Xe&&typeof Xe=="string"&&Xe.trim()!==""&&Xe.startsWith("data:image"));return ao.length===0?null:a.jsxs("div",{className:"mb-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(La,{className:"w-5 h-5 text-green-600"}),a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Photos (",ao.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:ao.map((Xe,Or)=>a.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>et(Xe),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-green-300 group-hover:border-green-500 transition-colors bg-white shadow-md",children:[a.jsx("img",{src:Xe,alt:`Photo problme ${Or+1}`,className:"w-full h-24 object-cover",onError:ql=>{console.error("Erreur chargement image:",Or),ql.target.style.display="none"}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(_i,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},Or))})]})}catch(qt){return console.error("Erreur parsing photos:",qt,se),null}})(),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[se.bus_numero&&a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(tt,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Bus"})]}),a.jsx("p",{className:"text-sm font-semibold text-gray-800",children:se.bus_numero})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Es,{className:`w-4 h-4 ${_t.icon}`}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Urgence"})]}),a.jsx("p",{className:`text-sm font-semibold ${_t.text}`,children:se.urgence==="haute"?"Haute":se.urgence==="moyenne"?"Moyenne":"Faible"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(ct,{className:`w-4 h-4 ${st.text}`}),a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Statut"})]}),a.jsx("p",{className:`text-sm font-semibold ${st.text}`,children:se.statut==="resolu"?"Rsolu":se.statut==="en_cours"?"En cours":"En attente"})]})]})]})},se.id)})})})})()})]})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6"}),C?"Modifier un Accident":"Dclarer un Accident"]}),a.jsx("button",{onClick:()=>{z.forEach(k=>{k.preview&&k.preview.startsWith("blob:")&&URL.revokeObjectURL(k.preview)}),I([]),P(!1),$(null)},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async k=>{k.preventDefault();try{if(h.length>=3){gt("Vous avez atteint 3 accidents. Vous tes licenci et devez payer une amende de 1000 DH  l'cole. Sinon l'cole va vous poursuivre.","error"),P(!1);return}const fe=z.reduce((st,qt)=>st+qt.file.size,0),Pe=10*1024*1024;if(fe>Pe){gt("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const me=z.filter(st=>st.file),se=z.filter(st=>!st.file&&st.preview);let ce=[];me.length>0&&(ce=await Promise.all(me.map(st=>ve(st.file))));const Ue=[...se.map(st=>st.preview),...ce.map(st=>st.data)].filter(Boolean),_t={date:R.date,heure:R.heure,bus_id:(i==null?void 0:i.id)||null,chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id)||null,lieu:R.lieu,description:R.description,degats:R.degats||null,gravite:R.gravite,nombre_eleves:R.nombre_eleves?parseInt(R.nombre_eleves):null,nombre_blesses:R.nombre_blesses?parseInt(R.nombre_blesses):0,blesses:parseInt(R.nombre_blesses)>0,photos:Ue.length>0?Ue:null};C?(await vn.update(C.id,_t),gt("Accident modifi avec succs !","success")):(await vn.create(_t),((n==null?void 0:n.nombre_accidents)||h.length)+1>=3?gt("Tu es licenci et tu dois payer une amende de 1000 DH  l'cole. Sinon l'cole va te poursuivre.","error"):gt("Accident dclar avec succs ! L'administrateur a t notifi.","success")),P(!1),$(null),B({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),z.forEach(st=>{st.preview&&st.preview.startsWith("blob:")&&URL.revokeObjectURL(st.preview)}),I([]),await Se(n)}catch(Z){console.error("Erreur dclaration accident:",Z),gt("Erreur lors de la dclaration: "+(Z.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Date *"}),a.jsx(le,{type:"date",value:R.date,onChange:k=>B({...R,date:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Heure *"}),a.jsx(le,{type:"time",value:R.heure,onChange:k=>B({...R,heure:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Lieu *"}),a.jsx(le,{value:R.lieu,onChange:k=>B({...R,lieu:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",placeholder:"Adresse de l'accident",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Gravit *"}),a.jsxs($e,{value:R.gravite,onValueChange:k=>B({...R,gravite:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Lgre",children:"Lgre"}),a.jsx(H,{value:"Moyenne",children:"Moyenne"}),a.jsx(H,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Nombre d'lves dans le bus"}),a.jsx(le,{type:"number",value:R.nombre_eleves,onChange:k=>B({...R,nombre_eleves:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",min:"0",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Nombre de blesss"}),a.jsx(le,{type:"number",value:R.nombre_blesses,onChange:k=>B({...R,nombre_blesses:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",min:"0",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Description *"}),a.jsx(ja,{value:R.description,onChange:k=>B({...R,description:k.target.value}),className:"mt-1 rounded-xl",rows:4,placeholder:"Dcrivez l'accident en dtail...",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Dgts"}),a.jsx(ja,{value:R.degats,onChange:k=>B({...R,degats:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",rows:2,placeholder:"Dcrivez les dgts matriels..."})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Photos (optionnel) - Max 5 photos, 5 MB par photo, 10 MB total"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k=>{const Z=Array.from(k.target.files||[]),fe=5-z.length;if(Z.length>fe){gt(`Vous ne pouvez ajouter que ${fe} photo(s) supplmentaire(s)`,"error");return}const Pe=Z.slice(0,fe),me=5*1024*1024,ce=Pe.filter(Ue=>Ue.size>me?(gt(`L'image ${Ue.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(Ue=>({file:Ue,preview:URL.createObjectURL(Ue)}));I([...z,...ce]),k.target.value=""},className:"hidden",id:"accident-photos-upload"}),a.jsxs("label",{htmlFor:"accident-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-red-500 hover:bg-red-50 transition-colors",children:[a.jsx(La,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),z.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[z.length," photo",z.length>1?"s":""," slectionne",z.length>1?"s":""]})}),a.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto p-2 bg-gray-50 rounded-lg border border-gray-200",children:z.map((k,Z)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:k.preview,alt:`Photo ${Z+1}`,className:"w-full h-16 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(k.preview),I(z.filter((fe,Pe)=>Pe!==Z))},className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-100 shadow-md hover:bg-red-600 transition-colors",children:a.jsx(Ze,{className:"w-3 h-3"})})]},Z))})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:()=>{z.forEach(k=>{k.preview&&k.preview.startsWith("blob:")&&URL.revokeObjectURL(k.preview)}),I([]),P(!1),$(null)},className:"rounded-xl",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(qe,{className:"w-4 h-4 mr-2"}),C?"Modifier l'accident":"Dclarer l'accident"]})]})]})]})}),X&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-500 to-emerald-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(tn,{className:"w-6 h-6"}),"Prise d'Essence"]}),a.jsx("button",{onClick:()=>re(!1),className:"text-white hover:text-green-100",children:a.jsx(Ze,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async k=>{k.preventDefault();try{let Z=null;if(Ke)try{Z=(await ve(Ke.file)).data}catch{gt("Erreur lors de la compression de la photo","error");return}const fe={chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id),bus_id:i==null?void 0:i.id,date:Ht.date,heure:Ht.heure,quantite_litres:parseFloat(Ht.quantite_litres),prix_total:parseFloat(Ht.prix_total),station_service:Ht.station_service||null,photo_ticket:Z};if((await Oc.create(fe)).success){Ke&&(URL.revokeObjectURL(Ke.preview),Ye(null));const me=await Oc.getByChauffeur((n==null?void 0:n.id)||(n==null?void 0:n.type_id)),se=(me==null?void 0:me.data)||me||[];D(se),gt("Prise d'essence enregistre avec succs ! L'administrateur a t notifi.","success"),re(!1),en({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),quantite_litres:"",prix_total:"",station_service:""})}}catch(Z){gt("Erreur: "+(Z.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Date *"}),a.jsx(le,{type:"date",value:Ht.date,onChange:k=>en({...Ht,date:k.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Heure *"}),a.jsx(le,{type:"time",value:Ht.heure,onChange:k=>en({...Ht,heure:k.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Quantit (litres) *"}),a.jsx(le,{type:"number",step:"0.01",value:Ht.quantite_litres,onChange:k=>en({...Ht,quantite_litres:k.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Prix total (DH) *"}),a.jsx(le,{type:"number",step:"0.01",value:Ht.prix_total,onChange:k=>en({...Ht,prix_total:k.target.value}),className:"mt-1 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Station-service"}),a.jsx(le,{value:Ht.station_service,onChange:k=>en({...Ht,station_service:k.target.value}),className:"mt-1 rounded-xl"})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Photo du ticket/reu"}),a.jsx("input",{type:"file",accept:"image/*",onChange:k=>{var fe;const Z=(fe=k.target.files)==null?void 0:fe[0];if(Z){if(Z.size>5242880){gt("L'image est trop grande (max 5 MB)","error");return}Ye({file:Z,preview:URL.createObjectURL(Z)})}k.target.value=""},className:"hidden",id:"essence-ticket-photo-upload"}),a.jsxs("label",{htmlFor:"essence-ticket-photo-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors mt-1",children:[a.jsx(La,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:Ke?"Photo slectionne":"Cliquez pour ajouter une photo du ticket"})]}),Ke&&a.jsx("div",{className:"mt-4 relative",children:a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:Ke.preview,alt:"Ticket essence",className:"w-full h-48 object-contain rounded-lg border-2 border-green-200 bg-gray-50"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(Ke.preview),Ye(null)},className:"absolute top-2 right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center opacity-90 hover:opacity-100 shadow-md hover:bg-red-600 transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>Ft(Ke.preview),className:"absolute top-2 left-2 w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center opacity-90 hover:opacity-100 shadow-md hover:bg-green-600 transition-colors",children:a.jsx(_i,{className:"w-4 h-4"})})]})})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:()=>{Ke&&(URL.revokeObjectURL(Ke.preview),Ye(null)),re(!1)},className:"rounded-xl",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"})," Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(tn,{className:"w-4 h-4 mr-2"})," Enregistrer"]})]})]})]})}),K&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[85vh] flex flex-col",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-green-500 to-emerald-600 flex-shrink-0",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Zn,{className:"w-6 h-6"}),"Signaler un Problme"]}),a.jsx("button",{onClick:()=>{Re.forEach(k=>URL.revokeObjectURL(k.preview)),rt([]),U(!1)},className:"text-white hover:text-green-100",children:a.jsx(Ze,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async k=>{k.preventDefault();try{const Z=Re.reduce((ce,Ue)=>ce+Ue.file.size,0),fe=10*1024*1024;if(Z>fe){gt("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const Pe=await Promise.all(Re.map(ce=>ve(ce.file))),me={chauffeur_id:(n==null?void 0:n.id)||(n==null?void 0:n.type_id),bus_id:i==null?void 0:i.id,type_probleme:Ee.type_probleme,description:Ee.description,urgence:Ee.urgence,photos:Pe.length>0?Pe.map(ce=>ce.data):null};if((await da.create(me)).success){const ce=await da.getByChauffeur((n==null?void 0:n.id)||(n==null?void 0:n.type_id)),Ue=(ce==null?void 0:ce.data)||ce||[];Oe(Ue),gt("Problme signal avec succs ! L'administrateur a t notifi.","success"),U(!1),Ne({type_probleme:"mecanique",description:"",urgence:"moyenne"}),Re.forEach(_t=>URL.revokeObjectURL(_t.preview)),rt([])}}catch(Z){gt("Erreur: "+(Z.message||"Erreur inconnue"),"error")}},className:"flex flex-col flex-1 min-h-0 overflow-hidden",children:[a.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1 min-h-0 pb-2",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Type de problme *"}),a.jsxs($e,{value:Ee.type_probleme,onValueChange:k=>Ne({...Ee,type_probleme:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"mecanique",children:"Mcanique"}),a.jsx(H,{value:"eclairage",children:"clairage"}),a.jsx(H,{value:"portes",children:"Portes"}),a.jsx(H,{value:"climatisation",children:"Climatisation"}),a.jsx(H,{value:"pneus",children:"Pneus"}),a.jsx(H,{value:"autre",children:"Autre"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Urgence *"}),a.jsxs($e,{value:Ee.urgence,onValueChange:k=>Ne({...Ee,urgence:k}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"faible",children:"Faible"}),a.jsx(H,{value:"moyenne",children:"Moyenne"}),a.jsx(H,{value:"haute",children:"Haute"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Description *"}),a.jsx(ja,{value:Ee.description,onChange:k=>Ne({...Ee,description:k.target.value}),className:"mt-1 rounded-xl focus:ring-green-500 focus:border-green-500",rows:4,required:!0,placeholder:"Dcrivez le problme en dtail..."})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Photos (optionnel) - Max 5 photos, 5 MB par photo, 10 MB total"}),a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k=>{const Z=Array.from(k.target.files||[]),fe=5-Re.length;if(Z.length>fe){gt(`Vous ne pouvez ajouter que ${fe} photo(s) supplmentaire(s)`,"error");return}const Pe=Z.slice(0,fe),me=5*1024*1024,ce=Pe.filter(Ue=>Ue.size>me?(gt(`L'image ${Ue.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(Ue=>({file:Ue,preview:URL.createObjectURL(Ue)}));rt([...Re,...ce]),k.target.value=""},className:"hidden",id:"signalement-photos-upload"}),a.jsxs("label",{htmlFor:"signalement-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors",children:[a.jsx(La,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),Re.length>0&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[Re.length," photo",Re.length>1?"s":""," slectionne",Re.length>1?"s":""]})}),a.jsx("div",{className:"grid grid-cols-4 gap-2 max-h-32 overflow-y-auto p-2 bg-gray-50 rounded-lg border border-gray-200",children:Re.map((k,Z)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:k.preview,alt:`Photo ${Z+1}`,className:"w-full h-16 object-cover rounded-lg border border-gray-300"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(k.preview),rt(Re.filter((fe,Pe)=>Pe!==Z))},className:"absolute top-0.5 right-0.5 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center opacity-100 shadow-md hover:bg-red-600 transition-colors",children:a.jsx(Ze,{className:"w-3 h-3"})})]},Z))})]})]})]}),a.jsxs("div",{className:"p-4 border-t-2 border-gray-200 bg-gradient-to-r from-gray-50 to-white rounded-b-3xl flex gap-3 justify-end flex-shrink-0 sticky bottom-0 z-10 shadow-lg",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:()=>{Re.forEach(k=>URL.revokeObjectURL(k.preview)),rt([]),U(!1)},className:"rounded-xl border-2 border-gray-300 hover:border-gray-400 px-6 py-2.5 font-semibold shadow-sm hover:shadow-md transition-all",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"})," Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-green-500 hover:bg-green-600 text-white rounded-xl px-6 py-2.5 font-semibold shadow-lg hover:shadow-xl transition-all",children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"})," Signaler"]})]})]})]})}),a.jsx(zr,{isOpen:A.show,title:"Supprimer l'accident",message:"tes-vous sr de vouloir supprimer cet accident ? Cette action est irrversible.",onConfirm:async()=>{try{await vn.delete(A.id),T({show:!1,id:null}),await Se(n),gt("Accident supprim avec succs","success")}catch(k){console.error("Erreur lors de la suppression:",k),gt("Erreur lors de la suppression: "+(k.message||"Erreur inconnue"),"error"),T({show:!1,id:null})}},onCancel:()=>T({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),ht&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>et(null),children:a.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>et(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsx("img",{src:ht,alt:"Photo problme",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),kt&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>Ft(null),children:a.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:k=>k.stopPropagation(),children:[a.jsx("button",{onClick:()=>Ft(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsx("img",{src:kt,alt:"Photo ticket essence",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),ze&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(Es,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Supprimer le signalement"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Cette action est irrversible"})]})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("p",{className:"text-gray-700 mb-4",children:"tes-vous sr de vouloir supprimer ce signalement de problme ? Cette action ne peut pas tre annule."}),ze&&(()=>{const k=Z=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[Z]||Z;return a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-800",children:["Type: ",k(ze.type_probleme)]}),a.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:ze.description})]})})(),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(te,{variant:"outline",onClick:()=>Nt(null),className:"rounded-xl",children:"Annuler"}),a.jsxs(te,{onClick:async()=>{try{const k=await da.delete(ze.id);if(k.success){const Z=(n==null?void 0:n.id)||(n==null?void 0:n.type_id),fe=await da.getByChauffeur(Z),Pe=(fe==null?void 0:fe.data)||fe||[];Oe(Pe),gt("Signalement supprim avec succs","success"),Nt(null)}else gt("Erreur lors de la suppression: "+(k.message||"Erreur inconnue"),"error")}catch(k){console.error("Erreur suppression signalement:",k),gt("Erreur lors de la suppression: "+(k.message||"Erreur inconnue"),"error")}},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})}),a.jsx(Br,{children:Vr&&a.jsx(ee.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:`fixed bottom-6 right-6 z-50 max-w-md w-full shadow-2xl rounded-xl overflow-hidden ${Mt==="success"?"bg-green-500":Mt==="error"?"bg-red-500":"bg-blue-500"}`,children:a.jsxs("div",{className:"p-4 flex items-center gap-3",children:[Mt==="success"&&a.jsx(ct,{className:"w-5 h-5 text-white flex-shrink-0"}),Mt==="error"&&a.jsx(qe,{className:"w-5 h-5 text-white flex-shrink-0"}),Mt==="info"&&a.jsx(qe,{className:"w-5 h-5 text-white flex-shrink-0"}),a.jsx("p",{className:"text-white font-medium flex-1",children:Vr}),a.jsx("button",{onClick:()=>Ur(null),className:"text-white hover:text-gray-200 transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})})]})})})]})}function s8(){const[e,t]=V.useState(null);return a.jsx(Kx,{activeTab:e,setActiveTab:t,children:a.jsx(a8,{activeTab:e,setActiveTab:t})})}function i8(){const e=at(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all"),[u,f]=N.useState("all"),[d,m]=N.useState(!1);N.useEffect(()=>{const v=localStorage.getItem("chauffeur_session");if(!v){e(ke("ChauffeurLogin"));return}const _=JSON.parse(v);r(_);const P=_.id||_.type_id;P&&g(P)},[e]);const g=async v=>{o(!0);try{const _=await lt.getByUser(v,"chauffeur"),C=(Array.isArray(_==null?void 0:_.data)?_.data:Array.isArray(_)?_:[]).sort(($,A)=>{const T=new Date($.date||$.date_creation||0);return new Date(A.date||A.date_creation||0)-T});s(C)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{o(!1)}},b=async v=>{try{await lt.marquerLue(v),s(_=>_.map(P=>P.id===v?{...P,lue:!0}:P))}catch(_){console.error("Erreur lors de la mise  jour:",_)}},h=async v=>{try{await lt.delete(v),s(_=>_.filter(P=>P.id!==v))}catch(_){console.error("Erreur lors de la suppression:",_)}},j=async()=>{if(!t)return;const v=t.id||t.type_id;if(v)try{await lt.deleteAll(v,"chauffeur"),s([])}catch(_){console.error("Erreur lors de la suppression de toutes les notifications:",_)}},p=v=>{if(!v)return"";const _=new Date(v),C=new Date-_,$=Math.floor(C/6e4),A=Math.floor(C/36e5),T=Math.floor(C/864e5);return $<1?" l'instant":$<60?`Il y a ${$} min`:A<24?`Il y a ${A}h`:T<7?`Il y a ${T}j`:_.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},y=(v,_)=>{const P=(_==null?void 0:_.toLowerCase())||"",C=(v==null?void 0:v.toLowerCase())||"";return C==="alerte"||P.includes("accident")||P.includes("urgent")?a.jsx(qe,{className:"w-5 h-5 text-red-500"}):C==="warning"||P.includes("attention")||P.includes("avertissement")?a.jsx(Es,{className:"w-5 h-5 text-orange-500"}):P.includes("message")||P.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):P.includes("rapport")||P.includes("rapports")?a.jsx(ya,{className:"w-5 h-5 text-purple-500"}):C==="success"||P.includes("confirm")||P.includes("valid")?a.jsx(ct,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},x=(v,_)=>{const P=(v==null?void 0:v.toLowerCase())||"",C=(_==null?void 0:_.toLowerCase())||"";return P==="alerte"||C.includes("accident")||C.includes("urgent")?"bg-red-50 border-red-200":P==="warning"||C.includes("attention")?"bg-orange-50 border-orange-200":P==="success"||C.includes("confirm")||C.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},S=n.filter(v=>{var _;return!(l==="unread"&&v.lue||l==="read"&&!v.lue||u!=="all"&&((_=v.type)==null?void 0:_.toLowerCase())!==u.toLowerCase())}),w=n.filter(v=>!v.lue).length;return i?a.jsx(Kx,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Kx,{title:"Mes Notifications",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("ChauffeurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-green-600 mb-4 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:w>0?`${w} notification${w>1?"s":""} non lue${w>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par statut"]}),a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes"}),a.jsxs(H,{value:"unread",children:["Non lues (",n.filter(v=>!v.lue).length,")"]}),a.jsxs(H,{value:"read",children:["Lues (",n.filter(v=>v.lue).length,")"]})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par type"]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les types"}),a.jsx(H,{value:"info",children:"Informations"}),a.jsx(H,{value:"alerte",children:"Alertes"}),a.jsx(H,{value:"warning",children:"Avertissements"}),a.jsx(H,{value:"success",children:"Succs"})]})]})]})]}),n.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 mt-4 border-t border-gray-200",children:[w>0&&a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{n.filter(v=>!v.lue).forEach(v=>b(v.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50 rounded-xl",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les notifications"]})]})]}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:S.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:l==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${l==="unread"?"non lue":"lue"} trouve.`})]}):S.map((v,_)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${v.lue?"border-gray-300 opacity-75":"border-green-500"} ${x(v.type,v.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${v.lue?"opacity-50":""}`,children:y(v.type,v.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${v.lue?"line-through":""}`,children:v.titre}),!v.lue&&a.jsx("span",{className:"px-2 py-1 bg-green-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:v.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:p(v.date||v.date_creation)}),v.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:v.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!v.lue&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>b(v.id),className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",title:"Marquer comme lu",children:a.jsx(ct,{className:"w-5 h-5"})}),a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>h(v.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})})},v.id))}),a.jsx(zr,{isOpen:d,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{j(),m(!1)},onCancel:()=>m(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function o8(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=(l,c)=>{var f;if(((f=l==null?void 0:l.response)==null?void 0:f.status)===401)return"Email ou mot de passe incorrect.";const u=((c==null?void 0:c.message)||(l==null?void 0:l.message)||"").toLowerCase();return u.includes("credentials")||u.includes("invalid")||u.includes("incorrect")?"Email ou mot de passe incorrect.":u.includes("not found")||u.includes("introuvable")?"Aucun compte responsable trouv avec cet email.":u.includes("inactive")||u.includes("inactif")?"Votre compte est inactif. Contactez l'administration.":"Email ou mot de passe incorrect."},o=async l=>{r(!0),s("");try{const c=await es.login(l.email,l.password,"responsable");c.success?(localStorage.setItem("responsable_session",JSON.stringify(c.user)),es.saveUser(c.user),e(ke("ResponsableDashboard"))):s(i(null,c))}catch(c){console.error("Erreur de connexion:",c),s(i(c,null))}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Responsable Bus",icon:tt,onLogin:o,showRegister:!1,loading:t,error:n})}function AC({responsable:e,notifications:t=[],onLogout:r,activeTab:n,setActiveTab:s,onCollapseChange:i}){var g,b,h,j;at(),fn();const[o,l]=N.useState(!1),[c,u]=N.useState(!1);N.useEffect(()=>{i&&i(o)},[o,i]),N.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&u(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const f=[{title:"Dashboard",icon:wv,id:null},{title:"Prsences",icon:Bs,id:"presence"},{title:"lves",icon:zt,id:"eleves"},{title:"Mon Bus",icon:tt,id:"bus"},{title:"Communication",icon:uf,id:"communication"},{title:"Accidents",icon:qe,id:"accidents"},{title:"Profil",icon:ft,id:"profile"}],d=p=>{s&&s(p.id),window.innerWidth<1024&&u(!1)},m=t.filter(p=>!p.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{typeof window<"u"&&window.innerWidth>=1024?(l(!o),u(!1)):u(!c)},className:"fixed top-4 left-4 z-50 p-2.5 bg-purple-500 text-white rounded-xl shadow-lg hover:bg-purple-600 transition-colors",children:!c&&o?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ze,{className:"w-5 h-5"})}),a.jsx(Br,{children:c&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(ee.aside,{initial:!1,animate:{width:o?"80px":"280px",x:c?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-purple-50 to-white
          border-r-2 border-purple-200 shadow-2xl z-40
          flex flex-col
          ${o?"items-center":""}
        `,children:[!o&&e&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-purple-200 mt-16",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md",children:((g=e.prenom)==null?void 0:g[0])||((b=e.nom)==null?void 0:b[0])||"R"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-bold text-gray-800 text-base truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:e.email})]})]})}),o&&e&&a.jsx("div",{className:"mt-16 w-12 h-12 bg-purple-500 rounded-full flex items-center justify-center text-white font-bold text-lg shadow-md mx-auto",children:((h=e.prenom)==null?void 0:h[0])||((j=e.nom)==null?void 0:j[0])||"R"}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:f.map((p,y)=>{const x=n===p.id,S=p.icon,w=p.id==="accidents";let v=0;p.id==="communication"&&(v=m);const _=v>0;return a.jsxs(ee.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.05},onClick:()=>d(p),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${x?w?"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg":"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg":"text-gray-700 hover:bg-purple-100 hover:text-purple-700"}
                    ${o?"justify-center":""}
                  `,title:o?p.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:`w-5 h-5 ${x?"text-white":"text-gray-600"}`}),_&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:v>99?"99+":v})]}),!o&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:p.title})]},p.id||"dashboard")})})}),a.jsx("div",{className:"p-4 border-t border-purple-200 space-y-2",children:a.jsxs(ee.button,{onClick:r,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${o?"justify-center":""}
            `,title:o?"Dconnexion":"",children:[a.jsx(Mi,{className:"w-5 h-5"}),!o&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${o?"ml-[80px]":"ml-[280px]"}
        `})]})}function l8({eleves:e,presences:t,onTogglePresence:r,selectedDate:n,onDateChange:s,readOnly:i=!1,onNotifyAbsence:o=null}){const l=()=>new Date().getHours()<13?"matin":"soir",[c,u]=N.useState("all"),[f,d]=N.useState(""),m=l(),[g,b]=N.useState(new Set),[h,j]=N.useState(new Set),[p,y]=N.useState(new Set),x=_=>{const P=t.find(C=>C.eleve_id===_&&C.date===n);return P?{matin:P.present_matin,soir:P.present_soir,hasRecord:!0}:{matin:null,soir:null,hasRecord:!1}},S=e.filter(_=>{if(p.has(_.id))return!1;const P=c==="all"||_.groupe===c,C=_.nom.toLowerCase().includes(f.toLowerCase())||_.prenom.toLowerCase().includes(f.toLowerCase());if(!P||!C)return!1;const $=x(_.id);return $.hasRecord?!(m==="matin"?$.matin:$.soir):!0}),w=async _=>{i||(b(P=>new Set(P).add(_)),setTimeout(async()=>{await r(_,m,!0),setTimeout(()=>{b(C=>{const $=new Set(C);return $.delete(_),$})},500)},300))},v=async _=>{if(i)return;const P=e.find(C=>C.id===_);P&&(j(C=>new Set(C).add(_)),setTimeout(async()=>{await r(_,m,!1),y($=>new Set($).add(_)),setTimeout(()=>{j($=>{const A=new Set($);return A.delete(_),A}),o&&o(P,m)},500)},300))};return a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Bs,{className:"w-6 h-6"}),"Gestion des Prsences"]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx(le,{placeholder:"Rechercher un lve...",value:f,onChange:_=>d(_.target.value),className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"}),a.jsxs($e,{value:c,onValueChange:u,children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les groupes"}),a.jsx(H,{value:"A",children:"Groupe A"}),a.jsx(H,{value:"B",children:"Groupe B"})]})]})]})]}),a.jsxs("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:[!1,a.jsx(Br,{mode:"popLayout",children:a.jsx("div",{className:"space-y-2",children:S.map((_,P)=>{x(_.id);const C=g.has(_.id),$=h.has(_.id);p.has(_.id);let A="white",T="rgb(243 244 246)",O=_.sexe==="Masculin"?"bg-purple-100":"bg-pink-100",L=a.jsx(ft,{className:`w-6 h-6 ${_.sexe==="Masculin"?"text-purple-500":"text-pink-500"}`});return C?(A="rgb(220 252 231)",T="rgb(34 197 94)",O="bg-green-200",L=a.jsx(ee.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:a.jsx(Bs,{className:"w-6 h-6 text-green-600",strokeWidth:3})})):$&&(A="rgb(254 242 242)",T="rgb(239 68 68)",O="bg-red-200",L=a.jsx(ee.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30},children:a.jsx(Ze,{className:"w-6 h-6 text-red-600",strokeWidth:3})})),a.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:C||$?.7:1,x:0,backgroundColor:A,borderColor:T},exit:{opacity:0,x:20,scale:.9,backgroundColor:C?"rgb(220 252 231)":"rgb(254 242 242)"},transition:{duration:.3},className:`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${C?"bg-green-100 border-green-500":$?"bg-red-100 border-red-500":"bg-white border-gray-100 hover:border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-colors ${O}`,children:L}),a.jsxs("div",{children:[a.jsxs("h4",{className:"font-semibold text-gray-800",children:[_.nom," ",_.prenom]}),a.jsxs("div",{className:"flex gap-3 text-sm text-gray-500",children:[a.jsx("span",{children:_.classe}),a.jsxs("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Groupe ",_.groupe]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ee.button,{onClick:()=>w(_.id),disabled:i||C,whileHover:!i&&!C?{scale:1.1}:{},whileTap:!i&&!C?{scale:.95}:{},className:`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${i||C?"cursor-default opacity-50":"cursor-pointer"} bg-green-500 text-white shadow-lg shadow-green-200 hover:bg-green-600`,title:"Marquer comme prsent",children:a.jsx(Bs,{className:"w-6 h-6",strokeWidth:3})}),a.jsx(ee.button,{onClick:()=>v(_.id),disabled:i||C||$,whileHover:!i&&!C&&!$?{scale:1.1}:{},whileTap:!i&&!C&&!$?{scale:.95}:{},className:`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${i||C||$?"cursor-default opacity-50":"cursor-pointer"} bg-red-500 text-white shadow-lg shadow-red-200 hover:bg-red-600`,title:"Marquer comme absent et envoyer un message",children:a.jsx(Ze,{className:"w-6 h-6",strokeWidth:3})})]})]},_.id)})})}),S.length===0&&e.length>0&&a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"mb-2",children:"Tous les lves sont marqus comme prsents pour cette priode"}),a.jsxs("p",{className:"text-sm text-gray-400",children:["(",e.length," lve",e.length>1?"s":""," prsent",e.length>1?"s":"",")"]})]}),e.length===0&&a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx(ft,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun lve assign  ce bus"})]})]}),a.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:a.jsxs("div",{className:"flex justify-around text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:e.filter(_=>{const P=x(_.id);return P.hasRecord&&(m==="matin"?P.matin:P.soir)}).length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Prsents"})]}),a.jsx("div",{className:"w-px bg-gray-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-red-500",children:e.filter(_=>{const P=x(_.id);return P.hasRecord&&(m==="matin"?!P.matin:!P.soir)}).length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Absents"})]}),a.jsx("div",{className:"w-px bg-gray-200"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-gray-700",children:e.length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Total"})]})]})})]})}function c8(){var Ta;const e=at(),[t,r]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,b]=N.useState(!1),[h,j]=N.useState(je(new Date,"yyyy-MM-dd")),[p,y]=N.useState(!0),[x,S]=N.useState(null),[w,v]=N.useState(!1),[_,P]=N.useState("today"),[C,$]=N.useState(""),[A,T]=N.useState("all"),[O,L]=N.useState(""),[M,F]=N.useState([]),[R,B]=N.useState(!1),[z,I]=N.useState(null),[X,re]=N.useState({show:!1,id:null}),[W,de]=N.useState(null),[Ae,Be]=N.useState(null),[K,U]=N.useState({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"}),[J,D]=N.useState([]),[Y,G]=N.useState(!1),[ie,pe]=N.useState({destinataire:"tous",bus_id:null,eleve_id:null,titre:"",message:"",type:"info"}),[xe,q]=N.useState([]),[oe,Oe]=N.useState(null),[_e,Ce]=N.useState([]),[Fe,ye]=N.useState({show:!1,messageId:null}),[Re,rt]=N.useState({nom:"",prenom:"",email:"",telephone:""});N.useEffect(()=>{t&&rt({nom:t.nom||"",prenom:t.prenom||"",email:t.email||"",telephone:t.telephone||""})},[t]),N.useEffect(()=>{const E=localStorage.getItem("responsable_session");if(!E){e(ke("ResponsableLogin"));return}const Q=JSON.parse(E);r(Q),ht(Q)},[e]),N.useEffect(()=>{if(!n||!oe)return;const E=async()=>{try{const he=je(new Date,"yyyy-MM-dd"),Ee={},Ne=[];if(n&&n.chauffeur_id)try{const ve=await XP.getByChauffeur(n.chauffeur_id),Se=((ve==null?void 0:ve.data)||ve||[]).find(k=>k.date===he);if(Se&&Se.heure_depart_reelle&&oe&&oe.id===n.trajet_id){const k=Se.periode,Z=k==="matin"?oe.heure_depart_matin_a:oe.heure_depart_soir_a;if(Z){const[fe,Pe]=Z.split(":").map(Number),[me,se]=Se.heure_depart_reelle.split(":").map(Number),ce=me*60+se-(fe*60+Pe);ce>10&&Ne.push({bus:n,retard:ce,periode:k})}}}catch(ve){console.warn("Erreur vrification retard bus",n.id,ve)}if(Ne.length>0&&t){for(const ve of Ne)if(!d.some(Se=>{var k,Z;return((k=Se.titre)==null?void 0:k.includes(`Retard Bus ${ve.bus.numero.toString().replace(/^#\s*/,"")}`))&&((Z=Se.date)==null?void 0:Z.startsWith(he))}))try{const Se=await jn.getAll(),Z=((Se==null?void 0:Se.data)||Se||[]).filter(se=>se.bus_id===ve.bus.id&&se.statut==="Active").map(se=>se.eleve_id),fe=await Yt.getAll(),me=((fe==null?void 0:fe.data)||fe||[]).filter(se=>Z.includes(se.id)&&se.tuteur_id).map(se=>lt.create({destinataire_id:se.tuteur_id,destinataire_type:"tuteur",titre:`Retard Bus ${ve.bus.numero.toString().replace(/^#\s*/,"")}`,message:`Le bus ${ve.bus.numero.toString().replace(/^#\s*/,"")} a un retard de ${ve.retard} minutes pour le trajet ${ve.periode==="matin"?"du matin":"du soir"}.`,type:"alerte",date:new Date().toISOString()}));await Promise.all(me)}catch(Se){console.error("Erreur envoi notification retard:",Se)}}}catch(he){console.error("Erreur vrification retards:",he)}};E();const Q=setInterval(E,5*60*1e3);return()=>clearInterval(Q)},[n,oe,t]);const ht=async E=>{try{let Q=E;if(E.type_id)try{const k=await Fa.getById(E.type_id);Q=(k==null?void 0:k.data)||k||E,r(Q)}catch(k){console.warn("Erreur chargement donnes responsable:",k)}const he=await Pr.getAll(),Ee=(he==null?void 0:he.data)||he||[],Ne=E.type_id||E.id,ve=Ee.find(k=>k.responsable_id===Ne);if(s(ve||null),console.log("Responsable ID:",Ne),console.log("Bus trouv:",ve),ve){if(ve.chauffeur_id)try{const k=await an.getById(ve.chauffeur_id),Z=(k==null?void 0:k.data)||k;o(Z)}catch(k){console.warn("Chauffeur non trouv:",k)}try{console.log("Chargement lves pour bus_id:",ve.id);const k=await Yt.getByBus(ve.id);console.log("Rponse lves:",k);const Z=(k==null?void 0:k.data)||k||[];console.log("lves chargs:",Z),c(Array.isArray(Z)?Z:[])}catch(k){console.error("Erreur chargement lves:",k),c([])}}else console.warn("Aucun bus trouv pour le responsable_id:",Ne),c([]);try{const k=await ua.getByDate(h,ve==null?void 0:ve.id),fe=((k==null?void 0:k.data)||k||[]).filter(Pe=>!Pe.bus_id||Pe.bus_id===ve.id||!Pe.responsable_id||Pe.responsable_id===Ne);f(fe)}catch(k){console.warn("Prsences non disponibles:",k),f([])}const ue=await lt.getByUser(Ne,"responsable"),Se=(ue==null?void 0:ue.data)||ue||[];m(Se.sort((k,Z)=>new Date(Z.date||0)-new Date(k.date||0)));try{const k=await lt.getSentByResponsable(Ne),Z=(k==null?void 0:k.data)||k||[];Ce(Z.sort((fe,Pe)=>new Date(Pe.date||0)-new Date(fe.date||0)))}catch(k){console.warn("Erreur chargement messages envoys:",k),Ce([])}try{console.log("Chargement accidents pour responsable_id:",Ne);const k=await vn.getByResponsable(Ne);console.log("Rponse accidents:",k);const Z=(k==null?void 0:k.data)||k||[];console.log("Accidents chargs:",Z),F(Array.isArray(Z)?Z.sort((fe,Pe)=>new Date(Pe.date||0)-new Date(fe.date||0)):[])}catch(k){console.error("Erreur chargement accidents:",k),F([])}if(ve&&ve.trajet_id)try{const k=await ha.getById(ve.trajet_id),Z=(k==null?void 0:k.data)||k;Oe(Z)}catch(k){console.warn("Erreur chargement trajet:",k)}try{const k=await ri.getAll(),Z=(k==null?void 0:k.data)||k||[];q(Z)}catch(k){console.warn("Erreur chargement tuteurs:",k)}}catch(Q){console.error("Erreur lors du chargement:",Q)}y(!1)},et=()=>{localStorage.removeItem("responsable_session"),e(ke("Home"))},[Ke,Ye]=N.useState(null),[kt,Ft]=N.useState("success"),ze=(E,Q="success")=>{Ye(E),Ft(Q),setTimeout(()=>{Ye(null)},4e3)},Nt=(E,Q=1200,he=1200,Ee=.7)=>new Promise(Ne=>{const ve=new FileReader;ve.onload=ue=>{const Se=new Image;Se.onload=()=>{const k=document.createElement("canvas");let Z=Se.width,fe=Se.height;Z>fe?Z>Q&&(fe=fe*Q/Z,Z=Q):fe>he&&(Z=Z*he/fe,fe=he),k.width=Z,k.height=fe,k.getContext("2d").drawImage(Se,0,0,Z,fe);const me=k.toDataURL("image/jpeg",Ee);Ne({data:me,name:E.name,type:"image/jpeg"})},Se.src=ue.target.result},ve.readAsDataURL(E)}),Qe=E=>{if(!E)return"";try{const Q=new Date(E);return je(Q,"yyyy-MM-dd")}catch{return E.split("T")[0]||E.split(" ")[0]}},Qt=()=>{const E=new Date;switch(E.setHours(0,0,0,0),_){case"yesterday":return je(Xs(E,1),"yyyy-MM-dd");case"dayBefore":return je(Xs(E,2),"yyyy-MM-dd");case"lastMonth":const Q=Vo(E,1);return je(mf(Q),"yyyy-MM-dd");case"custom":return C||je(E,"yyyy-MM-dd");default:return je(E,"yyyy-MM-dd")}},Vr=N.useMemo(()=>!l||l.length===0?[]:l.filter(E=>{const Q=A==="all"||A===""||E.groupe&&E.groupe.toString().toUpperCase()===A.toString().toUpperCase(),he=O.toLowerCase().trim(),Ee=he===""||E.nom&&E.nom.toLowerCase().includes(he)||E.prenom&&E.prenom.toLowerCase().includes(he)||E.nom&&E.prenom&&`${E.prenom} ${E.nom}`.toLowerCase().includes(he);return Q&&Ee}),[l,A,O]);N.useEffect(()=>{x==="eleves"&&n&&t?(async()=>{try{const Q=Qt(),he=(t==null?void 0:t.type_id)||(t==null?void 0:t.id);console.log(" Chargement prsences pour date:",Q,"bus:",n.id,"filtre:",_);const Ee=await ua.getByDate(Q,n==null?void 0:n.id),Ne=(Ee==null?void 0:Ee.data)||Ee||[];console.log(" Prsences reues pour date",Q,":",Ne.length,"prsences");const ve=Ne.map(ue=>{const Se=Qe(ue.date);return{...ue,date_normalized:Se,date:ue.date}}).filter(ue=>{const Se=!ue.bus_id||ue.bus_id===n.id,k=!ue.responsable_id||ue.responsable_id===he,Z=ue.date_normalized||Qe(ue.date),fe=Z===Q;return fe||console.log(" Date ne correspond pas:",{presenceDate:ue.date,normalized:Z,effectiveDate:Q,eleve_id:ue.eleve_id}),Se&&k&&fe});console.log(" Prsences filtres pour date",Q,":",ve.length,"prsences"),f(ve)}catch(Q){console.error(" Erreur chargement prsences pour date filtre:",Q),f([])}})():x==="eleves"&&!n&&f([])},[_,C,x,n==null?void 0:n.id,t==null?void 0:t.type_id,t==null?void 0:t.id,Qt,Qe]);const Ur=({dateFilter:E,setDateFilter:Q,customDate:he,setCustomDate:Ee,groupFilter:Ne,setGroupFilter:ve,searchTerm:ue,setSearchTerm:Se})=>a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsx(le,{placeholder:"Rechercher un lve...",value:ue||"",onChange:k=>{Se(k.target.value)},className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"}),a.jsxs($e,{value:E,onValueChange:k=>{Q(k),k!=="custom"&&Ee("")},children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Date"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"today",children:"Aujourd'hui"}),a.jsx(H,{value:"yesterday",children:"Hier"}),a.jsx(H,{value:"dayBefore",children:"Avant-hier"}),a.jsx(H,{value:"lastMonth",children:"Mois dernier"}),a.jsx(H,{value:"custom",children:"Jour spcifique"})]})]}),a.jsxs($e,{value:Ne,onValueChange:k=>{ve(k)},children:[a.jsx(Me,{className:"bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les groupes"}),a.jsx(H,{value:"A",children:"Groupe A"}),a.jsx(H,{value:"B",children:"Groupe B"})]})]})]}),E==="custom"&&a.jsxs("div",{className:"relative",children:[a.jsx(Jr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-purple-600 z-10"}),a.jsx(le,{type:"date",value:he||"",onChange:k=>{Ee(k.target.value)},className:"pl-10 bg-white/90 border-0 rounded-xl focus:ring-purple-500 focus:border-purple-500"})]})]}),Mt=async E=>{try{await lt.marquerLue(E),m(Q=>Q.map(he=>he.id===E?{...he,lue:!0}:he))}catch(Q){console.error("Erreur lors de la mise  jour:",Q)}},Oa=async()=>{if(!t)return;const E=t.id||t.type_id;if(E)try{await lt.deleteAll(E,"responsable"),m([])}catch(Q){console.error("Erreur lors de la suppression de toutes les notifications:",Q)}},gt=async(E,Q,he)=>{try{const Ee=u.find(ve=>ve.eleve_id===E&&ve.date===h);let Ne;if(Ee){const ve={...Ee,[Q==="matin"?"present_matin":"present_soir"]:he},ue=await ua.marquer(ve);Ne=(ue==null?void 0:ue.data)||ue,f(Se=>Se.map(k=>k.id===Ee.id?{...k,...Ne}:k))}else{const ve={eleve_id:E,date:h,present_matin:Q==="matin"?he:!1,present_soir:Q==="soir"?he:!1,bus_id:n==null?void 0:n.id,responsable_id:(t==null?void 0:t.type_id)||(t==null?void 0:t.id)},ue=await ua.marquer(ve);Ne=(ue==null?void 0:ue.data)||ue,f(Se=>[...Se,Ne])}try{const ve=await ua.getByDate(h),ue=(ve==null?void 0:ve.data)||ve||[];f(ue)}catch(ve){console.warn("Erreur rechargement prsences:",ve)}if(!he){const ve=l.find(ue=>ue.id===E);if(ve&&ve.tuteur_id)try{await lt.create({destinataire_id:ve.tuteur_id,destinataire_type:"tuteur",titre:"Absence signale",message:`${ve.prenom} ${ve.nom} a t marqu(e) absent(e) le ${je(new Date(h),"dd/MM/yyyy")} (${Q}).`,type:"alerte",date:new Date().toISOString()})}catch(ue){console.warn("Erreur envoi notification:",ue)}}}catch(Ee){console.error("Erreur lors de la modification de prsence:",Ee),ze("Erreur lors de la modification de prsence: "+(Ee.message||"Erreur inconnue"),"error")}},Ht=async(E,Q="matin")=>{try{if(!E.tuteur_id){ze("Aucun tuteur trouv pour cet lve","error");return}S("communication"),G(!0),pe({destinataire:"eleve",bus_id:(n==null?void 0:n.id)||null,eleve_id:E.id,titre:`Absence de ${E.prenom} ${E.nom}`,message:`Bonjour,

Je vous informe que ${E.prenom} ${E.nom} a t marqu(e) absent(e) le ${je(new Date(h),"dd/MM/yyyy")} (${Q==="matin"?"matin":"soir"}).

Veuillez nous contacter si vous avez des questions.

Cordialement.`,type:"alerte"})}catch(he){console.error("Erreur lors de la redirection:",he),ze("Erreur lors de la redirection vers Communication","error")}};d.filter(E=>!E.lue).length;const en=(i==null?void 0:i.nombre_accidents)||0;return p?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-purple-50",children:[a.jsx(AC,{responsable:t,notifications:d,onLogout:et,activeTab:x,setActiveTab:S,onCollapseChange:v}),a.jsx("main",{className:`min-h-screen p-4 md:p-8 pt-20 lg:pt-8 transition-all duration-300 ${w?"lg:ml-[80px]":"lg:ml-[280px]"}`,children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zt,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",t==null?void 0:t.prenom," ",t==null?void 0:t.nom]}),a.jsx("p",{className:"text-gray-500",children:t==null?void 0:t.email})]})]})}),x===null&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ea,{title:"Mon Bus",value:n!=null&&n.numero?n.numero.toString().replace(/^#\s*/,""):"-",icon:tt,color:"purple"}),a.jsx(ea,{title:"lves",value:l.length,icon:zt,color:"purple"}),a.jsx(ea,{title:"Accidents chauffeur",value:en,icon:qe,color:en>=3?"red":"purple"}),a.jsx(ea,{title:"Mon Salaire",value:`${(t==null?void 0:t.salaire)||0} DH`,icon:cf,color:"purple"})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(tt,{className:"w-6 h-6 text-purple-500"}),"Vue d'ensemble"]}),n&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informations du Bus"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Numro:"}),a.jsx("span",{className:"font-bold text-purple-700",children:n.numero.toString().replace(/^#\s*/,"")})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Marque:"}),a.jsx("span",{className:"font-semibold",children:n.marque})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Modle:"}),a.jsx("span",{className:"font-semibold",children:n.modele})]}),i&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Chauffeur:"}),a.jsxs("span",{className:"font-semibold",children:[i.prenom," ",i.nom]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-2xl p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-4",children:"Informations Personnelles"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Nom complet:"}),a.jsxs("span",{className:"font-semibold",children:[t==null?void 0:t.prenom," ",t==null?void 0:t.nom]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Email:"}),a.jsx("span",{className:"font-semibold",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone:"}),a.jsx("span",{className:"font-semibold",children:t==null?void 0:t.telephone})]}),(t==null?void 0:t.zone_responsabilite)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Zone:"}),a.jsx("span",{className:"font-semibold",children:t.zone_responsabilite})]})]})]})]})]})]}),x==="profile"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(zt,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500",children:"Modifiez vos informations personnelles"})]}),a.jsxs("form",{onSubmit:async E=>{E.preventDefault();try{if(!(t!=null&&t.id)&&!(t!=null&&t.type_id)){ze("Erreur: ID responsable non trouv","error");return}const Q=(t==null?void 0:t.id)||(t==null?void 0:t.type_id),he={nom:Re.nom,prenom:Re.prenom,email:Re.email,telephone:Re.telephone};await Fa.update(Q,he);const Ee=localStorage.getItem("responsable_session");if(Ee){const Ne=JSON.parse(Ee);await ht(Ne)}ze("Profil mis  jour avec succs","success")}catch(Q){console.error("Erreur mise  jour profil:",Q),ze("Erreur lors de la mise  jour: "+(Q.message||"Erreur inconnue"),"error")}},className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"nom",children:"Nom"}),a.jsx(le,{id:"nom",value:Re.nom,onChange:E=>rt({...Re,nom:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"prenom",children:"Prnom"}),a.jsx(le,{id:"prenom",value:Re.prenom,onChange:E=>rt({...Re,prenom:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"email",children:"Email"}),a.jsx(le,{id:"email",type:"email",value:Re.email,onChange:E=>rt({...Re,email:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{htmlFor:"telephone",children:"Tlphone"}),a.jsx(le,{id:"telephone",value:Re.telephone,onChange:E=>rt({...Re,telephone:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs(te,{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl py-6 text-lg font-semibold shadow-lg flex items-center justify-center gap-3",children:[a.jsx(ts,{className:"w-5 h-5"}),"Enregistrer les modifications"]})]})]}),x==="presence"&&a.jsx(l8,{eleves:l,presences:u,onTogglePresence:gt,selectedDate:h,onDateChange:j,onNotifyAbsence:Ht}),x==="eleves"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:[a.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[a.jsx(zt,{className:"w-6 h-6"}),"Liste des lves"]}),a.jsx(Ur,{dateFilter:_,setDateFilter:P,customDate:C,setCustomDate:$,groupFilter:A,setGroupFilter:T,searchTerm:O,setSearchTerm:L})]}),(()=>{const E=Qt(),he=new Date().getHours()<13?"matin":"soir",Ee=Qe(E),Ne=Vr.filter(ue=>{const Se=u.find(fe=>{const Pe=Qe(fe.date);return fe.eleve_id===ue.id&&Pe===Ee});if(!Se)return!1;const k=Se.present_matin===!0||Se.present_matin===1||Se.present_matin==="1",Z=Se.present_soir===!0||Se.present_soir===1||Se.present_soir==="1";return he==="matin"?k:Z}),ve=Vr.filter(ue=>{const Se=u.find(Pe=>{const me=Qe(Pe.date);return Pe.eleve_id===ue.id&&me===Ee});if(!Se)return!1;const k=Se.present_matin===!0||Se.present_matin===1||Se.present_matin==="1",Z=Se.present_soir===!0||Se.present_soir===1||Se.present_soir==="1";return!(he==="matin"?k:Z)});return a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Vr.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Total"})]}),a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ne.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Prsents"})]}),a.jsx("div",{className:"w-px h-8 bg-gray-300"}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:ve.length}),a.jsx("p",{className:"text-xs text-gray-500",children:"Absents"})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:je(new Date(E),"dd MMMM yyyy",{locale:Xt})})]})})})(),a.jsxs("div",{className:"divide-y divide-gray-100 max-h-[500px] overflow-y-auto",children:[Vr.map(E=>{const Q=Qt(),he=Qe(Q),Ee=u.find(k=>{const Z=Qe(k.date);return k.eleve_id===E.id&&Z===he}),ve=new Date().getHours()<13?"matin":"soir";let ue=!1,Se=!1;if(Ee){Se=!0;const k=Ee.present_matin===!0||Ee.present_matin===1||Ee.present_matin==="1",Z=Ee.present_soir===!0||Ee.present_soir===1||Ee.present_soir==="1";ue=ve==="matin"?k:Z}return a.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 hover:bg-purple-50/50 transition-colors cursor-pointer",onClick:()=>e(ke(`ResponsableEleveDetails?eleveId=${E.id}`)),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-14 h-14 rounded-xl bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center shadow-sm",children:a.jsx(ft,{className:"w-7 h-7 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[E.nom," ",E.prenom]}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[a.jsx("span",{className:"text-sm text-gray-600",children:E.classe||"N/A"}),a.jsxs("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:["Groupe ",E.groupe||"N/A"]})]})]})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shadow-md transition-all ${Se?ue?"bg-green-500":"bg-red-500":"bg-gray-200"}`,children:Se?ue?a.jsx(Bs,{className:"w-5 h-5 text-white",strokeWidth:3}):a.jsx(Ze,{className:"w-5 h-5 text-white",strokeWidth:3}):a.jsx("span",{className:"text-gray-400 text-sm font-semibold",children:"-"})})})]})},E.id)}),Vr.length===0&&a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(zt,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{className:"text-lg font-medium",children:"Aucun lve trouv"}),a.jsx("p",{className:"text-sm mt-2",children:"Essayez de modifier vos critres de recherche"})]})]})]}),x==="bus"&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-purple-500"}),"Mon Bus"]}),n?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-5xl font-bold text-purple-600",children:n.numero.toString().replace(/^#\s*/,"")}),a.jsxs("p",{className:"text-gray-500 mt-2",children:[n.marque," ",n.modele]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[n.capacite," places"]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b",children:[a.jsx("span",{className:"text-gray-500",children:"Places occupes"}),a.jsx("span",{className:"font-medium",children:l.length})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-500",children:"Statut"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.statut==="Actif"?"bg-purple-100 text-purple-700":"bg-red-100 text-red-700"}`,children:n.statut})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun bus assign"})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(No,{className:"w-5 h-5 text-purple-500"}),"Mon Trajet"]}),oe?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Trajet"}),a.jsx("p",{className:"text-xl font-bold text-gray-800",children:oe.nom})]}),oe.zones&&a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-2 flex items-center gap-1",children:[a.jsx(Rt,{className:"w-4 h-4"}),"Zones desservies"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(oe.zones)?oe.zones:JSON.parse(oe.zones||"[]")).map((E,Q)=>a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:E},Q))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe A - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[oe.heure_depart_matin_a," - ",oe.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe A - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[oe.heure_depart_soir_a," - ",oe.heure_arrivee_soir_a]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe B - Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[oe.heure_depart_matin_b," - ",oe.heure_arrivee_matin_b]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Groupe B - Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800",children:[oe.heure_depart_soir_b," - ",oe.heure_arrivee_soir_b]})]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-8",children:"Aucun trajet assign"})]}),n&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 md:col-span-2",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-purple-500"}),"Chauffeur"]}),i?a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center",children:a.jsx(ft,{className:"w-8 h-8 text-gray-400"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-800",children:[i.prenom," ",i.nom]}),a.jsx("p",{className:"text-gray-500",children:i.telephone}),a.jsx("p",{className:"text-gray-400 text-sm",children:i.email})]}),a.jsxs("div",{className:"ml-auto",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Accidents:"}),a.jsxs("span",{className:`font-bold ${i.nombre_accidents>=3?"text-red-500":"text-purple-500"}`,children:[i.nombre_accidents," / 3"]})]}),i.nombre_accidents>=3&&a.jsxs("div",{className:"mt-2 bg-red-50 border border-red-200 rounded-xl p-2 text-red-700 text-xs",children:[a.jsx(qe,{className:"w-4 h-4 inline mr-1"}),"Attention: 3 accidents = licenciement + amende 1000 DH"]})]})]}):a.jsx("p",{className:"text-center text-gray-400 py-4",children:"Aucun chauffeur assign"})]})]}),x==="communication"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(uf,{className:"w-6 h-6 text-purple-500"}),"Communication avec les Parents"]}),a.jsxs(te,{onClick:()=>G(!0),className:"bg-purple-500 hover:bg-purple-600 text-white rounded-xl",children:[a.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Nouveau message"]})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4 mb-6",children:a.jsxs("p",{className:"text-sm text-purple-800",children:[a.jsx("strong",{children:" Astuce:"})," Envoyez des notifications groupes pour informer tous les parents d'un bus, ou des messages personnaliss  un parent spcifique."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Messages envoys"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:_e.length})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Parents notifis"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:xe.length})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"lves concerns"}),a.jsx("p",{className:"text-2xl font-bold text-purple-800",children:l.length})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Historique des messages"}),a.jsx("div",{className:"space-y-3",children:_e.length>0?_e.slice(0,20).map(E=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 hover:bg-gray-100 transition-colors relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 pr-12",children:[a.jsx("h4",{className:"font-semibold text-gray-800",children:E.titre}),a.jsx("p",{className:"text-sm text-gray-600 mt-1 whitespace-pre-wrap",children:E.message}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-800 mb-2",children:"Destinataire :"}),E.tuteur_nom||E.tuteur_prenom?a.jsxs("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[(E.tuteur_prenom||E.tuteur_nom)&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ft,{className:"w-4 h-4 text-purple-600"}),a.jsxs("span",{className:"text-sm font-medium text-gray-800",children:[E.tuteur_prenom||""," ",E.tuteur_nom||""]})]}),E.tuteur_telephone&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ou,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:E.tuteur_telephone})]}),E.tuteur_email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ui,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:E.tuteur_email})]})]}):a.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:a.jsx("p",{className:"text-xs text-gray-500 italic",children:"Informations du destinataire non disponibles"})})]})]}),a.jsx("button",{onClick:()=>ye({show:!0,messageId:E.id}),className:"absolute top-4 right-4 p-2 hover:bg-red-100 rounded-lg text-red-600 hover:text-red-700 transition-colors",title:"Supprimer ce message",children:a.jsx(Ut,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:je(new Date(E.date||new Date),"dd MMMM yyyy  HH:mm")})]},E.id)):a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(uf,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun message envoy"}),a.jsx("p",{className:"text-xs mt-1",children:"Les messages que vous envoyez aux parents apparatront ici"})]})})]})]})]})]}),x==="accidents"&&a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-red-50 to-rose-50",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6 text-red-500"}),"Historique des Accidents",a.jsxs("span",{className:"ml-3 text-sm font-normal text-gray-500",children:["(",M.length,")"]})]}),a.jsxs(te,{onClick:()=>B(!0),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl shadow-lg hover:shadow-xl transition-all",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Dclarer un accident"]})]}),M.length===0?a.jsx("div",{className:"p-12 text-center",children:a.jsxs(ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:[a.jsx(ct,{className:"w-16 h-16 mx-auto text-purple-300 mb-4"}),a.jsx("p",{className:"text-gray-500 font-medium",children:"Aucun accident enregistr"}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Continuez  tre vigilant !"})]})}):a.jsx("div",{className:"p-6 space-y-4",children:a.jsx(Br,{children:M.map((E,Q)=>{let he=[];try{if(E.photos){if(Array.isArray(E.photos))he=E.photos;else if(typeof E.photos=="string"&&E.photos.trim()!=="")if(E.photos.trim().startsWith("[")||E.photos.trim().startsWith("{")){const ue=JSON.parse(E.photos);Array.isArray(ue)?he=ue:ue&&typeof ue=="object"&&Array.isArray(ue.photos)&&(he=ue.photos)}else E.photos.startsWith("data:image")&&(he=[E.photos])}he=he.map(ue=>typeof ue=="string"?ue.startsWith("data:image")||ue.startsWith("http")?ue:null:ue&&typeof ue=="object"&&(ue.data||ue.src||ue.url||ue.base64)||null).filter(ue=>ue&&ue.trim()!=="")}catch(ue){console.error("Erreur parsing photos:",ue),he=[]}const Ee=Ae===E.id,Ne={Grave:{bg:"bg-red-50",border:"border-red-200",text:"text-red-700",badge:"bg-red-100 text-red-700",icon:"text-red-500"},Moyenne:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-700",badge:"bg-orange-100 text-orange-700",icon:"text-orange-500"},Lgre:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-700",badge:"bg-purple-100 text-purple-700",icon:"text-purple-500"}},ve=Ne[E.gravite]||Ne.Lgre;return a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:Q*.05},className:`${ve.bg} ${ve.border} border-2 rounded-2xl shadow-md hover:shadow-lg transition-all overflow-hidden`,children:a.jsxs("div",{className:"p-5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-2 rounded-lg ${ve.bg} ${ve.icon}`,children:a.jsx(Es,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${ve.badge} border ${ve.border}`,children:E.gravite}),E.statut&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${E.statut==="Trait"?"bg-green-100 text-green-700":E.statut==="En cours"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:E.statut})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mt-1",children:[a.jsx(Gs,{className:"w-4 h-4"}),a.jsxs("span",{children:[E.date?je(new Date(E.date),"dd MMMM yyyy",{locale:Xt}):"Date inconnue",E.heure&&`  ${E.heure}`]})]})]})]}),a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>Be(Ee?null:E.id),className:"text-gray-500 hover:text-gray-700",children:Ee?a.jsx(Ze,{className:"w-4 h-4"}):a.jsx(ya,{className:"w-4 h-4"})})]}),a.jsx("p",{className:`font-semibold ${ve.text} mb-4 text-base leading-relaxed`,children:E.description}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[E.lieu&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Rt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Lieu"}),a.jsx("p",{className:"font-medium text-gray-800",children:E.lieu})]})]}),E.bus_numero&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(tt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Bus"}),a.jsx("p",{className:"font-medium text-gray-800",children:E.bus_numero})]})]}),E.nombre_eleves!==null&&E.nombre_eleves!==void 0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(zt,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"lves"}),a.jsx("p",{className:"font-medium text-gray-800",children:E.nombre_eleves})]})]}),E.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(qe,{className:"w-4 h-4 text-red-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 text-xs",children:"Blesss"}),a.jsx("p",{className:"font-medium text-red-600",children:E.nombre_blesses})]})]})]}),a.jsx(Br,{children:Ee&&a.jsx(ee.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:a.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[E.degats&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(ya,{className:"w-4 h-4 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Dgts: "}),a.jsx("span",{className:"font-medium text-gray-800",children:E.degats})]})]}),E.chauffeur_nom&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(ft,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Chauffeur: "}),a.jsxs("span",{className:"font-medium text-gray-800",children:[E.chauffeur_prenom," ",E.chauffeur_nom]})]})]}),E.eleves_concernees&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(zt,{className:"w-4 h-4 text-gray-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"lves concerns: "}),a.jsx("span",{className:"font-medium text-gray-800",children:E.eleves_concernees})]})]})]})})}),he.length>0&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(La,{className:"w-4 h-4"}),a.jsxs("span",{className:"font-medium",children:["Photos (",he.length,")"]})]})}),a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-3",children:he.map((ue,Se)=>{const k=typeof ue=="string"?ue:(ue==null?void 0:ue.data)||(ue==null?void 0:ue.src)||ue;return k?a.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>de(k),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 group-hover:border-purple-400 transition-colors",children:[a.jsx("img",{src:k,alt:`Photo accident ${Se+1}`,className:"w-full h-24 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(_i,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},Se):null})})]}),a.jsxs("div",{className:"mt-4 flex gap-2 justify-end pt-4 border-t border-gray-200",children:[a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{var ue,Se;I(E),U({date:E.date?je(new Date(E.date),"yyyy-MM-dd"):je(new Date,"yyyy-MM-dd"),heure:E.heure||je(new Date,"HH:mm"),lieu:E.lieu||"",description:E.description||"",degats:E.degats||"",gravite:E.gravite||"Lgre",nombre_eleves:((ue=E.nombre_eleves)==null?void 0:ue.toString())||"",nombre_blesses:((Se=E.nombre_blesses)==null?void 0:Se.toString())||"0"}),he.length>0?D(he.map((k,Z)=>({preview:typeof k=="string"?k:(k==null?void 0:k.data)||(k==null?void 0:k.src)||k,file:null,id:`existing-${Z}`}))):D([]),B(!0)},className:"rounded-xl text-purple-600 hover:text-purple-700 hover:bg-purple-50",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>re({show:!0,id:E.id}),className:"rounded-xl text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})},E.id)})})})]}),a.jsx(zr,{isOpen:X.show,title:"Supprimer l'accident",message:"tes-vous sr de vouloir supprimer cet accident ? Cette action est irrversible.",onConfirm:async()=>{try{await vn.delete(X.id),re({show:!1,id:null});const E=localStorage.getItem("responsable_session");if(E){const Q=JSON.parse(E);await ht(Q)}else await ht(t);ze("Accident supprim avec succs","success")}catch(E){console.error("Erreur lors de la suppression:",E),ze("Erreur lors de la suppression: "+(E.message||"Erreur inconnue"),"error"),re({show:!1,id:null})}},onCancel:()=>re({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),W&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>de(null),children:a.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:E=>E.stopPropagation(),children:[a.jsx("button",{onClick:()=>de(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsx("img",{src:W,alt:"Photo accident",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),R&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6"}),z?"Modifier un Accident":"Dclarer un Accident"]}),a.jsx("button",{type:"button",onClick:()=>{J.forEach(E=>{E.preview&&E.preview.startsWith("blob:")&&URL.revokeObjectURL(E.preview)}),D([]),B(!1),I(null)},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async E=>{E.preventDefault();try{const Q=J.reduce((me,se)=>me+se.file.size,0),he=10*1024*1024;if(Q>he){ze("La taille totale des photos dpasse 10 MB. Veuillez rduire le nombre ou la taille des images.","error");return}const Ee=J.filter(me=>me.file),Ne=J.filter(me=>!me.file&&me.preview);let ve=[];Ee.length>0&&(ve=await Promise.all(Ee.map(me=>Nt(me.file))));const ue=[...Ne.map(me=>me.preview),...ve.map(me=>me.data)].filter(Boolean),Se=localStorage.getItem("responsable_session"),k=Se?JSON.parse(Se):t,Z=(k==null?void 0:k.type_id)||(k==null?void 0:k.id)||(t==null?void 0:t.type_id)||(t==null?void 0:t.id)||null,fe={date:K.date,heure:K.heure,bus_id:(n==null?void 0:n.id)||null,responsable_id:Z,lieu:K.lieu,description:K.description,degats:K.degats||null,gravite:K.gravite,nombre_eleves:K.nombre_eleves?parseInt(K.nombre_eleves):null,nombre_blesses:K.nombre_blesses?parseInt(K.nombre_blesses):0,blesses:parseInt(K.nombre_blesses)>0,photos:ue.length>0?ue:null};z?(await vn.update(z.id,fe),ze("Accident modifi avec succs","success")):(await vn.create(fe),ze("Accident dclar avec succs","success")),J.forEach(me=>{me.preview&&me.preview.startsWith("blob:")&&URL.revokeObjectURL(me.preview)}),B(!1),I(null),D([]),U({date:je(new Date,"yyyy-MM-dd"),heure:je(new Date,"HH:mm"),lieu:"",description:"",degats:"",gravite:"Lgre",nombre_eleves:"",nombre_blesses:"0"});const Pe=localStorage.getItem("responsable_session");if(Pe){const me=JSON.parse(Pe);await ht(me)}else await ht(t)}catch(Q){console.error("Erreur dclaration accident:",Q),ze("Erreur lors de la dclaration: "+(Q.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Date *"}),a.jsx(le,{type:"date",value:K.date,onChange:E=>U({...K,date:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Heure *"}),a.jsx(le,{type:"time",value:K.heure,onChange:E=>U({...K,heure:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Lieu *"}),a.jsx(le,{value:K.lieu,onChange:E=>U({...K,lieu:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",placeholder:"Adresse de l'accident",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Gravit *"}),a.jsxs($e,{value:K.gravite,onValueChange:E=>U({...K,gravite:E}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Lgre",children:"Lgre"}),a.jsx(H,{value:"Moyenne",children:"Moyenne"}),a.jsx(H,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Nombre d'lves dans le bus"}),a.jsx(le,{type:"number",value:K.nombre_eleves,onChange:E=>U({...K,nombre_eleves:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",min:"0",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Nombre de blesss"}),a.jsx(le,{type:"number",value:K.nombre_blesses,onChange:E=>U({...K,nombre_blesses:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",min:"0",placeholder:"0"})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Description *"}),a.jsx(ja,{value:K.description,onChange:E=>U({...K,description:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:4,placeholder:"Dcrivez l'accident en dtail...",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Dgts"}),a.jsx(ja,{value:K.degats,onChange:E=>U({...K,degats:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:2,placeholder:"Dcrivez les dgts matriels..."})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Photos (optionnel - max 5 photos, 5 MB chacune)"}),a.jsxs("div",{className:"mt-2",children:[a.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:E=>{const Q=Array.from(E.target.files),he=5-J.length;if(he<=0){ze("Vous ne pouvez ajouter que 5 photos maximum","error"),E.target.value="";return}const Ee=Q.slice(0,he),Ne=5*1024*1024,ue=Ee.filter(Se=>Se.size>Ne?(ze(`L'image ${Se.name} est trop grande (max 5 MB)`,"error"),!1):!0).map(Se=>({file:Se,preview:URL.createObjectURL(Se)}));D([...J,...ue]),E.target.value=""},className:"hidden",id:"accident-photos-upload"}),a.jsxs("label",{htmlFor:"accident-photos-upload",className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-xl cursor-pointer hover:border-purple-500 hover:bg-purple-50 transition-colors",children:[a.jsx(La,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Cliquez pour ajouter des photos"})]}),J.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-3 gap-3",children:J.map((E,Q)=>a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:E.preview,alt:`Photo ${Q+1}`,className:"w-full h-24 object-cover rounded-xl border border-gray-200"}),a.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(E.preview),D(J.filter((he,Ee)=>Ee!==Q))},className:"absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(Ut,{className:"w-4 h-4"})})]},Q))})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:()=>{J.forEach(E=>{E.preview&&E.preview.startsWith("blob:")&&URL.revokeObjectURL(E.preview)}),D([]),B(!1),I(null)},className:"rounded-xl border-purple-500 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(qe,{className:"w-4 h-4 mr-2"}),z?"Modifier l'accident":"Dclarer l'accident"]})]})]})]})}),Y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(uf,{className:"w-6 h-6"}),"Envoyer un Message aux Parents"]}),a.jsx("button",{onClick:()=>G(!1),className:"text-white hover:text-purple-100 transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:async E=>{E.preventDefault();try{let Q=[];if(ie.destinataire==="tous"){const k=await jn.getAll(),fe=((k==null?void 0:k.data)||k||[]).filter(se=>se.bus_id===(n==null?void 0:n.id)&&se.statut==="Active").map(se=>se.eleve_id),Pe=await Yt.getAll();Q=((Pe==null?void 0:Pe.data)||Pe||[]).filter(se=>fe.includes(se.id)&&se.tuteur_id).map(se=>se.tuteur_id)}else if(ie.destinataire==="bus"&&n){const k=await jn.getAll(),fe=((k==null?void 0:k.data)||k||[]).filter(se=>se.bus_id===n.id&&se.statut==="Active").map(se=>se.eleve_id),Pe=await Yt.getAll();Q=((Pe==null?void 0:Pe.data)||Pe||[]).filter(se=>fe.includes(se.id)&&se.tuteur_id).map(se=>se.tuteur_id)}else if(ie.destinataire==="eleve"&&ie.eleve_id){const k=l.find(Z=>Z.id===parseInt(ie.eleve_id));k&&k.tuteur_id&&(Q=[k.tuteur_id])}const he=Q.map(k=>lt.create({destinataire_id:k,destinataire_type:"tuteur",titre:ie.titre,message:ie.message,type:ie.type,date:new Date().toISOString()}));await Promise.all(he),ze(`Message envoy  ${Q.length} parent(s) avec succs !`,"success"),G(!1),pe({destinataire:"tous",bus_id:null,eleve_id:null,titre:"",message:"",type:"info"});const Ee=(t==null?void 0:t.type_id)||(t==null?void 0:t.id),Ne=await lt.getByUser(Ee,"responsable"),ve=(Ne==null?void 0:Ne.data)||Ne||[];m(ve.sort((k,Z)=>new Date(Z.date||0)-new Date(k.date||0)));const ue=await lt.getSentByResponsable(Ee),Se=(ue==null?void 0:ue.data)||ue||[];Ce(Se.sort((k,Z)=>new Date(Z.date||0)-new Date(k.date||0)))}catch(Q){console.error("Erreur envoi message:",Q),ze("Erreur lors de l'envoi: "+(Q.message||"Erreur inconnue"),"error")}},className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Destinataire *"}),a.jsxs($e,{value:ie.destinataire,onValueChange:E=>pe({...ie,destinataire:E,bus_id:null,eleve_id:null}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"tous",children:"Tous les parents du bus"}),a.jsx(H,{value:"bus",children:"Parents du bus"}),a.jsx(H,{value:"eleve",children:"Parent d'un lve spcifique"})]})]})]}),ie.destinataire==="bus"&&n&&a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-3",children:a.jsxs("p",{className:"text-sm text-purple-800",children:[a.jsx("strong",{children:"Bus slectionn:"})," Bus ",n.numero.toString().replace(/^#\s*/,"")]})}),ie.destinataire==="eleve"&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Slectionner un lve *"}),a.jsxs($e,{value:((Ta=ie.eleve_id)==null?void 0:Ta.toString())||"",onValueChange:E=>pe({...ie,eleve_id:parseInt(E)}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{placeholder:"Choisir un lve"})}),a.jsx(Te,{children:l.map(E=>a.jsxs(H,{value:E.id.toString(),children:[E.nom," ",E.prenom]},E.id))})]})]}),ie.eleve_id&&(()=>{const E=l.find(Ne=>Ne.id===ie.eleve_id);if(!E||!E.tuteur_id)return null;const Q=xe.find(Ne=>Ne.id===E.tuteur_id),he=Q?`${Q.prenom||""} ${Q.nom||""}`.trim():"Non disponible",Ee=(Q==null?void 0:Q.telephone)||E.telephone_parent||"Non disponible";return a.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:a.jsx(ft,{className:"w-5 h-5 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Tuteur"}),a.jsx("p",{className:"text-base font-semibold text-gray-800",children:he}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(ou,{className:"w-4 h-4 text-purple-500"}),a.jsx("p",{className:"text-sm text-gray-600",children:Ee})]})]})]})})})()]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Type de message *"}),a.jsxs($e,{value:ie.type,onValueChange:E=>pe({...ie,type:E}),children:[a.jsx(Me,{className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"info",children:"Information"}),a.jsx(H,{value:"alerte",children:"Alerte"}),a.jsx(H,{value:"urgence",children:"Urgence"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Titre *"}),a.jsx(le,{value:ie.titre,onChange:E=>pe({...ie,titre:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",placeholder:"Ex: Retard du bus, Changement d'horaires...",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Message *"}),a.jsx(ja,{value:ie.message,onChange:E=>pe({...ie,message:E.target.value}),className:"mt-1 rounded-xl focus:ring-purple-500 focus:border-purple-500",rows:6,placeholder:"Rdigez votre message aux parents...",required:!0})]}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:()=>G(!1),className:"rounded-xl border-purple-500 text-purple-600 hover:bg-purple-50 focus:ring-purple-500",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-purple-500 hover:bg-purple-600 text-white rounded-xl",children:[a.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Envoyer"]})]})]})]})})]})}),a.jsx(yL,{isOpen:g,onClose:()=>b(!1),notifications:d,onMarkAsRead:Mt,onDelete:async E=>{try{await lt.delete(E),m(Q=>Q.filter(he=>he.id!==E))}catch(Q){console.error("Erreur lors de la suppression de la notification:",Q)}},onDeleteAll:Oa}),Fe.show&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(qe,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Confirmer la suppression"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Cette action est irrversible"})]})]}),a.jsx("p",{className:"text-gray-700 mb-6",children:"tes-vous sr de vouloir supprimer ce message ?"}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx(te,{onClick:()=>ye({show:!1,messageId:null}),variant:"outline",className:"rounded-xl border-gray-300 text-gray-700 hover:bg-gray-50",children:"Annuler"}),a.jsxs(te,{onClick:async()=>{try{await lt.delete(Fe.messageId),Ce(E=>E.filter(Q=>Q.id!==Fe.messageId)),ye({show:!1,messageId:null}),ze("Message supprim avec succs","success")}catch(E){console.error("Erreur suppression message:",E),ze("Erreur lors de la suppression: "+(E.message||"Erreur inconnue"),"error"),ye({show:!1,messageId:null})}},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})}),a.jsx(Br,{children:Ke&&a.jsxs(ee.div,{initial:{opacity:0,y:-50,x:"-50%"},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-4 left-1/2 transform -translate-x-1/2 z-[100] ${kt==="success"?"bg-green-500":kt==="error"?"bg-red-500":"bg-purple-500"} text-white px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 min-w-[300px] max-w-[500px]`,children:[kt==="success"?a.jsx(ct,{className:"w-5 h-5 flex-shrink-0"}):kt==="error"?a.jsx(Ze,{className:"w-5 h-5 flex-shrink-0"}):a.jsx(zn,{className:"w-5 h-5 flex-shrink-0"}),a.jsx("p",{className:"flex-1 font-medium",children:Ke}),a.jsx("button",{onClick:()=>Ye(null),className:"text-white/80 hover:text-white transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})})]})})]})}function nc({children:e,title:t="Espace Responsable"}){const r=at();fn();const[n,s]=N.useState(null),[i,o]=N.useState([]),[l,c]=N.useState(!0);N.useEffect(()=>{const d=localStorage.getItem("responsable_session");if(!d){r(ke("ResponsableLogin"));return}const m=JSON.parse(d);s(m),u(m.id),c(!1)},[r]),N.useEffect(()=>{if(!n)return;const d=async()=>{await u(n.id)};d();const m=setInterval(d,3e4);return()=>clearInterval(m)},[n]);const u=async d=>{try{const m=await lt.getByUser(d,"responsable"),g=(m==null?void 0:m.data)||m||[];o(g.sort((b,h)=>new Date(h.date||h.date_creation||0)-new Date(b.date||b.date_creation||0)))}catch(m){console.warn("Erreur lors du chargement des notifications:",m),o([])}},f=()=>{localStorage.removeItem("responsable_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(ke("Home"))};return l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-purple-50",children:[a.jsx(AC,{responsable:n,notifications:i,onLogout:f}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function PC(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=PC(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nt(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=PC(e))&&(n&&(n+=" "),n+=t);return n}var u8=Array.isArray,mn=u8,d8=typeof fd=="object"&&fd&&fd.Object===Object&&fd,EC=d8,f8=EC,m8=typeof self=="object"&&self&&self.Object===Object&&self,h8=f8||m8||Function("return this")(),Ea=h8,p8=Ea,g8=p8.Symbol,ad=g8,$1=ad,CC=Object.prototype,x8=CC.hasOwnProperty,y8=CC.toString,ac=$1?$1.toStringTag:void 0;function v8(e){var t=x8.call(e,ac),r=e[ac];try{e[ac]=void 0;var n=!0}catch{}var s=y8.call(e);return n&&(t?e[ac]=r:delete e[ac]),s}var b8=v8,j8=Object.prototype,w8=j8.toString;function N8(e){return w8.call(e)}var S8=N8,I1=ad,_8=b8,A8=S8,P8="[object Null]",E8="[object Undefined]",L1=I1?I1.toStringTag:void 0;function C8(e){return e==null?e===void 0?E8:P8:L1&&L1 in Object(e)?_8(e):A8(e)}var ls=C8;function O8(e){return e!=null&&typeof e=="object"}var cs=O8,T8=ls,k8=cs,M8="[object Symbol]";function D8(e){return typeof e=="symbol"||k8(e)&&T8(e)==M8}var Ml=D8,$8=mn,I8=Ml,L8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R8=/^\w*$/;function B8(e,t){if($8(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||I8(e)?!0:R8.test(e)||!L8.test(e)||t!=null&&e in Object(t)}var Gv=B8;function F8(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ai=F8;const Dl=jt(ai);var z8=ls,V8=ai,U8="[object AsyncFunction]",W8="[object Function]",H8="[object GeneratorFunction]",q8="[object Proxy]";function G8(e){if(!V8(e))return!1;var t=z8(e);return t==W8||t==H8||t==U8||t==q8}var Kv=G8;const Je=jt(Kv);var K8=Ea,Y8=K8["__core-js_shared__"],X8=Y8,og=X8,R1=function(){var e=/[^.]+$/.exec(og&&og.keys&&og.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function J8(e){return!!R1&&R1 in e}var Z8=J8,Q8=Function.prototype,eB=Q8.toString;function tB(e){if(e!=null){try{return eB.call(e)}catch{}try{return e+""}catch{}}return""}var OC=tB,rB=Kv,nB=Z8,aB=ai,sB=OC,iB=/[\\^$.*+?()[\]{}|]/g,oB=/^\[object .+?Constructor\]$/,lB=Function.prototype,cB=Object.prototype,uB=lB.toString,dB=cB.hasOwnProperty,fB=RegExp("^"+uB.call(dB).replace(iB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mB(e){if(!aB(e)||nB(e))return!1;var t=rB(e)?fB:oB;return t.test(sB(e))}var hB=mB;function pB(e,t){return e==null?void 0:e[t]}var gB=pB,xB=hB,yB=gB;function vB(e,t){var r=yB(e,t);return xB(r)?r:void 0}var eo=vB,bB=eo,jB=bB(Object,"create"),_h=jB,B1=_h;function wB(){this.__data__=B1?B1(null):{},this.size=0}var NB=wB;function SB(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _B=SB,AB=_h,PB="__lodash_hash_undefined__",EB=Object.prototype,CB=EB.hasOwnProperty;function OB(e){var t=this.__data__;if(AB){var r=t[e];return r===PB?void 0:r}return CB.call(t,e)?t[e]:void 0}var TB=OB,kB=_h,MB=Object.prototype,DB=MB.hasOwnProperty;function $B(e){var t=this.__data__;return kB?t[e]!==void 0:DB.call(t,e)}var IB=$B,LB=_h,RB="__lodash_hash_undefined__";function BB(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=LB&&t===void 0?RB:t,this}var FB=BB,zB=NB,VB=_B,UB=TB,WB=IB,HB=FB;function $l(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$l.prototype.clear=zB;$l.prototype.delete=VB;$l.prototype.get=UB;$l.prototype.has=WB;$l.prototype.set=HB;var qB=$l;function GB(){this.__data__=[],this.size=0}var KB=GB;function YB(e,t){return e===t||e!==e&&t!==t}var Yv=YB,XB=Yv;function JB(e,t){for(var r=e.length;r--;)if(XB(e[r][0],t))return r;return-1}var Ah=JB,ZB=Ah,QB=Array.prototype,eF=QB.splice;function tF(e){var t=this.__data__,r=ZB(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():eF.call(t,r,1),--this.size,!0}var rF=tF,nF=Ah;function aF(e){var t=this.__data__,r=nF(t,e);return r<0?void 0:t[r][1]}var sF=aF,iF=Ah;function oF(e){return iF(this.__data__,e)>-1}var lF=oF,cF=Ah;function uF(e,t){var r=this.__data__,n=cF(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var dF=uF,fF=KB,mF=rF,hF=sF,pF=lF,gF=dF;function Il(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Il.prototype.clear=fF;Il.prototype.delete=mF;Il.prototype.get=hF;Il.prototype.has=pF;Il.prototype.set=gF;var Ph=Il,xF=eo,yF=Ea,vF=xF(yF,"Map"),Xv=vF,F1=qB,bF=Ph,jF=Xv;function wF(){this.size=0,this.__data__={hash:new F1,map:new(jF||bF),string:new F1}}var NF=wF;function SF(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var _F=SF,AF=_F;function PF(e,t){var r=e.__data__;return AF(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Eh=PF,EF=Eh;function CF(e){var t=EF(this,e).delete(e);return this.size-=t?1:0,t}var OF=CF,TF=Eh;function kF(e){return TF(this,e).get(e)}var MF=kF,DF=Eh;function $F(e){return DF(this,e).has(e)}var IF=$F,LF=Eh;function RF(e,t){var r=LF(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var BF=RF,FF=NF,zF=OF,VF=MF,UF=IF,WF=BF;function Ll(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ll.prototype.clear=FF;Ll.prototype.delete=zF;Ll.prototype.get=VF;Ll.prototype.has=UF;Ll.prototype.set=WF;var Jv=Ll,TC=Jv,HF="Expected a function";function Zv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(HF);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(Zv.Cache||TC),r}Zv.Cache=TC;var kC=Zv;const qF=jt(kC);var GF=kC,KF=500;function YF(e){var t=GF(e,function(n){return r.size===KF&&r.clear(),n}),r=t.cache;return t}var XF=YF,JF=XF,ZF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QF=/\\(\\)?/g,ez=JF(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(ZF,function(r,n,s,i){t.push(s?i.replace(QF,"$1"):n||r)}),t}),tz=ez;function rz(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var Qv=rz,z1=ad,nz=Qv,az=mn,sz=Ml,V1=z1?z1.prototype:void 0,U1=V1?V1.toString:void 0;function MC(e){if(typeof e=="string")return e;if(az(e))return nz(e,MC)+"";if(sz(e))return U1?U1.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var iz=MC,oz=iz;function lz(e){return e==null?"":oz(e)}var DC=lz,cz=mn,uz=Gv,dz=tz,fz=DC;function mz(e,t){return cz(e)?e:uz(e,t)?[e]:dz(fz(e))}var $C=mz,hz=Ml;function pz(e){if(typeof e=="string"||hz(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Ch=pz,gz=$C,xz=Ch;function yz(e,t){t=gz(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[xz(t[r++])];return r&&r==n?e:void 0}var eb=yz,vz=eb;function bz(e,t,r){var n=e==null?void 0:vz(e,t);return n===void 0?r:n}var IC=bz;const wn=jt(IC);function jz(e){return e==null}var wz=jz;const it=jt(wz);var Nz=ls,Sz=mn,_z=cs,Az="[object String]";function Pz(e){return typeof e=="string"||!Sz(e)&&_z(e)&&Nz(e)==Az}var Ez=Pz;const Wi=jt(Ez);var LC={exports:{}},wt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb=Symbol.for("react.element"),rb=Symbol.for("react.portal"),Oh=Symbol.for("react.fragment"),Th=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),Dh=Symbol.for("react.context"),Cz=Symbol.for("react.server_context"),$h=Symbol.for("react.forward_ref"),Ih=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),Bh=Symbol.for("react.lazy"),Oz=Symbol.for("react.offscreen"),RC;RC=Symbol.for("react.module.reference");function Wn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tb:switch(e=e.type,e){case Oh:case kh:case Th:case Ih:case Lh:return e;default:switch(e=e&&e.$$typeof,e){case Cz:case Dh:case $h:case Bh:case Rh:case Mh:return e;default:return t}}case rb:return t}}}wt.ContextConsumer=Dh;wt.ContextProvider=Mh;wt.Element=tb;wt.ForwardRef=$h;wt.Fragment=Oh;wt.Lazy=Bh;wt.Memo=Rh;wt.Portal=rb;wt.Profiler=kh;wt.StrictMode=Th;wt.Suspense=Ih;wt.SuspenseList=Lh;wt.isAsyncMode=function(){return!1};wt.isConcurrentMode=function(){return!1};wt.isContextConsumer=function(e){return Wn(e)===Dh};wt.isContextProvider=function(e){return Wn(e)===Mh};wt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tb};wt.isForwardRef=function(e){return Wn(e)===$h};wt.isFragment=function(e){return Wn(e)===Oh};wt.isLazy=function(e){return Wn(e)===Bh};wt.isMemo=function(e){return Wn(e)===Rh};wt.isPortal=function(e){return Wn(e)===rb};wt.isProfiler=function(e){return Wn(e)===kh};wt.isStrictMode=function(e){return Wn(e)===Th};wt.isSuspense=function(e){return Wn(e)===Ih};wt.isSuspenseList=function(e){return Wn(e)===Lh};wt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Oh||e===kh||e===Th||e===Ih||e===Lh||e===Oz||typeof e=="object"&&e!==null&&(e.$$typeof===Bh||e.$$typeof===Rh||e.$$typeof===Mh||e.$$typeof===Dh||e.$$typeof===$h||e.$$typeof===RC||e.getModuleId!==void 0)};wt.typeOf=Wn;LC.exports=wt;var Tz=LC.exports,kz=ls,Mz=cs,Dz="[object Number]";function $z(e){return typeof e=="number"||Mz(e)&&kz(e)==Dz}var BC=$z;const Iz=jt(BC);var Lz=BC;function Rz(e){return Lz(e)&&e!=+e}var Bz=Rz;const sd=jt(Bz);var Gr=function(t){return t===0?0:t>0?1:-1},Pi=function(t){return Wi(t)&&t.indexOf("%")===t.length-1},we=function(t){return Iz(t)&&!sd(t)},Fz=function(t){return it(t)},gr=function(t){return we(t)||Wi(t)},zz=0,id=function(t){var r=++zz;return"".concat(t||"").concat(r)},Kr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!Wi(t))return n;var i;if(Pi(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return sd(i)&&(i=n),s&&i>r&&(i=r),i},Ns=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},Vz=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},vs=function(t,r){return we(t)&&we(r)?function(n){return t+n*(r-t)}:function(){return r}};function Yx(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):wn(n,t))===r})}var Uz=function(t,r){return we(t)&&we(r)?t-r:Wi(t)&&Wi(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Uo(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}var Wz=["viewBox","children"],Hz=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],W1=["points","pathLength"],lg={svg:Wz,polygon:W1,polyline:W1},nb=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zf=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!Dl(n))return null;var s={};return Object.keys(n).forEach(function(i){nb.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},qz=function(t,r,n){return function(s){return t(r,n,s),null}},Hi=function(t,r,n){if(!Dl(t)||Xx(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];nb.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=qz(o,r,n))}),s},Gz=["children"],Kz=["children"];function H1(e,t){if(e==null)return{};var r=Yz(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var q1={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ka=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},G1=null,cg=null,ab=function e(t){if(t===G1&&Array.isArray(cg))return cg;var r=[];return N.Children.forEach(t,function(n){it(n)||(Tz.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),cg=r,G1=t,r};function Rn(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Ka(s)}):n=[Ka(t)],ab(e).forEach(function(s){var i=wn(s,"type.displayName")||wn(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function gn(e,t){var r=Rn(e,t);return r&&r[0]}var K1=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!we(n)||n<=0||!we(s)||s<=0)},Xz=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Jz=function(t){return t&&t.type&&Wi(t.type)&&Xz.indexOf(t.type)>=0},Zz=function(t,r,n,s){var i,o=(i=lg==null?void 0:lg[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Je(t)&&(s&&o.includes(r)||Hz.includes(r))||n&&nb.includes(r)},Ge=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(N.isValidElement(t)&&(s=t.props),!Dl(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Zz((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Jx=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return Y1(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!Y1(i,o))return!1}return!0},Y1=function(t,r){if(it(t)&&it(r))return!0;if(!it(t)&&!it(r)){var n=t.props||{},s=n.children,i=H1(n,Gz),o=r.props||{},l=o.children,c=H1(o,Kz);return s&&l?Uo(i,c)&&Jx(s,l):!s&&!l?Uo(i,c):!1}return!1},X1=function(t,r){var n=[],s={};return ab(t).forEach(function(i,o){if(Jz(i))n.push(i);else if(i){var l=Ka(i.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!s[l])){var d=u(i,l,o);n.push(d),s[l]=!0}}}),n},Qz=function(t){var r=t&&t.type;return r&&q1[r]?q1[r]:null},e7=function(t,r){return ab(r).indexOf(t)},t7=["children","width","height","viewBox","className","style","title","desc"];function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zx.apply(this,arguments)}function r7(e,t){if(e==null)return{};var r=n7(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function n7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Qx(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=r7(e,t7),f=s||{width:r,height:n,x:0,y:0},d=nt("recharts-surface",i);return V.createElement("svg",Zx({},Ge(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),V.createElement("title",null,l),V.createElement("desc",null,c),t)}var a7=["children","className"];function e0(){return e0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e0.apply(this,arguments)}function s7(e,t){if(e==null)return{};var r=i7(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function i7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var vt=V.forwardRef(function(e,t){var r=e.children,n=e.className,s=s7(e,a7),i=nt("recharts-layer",n);return V.createElement("g",e0({className:i},Ge(s,!0),{ref:t}),r)}),na=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function o7(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var l7=o7,c7=l7;function u7(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:c7(e,t,r)}var d7=u7,f7="\\ud800-\\udfff",m7="\\u0300-\\u036f",h7="\\ufe20-\\ufe2f",p7="\\u20d0-\\u20ff",g7=m7+h7+p7,x7="\\ufe0e\\ufe0f",y7="\\u200d",v7=RegExp("["+y7+f7+g7+x7+"]");function b7(e){return v7.test(e)}var FC=b7;function j7(e){return e.split("")}var w7=j7,zC="\\ud800-\\udfff",N7="\\u0300-\\u036f",S7="\\ufe20-\\ufe2f",_7="\\u20d0-\\u20ff",A7=N7+S7+_7,P7="\\ufe0e\\ufe0f",E7="["+zC+"]",t0="["+A7+"]",r0="\\ud83c[\\udffb-\\udfff]",C7="(?:"+t0+"|"+r0+")",VC="[^"+zC+"]",UC="(?:\\ud83c[\\udde6-\\uddff]){2}",WC="[\\ud800-\\udbff][\\udc00-\\udfff]",O7="\\u200d",HC=C7+"?",qC="["+P7+"]?",T7="(?:"+O7+"(?:"+[VC,UC,WC].join("|")+")"+qC+HC+")*",k7=qC+HC+T7,M7="(?:"+[VC+t0+"?",t0,UC,WC,E7].join("|")+")",D7=RegExp(r0+"(?="+r0+")|"+M7+k7,"g");function $7(e){return e.match(D7)||[]}var I7=$7,L7=w7,R7=FC,B7=I7;function F7(e){return R7(e)?B7(e):L7(e)}var z7=F7,V7=d7,U7=FC,W7=z7,H7=DC;function q7(e){return function(t){t=H7(t);var r=U7(t)?W7(t):void 0,n=r?r[0]:t.charAt(0),s=r?V7(r,1).join(""):t.slice(1);return n[e]()+s}}var G7=q7,K7=G7,Y7=K7("toUpperCase"),X7=Y7;const Fh=jt(X7);function Et(e){return function(){return e}}const GC=Math.cos,Qf=Math.sin,ia=Math.sqrt,em=Math.PI,zh=2*em,n0=Math.PI,a0=2*n0,yi=1e-6,J7=a0-yi;function KC(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Z7(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return KC;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Q7{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?KC:Z7(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,f=o-t,d=l-r,m=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>yi)if(!(Math.abs(d*c-u*f)>yi)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-o,b=s-l,h=c*c+u*u,j=g*g+b*b,p=Math.sqrt(h),y=Math.sqrt(m),x=i*Math.tan((n0-Math.acos((h+m-j)/(2*p*y)))/2),S=x/y,w=x/p;Math.abs(S-1)>yi&&this._append`L${t+S*f},${r+S*d}`,this._append`A${i},${i},0,0,${+(d*g>f*b)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,f=r+c,d=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yi||Math.abs(this._y1-f)>yi)&&this._append`L${u},${f}`,n&&(m<0&&(m=m%a0+a0),m>J7?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:m>yi&&this._append`A${n},${n},0,${+(m>=n0)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function sb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Q7(t)}function ib(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YC(e){this._context=e}YC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Vh(e){return new YC(e)}function XC(e){return e[0]}function JC(e){return e[1]}function ZC(e,t){var r=Et(!0),n=null,s=Vh,i=null,o=sb(l);e=typeof e=="function"?e:e===void 0?XC:Et(e),t=typeof t=="function"?t:t===void 0?JC:Et(t);function l(c){var u,f=(c=ib(c)).length,d,m=!1,g;for(n==null&&(i=s(g=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,u,c),+t(d,u,c));if(g)return i=null,g+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Et(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Et(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Et(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Id(e,t,r){var n=null,s=Et(!0),i=null,o=Vh,l=null,c=sb(u);e=typeof e=="function"?e:e===void 0?XC:Et(+e),t=typeof t=="function"?t:Et(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?JC:Et(+r);function u(d){var m,g,b,h=(d=ib(d)).length,j,p=!1,y,x=new Array(h),S=new Array(h);for(i==null&&(l=o(y=c())),m=0;m<=h;++m){if(!(m<h&&s(j=d[m],m,d))===p)if(p=!p)g=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=m-1;b>=g;--b)l.point(x[b],S[b]);l.lineEnd(),l.areaEnd()}p&&(x[m]=+e(j,m,d),S[m]=+t(j,m,d),l.point(n?+n(j,m,d):x[m],r?+r(j,m,d):S[m]))}if(y)return l=null,y+""||null}function f(){return ZC().defined(s).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Et(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Et(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Et(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Et(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Et(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Et(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Et(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class QC{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function eV(e){return new QC(e,!0)}function tV(e){return new QC(e,!1)}const ob={draw(e,t){const r=ia(t/em);e.moveTo(r,0),e.arc(0,0,r,0,zh)}},rV={draw(e,t){const r=ia(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},eO=ia(1/3),nV=eO*2,aV={draw(e,t){const r=ia(t/nV),n=r*eO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},sV={draw(e,t){const r=ia(t),n=-r/2;e.rect(n,n,r,r)}},iV=.8908130915292852,tO=Qf(em/10)/Qf(7*em/10),oV=Qf(zh/10)*tO,lV=-GC(zh/10)*tO,cV={draw(e,t){const r=ia(t*iV),n=oV*r,s=lV*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=zh*i/5,l=GC(o),c=Qf(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},ug=ia(3),uV={draw(e,t){const r=-ia(t/(ug*3));e.moveTo(0,r*2),e.lineTo(-ug*r,-r),e.lineTo(ug*r,-r),e.closePath()}},En=-.5,Cn=ia(3)/2,s0=1/ia(12),dV=(s0/2+1)*3,fV={draw(e,t){const r=ia(t/dV),n=r/2,s=r*s0,i=n,o=r*s0+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(En*n-Cn*s,Cn*n+En*s),e.lineTo(En*i-Cn*o,Cn*i+En*o),e.lineTo(En*l-Cn*c,Cn*l+En*c),e.lineTo(En*n+Cn*s,En*s-Cn*n),e.lineTo(En*i+Cn*o,En*o-Cn*i),e.lineTo(En*l+Cn*c,En*c-Cn*l),e.closePath()}};function mV(e,t){let r=null,n=sb(s);e=typeof e=="function"?e:Et(e||ob),t=typeof t=="function"?t:Et(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Et(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Et(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function tm(){}function rm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rO(e){this._context=e}rO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hV(e){return new rO(e)}function nO(e){this._context=e}nO.prototype={areaStart:tm,areaEnd:tm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function pV(e){return new nO(e)}function aO(e){this._context=e}aO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:rm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gV(e){return new aO(e)}function sO(e){this._context=e}sO.prototype={areaStart:tm,areaEnd:tm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function xV(e){return new sO(e)}function J1(e){return e<0?-1:1}function Z1(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(J1(i)+J1(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function Q1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function dg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function nm(e){this._context=e}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dg(this,this._t0,Q1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dg(this,Q1(this,r=Z1(this,e,t)),r);break;default:dg(this,this._t0,r=Z1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iO(e){this._context=new oO(e)}(iO.prototype=Object.create(nm.prototype)).point=function(e,t){nm.prototype.point.call(this,t,e)};function oO(e){this._context=e}oO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function yV(e){return new nm(e)}function vV(e){return new iO(e)}function lO(e){this._context=e}lO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=eN(e),s=eN(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function eN(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function bV(e){return new lO(e)}function Uh(e,t){this._context=e,this._t=t}Uh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function jV(e){return new Uh(e,.5)}function wV(e){return new Uh(e,0)}function NV(e){return new Uh(e,1)}function al(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function i0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function SV(e,t){return e[t]}function _V(e){const t=[];return t.key=e,t}function AV(){var e=Et([]),t=i0,r=al,n=SV;function s(i){var o=Array.from(e.apply(this,arguments),_V),l,c=o.length,u=-1,f;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,f=ib(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Et(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Et(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?i0:typeof i=="function"?i:Et(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??al,s):r},s}function PV(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}al(e,t)}}function EV(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}al(e,t)}}function CV(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[n][1]||0,m=f[n-1][1]||0,g=(d-m)/2,b=0;b<l;++b){var h=e[t[b]],j=h[n][1]||0,p=h[n-1][1]||0;g+=j-p}c+=d,u+=g*d}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,al(e,t)}}function mu(e){"@babel/helpers - typeof";return mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mu(e)}var OV=["type","size","sizeType"];function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(this,arguments)}function tN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tN(Object(r),!0).forEach(function(n){TV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TV(e,t,r){return t=kV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kV(e){var t=MV(e,"string");return mu(t)=="symbol"?t:t+""}function MV(e,t){if(mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DV(e,t){if(e==null)return{};var r=$V(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $V(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var cO={symbolCircle:ob,symbolCross:rV,symbolDiamond:aV,symbolSquare:sV,symbolStar:cV,symbolTriangle:uV,symbolWye:fV},IV=Math.PI/180,LV=function(t){var r="symbol".concat(Fh(t));return cO[r]||ob},RV=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*IV;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},BV=function(t,r){cO["symbol".concat(Fh(t))]=r},lb=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=DV(t,OV),u=rN(rN({},c),{},{type:n,size:i,sizeType:l}),f=function(){var j=LV(n),p=mV().type(j).size(RV(i,l,n));return p()},d=u.className,m=u.cx,g=u.cy,b=Ge(u,!0);return m===+m&&g===+g&&i===+i?V.createElement("path",o0({},b,{className:nt("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(g,")"),d:f()})):null};lb.registerSymbol=BV;function sl(e){"@babel/helpers - typeof";return sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sl(e)}function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l0.apply(this,arguments)}function nN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nN(Object(r),!0).forEach(function(n){hu(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dO(n.key),n)}}function UV(e,t,r){return t&&VV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WV(e,t,r){return t=am(t),HV(e,uO()?Reflect.construct(t,r||[],am(e).constructor):t.apply(e,r))}function HV(e,t){if(t&&(sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qV(e)}function qV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uO=function(){return!!e})()}function am(e){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},am(e)}function GV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c0(e,t)}function c0(e,t){return c0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},c0(e,t)}function hu(e,t,r){return t=dO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dO(e){var t=KV(e,"string");return sl(t)=="symbol"?t:t+""}function KV(e,t){if(sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var On=32,cb=function(e){function t(){return zV(this,t),WV(this,t,arguments)}return GV(t,e),UV(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=On/2,o=On/6,l=On/3,c=n.inactive?s:n.color;if(n.type==="plainline")return V.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:On,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return V.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(On,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return V.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(On/8,"h").concat(On,"v").concat(On*3/4,"h").concat(-On,"z"),className:"recharts-legend-icon"});if(V.isValidElement(n.legendIcon)){var u=FV({},n);return delete u.legendIcon,V.cloneElement(n.legendIcon,u)}return V.createElement(lb,{fill:c,cx:i,cy:i,size:On,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:On,height:On},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(g,b){var h=g.formatter||c,j=nt(hu(hu({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",g.inactive));if(g.type==="none")return null;var p=Je(g.value)?null:g.value;na(!Je(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=g.inactive?u:g.color;return V.createElement("li",l0({className:j,style:d,key:"legend-item-".concat(b)},Hi(n.props,g,b)),V.createElement(Qx,{width:o,height:o,viewBox:f,style:m},n.renderIcon(g)),V.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},h?h(p,g,b):p))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return V.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);hu(cb,"displayName","Legend");hu(cb,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var YV=Ph;function XV(){this.__data__=new YV,this.size=0}var JV=XV;function ZV(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var QV=ZV;function eU(e){return this.__data__.get(e)}var tU=eU;function rU(e){return this.__data__.has(e)}var nU=rU,aU=Ph,sU=Xv,iU=Jv,oU=200;function lU(e,t){var r=this.__data__;if(r instanceof aU){var n=r.__data__;if(!sU||n.length<oU-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new iU(n)}return r.set(e,t),this.size=r.size,this}var cU=lU,uU=Ph,dU=JV,fU=QV,mU=tU,hU=nU,pU=cU;function Rl(e){var t=this.__data__=new uU(e);this.size=t.size}Rl.prototype.clear=dU;Rl.prototype.delete=fU;Rl.prototype.get=mU;Rl.prototype.has=hU;Rl.prototype.set=pU;var fO=Rl,gU="__lodash_hash_undefined__";function xU(e){return this.__data__.set(e,gU),this}var yU=xU;function vU(e){return this.__data__.has(e)}var bU=vU,jU=Jv,wU=yU,NU=bU;function sm(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new jU;++t<r;)this.add(e[t])}sm.prototype.add=sm.prototype.push=wU;sm.prototype.has=NU;var mO=sm;function SU(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var hO=SU;function _U(e,t){return e.has(t)}var pO=_U,AU=mO,PU=hO,EU=pO,CU=1,OU=2;function TU(e,t,r,n,s,i){var o=r&CU,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),f=i.get(t);if(u&&f)return u==t&&f==e;var d=-1,m=!0,g=r&OU?new AU:void 0;for(i.set(e,t),i.set(t,e);++d<l;){var b=e[d],h=t[d];if(n)var j=o?n(h,b,d,t,e,i):n(b,h,d,e,t,i);if(j!==void 0){if(j)continue;m=!1;break}if(g){if(!PU(t,function(p,y){if(!EU(g,y)&&(b===p||s(b,p,r,n,i)))return g.push(y)})){m=!1;break}}else if(!(b===h||s(b,h,r,n,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var gO=TU,kU=Ea,MU=kU.Uint8Array,DU=MU;function $U(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var IU=$U;function LU(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var ub=LU,aN=ad,sN=DU,RU=Yv,BU=gO,FU=IU,zU=ub,VU=1,UU=2,WU="[object Boolean]",HU="[object Date]",qU="[object Error]",GU="[object Map]",KU="[object Number]",YU="[object RegExp]",XU="[object Set]",JU="[object String]",ZU="[object Symbol]",QU="[object ArrayBuffer]",e9="[object DataView]",iN=aN?aN.prototype:void 0,fg=iN?iN.valueOf:void 0;function t9(e,t,r,n,s,i,o){switch(r){case e9:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case QU:return!(e.byteLength!=t.byteLength||!i(new sN(e),new sN(t)));case WU:case HU:case KU:return RU(+e,+t);case qU:return e.name==t.name&&e.message==t.message;case YU:case JU:return e==t+"";case GU:var l=FU;case XU:var c=n&VU;if(l||(l=zU),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=UU,o.set(e,t);var f=BU(l(e),l(t),n,s,i,o);return o.delete(e),f;case ZU:if(fg)return fg.call(e)==fg.call(t)}return!1}var r9=t9;function n9(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var xO=n9,a9=xO,s9=mn;function i9(e,t,r){var n=t(e);return s9(e)?n:a9(n,r(e))}var o9=i9;function l9(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var c9=l9;function u9(){return[]}var d9=u9,f9=c9,m9=d9,h9=Object.prototype,p9=h9.propertyIsEnumerable,oN=Object.getOwnPropertySymbols,g9=oN?function(e){return e==null?[]:(e=Object(e),f9(oN(e),function(t){return p9.call(e,t)}))}:m9,x9=g9;function y9(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var v9=y9,b9=ls,j9=cs,w9="[object Arguments]";function N9(e){return j9(e)&&b9(e)==w9}var S9=N9,lN=S9,_9=cs,yO=Object.prototype,A9=yO.hasOwnProperty,P9=yO.propertyIsEnumerable,E9=lN(function(){return arguments}())?lN:function(e){return _9(e)&&A9.call(e,"callee")&&!P9.call(e,"callee")},db=E9,im={exports:{}};function C9(){return!1}var O9=C9;im.exports;(function(e,t){var r=Ea,n=O9,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(im,im.exports);var vO=im.exports,T9=9007199254740991,k9=/^(?:0|[1-9]\d*)$/;function M9(e,t){var r=typeof e;return t=t??T9,!!t&&(r=="number"||r!="symbol"&&k9.test(e))&&e>-1&&e%1==0&&e<t}var fb=M9,D9=9007199254740991;function $9(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=D9}var mb=$9,I9=ls,L9=mb,R9=cs,B9="[object Arguments]",F9="[object Array]",z9="[object Boolean]",V9="[object Date]",U9="[object Error]",W9="[object Function]",H9="[object Map]",q9="[object Number]",G9="[object Object]",K9="[object RegExp]",Y9="[object Set]",X9="[object String]",J9="[object WeakMap]",Z9="[object ArrayBuffer]",Q9="[object DataView]",eW="[object Float32Array]",tW="[object Float64Array]",rW="[object Int8Array]",nW="[object Int16Array]",aW="[object Int32Array]",sW="[object Uint8Array]",iW="[object Uint8ClampedArray]",oW="[object Uint16Array]",lW="[object Uint32Array]",$t={};$t[eW]=$t[tW]=$t[rW]=$t[nW]=$t[aW]=$t[sW]=$t[iW]=$t[oW]=$t[lW]=!0;$t[B9]=$t[F9]=$t[Z9]=$t[z9]=$t[Q9]=$t[V9]=$t[U9]=$t[W9]=$t[H9]=$t[q9]=$t[G9]=$t[K9]=$t[Y9]=$t[X9]=$t[J9]=!1;function cW(e){return R9(e)&&L9(e.length)&&!!$t[I9(e)]}var uW=cW;function dW(e){return function(t){return e(t)}}var bO=dW,om={exports:{}};om.exports;(function(e,t){var r=EC,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(om,om.exports);var fW=om.exports,mW=uW,hW=bO,cN=fW,uN=cN&&cN.isTypedArray,pW=uN?hW(uN):mW,jO=pW,gW=v9,xW=db,yW=mn,vW=vO,bW=fb,jW=jO,wW=Object.prototype,NW=wW.hasOwnProperty;function SW(e,t){var r=yW(e),n=!r&&xW(e),s=!r&&!n&&vW(e),i=!r&&!n&&!s&&jW(e),o=r||n||s||i,l=o?gW(e.length,String):[],c=l.length;for(var u in e)(t||NW.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||bW(u,c)))&&l.push(u);return l}var _W=SW,AW=Object.prototype;function PW(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||AW;return e===r}var EW=PW;function CW(e,t){return function(r){return e(t(r))}}var wO=CW,OW=wO,TW=OW(Object.keys,Object),kW=TW,MW=EW,DW=kW,$W=Object.prototype,IW=$W.hasOwnProperty;function LW(e){if(!MW(e))return DW(e);var t=[];for(var r in Object(e))IW.call(e,r)&&r!="constructor"&&t.push(r);return t}var RW=LW,BW=Kv,FW=mb;function zW(e){return e!=null&&FW(e.length)&&!BW(e)}var od=zW,VW=_W,UW=RW,WW=od;function HW(e){return WW(e)?VW(e):UW(e)}var Wh=HW,qW=o9,GW=x9,KW=Wh;function YW(e){return qW(e,KW,GW)}var XW=YW,dN=XW,JW=1,ZW=Object.prototype,QW=ZW.hasOwnProperty;function eH(e,t,r,n,s,i){var o=r&JW,l=dN(e),c=l.length,u=dN(t),f=u.length;if(c!=f&&!o)return!1;for(var d=c;d--;){var m=l[d];if(!(o?m in t:QW.call(t,m)))return!1}var g=i.get(e),b=i.get(t);if(g&&b)return g==t&&b==e;var h=!0;i.set(e,t),i.set(t,e);for(var j=o;++d<c;){m=l[d];var p=e[m],y=t[m];if(n)var x=o?n(y,p,m,t,e,i):n(p,y,m,e,t,i);if(!(x===void 0?p===y||s(p,y,r,n,i):x)){h=!1;break}j||(j=m=="constructor")}if(h&&!j){var S=e.constructor,w=t.constructor;S!=w&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(h=!1)}return i.delete(e),i.delete(t),h}var tH=eH,rH=eo,nH=Ea,aH=rH(nH,"DataView"),sH=aH,iH=eo,oH=Ea,lH=iH(oH,"Promise"),cH=lH,uH=eo,dH=Ea,fH=uH(dH,"Set"),NO=fH,mH=eo,hH=Ea,pH=mH(hH,"WeakMap"),gH=pH,u0=sH,d0=Xv,f0=cH,m0=NO,h0=gH,SO=ls,Bl=OC,fN="[object Map]",xH="[object Object]",mN="[object Promise]",hN="[object Set]",pN="[object WeakMap]",gN="[object DataView]",yH=Bl(u0),vH=Bl(d0),bH=Bl(f0),jH=Bl(m0),wH=Bl(h0),vi=SO;(u0&&vi(new u0(new ArrayBuffer(1)))!=gN||d0&&vi(new d0)!=fN||f0&&vi(f0.resolve())!=mN||m0&&vi(new m0)!=hN||h0&&vi(new h0)!=pN)&&(vi=function(e){var t=SO(e),r=t==xH?e.constructor:void 0,n=r?Bl(r):"";if(n)switch(n){case yH:return gN;case vH:return fN;case bH:return mN;case jH:return hN;case wH:return pN}return t});var NH=vi,mg=fO,SH=gO,_H=r9,AH=tH,xN=NH,yN=mn,vN=vO,PH=jO,EH=1,bN="[object Arguments]",jN="[object Array]",Ld="[object Object]",CH=Object.prototype,wN=CH.hasOwnProperty;function OH(e,t,r,n,s,i){var o=yN(e),l=yN(t),c=o?jN:xN(e),u=l?jN:xN(t);c=c==bN?Ld:c,u=u==bN?Ld:u;var f=c==Ld,d=u==Ld,m=c==u;if(m&&vN(e)){if(!vN(t))return!1;o=!0,f=!1}if(m&&!f)return i||(i=new mg),o||PH(e)?SH(e,t,r,n,s,i):_H(e,t,c,r,n,s,i);if(!(r&EH)){var g=f&&wN.call(e,"__wrapped__"),b=d&&wN.call(t,"__wrapped__");if(g||b){var h=g?e.value():e,j=b?t.value():t;return i||(i=new mg),s(h,j,r,n,i)}}return m?(i||(i=new mg),AH(e,t,r,n,s,i)):!1}var TH=OH,kH=TH,NN=cs;function _O(e,t,r,n,s){return e===t?!0:e==null||t==null||!NN(e)&&!NN(t)?e!==e&&t!==t:kH(e,t,r,n,_O,s)}var hb=_O,MH=fO,DH=hb,$H=1,IH=2;function LH(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],u=e[c],f=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new MH;if(n)var m=n(u,f,c,e,t,d);if(!(m===void 0?DH(f,u,$H|IH,n,d):m))return!1}}return!0}var RH=LH,BH=ai;function FH(e){return e===e&&!BH(e)}var AO=FH,zH=AO,VH=Wh;function UH(e){for(var t=VH(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,zH(s)]}return t}var WH=UH;function HH(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var PO=HH,qH=RH,GH=WH,KH=PO;function YH(e){var t=GH(e);return t.length==1&&t[0][2]?KH(t[0][0],t[0][1]):function(r){return r===e||qH(r,e,t)}}var XH=YH;function JH(e,t){return e!=null&&t in Object(e)}var ZH=JH,QH=$C,eq=db,tq=mn,rq=fb,nq=mb,aq=Ch;function sq(e,t,r){t=QH(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=aq(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&nq(s)&&rq(o,s)&&(tq(e)||eq(e)))}var iq=sq,oq=ZH,lq=iq;function cq(e,t){return e!=null&&lq(e,t,oq)}var uq=cq,dq=hb,fq=IC,mq=uq,hq=Gv,pq=AO,gq=PO,xq=Ch,yq=1,vq=2;function bq(e,t){return hq(e)&&pq(t)?gq(xq(e),t):function(r){var n=fq(r,e);return n===void 0&&n===t?mq(r,e):dq(t,n,yq|vq)}}var jq=bq;function wq(e){return e}var Fl=wq;function Nq(e){return function(t){return t==null?void 0:t[e]}}var Sq=Nq,_q=eb;function Aq(e){return function(t){return _q(t,e)}}var Pq=Aq,Eq=Sq,Cq=Pq,Oq=Gv,Tq=Ch;function kq(e){return Oq(e)?Eq(Tq(e)):Cq(e)}var Mq=kq,Dq=XH,$q=jq,Iq=Fl,Lq=mn,Rq=Mq;function Bq(e){return typeof e=="function"?e:e==null?Iq:typeof e=="object"?Lq(e)?$q(e[0],e[1]):Dq(e):Rq(e)}var Ca=Bq;function Fq(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var EO=Fq;function zq(e){return e!==e}var Vq=zq;function Uq(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var Wq=Uq,Hq=EO,qq=Vq,Gq=Wq;function Kq(e,t,r){return t===t?Gq(e,t,r):Hq(e,qq,r)}var Yq=Kq,Xq=Yq;function Jq(e,t){var r=e==null?0:e.length;return!!r&&Xq(e,t,0)>-1}var Zq=Jq;function Qq(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var eG=Qq;function tG(){}var rG=tG,hg=NO,nG=rG,aG=ub,sG=1/0,iG=hg&&1/aG(new hg([,-0]))[1]==sG?function(e){return new hg(e)}:nG,oG=iG,lG=mO,cG=Zq,uG=eG,dG=pO,fG=oG,mG=ub,hG=200;function pG(e,t,r){var n=-1,s=cG,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=uG;else if(i>=hG){var u=t?null:fG(e);if(u)return mG(u);o=!1,s=dG,c=new lG}else c=t?[]:l;e:for(;++n<i;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,o&&d===d){for(var m=c.length;m--;)if(c[m]===d)continue e;t&&c.push(d),l.push(f)}else s(c,d,r)||(c!==l&&c.push(d),l.push(f))}return l}var gG=pG,xG=Ca,yG=gG;function vG(e,t){return e&&e.length?yG(e,xG(t)):[]}var bG=vG;const SN=jt(bG);function CO(e,t,r){return t===!0?SN(e,r):Je(t)?SN(e,t):e}function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}var jG=["ref"];function _N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(r),!0).forEach(function(n){Hh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TO(n.key),n)}}function NG(e,t,r){return t&&AN(e.prototype,t),r&&AN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function SG(e,t,r){return t=lm(t),_G(e,OO()?Reflect.construct(t,r||[],lm(e).constructor):t.apply(e,r))}function _G(e,t){if(t&&(il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AG(e)}function AG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OO=function(){return!!e})()}function lm(e){return lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lm(e)}function PG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p0(e,t)}function p0(e,t){return p0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},p0(e,t)}function Hh(e,t,r){return t=TO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TO(e){var t=EG(e,"string");return il(t)=="symbol"?t:t+""}function EG(e,t){if(il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function CG(e,t){if(e==null)return{};var r=OG(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TG(e){return e.value}function kG(e,t){if(V.isValidElement(e))return V.cloneElement(e,t);if(typeof e=="function")return V.createElement(e,t);t.ref;var r=CG(t,jG);return V.createElement(cb,r)}var PN=1,wa=function(e){function t(){var r;wG(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=SG(this,t,[].concat(s)),Hh(r,"lastBoundingBox",{width:-1,height:-1}),r}return PG(t,e),NG(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>PN||Math.abs(s.height-this.lastBoundingBox.height)>PN)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?ka({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,f=s.chartHeight,d,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var g=this.getBBoxSnapshot();d={left:((u||0)-g.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();m={top:((f||0)-b.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return ka(ka({},d),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,d=ka(ka({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return V.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){n.wrapperNode=g}},kG(i,ka(ka({},this.props),{},{payload:CO(f,u,TG)})))}}],[{key:"getWithHeight",value:function(n,s){var i=ka(ka({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&we(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(N.PureComponent);Hh(wa,"displayName","Legend");Hh(wa,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var EN=ad,MG=db,DG=mn,CN=EN?EN.isConcatSpreadable:void 0;function $G(e){return DG(e)||MG(e)||!!(CN&&e&&e[CN])}var IG=$G,LG=xO,RG=IG;function kO(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=RG),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?kO(l,t-1,r,n,s):LG(s,l):n||(s[s.length]=l)}return s}var MO=kO;function BG(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var FG=BG,zG=FG,VG=zG(),UG=VG,WG=UG,HG=Wh;function qG(e,t){return e&&WG(e,t,HG)}var DO=qG,GG=od;function KG(e,t){return function(r,n){if(r==null)return r;if(!GG(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var YG=KG,XG=DO,JG=YG,ZG=JG(XG),pb=ZG,QG=pb,eK=od;function tK(e,t){var r=-1,n=eK(e)?Array(e.length):[];return QG(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var $O=tK;function rK(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var nK=rK,ON=Ml;function aK(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=ON(e),o=t!==void 0,l=t===null,c=t===t,u=ON(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!u&&e<t||u&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var sK=aK,iK=sK;function oK(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=iK(s[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var lK=oK,pg=Qv,cK=eb,uK=Ca,dK=$O,fK=nK,mK=bO,hK=lK,pK=Fl,gK=mn;function xK(e,t,r){t.length?t=pg(t,function(i){return gK(i)?function(o){return cK(o,i.length===1?i[0]:i)}:i}):t=[pK];var n=-1;t=pg(t,mK(uK));var s=dK(e,function(i,o,l){var c=pg(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return fK(s,function(i,o){return hK(i,o,r)})}var yK=xK;function vK(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var bK=vK,jK=bK,TN=Math.max;function wK(e,t,r){return t=TN(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=TN(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),jK(e,this,l)}}var NK=wK;function SK(e){return function(){return e}}var _K=SK,AK=eo,PK=function(){try{var e=AK(Object,"defineProperty");return e({},"",{}),e}catch{}}(),IO=PK,EK=_K,kN=IO,CK=Fl,OK=kN?function(e,t){return kN(e,"toString",{configurable:!0,enumerable:!1,value:EK(t),writable:!0})}:CK,TK=OK,kK=800,MK=16,DK=Date.now;function $K(e){var t=0,r=0;return function(){var n=DK(),s=MK-(n-r);if(r=n,s>0){if(++t>=kK)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var IK=$K,LK=TK,RK=IK,BK=RK(LK),FK=BK,zK=Fl,VK=NK,UK=FK;function WK(e,t){return UK(VK(e,t,zK),e+"")}var HK=WK,qK=Yv,GK=od,KK=fb,YK=ai;function XK(e,t,r){if(!YK(r))return!1;var n=typeof t;return(n=="number"?GK(r)&&KK(t,r.length):n=="string"&&t in r)?qK(r[t],e):!1}var qh=XK,JK=MO,ZK=yK,QK=HK,MN=qh,eY=QK(function(e,t){if(e==null)return[];var r=t.length;return r>1&&MN(e,t[0],t[1])?t=[]:r>2&&MN(t[0],t[1],t[2])&&(t=[t[0]]),ZK(e,JK(t,1),[])}),tY=eY;const gb=jt(tY);function pu(e){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pu(e)}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g0.apply(this,arguments)}function rY(e,t){return iY(e)||sY(e,t)||aY(e,t)||nY()}function nY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aY(e,t){if(e){if(typeof e=="string")return DN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DN(e,t)}}function DN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iY(e){if(Array.isArray(e))return e}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){oY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oY(e,t,r){return t=lY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return pu(t)=="symbol"?t:t+""}function cY(e,t){if(pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uY(e){return Array.isArray(e)&&gr(e[0])&&gr(e[1])?e.join(" ~ "):e}var dY=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,m=t.itemSorter,g=t.wrapperClassName,b=t.labelClassName,h=t.label,j=t.labelFormatter,p=t.accessibilityLayer,y=p===void 0?!1:p,x=function(){if(f&&f.length){var T={padding:0,margin:0},O=(m?gb(f,m):f).map(function(L,M){if(L.type==="none")return null;var F=gg({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),R=L.formatter||d||uY,B=L.value,z=L.name,I=B,X=z;if(R&&I!=null&&X!=null){var re=R(B,z,L,M,f);if(Array.isArray(re)){var W=rY(re,2);I=W[0],X=W[1]}else I=re}return V.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:F},gr(X)?V.createElement("span",{className:"recharts-tooltip-item-name"},X):null,gr(X)?V.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,V.createElement("span",{className:"recharts-tooltip-item-value"},I),V.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return V.createElement("ul",{className:"recharts-tooltip-item-list",style:T},O)}return null},S=gg({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=gg({margin:0},u),v=!it(h),_=v?h:"",P=nt("recharts-default-tooltip",g),C=nt("recharts-tooltip-label",b);v&&j&&f!==void 0&&f!==null&&(_=j(h,f));var $=y?{role:"status","aria-live":"assertive"}:{};return V.createElement("div",g0({className:P,style:S},$),V.createElement("p",{className:C,style:w},V.isValidElement(_)?_:"".concat(_)),x())};function gu(e){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gu(e)}function Rd(e,t,r){return t=fY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=mY(e,"string");return gu(t)=="symbol"?t:t+""}function mY(e,t){if(gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sc="recharts-tooltip-wrapper",hY={visibility:"hidden"};function pY(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return nt(sc,Rd(Rd(Rd(Rd({},"".concat(sc,"-right"),we(r)&&t&&we(t.x)&&r>=t.x),"".concat(sc,"-left"),we(r)&&t&&we(t.x)&&r<t.x),"".concat(sc,"-bottom"),we(n)&&t&&we(t.y)&&n>=t.y),"".concat(sc,"-top"),we(n)&&t&&we(t.y)&&n<t.y))}function IN(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&we(i[n]))return i[n];var f=r[n]-l-s,d=r[n]+s;if(t[n])return o[n]?f:d;if(o[n]){var m=f,g=c[n];return m<g?Math.max(d,c[n]):Math.max(f,c[n])}var b=d+l,h=c[n]+u;return b>h?Math.max(f,c[n]):Math.max(d,c[n])}function gY(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function xY(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=IN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=IN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=gY({translateX:f,translateY:d,useTranslate3d:l})):u=hY,{cssProperties:u,cssClasses:pY({translateX:f,translateY:d,coordinate:r})}}function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(r),!0).forEach(function(n){y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RO(n.key),n)}}function bY(e,t,r){return t&&vY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jY(e,t,r){return t=cm(t),wY(e,LO()?Reflect.construct(t,r||[],cm(e).constructor):t.apply(e,r))}function wY(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NY(e)}function NY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LO=function(){return!!e})()}function cm(e){return cm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cm(e)}function SY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x0(e,t)}function x0(e,t){return x0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},x0(e,t)}function y0(e,t,r){return t=RO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RO(e){var t=_Y(e,"string");return ol(t)=="symbol"?t:t+""}function _Y(e,t){if(ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var BN=1,AY=function(e){function t(){var r;yY(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=jY(this,t,[].concat(s)),y0(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),y0(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return SY(t,e),bY(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>BN||Math.abs(n.height-this.state.lastBoundingBox.height)>BN)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,f=s.coordinate,d=s.hasPayload,m=s.isAnimationActive,g=s.offset,b=s.position,h=s.reverseDirection,j=s.useTranslate3d,p=s.viewBox,y=s.wrapperStyle,x=xY({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:g,position:b,reverseDirection:h,tooltipBox:this.state.lastBoundingBox,useTranslate3d:j,viewBox:p}),S=x.cssClasses,w=x.cssProperties,v=RN(RN({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},y);return V.createElement("div",{tabIndex:-1,className:S,style:v,ref:function(P){n.wrapperNode=P}},u)}}])}(N.PureComponent),PY=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zl={isSsr:PY()};function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function FN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(r),!0).forEach(function(n){xb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FO(n.key),n)}}function OY(e,t,r){return t&&CY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TY(e,t,r){return t=um(t),kY(e,BO()?Reflect.construct(t,r||[],um(e).constructor):t.apply(e,r))}function kY(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MY(e)}function MY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BO=function(){return!!e})()}function um(e){return um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},um(e)}function DY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v0(e,t)}function v0(e,t){return v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},v0(e,t)}function xb(e,t,r){return t=FO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FO(e){var t=$Y(e,"string");return ll(t)=="symbol"?t:t+""}function $Y(e,t){if(ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function IY(e){return e.dataKey}function LY(e,t){return V.isValidElement(e)?V.cloneElement(e,t):typeof e=="function"?V.createElement(e,t):V.createElement(dY,t)}var qr=function(e){function t(){return EY(this,t),TY(this,t,arguments)}return DY(t,e),OY(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,f=s.coordinate,d=s.filterNull,m=s.isAnimationActive,g=s.offset,b=s.payload,h=s.payloadUniqBy,j=s.position,p=s.reverseDirection,y=s.useTranslate3d,x=s.viewBox,S=s.wrapperStyle,w=b??[];d&&w.length&&(w=CO(b.filter(function(_){return _.value!=null&&(_.hide!==!0||n.props.includeHidden)}),h,IY));var v=w.length>0;return V.createElement(AY,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:v,offset:g,position:j,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:S},LY(u,zN(zN({},this.props),{},{payload:w})))}}])}(N.PureComponent);xb(qr,"displayName","Tooltip");xb(qr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var RY=Ea,BY=function(){return RY.Date.now()},FY=BY,zY=/\s/;function VY(e){for(var t=e.length;t--&&zY.test(e.charAt(t)););return t}var UY=VY,WY=UY,HY=/^\s+/;function qY(e){return e&&e.slice(0,WY(e)+1).replace(HY,"")}var GY=qY,KY=GY,VN=ai,YY=Ml,UN=NaN,XY=/^[-+]0x[0-9a-f]+$/i,JY=/^0b[01]+$/i,ZY=/^0o[0-7]+$/i,QY=parseInt;function eX(e){if(typeof e=="number")return e;if(YY(e))return UN;if(VN(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VN(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=KY(e);var r=JY.test(e);return r||ZY.test(e)?QY(e.slice(2),r?2:8):XY.test(e)?UN:+e}var zO=eX,tX=ai,xg=FY,WN=zO,rX="Expected a function",nX=Math.max,aX=Math.min;function sX(e,t,r){var n,s,i,o,l,c,u=0,f=!1,d=!1,m=!0;if(typeof e!="function")throw new TypeError(rX);t=WN(t)||0,tX(r)&&(f=!!r.leading,d="maxWait"in r,i=d?nX(WN(r.maxWait)||0,t):i,m="trailing"in r?!!r.trailing:m);function g(v){var _=n,P=s;return n=s=void 0,u=v,o=e.apply(P,_),o}function b(v){return u=v,l=setTimeout(p,t),f?g(v):o}function h(v){var _=v-c,P=v-u,C=t-_;return d?aX(C,i-P):C}function j(v){var _=v-c,P=v-u;return c===void 0||_>=t||_<0||d&&P>=i}function p(){var v=xg();if(j(v))return y(v);l=setTimeout(p,h(v))}function y(v){return l=void 0,m&&n?g(v):(n=s=void 0,o)}function x(){l!==void 0&&clearTimeout(l),u=0,n=c=s=l=void 0}function S(){return l===void 0?o:y(xg())}function w(){var v=xg(),_=j(v);if(n=arguments,s=this,c=v,_){if(l===void 0)return b(c);if(d)return clearTimeout(l),l=setTimeout(p,t),g(c)}return l===void 0&&(l=setTimeout(p,t)),o}return w.cancel=x,w.flush=S,w}var iX=sX,oX=iX,lX=ai,cX="Expected a function";function uX(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(cX);return lX(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),oX(e,t,{leading:n,maxWait:t,trailing:s})}var dX=uX;const VO=jt(dX);function xu(e){"@babel/helpers - typeof";return xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(e)}function HN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HN(Object(r),!0).forEach(function(n){fX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fX(e,t,r){return t=mX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e){var t=hX(e,"string");return xu(t)=="symbol"?t:t+""}function hX(e,t){if(xu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pX(e,t){return vX(e)||yX(e,t)||xX(e,t)||gX()}function gX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xX(e,t){if(e){if(typeof e=="string")return qN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qN(e,t)}}function qN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function vX(e){if(Array.isArray(e))return e}var Eo=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,m=e.maxHeight,g=e.children,b=e.debounce,h=b===void 0?0:b,j=e.id,p=e.className,y=e.onResize,x=e.style,S=x===void 0?{}:x,w=N.useRef(null),v=N.useRef();v.current=y,N.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=N.useState({containerWidth:s.width,containerHeight:s.height}),P=pX(_,2),C=P[0],$=P[1],A=N.useCallback(function(O,L){$(function(M){var F=Math.round(O),R=Math.round(L);return M.containerWidth===F&&M.containerHeight===R?M:{containerWidth:F,containerHeight:R}})},[]);N.useEffect(function(){var O=function(z){var I,X=z[0].contentRect,re=X.width,W=X.height;A(re,W),(I=v.current)===null||I===void 0||I.call(v,re,W)};h>0&&(O=VO(O,h,{trailing:!0,leading:!1}));var L=new ResizeObserver(O),M=w.current.getBoundingClientRect(),F=M.width,R=M.height;return A(F,R),L.observe(w.current),function(){L.disconnect()}},[A,h]);var T=N.useMemo(function(){var O=C.containerWidth,L=C.containerHeight;if(O<0||L<0)return null;na(Pi(o)||Pi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),na(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=Pi(o)?O:o,F=Pi(c)?L:c;r&&r>0&&(M?F=M/r:F&&(M=F*r),m&&F>m&&(F=m)),na(M>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,F,o,c,f,d,r);var R=!Array.isArray(g)&&Ka(g.type).endsWith("Chart");return V.Children.map(g,function(B){return V.isValidElement(B)?N.cloneElement(B,Bd({width:M,height:F},R?{style:Bd({height:"100%",width:"100%",maxHeight:F,maxWidth:M},B.props.style)}:{})):B})},[r,g,c,m,d,f,C,o]);return V.createElement("div",{id:j?"".concat(j):void 0,className:nt("recharts-responsive-container",p),style:Bd(Bd({},S),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:m}),ref:w},T)}),Gh=function(t){return null};Gh.displayName="Cell";function yu(e){"@babel/helpers - typeof";return yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yu(e)}function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){bX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bX(e,t,r){return t=jX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jX(e){var t=wX(e,"string");return yu(t)=="symbol"?t:t+""}function wX(e,t){if(yu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oo={widthCache:{},cacheCount:0},NX=2e3,SX={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},KN="recharts_measurement_span";function _X(e){var t=b0({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var $c=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zl.isSsr)return{width:0,height:0};var n=_X(r),s=JSON.stringify({text:t,copyStyle:n});if(oo.widthCache[s])return oo.widthCache[s];try{var i=document.getElementById(KN);i||(i=document.createElement("span"),i.setAttribute("id",KN),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=b0(b0({},SX),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return oo.widthCache[s]=c,++oo.cacheCount>NX&&(oo.cacheCount=0,oo.widthCache={}),c}catch{return{width:0,height:0}}},AX=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function vu(e){"@babel/helpers - typeof";return vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vu(e)}function dm(e,t){return OX(e)||CX(e,t)||EX(e,t)||PX()}function PX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EX(e,t){if(e){if(typeof e=="string")return YN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return YN(e,t)}}function YN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function OX(e){if(Array.isArray(e))return e}function TX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MX(n.key),n)}}function kX(e,t,r){return t&&XN(e.prototype,t),r&&XN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MX(e){var t=DX(e,"string");return vu(t)=="symbol"?t:t+""}function DX(e,t){if(vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var JN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ZN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$X=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,IX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,UO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LX=Object.keys(UO),Co="NaN";function RX(e,t){return e*UO[t]}var Fd=function(){function e(t,r){TX(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!$X.test(r)&&(this.num=NaN,this.unit=""),LX.includes(r)&&(this.num=RX(t,r),this.unit="px")}return kX(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=IX.exec(r))!==null&&n!==void 0?n:[],i=dm(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function WO(e){if(e.includes(Co))return Co;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=JN.exec(t))!==null&&r!==void 0?r:[],s=dm(n,4),i=s[1],o=s[2],l=s[3],c=Fd.parse(i??""),u=Fd.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Co;t=t.replace(JN,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,m=(d=ZN.exec(t))!==null&&d!==void 0?d:[],g=dm(m,4),b=g[1],h=g[2],j=g[3],p=Fd.parse(b??""),y=Fd.parse(j??""),x=h==="+"?p.add(y):p.subtract(y);if(x.isNaN())return Co;t=t.replace(ZN,x.toString())}return t}var QN=/\(([^()]*)\)/;function BX(e){for(var t=e;t.includes("(");){var r=QN.exec(t),n=dm(r,2),s=n[1];t=t.replace(QN,WO(s))}return t}function FX(e){var t=e.replace(/\s+/g,"");return t=BX(t),t=WO(t),t}function zX(e){try{return FX(e)}catch{return Co}}function yg(e){var t=zX(e.slice(5,-1));return t===Co?"":t}var VX=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],UX=["dx","dy","angle","className","breakAll"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(this,arguments)}function e2(e,t){if(e==null)return{};var r=WX(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function t2(e,t){return KX(e)||GX(e,t)||qX(e,t)||HX()}function HX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qX(e,t){if(e){if(typeof e=="string")return r2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r2(e,t)}}function r2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function KX(e){if(Array.isArray(e))return e}var HO=/[ \f\n\r\t\v\u2028\u2029]+/,qO=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];it(r)||(n?i=r.toString().split(""):i=r.toString().split(HO));var o=i.map(function(c){return{word:c,width:$c(c,s).width}}),l=n?0:$c("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},YX=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=we(o),d=l,m=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return M.reduce(function(F,R){var B=R.word,z=R.width,I=F[F.length-1];if(I&&(s==null||i||I.width+z+n<Number(s)))I.words.push(B),I.width+=z+n;else{var X={words:[B],width:z};F.push(X)}return F},[])},g=m(r),b=function(M){return M.reduce(function(F,R){return F.width>R.width?F:R})};if(!f)return g;for(var h="",j=function(M){var F=d.slice(0,M),R=qO({breakAll:u,style:c,children:F+h}).wordsWithComputedWidth,B=m(R),z=B.length>o||b(B).width>Number(s);return[z,B]},p=0,y=d.length-1,x=0,S;p<=y&&x<=d.length-1;){var w=Math.floor((p+y)/2),v=w-1,_=j(v),P=t2(_,2),C=P[0],$=P[1],A=j(w),T=t2(A,1),O=T[0];if(!C&&!O&&(p=w+1),C&&O&&(y=w-1),!C&&O){S=$;break}x++}return S||g},n2=function(t){var r=it(t)?[]:t.toString().split(HO);return[{words:r}]},XX=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!zl.isSsr){var c,u,f=qO({breakAll:o,children:s,style:i});if(f){var d=f.wordsWithComputedWidth,m=f.spaceWidth;c=d,u=m}else return n2(s);return YX({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return n2(s)},a2="#808080",qi=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,m=t.textAnchor,g=m===void 0?"start":m,b=t.verticalAnchor,h=b===void 0?"end":b,j=t.fill,p=j===void 0?a2:j,y=e2(t,VX),x=N.useMemo(function(){return XX({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:d,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,d,y.style,y.width]),S=y.dx,w=y.dy,v=y.angle,_=y.className,P=y.breakAll,C=e2(y,UX);if(!gr(n)||!gr(i))return null;var $=n+(we(S)?S:0),A=i+(we(w)?w:0),T;switch(h){case"start":T=yg("calc(".concat(u,")"));break;case"middle":T=yg("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=yg("calc(".concat(x.length-1," * -").concat(l,")"));break}var O=[];if(d){var L=x[0].width,M=y.width;O.push("scale(".concat((we(M)?M/L:1)/L,")"))}return v&&O.push("rotate(".concat(v,", ").concat($,", ").concat(A,")")),O.length&&(C.transform=O.join(" ")),V.createElement("text",j0({},Ge(C,!0),{x:$,y:A,className:nt("recharts-text",_),textAnchor:g,fill:p.includes("url")?a2:p}),x.map(function(F,R){var B=F.words.join(P?"":" ");return V.createElement("tspan",{x:$,dy:R===0?T:l,key:"".concat(B,"-").concat(R)},B)}))};function zs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JX(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yb(e){let t,r,n;e.length!==2?(t=zs,r=(l,c)=>zs(e(l),c),n=(l,c)=>e(l)-c):(t=e===zs||e===JX?e:ZX,r=e,n=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=s(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:s,center:o,right:i}}function ZX(){return 0}function GO(e){return e===null?NaN:+e}function*QX(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const eJ=yb(zs),ld=eJ.right;yb(GO).center;class s2 extends Map{constructor(t,r=nJ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(i2(this,t))}has(t){return super.has(i2(this,t))}set(t,r){return super.set(tJ(this,t),r)}delete(t){return super.delete(rJ(this,t))}}function i2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function tJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function rJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function nJ(e){return e!==null&&typeof e=="object"?e.valueOf():e}function aJ(e=zs){if(e===zs)return KO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function KO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sJ=Math.sqrt(50),iJ=Math.sqrt(10),oJ=Math.sqrt(2);function fm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=sJ?10:i>=iJ?5:i>=oJ?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?fm(e,t,r*2):[l,c,u]}function w0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?fm(t,e,r):fm(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function N0(e,t,r){return t=+t,e=+e,r=+r,fm(e,t,r)[2]}function S0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?N0(t,e,r):N0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function o2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function l2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function YO(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?KO:aJ(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(t-u*d/c+m)),b=Math.min(n,Math.floor(t+(c-u)*d/c+m));YO(e,t,g,b,s)}const i=e[t];let o=r,l=n;for(ic(e,r,t),s(e[n],i)>0&&ic(e,r,n);o<l;){for(ic(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?ic(e,r,l):(++l,ic(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function ic(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function lJ(e,t,r){if(e=Float64Array.from(QX(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return l2(e);if(t>=1)return o2(e);var n,s=(n-1)*t,i=Math.floor(s),o=o2(YO(e,i).subarray(0,i+1)),l=l2(e.subarray(i+1));return o+(l-o)*(s-i)}}function cJ(e,t,r=GO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function uJ(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Hn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function us(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _0=Symbol("implicit");function vb(){var e=new s2,t=[],r=[],n=_0;function s(i){let o=e.get(i);if(o===void 0){if(n!==_0)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new s2;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return vb(t,r).unknown(n)},Hn.apply(s,arguments),s}function bu(){var e=vb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var m=t().length,g=s<n,b=g?s:n,h=g?n:s;i=(h-b)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),b+=(h-b-i*(m-c))*f,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var j=uJ(m).map(function(p){return b+i*p});return r(g?j.reverse():j)}return e.domain=function(m){return arguments.length?(t(m),d()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,d()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,d()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),d()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),d()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,d()):u},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),d()):f},e.copy=function(){return bu(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},Hn.apply(d(),arguments)}function XO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return XO(t())},e}function Ic(){return XO(bu.apply(null,arguments).paddingInner(1))}function bb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function JO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cd(){}var ju=.7,mm=1/ju,Wo="\\s*([+-]?\\d+)\\s*",wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dJ=/^#([0-9a-f]{3,8})$/,fJ=new RegExp(`^rgb\\(${Wo},${Wo},${Wo}\\)$`),mJ=new RegExp(`^rgb\\(${Na},${Na},${Na}\\)$`),hJ=new RegExp(`^rgba\\(${Wo},${Wo},${Wo},${wu}\\)$`),pJ=new RegExp(`^rgba\\(${Na},${Na},${Na},${wu}\\)$`),gJ=new RegExp(`^hsl\\(${wu},${Na},${Na}\\)$`),xJ=new RegExp(`^hsla\\(${wu},${Na},${Na},${wu}\\)$`),c2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bb(cd,Nu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:u2,formatHex:u2,formatHex8:yJ,formatHsl:vJ,formatRgb:d2,toString:d2});function u2(){return this.rgb().formatHex()}function yJ(){return this.rgb().formatHex8()}function vJ(){return ZO(this).formatHsl()}function d2(){return this.rgb().formatRgb()}function Nu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dJ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?f2(t):r===3?new sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?zd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?zd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fJ.exec(e))?new sn(t[1],t[2],t[3],1):(t=mJ.exec(e))?new sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hJ.exec(e))?zd(t[1],t[2],t[3],t[4]):(t=pJ.exec(e))?zd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gJ.exec(e))?p2(t[1],t[2]/100,t[3]/100,1):(t=xJ.exec(e))?p2(t[1],t[2]/100,t[3]/100,t[4]):c2.hasOwnProperty(e)?f2(c2[e]):e==="transparent"?new sn(NaN,NaN,NaN,0):null}function f2(e){return new sn(e>>16&255,e>>8&255,e&255,1)}function zd(e,t,r,n){return n<=0&&(e=t=r=NaN),new sn(e,t,r,n)}function bJ(e){return e instanceof cd||(e=Nu(e)),e?(e=e.rgb(),new sn(e.r,e.g,e.b,e.opacity)):new sn}function A0(e,t,r,n){return arguments.length===1?bJ(e):new sn(e,t,r,n??1)}function sn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}bb(sn,A0,JO(cd,{brighter(e){return e=e==null?mm:Math.pow(mm,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sn(Ii(this.r),Ii(this.g),Ii(this.b),hm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:m2,formatHex:m2,formatHex8:jJ,formatRgb:h2,toString:h2}));function m2(){return`#${Ei(this.r)}${Ei(this.g)}${Ei(this.b)}`}function jJ(){return`#${Ei(this.r)}${Ei(this.g)}${Ei(this.b)}${Ei((isNaN(this.opacity)?1:this.opacity)*255)}`}function h2(){const e=hm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ii(this.r)}, ${Ii(this.g)}, ${Ii(this.b)}${e===1?")":`, ${e})`}`}function hm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ii(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ei(e){return e=Ii(e),(e<16?"0":"")+e.toString(16)}function p2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qn(e,t,r,n)}function ZO(e){if(e instanceof Qn)return new Qn(e.h,e.s,e.l,e.opacity);if(e instanceof cd||(e=Nu(e)),!e)return new Qn;if(e instanceof Qn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Qn(o,l,c,e.opacity)}function wJ(e,t,r,n){return arguments.length===1?ZO(e):new Qn(e,t,r,n??1)}function Qn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}bb(Qn,wJ,JO(cd,{brighter(e){return e=e==null?mm:Math.pow(mm,e),new Qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ju:Math.pow(ju,e),new Qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new sn(vg(e>=240?e-240:e+120,s,n),vg(e,s,n),vg(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Qn(g2(this.h),Vd(this.s),Vd(this.l),hm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hm(this.opacity);return`${e===1?"hsl(":"hsla("}${g2(this.h)}, ${Vd(this.s)*100}%, ${Vd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function g2(e){return e=(e||0)%360,e<0?e+360:e}function Vd(e){return Math.max(0,Math.min(1,e||0))}function vg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jb=e=>()=>e;function NJ(e,t){return function(r){return e+r*t}}function SJ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _J(e){return(e=+e)==1?QO:function(t,r){return r-t?SJ(t,r,e):jb(isNaN(t)?r:t)}}function QO(e,t){var r=t-e;return r?NJ(e,r):jb(isNaN(e)?t:e)}const x2=function e(t){var r=_J(t);function n(s,i){var o=r((s=A0(s)).r,(i=A0(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=QO(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return n.gamma=e,n}(1);function AJ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function PJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EJ(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Vl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function CJ(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OJ(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Vl(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var P0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bg=new RegExp(P0.source,"g");function TJ(e){return function(){return e}}function kJ(e){return function(t){return e(t)+""}}function MJ(e,t){var r=P0.lastIndex=bg.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=P0.exec(e))&&(s=bg.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:pm(n,s)})),r=bg.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?kJ(c[0].x):TJ(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Vl(e,t){var r=typeof t,n;return t==null||r==="boolean"?jb(t):(r==="number"?pm:r==="string"?(n=Nu(t))?(t=n,x2):MJ:t instanceof Nu?x2:t instanceof Date?CJ:PJ(t)?AJ:Array.isArray(t)?EJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OJ:pm)(e,t)}function wb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DJ(e,t){t===void 0&&(t=e,e=Vl);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function $J(e){return function(){return e}}function gm(e){return+e}var y2=[0,1];function Yr(e){return e}function E0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:$J(isNaN(t)?NaN:.5)}function IJ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function LJ(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=E0(s,n),i=r(o,i)):(n=E0(n,s),i=r(i,o)),function(l){return i(n(l))}}function RJ(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=E0(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=ld(e,l,1,n)-1;return i[c](s[c](l))}}function ud(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kh(){var e=y2,t=y2,r=Vl,n,s,i,o=Yr,l,c,u;function f(){var m=Math.min(e.length,t.length);return o!==Yr&&(o=IJ(e[0],e[m-1])),l=m>2?RJ:LJ,c=u=null,d}function d(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return d.invert=function(m){return o(s((u||(u=l(t,e.map(n),pm)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,gm),f()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),r=wb,f()},d.clamp=function(m){return arguments.length?(o=m?!0:Yr,f()):o!==Yr},d.interpolate=function(m){return arguments.length?(r=m,f()):r},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,g){return n=m,s=g,f()}}function Nb(){return Kh()(Yr,Yr)}function BJ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function cl(e){return e=xm(Math.abs(e)),e?e[1]:NaN}function FJ(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function zJ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var VJ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Su(e){if(!(t=VJ.exec(e)))throw new Error("invalid format: "+e);var t;return new Sb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Su.prototype=Sb.prototype;function Sb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Sb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UJ(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var eT;function WJ(e,t){var r=xm(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(eT=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+xm(e,Math.max(0,t+i-1))[0]}function v2(e,t){var r=xm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const b2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:BJ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>v2(e*100,t),r:v2,s:WJ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function j2(e){return e}var w2=Array.prototype.map,N2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function HJ(e){var t=e.grouping===void 0||e.thousands===void 0?j2:FJ(w2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?j2:zJ(w2.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Su(d);var m=d.fill,g=d.align,b=d.sign,h=d.symbol,j=d.zero,p=d.width,y=d.comma,x=d.precision,S=d.trim,w=d.type;w==="n"?(y=!0,w="g"):b2[w]||(x===void 0&&(x=12),S=!0,w="g"),(j||m==="0"&&g==="=")&&(j=!0,m="0",g="=");var v=h==="$"?r:h==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=h==="$"?n:/[%p]/.test(w)?o:"",P=b2[w],C=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function $(A){var T=v,O=_,L,M,F;if(w==="c")O=P(A)+O,A="";else{A=+A;var R=A<0||1/A<0;if(A=isNaN(A)?c:P(Math.abs(A),x),S&&(A=UJ(A)),R&&+A==0&&b!=="+"&&(R=!1),T=(R?b==="("?b:l:b==="-"||b==="("?"":b)+T,O=(w==="s"?N2[8+eT/3]:"")+O+(R&&b==="("?")":""),C){for(L=-1,M=A.length;++L<M;)if(F=A.charCodeAt(L),48>F||F>57){O=(F===46?s+A.slice(L+1):A.slice(L))+O,A=A.slice(0,L);break}}}y&&!j&&(A=t(A,1/0));var B=T.length+A.length+O.length,z=B<p?new Array(p-B+1).join(m):"";switch(y&&j&&(A=t(z+A,z.length?p-O.length:1/0),z=""),g){case"<":A=T+A+O+z;break;case"=":A=T+z+A+O;break;case"^":A=z.slice(0,B=z.length>>1)+T+A+O+z.slice(B);break;default:A=z+T+A+O;break}return i(A)}return $.toString=function(){return d+""},$}function f(d,m){var g=u((d=Su(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(cl(m)/3)))*3,h=Math.pow(10,-b),j=N2[8+b/3];return function(p){return g(h*p)+j}}return{format:u,formatPrefix:f}}var Ud,_b,tT;qJ({thousands:",",grouping:[3],currency:["$",""]});function qJ(e){return Ud=HJ(e),_b=Ud.format,tT=Ud.formatPrefix,Ud}function GJ(e){return Math.max(0,-cl(Math.abs(e)))}function KJ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cl(t)/3)))*3-cl(Math.abs(e)))}function YJ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,cl(t)-cl(e))+1}function rT(e,t,r,n){var s=S0(e,t,r),i;switch(n=Su(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=KJ(s,o))&&(n.precision=i),tT(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=YJ(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=GJ(s))&&(n.precision=i-(n.type==="%")*2);break}}return _b(n)}function si(e){var t=e.domain;return e.ticks=function(r){var n=t();return w0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return rT(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=N0(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function ym(){var e=Nb();return e.copy=function(){return ud(e,ym())},Hn.apply(e,arguments),si(e)}function nT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return nT(e).unknown(t)},e=arguments.length?Array.from(e,gm):[0,1],si(r)}function aT(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function S2(e){return Math.log(e)}function _2(e){return Math.exp(e)}function XJ(e){return-Math.log(-e)}function JJ(e){return-Math.exp(-e)}function ZJ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function QJ(e){return e===10?ZJ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eZ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function A2(e){return(t,r)=>-e(-t,r)}function Ab(e){const t=e(S2,_2),r=t.domain;let n=10,s,i;function o(){return s=eZ(n),i=QJ(n),r()[0]<0?(s=A2(s),i=A2(i),e(XJ,JJ)):e(S2,_2),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let m=s(u),g=s(f),b,h;const j=l==null?10:+l;let p=[];if(!(n%1)&&g-m<j){if(m=Math.floor(m),g=Math.ceil(g),u>0){for(;m<=g;++m)for(b=1;b<n;++b)if(h=m<0?b/i(-m):b*i(m),!(h<u)){if(h>f)break;p.push(h)}}else for(;m<=g;++m)for(b=n-1;b>=1;--b)if(h=m>0?b/i(-m):b*i(m),!(h<u)){if(h>f)break;p.push(h)}p.length*2<j&&(p=w0(u,f,j))}else p=w0(m,g,Math.min(g-m,j)).map(i);return d?p.reverse():p},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Su(c)).precision==null&&(c.trim=!0),c=_b(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/i(Math.round(s(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(aT(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function sT(){const e=Ab(Kh()).domain([1,10]);return e.copy=()=>ud(e,sT()).base(e.base()),Hn.apply(e,arguments),e}function P2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function E2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Pb(e){var t=1,r=e(P2(t),E2(t));return r.constant=function(n){return arguments.length?e(P2(t=+n),E2(t)):t},si(r)}function iT(){var e=Pb(Kh());return e.copy=function(){return ud(e,iT()).constant(e.constant())},Hn.apply(e,arguments)}function C2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tZ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rZ(e){return e<0?-e*e:e*e}function Eb(e){var t=e(Yr,Yr),r=1;function n(){return r===1?e(Yr,Yr):r===.5?e(tZ,rZ):e(C2(r),C2(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},si(t)}function Cb(){var e=Eb(Kh());return e.copy=function(){return ud(e,Cb()).exponent(e.exponent())},Hn.apply(e,arguments),e}function nZ(){return Cb.apply(null,arguments).exponent(.5)}function O2(e){return Math.sign(e)*e*e}function aZ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function oT(){var e=Nb(),t=[0,1],r=!1,n;function s(i){var o=aZ(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(O2(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,gm)).map(O2)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return oT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Hn.apply(s,arguments),si(s)}function lT(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=cJ(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[ld(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(zs),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return lT().domain(e).range(t).unknown(n)},Hn.apply(i,arguments)}function cT(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[ld(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return cT().domain([e,t]).range(s).unknown(i)},Hn.apply(si(o),arguments)}function uT(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[ld(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return uT().domain(e).range(t).unknown(r)},Hn.apply(s,arguments)}const jg=new Date,wg=new Date;function xr(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>xr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(jg.setTime(+i),wg.setTime(+o),e(jg),e(wg),Math.floor(r(jg,wg))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const vm=xr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vm);vm.range;const Va=1e3,In=Va*60,Ua=In*60,ns=Ua*24,Ob=ns*7,T2=ns*30,Ng=ns*365,Ci=xr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Va)},(e,t)=>(t-e)/Va,e=>e.getUTCSeconds());Ci.range;const Tb=xr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va)},(e,t)=>{e.setTime(+e+t*In)},(e,t)=>(t-e)/In,e=>e.getMinutes());Tb.range;const kb=xr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*In)},(e,t)=>(t-e)/In,e=>e.getUTCMinutes());kb.range;const Mb=xr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va-e.getMinutes()*In)},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getHours());Mb.range;const Db=xr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCHours());Db.range;const dd=xr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*In)/ns,e=>e.getDate()-1);dd.range;const Yh=xr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>e.getUTCDate()-1);Yh.range;const dT=xr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ns,e=>Math.floor(e/ns));dT.range;function to(e){return xr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*In)/Ob)}const Xh=to(0),bm=to(1),sZ=to(2),iZ=to(3),ul=to(4),oZ=to(5),lZ=to(6);Xh.range;bm.range;sZ.range;iZ.range;ul.range;oZ.range;lZ.range;function ro(e){return xr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Ob)}const Jh=ro(0),jm=ro(1),cZ=ro(2),uZ=ro(3),dl=ro(4),dZ=ro(5),fZ=ro(6);Jh.range;jm.range;cZ.range;uZ.range;dl.range;dZ.range;fZ.range;const $b=xr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$b.range;const Ib=xr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ib.range;const as=xr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());as.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});as.range;const ss=xr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ss.range;function fT(e,t,r,n,s,i){const o=[[Ci,1,Va],[Ci,5,5*Va],[Ci,15,15*Va],[Ci,30,30*Va],[i,1,In],[i,5,5*In],[i,15,15*In],[i,30,30*In],[s,1,Ua],[s,3,3*Ua],[s,6,6*Ua],[s,12,12*Ua],[n,1,ns],[n,2,2*ns],[r,1,Ob],[t,1,T2],[t,3,3*T2],[e,1,Ng]];function l(u,f,d){const m=f<u;m&&([u,f]=[f,u]);const g=d&&typeof d.range=="function"?d:c(u,f,d),b=g?g.range(u,+f+1):[];return m?b.reverse():b}function c(u,f,d){const m=Math.abs(f-u)/d,g=yb(([,,j])=>j).right(o,m);if(g===o.length)return e.every(S0(u/Ng,f/Ng,d));if(g===0)return vm.every(Math.max(S0(u,f,d),1));const[b,h]=o[m/o[g-1][2]<o[g][2]/m?g-1:g];return b.every(h)}return[l,c]}const[mZ,hZ]=fT(ss,Ib,Jh,dT,Db,kb),[pZ,gZ]=fT(as,$b,Xh,dd,Mb,Tb);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _g(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function oc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function xZ(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=lc(s),f=cc(s),d=lc(i),m=cc(i),g=lc(o),b=cc(o),h=lc(l),j=cc(l),p=lc(c),y=cc(c),x={a:R,A:B,b:z,B:I,c:null,d:L2,e:L2,f:FZ,g:XZ,G:ZZ,H:LZ,I:RZ,j:BZ,L:mT,m:zZ,M:VZ,p:X,q:re,Q:F2,s:z2,S:UZ,u:WZ,U:HZ,V:qZ,w:GZ,W:KZ,x:null,X:null,y:YZ,Y:JZ,Z:QZ,"%":B2},S={a:W,A:de,b:Ae,B:Be,c:null,d:R2,e:R2,f:nQ,g:mQ,G:pQ,H:eQ,I:tQ,j:rQ,L:pT,m:aQ,M:sQ,p:K,q:U,Q:F2,s:z2,S:iQ,u:oQ,U:lQ,V:cQ,w:uQ,W:dQ,x:null,X:null,y:fQ,Y:hQ,Z:gQ,"%":B2},w={a:$,A,b:T,B:O,c:L,d:$2,e:$2,f:MZ,g:D2,G:M2,H:I2,I:I2,j:CZ,L:kZ,m:EZ,M:OZ,p:C,q:PZ,Q:$Z,s:IZ,S:TZ,u:wZ,U:NZ,V:SZ,w:jZ,W:_Z,x:M,X:F,y:D2,Y:M2,Z:AZ,"%":DZ};x.x=v(r,x),x.X=v(n,x),x.c=v(t,x),S.x=v(r,S),S.X=v(n,S),S.c=v(t,S);function v(J,D){return function(Y){var G=[],ie=-1,pe=0,xe=J.length,q,oe,Oe;for(Y instanceof Date||(Y=new Date(+Y));++ie<xe;)J.charCodeAt(ie)===37&&(G.push(J.slice(pe,ie)),(oe=k2[q=J.charAt(++ie)])!=null?q=J.charAt(++ie):oe=q==="e"?" ":"0",(Oe=D[q])&&(q=Oe(Y,oe)),G.push(q),pe=ie+1);return G.push(J.slice(pe,ie)),G.join("")}}function _(J,D){return function(Y){var G=oc(1900,void 0,1),ie=P(G,J,Y+="",0),pe,xe;if(ie!=Y.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(D&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(pe=_g(oc(G.y,0,1)),xe=pe.getUTCDay(),pe=xe>4||xe===0?jm.ceil(pe):jm(pe),pe=Yh.offset(pe,(G.V-1)*7),G.y=pe.getUTCFullYear(),G.m=pe.getUTCMonth(),G.d=pe.getUTCDate()+(G.w+6)%7):(pe=Sg(oc(G.y,0,1)),xe=pe.getDay(),pe=xe>4||xe===0?bm.ceil(pe):bm(pe),pe=dd.offset(pe,(G.V-1)*7),G.y=pe.getFullYear(),G.m=pe.getMonth(),G.d=pe.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),xe="Z"in G?_g(oc(G.y,0,1)).getUTCDay():Sg(oc(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(xe+5)%7:G.w+G.U*7-(xe+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,_g(G)):Sg(G)}}function P(J,D,Y,G){for(var ie=0,pe=D.length,xe=Y.length,q,oe;ie<pe;){if(G>=xe)return-1;if(q=D.charCodeAt(ie++),q===37){if(q=D.charAt(ie++),oe=w[q in k2?D.charAt(ie++):q],!oe||(G=oe(J,Y,G))<0)return-1}else if(q!=Y.charCodeAt(G++))return-1}return G}function C(J,D,Y){var G=u.exec(D.slice(Y));return G?(J.p=f.get(G[0].toLowerCase()),Y+G[0].length):-1}function $(J,D,Y){var G=g.exec(D.slice(Y));return G?(J.w=b.get(G[0].toLowerCase()),Y+G[0].length):-1}function A(J,D,Y){var G=d.exec(D.slice(Y));return G?(J.w=m.get(G[0].toLowerCase()),Y+G[0].length):-1}function T(J,D,Y){var G=p.exec(D.slice(Y));return G?(J.m=y.get(G[0].toLowerCase()),Y+G[0].length):-1}function O(J,D,Y){var G=h.exec(D.slice(Y));return G?(J.m=j.get(G[0].toLowerCase()),Y+G[0].length):-1}function L(J,D,Y){return P(J,t,D,Y)}function M(J,D,Y){return P(J,r,D,Y)}function F(J,D,Y){return P(J,n,D,Y)}function R(J){return o[J.getDay()]}function B(J){return i[J.getDay()]}function z(J){return c[J.getMonth()]}function I(J){return l[J.getMonth()]}function X(J){return s[+(J.getHours()>=12)]}function re(J){return 1+~~(J.getMonth()/3)}function W(J){return o[J.getUTCDay()]}function de(J){return i[J.getUTCDay()]}function Ae(J){return c[J.getUTCMonth()]}function Be(J){return l[J.getUTCMonth()]}function K(J){return s[+(J.getUTCHours()>=12)]}function U(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var D=v(J+="",x);return D.toString=function(){return J},D},parse:function(J){var D=_(J+="",!1);return D.toString=function(){return J},D},utcFormat:function(J){var D=v(J+="",S);return D.toString=function(){return J},D},utcParse:function(J){var D=_(J+="",!0);return D.toString=function(){return J},D}}}var k2={"-":"",_:" ",0:"0"},Nr=/^\s*\d+/,yZ=/^%/,vZ=/[\\^$*+?|[\]().{}]/g;function pt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function bZ(e){return e.replace(vZ,"\\$&")}function lc(e){return new RegExp("^(?:"+e.map(bZ).join("|")+")","i")}function cc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function jZ(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function wZ(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function NZ(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function SZ(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _Z(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function M2(e,t,r){var n=Nr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function D2(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function AZ(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function PZ(e,t,r){var n=Nr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function EZ(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function $2(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function CZ(e,t,r){var n=Nr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function I2(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function OZ(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function TZ(e,t,r){var n=Nr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function kZ(e,t,r){var n=Nr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function MZ(e,t,r){var n=Nr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DZ(e,t,r){var n=yZ.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $Z(e,t,r){var n=Nr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IZ(e,t,r){var n=Nr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function L2(e,t){return pt(e.getDate(),t,2)}function LZ(e,t){return pt(e.getHours(),t,2)}function RZ(e,t){return pt(e.getHours()%12||12,t,2)}function BZ(e,t){return pt(1+dd.count(as(e),e),t,3)}function mT(e,t){return pt(e.getMilliseconds(),t,3)}function FZ(e,t){return mT(e,t)+"000"}function zZ(e,t){return pt(e.getMonth()+1,t,2)}function VZ(e,t){return pt(e.getMinutes(),t,2)}function UZ(e,t){return pt(e.getSeconds(),t,2)}function WZ(e){var t=e.getDay();return t===0?7:t}function HZ(e,t){return pt(Xh.count(as(e)-1,e),t,2)}function hT(e){var t=e.getDay();return t>=4||t===0?ul(e):ul.ceil(e)}function qZ(e,t){return e=hT(e),pt(ul.count(as(e),e)+(as(e).getDay()===4),t,2)}function GZ(e){return e.getDay()}function KZ(e,t){return pt(bm.count(as(e)-1,e),t,2)}function YZ(e,t){return pt(e.getFullYear()%100,t,2)}function XZ(e,t){return e=hT(e),pt(e.getFullYear()%100,t,2)}function JZ(e,t){return pt(e.getFullYear()%1e4,t,4)}function ZZ(e,t){var r=e.getDay();return e=r>=4||r===0?ul(e):ul.ceil(e),pt(e.getFullYear()%1e4,t,4)}function QZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pt(t/60|0,"0",2)+pt(t%60,"0",2)}function R2(e,t){return pt(e.getUTCDate(),t,2)}function eQ(e,t){return pt(e.getUTCHours(),t,2)}function tQ(e,t){return pt(e.getUTCHours()%12||12,t,2)}function rQ(e,t){return pt(1+Yh.count(ss(e),e),t,3)}function pT(e,t){return pt(e.getUTCMilliseconds(),t,3)}function nQ(e,t){return pT(e,t)+"000"}function aQ(e,t){return pt(e.getUTCMonth()+1,t,2)}function sQ(e,t){return pt(e.getUTCMinutes(),t,2)}function iQ(e,t){return pt(e.getUTCSeconds(),t,2)}function oQ(e){var t=e.getUTCDay();return t===0?7:t}function lQ(e,t){return pt(Jh.count(ss(e)-1,e),t,2)}function gT(e){var t=e.getUTCDay();return t>=4||t===0?dl(e):dl.ceil(e)}function cQ(e,t){return e=gT(e),pt(dl.count(ss(e),e)+(ss(e).getUTCDay()===4),t,2)}function uQ(e){return e.getUTCDay()}function dQ(e,t){return pt(jm.count(ss(e)-1,e),t,2)}function fQ(e,t){return pt(e.getUTCFullYear()%100,t,2)}function mQ(e,t){return e=gT(e),pt(e.getUTCFullYear()%100,t,2)}function hQ(e,t){return pt(e.getUTCFullYear()%1e4,t,4)}function pQ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?dl(e):dl.ceil(e),pt(e.getUTCFullYear()%1e4,t,4)}function gQ(){return"+0000"}function B2(){return"%"}function F2(e){return+e}function z2(e){return Math.floor(+e/1e3)}var lo,xT,yT;xQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xQ(e){return lo=xZ(e),xT=lo.format,lo.parse,yT=lo.utcFormat,lo.utcParse,lo}function yQ(e){return new Date(e)}function vQ(e){return e instanceof Date?+e:+new Date(+e)}function Lb(e,t,r,n,s,i,o,l,c,u){var f=Nb(),d=f.invert,m=f.domain,g=u(".%L"),b=u(":%S"),h=u("%I:%M"),j=u("%I %p"),p=u("%a %d"),y=u("%b %d"),x=u("%B"),S=u("%Y");function w(v){return(c(v)<v?g:l(v)<v?b:o(v)<v?h:i(v)<v?j:n(v)<v?s(v)<v?p:y:r(v)<v?x:S)(v)}return f.invert=function(v){return new Date(d(v))},f.domain=function(v){return arguments.length?m(Array.from(v,vQ)):m().map(yQ)},f.ticks=function(v){var _=m();return e(_[0],_[_.length-1],v??10)},f.tickFormat=function(v,_){return _==null?w:u(_)},f.nice=function(v){var _=m();return(!v||typeof v.range!="function")&&(v=t(_[0],_[_.length-1],v??10)),v?m(aT(_,v)):f},f.copy=function(){return ud(f,Lb(e,t,r,n,s,i,o,l,c,u))},f}function bQ(){return Hn.apply(Lb(pZ,gZ,as,$b,Xh,dd,Mb,Tb,Ci,xT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function jQ(){return Hn.apply(Lb(mZ,hZ,ss,Ib,Jh,Yh,Db,kb,Ci,yT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Zh(){var e=0,t=1,r,n,s,i,o=Yr,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(i(d)-r)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(m){var g,b;return arguments.length?([g,b]=m,o=d(g,b),u):[o(0),o(1)]}}return u.range=f(Vl),u.rangeRound=f(wb),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),s=r===n?0:1/(n-r),u}}function ii(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vT(){var e=si(Zh()(Yr));return e.copy=function(){return ii(e,vT())},us.apply(e,arguments)}function bT(){var e=Ab(Zh()).domain([1,10]);return e.copy=function(){return ii(e,bT()).base(e.base())},us.apply(e,arguments)}function jT(){var e=Pb(Zh());return e.copy=function(){return ii(e,jT()).constant(e.constant())},us.apply(e,arguments)}function Rb(){var e=Eb(Zh());return e.copy=function(){return ii(e,Rb()).exponent(e.exponent())},us.apply(e,arguments)}function wQ(){return Rb.apply(null,arguments).exponent(.5)}function wT(){var e=[],t=Yr;function r(n){if(n!=null&&!isNaN(n=+n))return t((ld(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(zs),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>lJ(e,i/n))},r.copy=function(){return wT(t).domain(e)},us.apply(r,arguments)}function Qh(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=Yr,f,d=!1,m;function g(h){return isNaN(h=+h)?m:(h=.5+((h=+f(h))-i)*(n*h<n*i?l:c),u(d?Math.max(0,Math.min(1,h)):h))}g.domain=function(h){return arguments.length?([e,t,r]=h,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g):[e,t,r]},g.clamp=function(h){return arguments.length?(d=!!h,g):d},g.interpolator=function(h){return arguments.length?(u=h,g):u};function b(h){return function(j){var p,y,x;return arguments.length?([p,y,x]=j,u=DJ(h,[p,y,x]),g):[u(0),u(.5),u(1)]}}return g.range=b(Vl),g.rangeRound=b(wb),g.unknown=function(h){return arguments.length?(m=h,g):m},function(h){return f=h,s=h(e),i=h(t),o=h(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,g}}function NT(){var e=si(Qh()(Yr));return e.copy=function(){return ii(e,NT())},us.apply(e,arguments)}function ST(){var e=Ab(Qh()).domain([.1,1,10]);return e.copy=function(){return ii(e,ST()).base(e.base())},us.apply(e,arguments)}function _T(){var e=Pb(Qh());return e.copy=function(){return ii(e,_T()).constant(e.constant())},us.apply(e,arguments)}function Bb(){var e=Eb(Qh());return e.copy=function(){return ii(e,Bb()).exponent(e.exponent())},us.apply(e,arguments)}function NQ(){return Bb.apply(null,arguments).exponent(.5)}const V2=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:bu,scaleDiverging:NT,scaleDivergingLog:ST,scaleDivergingPow:Bb,scaleDivergingSqrt:NQ,scaleDivergingSymlog:_T,scaleIdentity:nT,scaleImplicit:_0,scaleLinear:ym,scaleLog:sT,scaleOrdinal:vb,scalePoint:Ic,scalePow:Cb,scaleQuantile:lT,scaleQuantize:cT,scaleRadial:oT,scaleSequential:vT,scaleSequentialLog:bT,scaleSequentialPow:Rb,scaleSequentialQuantile:wT,scaleSequentialSqrt:wQ,scaleSequentialSymlog:jT,scaleSqrt:nZ,scaleSymlog:iT,scaleThreshold:uT,scaleTime:bQ,scaleUtc:jQ,tickFormat:rT},Symbol.toStringTag,{value:"Module"}));var SQ=Ml;function _Q(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!SQ(o):r(o,l)))var l=o,c=i}return c}var ep=_Q;function AQ(e,t){return e>t}var AT=AQ,PQ=ep,EQ=AT,CQ=Fl;function OQ(e){return e&&e.length?PQ(e,CQ,EQ):void 0}var TQ=OQ;const tp=jt(TQ);function kQ(e,t){return e<t}var PT=kQ,MQ=ep,DQ=PT,$Q=Fl;function IQ(e){return e&&e.length?MQ(e,$Q,DQ):void 0}var LQ=IQ;const rp=jt(LQ);var RQ=Qv,BQ=Ca,FQ=$O,zQ=mn;function VQ(e,t){var r=zQ(e)?RQ:FQ;return r(e,BQ(t))}var UQ=VQ,WQ=MO,HQ=UQ;function qQ(e,t){return WQ(HQ(e,t),1)}var GQ=qQ;const KQ=jt(GQ);var YQ=hb;function XQ(e,t){return YQ(e,t)}var JQ=XQ;const np=jt(JQ);var Ul=1e9,ZQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zb,Wt=!0,Un="[DecimalError] ",Li=Un+"Invalid argument: ",Fb=Un+"Exponent out of range: ",Wl=Math.floor,bi=Math.pow,QQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,xn,yr=1e7,It=7,ET=9007199254740991,wm=Wl(ET/It),Le={};Le.absoluteValue=Le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Le.comparedTo=Le.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Le.decimalPlaces=Le.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*It;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Le.dividedBy=Le.div=function(e){return Ya(this,new this.constructor(e))};Le.dividedToIntegerBy=Le.idiv=function(e){var t=this,r=t.constructor;return At(Ya(t,new r(e),0,1),r.precision)};Le.equals=Le.eq=function(e){return!this.cmp(e)};Le.exponent=function(){return ur(this)};Le.greaterThan=Le.gt=function(e){return this.cmp(e)>0};Le.greaterThanOrEqualTo=Le.gte=function(e){return this.cmp(e)>=0};Le.isInteger=Le.isint=function(){return this.e>this.d.length-2};Le.isNegative=Le.isneg=function(){return this.s<0};Le.isPositive=Le.ispos=function(){return this.s>0};Le.isZero=function(){return this.s===0};Le.lessThan=Le.lt=function(e){return this.cmp(e)<0};Le.lessThanOrEqualTo=Le.lte=function(e){return this.cmp(e)<1};Le.logarithm=Le.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(xn))throw Error(Un+"NaN");if(r.s<1)throw Error(Un+(r.s?"NaN":"-Infinity"));return r.eq(xn)?new n(0):(Wt=!1,t=Ya(_u(r,i),_u(e,i),i),Wt=!0,At(t,s))};Le.minus=Le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?TT(t,e):CT(t,(e.s=-e.s,e))};Le.modulo=Le.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Un+"NaN");return r.s?(Wt=!1,t=Ya(r,e,0,1).times(e),Wt=!0,r.minus(t)):At(new n(r),s)};Le.naturalExponential=Le.exp=function(){return OT(this)};Le.naturalLogarithm=Le.ln=function(){return _u(this)};Le.negated=Le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Le.plus=Le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CT(t,e):TT(t,(e.s=-e.s,e))};Le.precision=Le.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Li+e);if(t=ur(s)+1,n=s.d.length-1,r=n*It+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Le.squareRoot=Le.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Un+"NaN")}for(e=ur(l),Wt=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=pa(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Wl((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Ya(l,i,o+2)).times(.5),pa(i.d).slice(0,o)===(t=pa(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(At(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Wt=!0,At(n,r)};Le.times=Le.mul=function(e){var t,r,n,s,i,o,l,c,u,f=this,d=f.constructor,m=f.d,g=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=m.length,u=g.length,c<u&&(i=m,m=g,g=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+g[n]*m[s-n-1]+t,i[s--]=l%yr|0,t=l/yr|0;i[s]=(i[s]+t)%yr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Wt?At(e,d.precision):e};Le.toDecimalPlaces=Le.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Pa(e,0,Ul),t===void 0?t=n.rounding:Pa(t,0,8),At(r,e+ur(r)+1,t))};Le.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Gi(n,!0):(Pa(e,0,Ul),t===void 0?t=s.rounding:Pa(t,0,8),n=At(new s(n),e+1,t),r=Gi(n,!0,e+1)),r};Le.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Gi(s):(Pa(e,0,Ul),t===void 0?t=i.rounding:Pa(t,0,8),n=At(new i(s),e+ur(s)+1,t),r=Gi(n.abs(),!1,e+ur(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Le.toInteger=Le.toint=function(){var e=this,t=e.constructor;return At(new t(e),ur(e)+1,t.rounding)};Le.toNumber=function(){return+this};Le.toPower=Le.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(xn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Un+"Infinity");return l}if(l.eq(xn))return l;if(n=c.precision,e.eq(xn))return At(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=ET){for(s=new c(xn),t=Math.ceil(n/It+4),Wt=!1;r%2&&(s=s.times(l),W2(s.d,t)),r=Wl(r/2),r!==0;)l=l.times(l),W2(l.d,t);return Wt=!0,e.s<0?new c(xn).div(s):At(s,n)}}else if(i<0)throw Error(Un+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Wt=!1,s=e.times(_u(l,n+u)),Wt=!0,s=OT(s),s.s=i,s};Le.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ur(s),n=Gi(s,r<=i.toExpNeg||r>=i.toExpPos)):(Pa(e,1,Ul),t===void 0?t=i.rounding:Pa(t,0,8),s=At(new i(s),e,t),r=ur(s),n=Gi(s,e<=r||r<=i.toExpNeg,e)),n};Le.toSignificantDigits=Le.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Pa(e,1,Ul),t===void 0?t=n.rounding:Pa(t,0,8)),At(new n(r),e,t)};Le.toString=Le.valueOf=Le.val=Le.toJSON=Le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ur(e),r=e.constructor;return Gi(e,t<=r.toExpNeg||t>=r.toExpPos)};function CT(e,t){var r,n,s,i,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Wt?At(t,d):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(d/It),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/yr|0,c[i]%=yr;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Wt?At(t,d):t}function Pa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Li+e)}function pa(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=It-n.length,r&&(i+=bs(r)),i+=n;o=e[t],n=o+"",r=It-n.length,r&&(i+=bs(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ya=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%yr|0,o=i/yr|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*yr+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,f,d,m,g,b,h,j,p,y,x,S,w,v,_,P,C=n.constructor,$=n.s==s.s?1:-1,A=n.d,T=s.d;if(!n.s)return new C(n);if(!s.s)throw Error(Un+"Division by zero");for(c=n.e-s.e,_=T.length,w=A.length,g=new C($),b=g.d=[],u=0;T[u]==(A[u]||0);)++u;if(T[u]>(A[u]||0)&&--c,i==null?y=i=C.precision:o?y=i+(ur(n)-ur(s))+1:y=i,y<0)return new C(0);if(y=y/It+2|0,u=0,_==1)for(f=0,T=T[0],y++;(u<w||f)&&y--;u++)x=f*yr+(A[u]||0),b[u]=x/T|0,f=x%T|0;else{for(f=yr/(T[0]+1)|0,f>1&&(T=e(T,f),A=e(A,f),_=T.length,w=A.length),S=_,h=A.slice(0,_),j=h.length;j<_;)h[j++]=0;P=T.slice(),P.unshift(0),v=T[0],T[1]>=yr/2&&++v;do f=0,l=t(T,h,_,j),l<0?(p=h[0],_!=j&&(p=p*yr+(h[1]||0)),f=p/v|0,f>1?(f>=yr&&(f=yr-1),d=e(T,f),m=d.length,j=h.length,l=t(d,h,m,j),l==1&&(f--,r(d,_<m?P:T,m))):(f==0&&(l=f=1),d=T.slice()),m=d.length,m<j&&d.unshift(0),r(h,d,j),l==-1&&(j=h.length,l=t(T,h,_,j),l<1&&(f++,r(h,_<j?P:T,j))),j=h.length):l===0&&(f++,h=[0]),b[u++]=f,l&&h[0]?h[j++]=A[S]||0:(h=[A[S]],j=1);while((S++<w||h[0]!==void 0)&&y--)}return b[0]||b.shift(),g.e=c,At(g,o?i+ur(g)+1:i)}}();function OT(e,t){var r,n,s,i,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(ur(e)>16)throw Error(Fb+ur(e));if(!e.s)return new f(xn);for(Wt=!1,l=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(bi(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f(xn),f.precision=l;;){if(s=At(s.times(e),l),r=r.times(++c),o=i.plus(Ya(s,r,l)),pa(o.d).slice(0,l)===pa(i.d).slice(0,l)){for(;u--;)i=At(i.times(i),l);return f.precision=d,t==null?(Wt=!0,At(i,d)):i}i=o}}function ur(e){for(var t=e.e*It,r=e.d[0];r>=10;r/=10)t++;return t}function Ag(e,t,r){if(t>e.LN10.sd())throw Wt=!0,r&&(e.precision=r),Error(Un+"LN10 precision limit exceeded");return At(new e(e.LN10),t)}function bs(e){for(var t="";e--;)t+="0";return t}function _u(e,t){var r,n,s,i,o,l,c,u,f,d=1,m=10,g=e,b=g.d,h=g.constructor,j=h.precision;if(g.s<1)throw Error(Un+(g.s?"NaN":"-Infinity"));if(g.eq(xn))return new h(0);if(t==null?(Wt=!1,u=j):u=t,g.eq(10))return t==null&&(Wt=!0),Ag(h,u);if(u+=m,h.precision=u,r=pa(b),n=r.charAt(0),i=ur(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=pa(g.d),n=r.charAt(0),d++;i=ur(g),n>1?(g=new h("0."+r),i++):g=new h(n+"."+r.slice(1))}else return c=Ag(h,u+2,j).times(i+""),g=_u(new h(n+"."+r.slice(1)),u-m).plus(c),h.precision=j,t==null?(Wt=!0,At(g,j)):g;for(l=o=g=Ya(g.minus(xn),g.plus(xn),u),f=At(g.times(g),u),s=3;;){if(o=At(o.times(f),u),c=l.plus(Ya(o,new h(s),u)),pa(c.d).slice(0,u)===pa(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(Ag(h,u+2,j).times(i+""))),l=Ya(l,new h(d),u),h.precision=j,t==null?(Wt=!0,At(l,j)):l;l=c,s+=2}}function U2(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Wl(r/It),e.d=[],n=(r+1)%It,r<0&&(n+=It),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=It;n<s;)e.d.push(+t.slice(n,n+=It));t=t.slice(n),n=It-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Wt&&(e.e>wm||e.e<-wm))throw Error(Fb+r)}else e.s=0,e.e=0,e.d=[0];return e}function At(e,t,r){var n,s,i,o,l,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=It,s=t,u=d[f=0];else{if(f=Math.ceil((n+1)/It),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=It,s=n-It+o}if(r!==void 0&&(i=bi(10,o-s-1),l=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/bi(10,o-s):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=ur(e),d.length=1,t=t-i-1,d[0]=bi(10,(It-t%It)%It),e.e=Wl(-t/It)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=bi(10,It-n),d[f]=s>0?(u/bi(10,o-s)%bi(10,s)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==yr&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=yr)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(Wt&&(e.e>wm||e.e<-wm))throw Error(Fb+ur(e));return e}function TT(e,t){var r,n,s,i,o,l,c,u,f,d,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Wt?At(t,g):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),s=Math.max(Math.ceil(g/It),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=d.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){f=c[s]<d[s];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(i=s;i&&c[--i]===0;)c[i]=yr-1;--c[i],c[s]+=yr}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Wt?At(t,g):t):new m(0)}function Gi(e,t,r){var n,s=ur(e),i=pa(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+bs(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+bs(-s-1)+i,r&&(n=r-o)>0&&(i+=bs(n))):s>=o?(i+=bs(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+bs(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=bs(n))),e.s<0?"-"+i:i}function W2(e,t){if(e.length>t)return e.length=t,!0}function kT(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Li+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return U2(o,i.toString())}else if(typeof i!="string")throw Error(Li+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,QQ.test(i))U2(o,i);else throw Error(Li+i)}if(s.prototype=Le,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=kT,s.config=s.set=eee,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function eee(e){if(!e||typeof e!="object")throw Error(Un+"Object expected");var t,r,n,s=["precision",1,Ul,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Wl(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Li+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Li+r+": "+n);return this}var zb=kT(ZQ);xn=new zb(1);const St=zb;function tee(e){return see(e)||aee(e)||nee(e)||ree()}function ree(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nee(e,t){if(e){if(typeof e=="string")return C0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C0(e,t)}}function aee(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function see(e){if(Array.isArray(e))return C0(e)}function C0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iee=function(t){return t},MT={},DT=function(t){return t===MT},H2=function(t){return function r(){return arguments.length===0||arguments.length===1&&DT(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},oee=function e(t,r){return t===1?r:H2(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==MT}).length;return o>=t?r.apply(void 0,s):e(t-o,H2(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=s.map(function(d){return DT(d)?c.shift():d});return r.apply(void 0,tee(f).concat(c))}))})},ap=function(t){return oee(t.length,t)},O0=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},lee=ap(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),cee=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return iee;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},T0=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},$T=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function uee(e){var t;return e===0?t=1:t=Math.floor(new St(e).abs().log(10).toNumber())+1,t}function dee(e,t,r){for(var n=new St(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var fee=ap(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),mee=ap(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),hee=ap(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const sp={rangeStep:dee,getDigitCount:uee,interpolateNumber:fee,uninterpolateNumber:mee,uninterpolateTruncation:hee};function k0(e){return xee(e)||gee(e)||IT(e)||pee()}function pee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gee(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function xee(e){if(Array.isArray(e))return M0(e)}function Au(e,t){return bee(e)||vee(e,t)||IT(e,t)||yee()}function yee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IT(e,t){if(e){if(typeof e=="string")return M0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M0(e,t)}}function M0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vee(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function bee(e){if(Array.isArray(e))return e}function LT(e){var t=Au(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function RT(e,t,r){if(e.lte(0))return new St(0);var n=sp.getDigitCount(e.toNumber()),s=new St(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new St(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new St(Math.ceil(c))}function jee(e,t,r){var n=1,s=new St(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new St(10).pow(sp.getDigitCount(e)-1),s=new St(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new St(Math.floor(e)))}else e===0?s=new St(Math.floor((t-1)/2)):r||(s=new St(Math.floor(e)));var o=Math.floor((t-1)/2),l=cee(lee(function(c){return s.add(new St(c-o).mul(n)).toNumber()}),O0);return l(0,t)}function BT(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new St(0),tickMin:new St(0),tickMax:new St(0)};var i=RT(new St(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new St(0):(o=new St(e).add(t).div(2),o=o.sub(new St(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new St(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?BT(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new St(l).mul(i)),tickMax:o.add(new St(c).mul(i))})}function wee(e){var t=Au(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=LT([r,n]),c=Au(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(k0(O0(0,s-1).map(function(){return 1/0}))):[].concat(k0(O0(0,s-1).map(function(){return-1/0})),[f]);return r>n?T0(d):d}if(u===f)return jee(u,s,i);var m=BT(u,f,o,i),g=m.step,b=m.tickMin,h=m.tickMax,j=sp.rangeStep(b,h.add(new St(.1).mul(g)),g);return r>n?T0(j):j}function Nee(e,t){var r=Au(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=LT([n,s]),l=Au(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var f=Math.max(t,2),d=RT(new St(u).sub(c).div(f-1),i,0),m=[].concat(k0(sp.rangeStep(new St(c),new St(u).sub(new St(.99).mul(d)),d)),[u]);return n>s?T0(m):m}var See=$T(wee),_ee=$T(Nee),Aee="Invariant failed";function Ki(e,t){throw new Error(Aee)}var Pee=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(this,arguments)}function Eee(e,t){return kee(e)||Tee(e,t)||Oee(e,t)||Cee()}function Cee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oee(e,t){if(e){if(typeof e=="string")return q2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q2(e,t)}}function q2(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function kee(e){if(Array.isArray(e))return e}function Mee(e,t){if(e==null)return{};var r=Dee(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VT(n.key),n)}}function Lee(e,t,r){return t&&Iee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ree(e,t,r){return t=Sm(t),Bee(e,FT()?Reflect.construct(t,r||[],Sm(e).constructor):t.apply(e,r))}function Bee(e,t){if(t&&(fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fee(e)}function Fee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FT=function(){return!!e})()}function Sm(e){return Sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sm(e)}function zee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D0(e,t)}function D0(e,t){return D0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D0(e,t)}function zT(e,t,r){return t=VT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VT(e){var t=Vee(e,"string");return fl(t)=="symbol"?t:t+""}function Vee(e,t){if(fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ip=function(e){function t(){return $ee(this,t),Ree(this,t,arguments)}return zee(t,e),Lee(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,m=Mee(n,Pee),g=Ge(m,!1);this.props.direction==="x"&&f.type!=="number"&&Ki();var b=c.map(function(h){var j=u(h,l),p=j.x,y=j.y,x=j.value,S=j.errorVal;if(!S)return null;var w=[],v,_;if(Array.isArray(S)){var P=Eee(S,2);v=P[0],_=P[1]}else v=_=S;if(i==="vertical"){var C=f.scale,$=y+s,A=$+o,T=$-o,O=C(x-v),L=C(x+_);w.push({x1:L,y1:A,x2:L,y2:T}),w.push({x1:O,y1:$,x2:L,y2:$}),w.push({x1:O,y1:A,x2:O,y2:T})}else if(i==="horizontal"){var M=d.scale,F=p+s,R=F-o,B=F+o,z=M(x-v),I=M(x+_);w.push({x1:R,y1:I,x2:B,y2:I}),w.push({x1:F,y1:z,x2:F,y2:I}),w.push({x1:R,y1:z,x2:B,y2:z})}return V.createElement(vt,Nm({className:"recharts-errorBar",key:"bar-".concat(w.map(function(X){return"".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))},g),w.map(function(X){return V.createElement("line",Nm({},X,{key:"line-".concat(X.x1,"-").concat(X.x2,"-").concat(X.y1,"-").concat(X.y2)}))}))});return V.createElement(vt,{className:"recharts-errorBars"},b)}}])}(V.Component);zT(ip,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});zT(ip,"displayName","ErrorBar");function Pu(e){"@babel/helpers - typeof";return Pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pu(e)}function G2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ci(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(r),!0).forEach(function(n){Uee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uee(e,t,r){return t=Wee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wee(e){var t=Hee(e,"string");return Pu(t)=="symbol"?t:t+""}function Hee(e,t){if(Pu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UT=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=gn(r,wa);if(!o)return null;var l=wa.defaultProps,c=l!==void 0?ci(ci({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var m=d.item,g=d.props,b=g.sectors||g.data||[];return f.concat(b.map(function(h){return{type:o.props.iconType||m.props.legendType,value:h.name,color:h.fill,payload:h}}))},[]):u=(n||[]).map(function(f){var d=f.item,m=d.type.defaultProps,g=m!==void 0?ci(ci({},m),d.props):{},b=g.dataKey,h=g.name,j=g.legendType,p=g.hide;return{inactive:p,dataKey:b,type:c.iconType||j||"square",color:Vb(d),value:h||b,payload:g}}),ci(ci(ci({},c),wa.getWithHeight(o,s)),{},{payload:u,item:o})};function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function K2(e){return Yee(e)||Kee(e)||Gee(e)||qee()}function qee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gee(e,t){if(e){if(typeof e=="string")return $0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $0(e,t)}}function Kee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Yee(e){if(Array.isArray(e))return $0(e)}function $0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ho(e,t,r){return t=Xee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xee(e){var t=Jee(e,"string");return Eu(t)=="symbol"?t:t+""}function Jee(e,t){if(Eu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Eu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rr(e,t,r){return it(e)||it(t)?r:gr(t)?wn(e,t,r):Je(t)?t(e):r}function Lc(e,t,r,n){var s=KQ(e,function(l){return Rr(l,t)});if(r==="number"){var i=s.filter(function(l){return we(l)||parseFloat(l)});return i.length?[rp(i),tp(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!it(l)}):s;return o.map(function(l){return gr(l)||l instanceof Date?l:""})}var Zee=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,g=void 0;if(Gr(d-f)!==Gr(m-d)){var b=[];if(Gr(m-d)===Gr(c[1]-c[0])){g=m;var h=d+c[1]-c[0];b[0]=Math.min(h,(h+f)/2),b[1]=Math.max(h,(h+f)/2)}else{g=f;var j=m+c[1]-c[0];b[0]=Math.min(d,(j+d)/2),b[1]=Math.max(d,(j+d)/2)}var p=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(t>p[0]&&t<=p[1]||t>=b[0]&&t<=b[1]){o=s[u].index;break}}else{var y=Math.min(f,m),x=Math.max(f,m);if(t>(y+d)/2&&t<=(x+d)/2){o=s[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},Vb=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Qee=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var f=i[l[c]].stackGroups,d=Object.keys(f),m=0,g=d.length;m<g;m++){var b=f[d[m]],h=b.items,j=b.cateAxisId,p=h.filter(function(_){return Ka(_.type).indexOf("Bar")>=0});if(p&&p.length){var y=p[0].type.defaultProps,x=y!==void 0?tr(tr({},y),p[0].props):p[0].props,S=x.barSize,w=x[j];o[w]||(o[w]=[]);var v=it(S)?r:S;o[w].push({item:p[0],stackList:p.slice(1),barSize:it(v)?void 0:Kr(v,n,0)})}}return o},ete=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Kr(r,s,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var m=!1,g=s/c,b=o.reduce(function(S,w){return S+w.barSize||0},0);b+=(c-1)*u,b>=s&&(b-=(c-1)*u,u=0),b>=s&&g>0&&(m=!0,g*=.9,b=c*g);var h=(s-b)/2>>0,j={offset:h-u,size:0};f=o.reduce(function(S,w){var v={item:w.item,position:{offset:j.offset+j.size+u,size:m?g:w.barSize}},_=[].concat(K2(S),[v]);return j=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){_.push({item:P,position:j})}),_},d)}else{var p=Kr(n,s,0,!0);s-2*p-(c-1)*u<=0&&(u=0);var y=(s-2*p-(c-1)*u)/c;y>1&&(y>>=0);var x=l===+l?Math.min(y,l):y;f=o.reduce(function(S,w,v){var _=[].concat(K2(S),[{item:w.item,position:{offset:p+(y+u)*v+(y-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(P){_.push({item:P,position:_[_.length-1].position})}),_},d)}return f},tte=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=UT({children:i,legendWidth:c});if(u){var f=s||{},d=f.width,m=f.height,g=u.align,b=u.verticalAlign,h=u.layout;if((h==="vertical"||h==="horizontal"&&b==="middle")&&g!=="center"&&we(t[g]))return tr(tr({},t),{},Ho({},g,t[g]+(d||0)));if((h==="horizontal"||h==="vertical"&&g==="center")&&b!=="middle"&&we(t[b]))return tr(tr({},t),{},Ho({},b,t[b]+(m||0)))}return t},rte=function(t,r,n){return it(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},WT=function(t,r,n,s,i){var o=r.props.children,l=Rn(o,ip).filter(function(u){return rte(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=Rr(f,n);if(it(d))return u;var m=Array.isArray(d)?[rp(d),tp(d)]:[d,d],g=c.reduce(function(b,h){var j=Rr(f,h,0),p=m[0]-Math.abs(Array.isArray(j)?j[0]:j),y=m[1]+Math.abs(Array.isArray(j)?j[1]:j);return[Math.min(p,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},nte=function(t,r,n,s,i){var o=r.map(function(l){return WT(t,l,n,i,s)}).filter(function(l){return!it(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},HT=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&WT(t,c,u,s)||Lc(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},qT=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},GT=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Wa=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Gr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var m=i?i.indexOf(d):d;return{coordinate:s(m)+u,value:d,offset:u}});return f.filter(function(d){return!sd(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,m){return{coordinate:s(d)+u,value:d,index:m,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,m){return{coordinate:s(d)+u,value:i?i[d]:d,index:m,offset:u}})},Pg=new WeakMap,Wd=function(t,r){if(typeof r!="function")return t;Pg.has(t)||Pg.set(t,new WeakMap);var n=Pg.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},KT=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:bu(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ym(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ic(),realScaleType:"point"}:i==="category"?{scale:bu(),realScaleType:"band"}:{scale:ym(),realScaleType:"linear"};if(Wi(s)){var c="scale".concat(Fh(s));return{scale:(V2[c]||Ic)(),realScaleType:V2[c]?c:"point"}}return Je(s)?{scale:s}:{scale:Ic(),realScaleType:"point"}},X2=1e-4,YT=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-X2,o=Math.max(s[0],s[1])+X2,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},ate=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},ste=function(t,r){if(!r||r.length!==2||!we(r[0])||!we(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<n)&&(i[0]=n),(!we(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},ite=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=sd(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},ote=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=sd(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},lte={sign:ite,expand:PV,none:al,silhouette:EV,wiggle:CV,positive:ote},cte=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=lte[n],o=AV().keys(s).value(function(l,c){return+Rr(l,c,0)}).order(i0).offset(i);return o(t)},ute=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,m){var g,b=(g=m.type)!==null&&g!==void 0&&g.defaultProps?tr(tr({},m.type.defaultProps),m.props):m.props,h=b.stackId,j=b.hide;if(j)return d;var p=b[n],y=d[p]||{hasStack:!1,stackGroups:{}};if(gr(h)){var x=y.stackGroups[h]||{numericAxisId:n,cateAxisId:s,items:[]};x.items.push(m),y.hasStack=!0,y.stackGroups[h]=x}else y.stackGroups[id("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return tr(tr({},d),{},Ho({},p,y))},c),f={};return Object.keys(u).reduce(function(d,m){var g=u[m];if(g.hasStack){var b={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(h,j){var p=g.stackGroups[j];return tr(tr({},h),{},Ho({},j,{numericAxisId:n,cateAxisId:s,items:p.items,stackedData:cte(t,p.items,i)}))},b)}return tr(tr({},d),{},Ho({},m,g))},f)},XT=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=See(u,i,l);return t.domain([rp(f),tp(f)]),{niceTicks:f}}if(i&&s==="number"){var d=t.domain(),m=_ee(d,i,l);return{niceTicks:m}}return null},J2=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Rr(o,r.dataKey,r.domain[l]);return it(c)?null:r.scale(c)-i/2+s},dte=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},fte=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(gr(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},mte=function(t){return t.reduce(function(r,n){return[rp(n.concat([r[0]]).filter(we)),tp(n.concat([r[1]]).filter(we))]},[1/0,-1/0])},JT=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,f){var d=mte(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Z2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Q2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I0=function(t,r,n){if(Je(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(we(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(Z2.test(t[0])){var i=+Z2.exec(t[0])[1];s[0]=r[0]-i}else Je(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(we(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(Q2.test(t[1])){var o=+Q2.exec(t[1])[1];s[1]=r[1]+o}else Je(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},_m=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=gb(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},eS=function(t,r,n){return!t||!t.length||np(t,wn(n,"type.defaultProps.domain"))?r:t},ZT=function(t,r){var n=t.type.defaultProps?tr(tr({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return tr(tr({},Ge(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:Vb(t),value:Rr(r,s),type:c,payload:r,chartType:u,hide:f})};function Cu(e){"@babel/helpers - typeof";return Cu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cu(e)}function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(n){QT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QT(e,t,r){return t=hte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hte(e){var t=pte(e,"string");return Cu(t)=="symbol"?t:t+""}function pte(e,t){if(Cu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gte(e,t){return bte(e)||vte(e,t)||yte(e,t)||xte()}function xte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yte(e,t){if(e){if(typeof e=="string")return rS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(e,t)}}function rS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function bte(e){if(Array.isArray(e))return e}var Am=Math.PI/180,jte=function(t){return t*180/Math.PI},Tt=function(t,r,n,s){return{x:t+Math.cos(-Am*s)*n,y:r+Math.sin(-Am*s)*n}},ek=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wte=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Kr(t.cx,o,o/2),d=Kr(t.cy,l,l/2),m=ek(o,l,n),g=Kr(t.innerRadius,m,0),b=Kr(t.outerRadius,m,m*.8),h=Object.keys(r);return h.reduce(function(j,p){var y=r[p],x=y.domain,S=y.reversed,w;if(it(y.range))s==="angleAxis"?w=[c,u]:s==="radiusAxis"&&(w=[g,b]),S&&(w=[w[1],w[0]]);else{w=y.range;var v=w,_=gte(v,2);c=_[0],u=_[1]}var P=KT(y,i),C=P.realScaleType,$=P.scale;$.domain(x).range(w),YT($);var A=XT($,$a($a({},y),{},{realScaleType:C})),T=$a($a($a({},y),A),{},{range:w,radius:b,realScaleType:C,scale:$,cx:f,cy:d,innerRadius:g,outerRadius:b,startAngle:c,endAngle:u});return $a($a({},j),{},QT({},p,T))},{})},Nte=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},Ste=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=Nte({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:jte(u),angleInRadian:u}},_te=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},Ate=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},nS=function(t,r){var n=t.x,s=t.y,i=Ste({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=_te(r),d=f.startAngle,m=f.endAngle,g=l,b;if(d<=m){for(;g>m;)g-=360;for(;g<d;)g+=360;b=g>=d&&g<=m}else{for(;g>d;)g-=360;for(;g<m;)g+=360;b=g>=m&&g<=d}return b?$a($a({},r),{},{radius:o,angle:Ate(g,r)}):null},tk=function(t){return!N.isValidElement(t)&&!Je(t)&&typeof t!="boolean"?t.className:""};function Ou(e){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ou(e)}var Pte=["offset"];function Ete(e){return kte(e)||Tte(e)||Ote(e)||Cte()}function Cte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ote(e,t){if(e){if(typeof e=="string")return L0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L0(e,t)}}function Tte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kte(e){if(Array.isArray(e))return L0(e)}function L0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mte(e,t){if(e==null)return{};var r=Dte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function aS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aS(Object(r),!0).forEach(function(n){$te(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $te(e,t,r){return t=Ite(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ite(e){var t=Lte(e,"string");return Ou(t)=="symbol"?t:t+""}function Lte(e,t){if(Ou(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ou(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tu(){return Tu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tu.apply(this,arguments)}var Rte=function(t){var r=t.value,n=t.formatter,s=it(t.children)?r:t.children;return Je(n)?n(s):s},Bte=function(t,r){var n=Gr(r-t),s=Math.min(Math.abs(r-t),360);return n*s},Fte=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,m=c.outerRadius,g=c.startAngle,b=c.endAngle,h=c.clockWise,j=(d+m)/2,p=Bte(g,b),y=p>=0?1:-1,x,S;s==="insideStart"?(x=g+y*o,S=h):s==="insideEnd"?(x=b-y*o,S=!h):s==="end"&&(x=b+y*o,S=h),S=p<=0?S:!S;var w=Tt(u,f,j,x),v=Tt(u,f,j,x+(S?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(S?0:1,`,
    `).concat(v.x,",").concat(v.y),P=it(t.id)?id("recharts-radial-line-"):t.id;return V.createElement("text",Tu({},n,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",l)}),V.createElement("defs",null,V.createElement("path",{id:P,d:_})),V.createElement("textPath",{xlinkHref:"#".concat(P)},r))},zte=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,m=(f+d)/2;if(s==="outside"){var g=Tt(o,l,u+n,m),b=g.x,h=g.y;return{x:b,y:h,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var j=(c+u)/2,p=Tt(o,l,j,m),y=p.x,x=p.y;return{x:y,y:x,textAnchor:"middle",verticalAnchor:"middle"}},Vte=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,m=d*s,g=d>0?"end":"start",b=d>0?"start":"end",h=u>=0?1:-1,j=h*s,p=h>0?"end":"start",y=h>0?"start":"end";if(i==="top"){var x={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:g};return fr(fr({},x),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+f+m,textAnchor:"middle",verticalAnchor:b};return fr(fr({},S),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var w={x:l-j,y:c+f/2,textAnchor:p,verticalAnchor:"middle"};return fr(fr({},w),n?{width:Math.max(w.x-n.x,0),height:f}:{})}if(i==="right"){var v={x:l+u+j,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return fr(fr({},v),n?{width:Math.max(n.x+n.width-v.x,0),height:f}:{})}var _=n?{width:u,height:f}:{};return i==="insideLeft"?fr({x:l+j,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},_):i==="insideRight"?fr({x:l+u-j,y:c+f/2,textAnchor:p,verticalAnchor:"middle"},_):i==="insideTop"?fr({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:b},_):i==="insideBottom"?fr({x:l+u/2,y:c+f-m,textAnchor:"middle",verticalAnchor:g},_):i==="insideTopLeft"?fr({x:l+j,y:c+m,textAnchor:y,verticalAnchor:b},_):i==="insideTopRight"?fr({x:l+u-j,y:c+m,textAnchor:p,verticalAnchor:b},_):i==="insideBottomLeft"?fr({x:l+j,y:c+f-m,textAnchor:y,verticalAnchor:g},_):i==="insideBottomRight"?fr({x:l+u-j,y:c+f-m,textAnchor:p,verticalAnchor:g},_):Dl(i)&&(we(i.x)||Pi(i.x))&&(we(i.y)||Pi(i.y))?fr({x:l+Kr(i.x,u),y:c+Kr(i.y,f),textAnchor:"end",verticalAnchor:"end"},_):fr({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},_)},Ute=function(t){return"cx"in t&&we(t.cx)};function br(e){var t=e.offset,r=t===void 0?5:t,n=Mte(e,Pte),s=fr({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,f=s.className,d=f===void 0?"":f,m=s.textBreakAll;if(!i||it(l)&&it(c)&&!N.isValidElement(u)&&!Je(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var g;if(Je(u)){if(g=N.createElement(u,s),N.isValidElement(g))return g}else g=Rte(s);var b=Ute(i),h=Ge(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Fte(s,g,h);var j=b?zte(s):Vte(s);return V.createElement(qi,Tu({className:nt("recharts-label",d)},h,j,{breakAll:m}),g)}br.displayName="Label";var rk=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,m=t.y,g=t.top,b=t.left,h=t.width,j=t.height,p=t.clockWise,y=t.labelViewBox;if(y)return y;if(we(h)&&we(j)){if(we(d)&&we(m))return{x:d,y:m,width:h,height:j};if(we(g)&&we(b))return{x:g,y:b,width:h,height:j}}return we(d)&&we(m)?{x:d,y:m,width:0,height:0}:we(r)&&we(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:p}:t.viewBox?t.viewBox:{}},Wte=function(t,r){return t?t===!0?V.createElement(br,{key:"label-implicit",viewBox:r}):gr(t)?V.createElement(br,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===br?N.cloneElement(t,{key:"label-implicit",viewBox:r}):V.createElement(br,{key:"label-implicit",content:t,viewBox:r}):Je(t)?V.createElement(br,{key:"label-implicit",content:t,viewBox:r}):Dl(t)?V.createElement(br,Tu({viewBox:r},t,{key:"label-implicit"})):null:null},Hte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=rk(t),o=Rn(s,br).map(function(c,u){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=Wte(t.label,r||i);return[l].concat(Ete(o))};br.parseViewBox=rk;br.renderCallByParent=Hte;function qte(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Gte=qte;const Kte=jt(Gte);function ku(e){"@babel/helpers - typeof";return ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(e)}var Yte=["valueAccessor"],Xte=["data","dataKey","clockWise","id","textBreakAll"];function Jte(e){return tre(e)||ere(e)||Qte(e)||Zte()}function Zte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qte(e,t){if(e){if(typeof e=="string")return R0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R0(e,t)}}function ere(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tre(e){if(Array.isArray(e))return R0(e)}function R0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(this,arguments)}function sS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sS(Object(r),!0).forEach(function(n){rre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rre(e,t,r){return t=nre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nre(e){var t=are(e,"string");return ku(t)=="symbol"?t:t+""}function are(e,t){if(ku(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ku(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oS(e,t){if(e==null)return{};var r=sre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ire=function(t){return Array.isArray(t.value)?Kte(t.value):t.value};function Vs(e){var t=e.valueAccessor,r=t===void 0?ire:t,n=oS(e,Yte),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=oS(n,Xte);return!s||!s.length?null:V.createElement(vt,{className:"recharts-label-list"},s.map(function(f,d){var m=it(i)?r(f,d):Rr(f&&f.payload,i),g=it(l)?{}:{id:"".concat(l,"-").concat(d)};return V.createElement(br,Pm({},Ge(f,!0),u,g,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:br.parseViewBox(it(o)?f:iS(iS({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}Vs.displayName="LabelList";function ore(e,t){return e?e===!0?V.createElement(Vs,{key:"labelList-implicit",data:t}):V.isValidElement(e)||Je(e)?V.createElement(Vs,{key:"labelList-implicit",data:t,content:e}):Dl(e)?V.createElement(Vs,Pm({data:t},e,{key:"labelList-implicit"})):null:null}function lre(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Rn(n,Vs).map(function(o,l){return N.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=ore(e.label,t);return[i].concat(Jte(s))}Vs.renderCallByParent=lre;function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(this,arguments)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){cre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cre(e,t,r){return t=ure(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ure(e){var t=dre(e,"string");return Mu(t)=="symbol"?t:t+""}function dre(e,t){if(Mu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fre=function(t,r){var n=Gr(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},Hd=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+s,d=Math.asin(c/f)/Am,m=u?i:i+o*d,g=Tt(r,n,f,m),b=Tt(r,n,s,m),h=u?i-o*d:i,j=Tt(r,n,f*Math.cos(d*Am),h);return{center:g,circleTangency:b,lineTangency:j,theta:d}},nk=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=fre(o,l),u=o+c,f=Tt(r,n,i,o),d=Tt(r,n,i,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var g=Tt(r,n,s,o),b=Tt(r,n,s,u);m+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},mre=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Gr(f-u),m=Hd({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),g=m.circleTangency,b=m.lineTangency,h=m.theta,j=Hd({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),p=j.circleTangency,y=j.lineTangency,x=j.theta,S=c?Math.abs(u-f):Math.abs(u-f)-h-x;if(S<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):nk({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var v=Hd({cx:r,cy:n,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=v.circleTangency,P=v.lineTangency,C=v.theta,$=Hd({cx:r,cy:n,radius:s,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=$.circleTangency,T=$.lineTangency,O=$.theta,L=c?Math.abs(u-f):Math.abs(u-f)-C-O;if(L<0&&o===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},hre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ak=function(t){var r=cS(cS({},hre),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,m=r.className;if(o<i||f===d)return null;var g=nt("recharts-sector",m),b=o-i,h=Kr(l,b,0,!0),j;return h>0&&Math.abs(f-d)<360?j=mre({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(h,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):j=nk({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),V.createElement("path",B0({},Ge(r,!0),{className:g,d:j,role:"img"}))};function Du(e){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Du(e)}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(this,arguments)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){pre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pre(e,t,r){return t=gre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gre(e){var t=xre(e,"string");return Du(t)=="symbol"?t:t+""}function xre(e,t){if(Du(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Du(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fS={curveBasisClosed:pV,curveBasisOpen:gV,curveBasis:hV,curveBumpX:eV,curveBumpY:tV,curveLinearClosed:xV,curveLinear:Vh,curveMonotoneX:yV,curveMonotoneY:vV,curveNatural:bV,curveStep:jV,curveStepAfter:NV,curveStepBefore:wV},qd=function(t){return t.x===+t.x&&t.y===+t.y},uc=function(t){return t.x},dc=function(t){return t.y},yre=function(t,r){if(Je(t))return t;var n="curve".concat(Fh(t));return(n==="curveMonotone"||n==="curveBump")&&r?fS["".concat(n).concat(r==="vertical"?"Y":"X")]:fS[n]||Vh},vre=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=yre(n,l),d=u?i.filter(function(h){return qd(h)}):i,m;if(Array.isArray(o)){var g=u?o.filter(function(h){return qd(h)}):o,b=d.map(function(h,j){return dS(dS({},h),{},{base:g[j]})});return l==="vertical"?m=Id().y(dc).x1(uc).x0(function(h){return h.base.x}):m=Id().x(uc).y1(dc).y0(function(h){return h.base.y}),m.defined(qd).curve(f),m(b)}return l==="vertical"&&we(o)?m=Id().y(dc).x1(uc).x0(o):we(o)?m=Id().x(uc).y1(dc).y0(o):m=ZC().x(uc).y(dc),m.defined(qd).curve(f),m(d)},z0=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?vre(t):s;return N.createElement("path",F0({},Ge(t,!1),Zf(t),{className:nt("recharts-curve",r),d:o,ref:i}))},sk={exports:{}},bre="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jre=bre,wre=jre;function ik(){}function ok(){}ok.resetWarningCache=ik;var Nre=function(){function e(n,s,i,o,l,c){if(c!==wre){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ok,resetWarningCache:ik};return r.PropTypes=r,r};sk.exports=Nre();var Sre=sk.exports;const xt=jt(Sre),{getOwnPropertyNames:_re,getOwnPropertySymbols:Are}=Object,{hasOwnProperty:Pre}=Object.prototype;function Eg(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function Gd(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function Ere(e){return e!=null?e[Symbol.toStringTag]:void 0}function mS(e){return _re(e).concat(Are(e))}const Cre=Object.hasOwn||((e,t)=>Pre.call(e,t));function no(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const Ore="__v",Tre="__o",kre="_owner",{getOwnPropertyDescriptor:hS,keys:pS}=Object;function Mre(e,t){return e.byteLength===t.byteLength&&Em(new Uint8Array(e),new Uint8Array(t))}function Dre(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function $re(e,t){return e.byteLength===t.byteLength&&Em(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Ire(e,t){return no(e.getTime(),t.getTime())}function Lre(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Rre(e,t){return e===t}function gS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(l=u.next())&&!l.done;){if(s[d]){d++;continue}const m=o.value,g=l.value;if(r.equals(m[0],g[0],c,d,e,t,r)&&r.equals(m[1],g[1],m[0],g[0],e,t,r)){f=s[d]=!0;break}d++}if(!f)return!1;c++}return!0}const Bre=no;function Fre(e,t,r){const n=pS(e);let s=n.length;if(pS(t).length!==s)return!1;for(;s-- >0;)if(!lk(e,t,r,n[s]))return!1;return!0}function fc(e,t,r){const n=mS(e);let s=n.length;if(mS(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!lk(e,t,r,i)||(o=hS(e,i),l=hS(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function zre(e,t){return no(e.valueOf(),t.valueOf())}function Vre(e,t){return e.source===t.source&&e.flags===t.flags}function xS(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function Em(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Ure(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function lk(e,t,r,n){return(n===kre||n===Tre||n===Ore)&&(e.$$typeof||t.$$typeof)?!0:Cre(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Wre="[object ArrayBuffer]",Hre="[object Arguments]",qre="[object Boolean]",Gre="[object DataView]",Kre="[object Date]",Yre="[object Error]",Xre="[object Map]",Jre="[object Number]",Zre="[object Object]",Qre="[object RegExp]",ene="[object Set]",tne="[object String]",rne={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},nne="[object URL]",ane=Object.prototype.toString;function sne({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:m,areUrlsEqual:g,unknownTagComparators:b}){return function(j,p,y){if(j===p)return!0;if(j==null||p==null)return!1;const x=typeof j;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?l(j,p,y):x==="function"?i(j,p,y):!1;const S=j.constructor;if(S!==p.constructor)return!1;if(S===Object)return c(j,p,y);if(Array.isArray(j))return t(j,p,y);if(S===Date)return n(j,p,y);if(S===RegExp)return f(j,p,y);if(S===Map)return o(j,p,y);if(S===Set)return d(j,p,y);const w=ane.call(j);if(w===Kre)return n(j,p,y);if(w===Qre)return f(j,p,y);if(w===Xre)return o(j,p,y);if(w===ene)return d(j,p,y);if(w===Zre)return typeof j.then!="function"&&typeof p.then!="function"&&c(j,p,y);if(w===nne)return g(j,p,y);if(w===Yre)return s(j,p,y);if(w===Hre)return c(j,p,y);if(rne[w])return m(j,p,y);if(w===Wre)return e(j,p,y);if(w===Gre)return r(j,p,y);if(w===qre||w===Jre||w===tne)return u(j,p,y);if(b){let v=b[w];if(!v){const _=Ere(j);_&&(v=b[_])}if(v)return v(j,p,y)}return!1}}function ine({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Mre,areArraysEqual:r?fc:Dre,areDataViewsEqual:$re,areDatesEqual:Ire,areErrorsEqual:Lre,areFunctionsEqual:Rre,areMapsEqual:r?Eg(gS,fc):gS,areNumbersEqual:Bre,areObjectsEqual:r?fc:Fre,arePrimitiveWrappersEqual:zre,areRegExpsEqual:Vre,areSetsEqual:r?Eg(xS,fc):xS,areTypedArraysEqual:r?Eg(Em,fc):Em,areUrlsEqual:Ure,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=Gd(n.areArraysEqual),i=Gd(n.areMapsEqual),o=Gd(n.areObjectsEqual),l=Gd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function one(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function lne({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const cne=oi();oi({strict:!0});oi({circular:!0});oi({circular:!0,strict:!0});oi({createInternalComparator:()=>no});oi({strict:!0,createInternalComparator:()=>no});oi({circular:!0,createInternalComparator:()=>no});oi({circular:!0,createInternalComparator:()=>no,strict:!0});function oi(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=ine(e),o=sne(i),l=r?r(o):one(o);return lne({circular:t,comparator:o,createState:n,equals:l,strict:s})}function une(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function yS(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):une(s)};requestAnimationFrame(n)}function V0(e){"@babel/helpers - typeof";return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V0(e)}function dne(e){return pne(e)||hne(e)||mne(e)||fne()}function fne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mne(e,t){if(e){if(typeof e=="string")return vS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vS(e,t)}}function vS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pne(e){if(Array.isArray(e))return e}function gne(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=dne(o),c=l[0],u=l.slice(1);if(typeof c=="number"){yS(s.bind(null,u),c);return}s(c),yS(s.bind(null,u));return}V0(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function bS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bS(Object(r),!0).forEach(function(n){ck(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ck(e,t,r){return t=xne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xne(e){var t=yne(e,"string");return $u(t)==="symbol"?t:String(t)}function yne(e,t){if($u(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($u(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vne=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},bne=function(t){return t},jne=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Rc=function(t,r){return Object.keys(r).reduce(function(n,s){return jS(jS({},n),{},ck({},s,t(s,r[s])))},{})},wS=function(t,r,n){return t.map(function(s){return"".concat(jne(s)," ").concat(r,"ms ").concat(n)}).join(",")};function wne(e,t){return _ne(e)||Sne(e,t)||uk(e,t)||Nne()}function Nne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function _ne(e){if(Array.isArray(e))return e}function Ane(e){return Cne(e)||Ene(e)||uk(e)||Pne()}function Pne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uk(e,t){if(e){if(typeof e=="string")return U0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U0(e,t)}}function Ene(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cne(e){if(Array.isArray(e))return U0(e)}function U0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cm=1e-4,dk=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},fk=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},NS=function(t,r){return function(n){var s=dk(t,r);return fk(s,n)}},One=function(t,r){return function(n){var s=dk(t,r),i=[].concat(Ane(s.map(function(o,l){return o*l}).slice(1)),[0]);return fk(i,n)}},SS=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(j){return parseFloat(j)}),f=wne(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var d=NS(s,o),m=NS(i,l),g=One(s,o),b=function(p){return p>1?1:p<0?0:p},h=function(p){for(var y=p>1?1:p,x=y,S=0;S<8;++S){var w=d(x)-y,v=g(x);if(Math.abs(w-y)<Cm||v<Cm)return m(x);x=b(x-w/v)}return m(x)};return h.isStepper=!1,h},Tne=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,d,m){var g=-(f-d)*n,b=m*i,h=m+(g-b)*l/1e3,j=m*l/1e3+f;return Math.abs(j-d)<Cm&&Math.abs(h)<Cm?[d,0]:[j,h]};return c.isStepper=!0,c.dt=l,c},kne=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return SS(s);case"spring":return Tne();default:if(s.split("(")[0]==="cubic-bezier")return SS(s)}return typeof s=="function"?s:null};function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}function _S(e){return $ne(e)||Dne(e)||mk(e)||Mne()}function Mne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $ne(e){if(Array.isArray(e))return H0(e)}function AS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AS(Object(r),!0).forEach(function(n){W0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W0(e,t,r){return t=Ine(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ine(e){var t=Lne(e,"string");return Iu(t)==="symbol"?t:String(t)}function Lne(e,t){if(Iu(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Iu(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rne(e,t){return zne(e)||Fne(e,t)||mk(e,t)||Bne()}function Bne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mk(e,t){if(e){if(typeof e=="string")return H0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H0(e,t)}}function H0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function zne(e){if(Array.isArray(e))return e}var Om=function(t,r,n){return t+(r-t)*n},q0=function(t){var r=t.from,n=t.to;return r!==n},Vne=function e(t,r,n){var s=Rc(function(i,o){if(q0(o)){var l=t(o.from,o.to,o.velocity),c=Rne(l,2),u=c[0],f=c[1];return Sr(Sr({},o),{},{from:u,velocity:f})}return o},r);return n<1?Rc(function(i,o){return q0(o)?Sr(Sr({},o),{},{velocity:Om(o.velocity,s[i].velocity,n),from:Om(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const Une=function(e,t,r,n,s){var i=vne(e,t),o=i.reduce(function(j,p){return Sr(Sr({},j),{},W0({},p,[e[p],t[p]]))},{}),l=i.reduce(function(j,p){return Sr(Sr({},j),{},W0({},p,{from:e[p],velocity:0,to:t[p]}))},{}),c=-1,u,f,d=function(){return null},m=function(){return Rc(function(p,y){return y.from},l)},g=function(){return!Object.values(l).filter(q0).length},b=function(p){u||(u=p);var y=p-u,x=y/r.dt;l=Vne(r,l,x),s(Sr(Sr(Sr({},e),t),m())),u=p,g()||(c=requestAnimationFrame(d))},h=function(p){f||(f=p);var y=(p-f)/n,x=Rc(function(w,v){return Om.apply(void 0,_S(v).concat([r(y)]))},o);if(s(Sr(Sr(Sr({},e),t),x)),y<1)c=requestAnimationFrame(d);else{var S=Rc(function(w,v){return Om.apply(void 0,_S(v).concat([r(1)]))},o);s(Sr(Sr(Sr({},e),t),S))}};return d=r.isStepper?b:h,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function ml(e){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ml(e)}var Wne=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Hne(e,t){if(e==null)return{};var r=qne(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qne(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Cg(e){return Xne(e)||Yne(e)||Kne(e)||Gne()}function Gne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kne(e,t){if(e){if(typeof e=="string")return G0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G0(e,t)}}function Yne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xne(e){if(Array.isArray(e))return G0(e)}function G0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){bc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bc(e,t,r){return t=hk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hk(n.key),n)}}function Qne(e,t,r){return t&&Zne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hk(e){var t=eae(e,"string");return ml(t)==="symbol"?t:String(t)}function eae(e,t){if(ml(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ml(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K0(e,t)}function K0(e,t){return K0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},K0(e,t)}function rae(e){var t=nae();return function(){var n=Tm(e),s;if(t){var i=Tm(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return Y0(this,s)}}function Y0(e,t){if(t&&(ml(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X0(e)}function X0(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tm(e){return Tm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tm(e)}var is=function(e){tae(r,e);var t=rae(r);function r(n,s){var i;Jne(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,m=o.children,g=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(X0(i)),i.changeStyle=i.changeStyle.bind(X0(i)),!l||g<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),Y0(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof m=="function")return i.state={style:u},Y0(i);i.state={style:c?bc({},c,u):u}}else i.state={style:{}};return i}return Qne(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,m=this.state.style;if(l){if(!o){var g={style:c?bc({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(g);return}if(!(cne(s.to,f)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=b||u?d:s.to;if(this.state&&m){var j={style:c?bc({},c,h):h};(c&&m[c]!==h||!c&&m!==h)&&this.setState(j)}this.runAnimation(Gn(Gn({},this.props),{},{from:h,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,f=s.begin,d=s.onAnimationEnd,m=s.onAnimationStart,g=Une(o,l,kne(u),c,this.changeStyle),b=function(){i.stopJSAnimation=g()};this.manager.start([m,f,b,c,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],f=u.style,d=u.duration,m=d===void 0?0:d,g=function(h,j,p){if(p===0)return h;var y=j.duration,x=j.easing,S=x===void 0?"ease":x,w=j.style,v=j.properties,_=j.onAnimationEnd,P=p>0?o[p-1]:j,C=v||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(Cg(h),[i.runJSAnimation.bind(i,{from:P.style,to:w,duration:y,easing:S}),y]);var $=wS(C,y,S),A=Gn(Gn(Gn({},P.style),w),{},{transition:$});return[].concat(Cg(h),[A,y,_]).filter(bne)};return this.manager.start([c].concat(Cg(o.reduce(g,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=gne());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,f=s.onAnimationStart,d=s.onAnimationEnd,m=s.steps,g=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var h=l?bc({},l,c):c,j=wS(Object.keys(h),o,u);b.start([f,i,Gn(Gn({},h),{},{transition:j}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Hne(s,Wne),u=N.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var d=function(g){var b=g.props,h=b.style,j=h===void 0?{}:h,p=b.className,y=N.cloneElement(g,Gn(Gn({},c),{},{style:Gn(Gn({},j),f),className:p}));return y};return u===1?d(N.Children.only(i)):V.createElement("div",null,N.Children.map(i,function(m){return d(m)}))}}]),r}(N.PureComponent);is.displayName="Animate";is.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};is.propTypes={from:xt.oneOfType([xt.object,xt.string]),to:xt.oneOfType([xt.object,xt.string]),attributeName:xt.string,duration:xt.number,begin:xt.number,easing:xt.oneOfType([xt.string,xt.func]),steps:xt.arrayOf(xt.shape({duration:xt.number.isRequired,style:xt.object.isRequired,easing:xt.oneOfType([xt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),xt.func]),properties:xt.arrayOf("string"),onAnimationEnd:xt.func})),children:xt.oneOfType([xt.node,xt.func]),isActive:xt.bool,canBegin:xt.bool,onAnimationEnd:xt.func,shouldReAnimate:xt.bool,onAnimationStart:xt.func,onAnimationReStart:xt.func};function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},km.apply(this,arguments)}function aae(e,t){return lae(e)||oae(e,t)||iae(e,t)||sae()}function sae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iae(e,t){if(e){if(typeof e=="string")return ES(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ES(e,t)}}function ES(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function lae(e){if(Array.isArray(e))return e}function CS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CS(Object(r),!0).forEach(function(n){cae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cae(e,t,r){return t=uae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uae(e){var t=dae(e,"string");return Lu(t)=="symbol"?t:t+""}function dae(e,t){if(Lu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TS=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],m=0,g=4;m<g;m++)d[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+s-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+s)),f+="L ".concat(t+c*d[3],",").concat(r+s),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+n-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-c*b,",").concat(r+s,`
            L `).concat(t+c*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},fae=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),d=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=f&&s>=d&&s<=m}return!1},mae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ub=function(t){var r=OS(OS({},mae),t),n=N.useRef(),s=N.useState(-1),i=aae(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,m=r.radius,g=r.className,b=r.animationEasing,h=r.animationDuration,j=r.animationBegin,p=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var x=nt("recharts-rectangle",g);return y?V.createElement(is,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:h,animationEasing:b,isActive:y},function(S){var w=S.width,v=S.height,_=S.x,P=S.y;return V.createElement(is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:j,duration:h,isActive:p,easing:b},V.createElement("path",km({},Ge(r,!0),{className:x,d:TS(_,P,w,v,m),ref:n})))}):V.createElement("path",km({},Ge(r,!0),{className:x,d:TS(c,u,f,d,m)}))},hae=["points","className","baseLinePoints","connectNulls"];function Oo(){return Oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oo.apply(this,arguments)}function pae(e,t){if(e==null)return{};var r=gae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function gae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function kS(e){return bae(e)||vae(e)||yae(e)||xae()}function xae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yae(e,t){if(e){if(typeof e=="string")return J0(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J0(e,t)}}function vae(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bae(e){if(Array.isArray(e))return J0(e)}function J0(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var MS=function(t){return t&&t.x===+t.x&&t.y===+t.y},jae=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){MS(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),MS(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Bc=function(t,r){var n=jae(t);r&&(n=[n.reduce(function(i,o){return[].concat(kS(i),kS(o))},[])]);var s=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(s,"Z"):s},wae=function(t,r,n){var s=Bc(t,n);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(Bc(r.reverse(),n).slice(1))},Nae=function(t){var r=t.points,n=t.className,s=t.baseLinePoints,i=t.connectNulls,o=pae(t,hae);if(!r||!r.length)return null;var l=nt("recharts-polygon",n);if(s&&s.length){var c=o.stroke&&o.stroke!=="none",u=wae(r,s,i);return V.createElement("g",{className:l},V.createElement("path",Oo({},Ge(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?V.createElement("path",Oo({},Ge(o,!0),{fill:"none",d:Bc(r,i)})):null,c?V.createElement("path",Oo({},Ge(o,!0),{fill:"none",d:Bc(s,i)})):null)}var f=Bc(r,i);return V.createElement("path",Oo({},Ge(o,!0),{fill:f.slice(-1)==="Z"?o.fill:"none",className:l,d:f}))};function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z0.apply(this,arguments)}var Wb=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=nt("recharts-dot",i);return r===+r&&n===+n&&s===+s?N.createElement("circle",Z0({},Ge(t,!1),Zf(t),{className:o,cx:r,cy:n,r:s})):null};function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}var Sae=["x","y","top","left","width","height","className"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q0.apply(this,arguments)}function DS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DS(Object(r),!0).forEach(function(n){Aae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aae(e,t,r){return t=Pae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pae(e){var t=Eae(e,"string");return Ru(t)=="symbol"?t:t+""}function Eae(e,t){if(Ru(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cae(e,t){if(e==null)return{};var r=Oae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Tae=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},kae=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,m=t.height,g=m===void 0?0:m,b=t.className,h=Cae(t,Sae),j=_ae({x:n,y:i,top:l,left:u,width:d,height:g},h);return!we(n)||!we(i)||!we(d)||!we(g)||!we(l)||!we(u)?null:V.createElement("path",Q0({},Ge(j,!0),{className:nt("recharts-cross",b),d:Tae(n,i,d,g,l,u)}))},Mae=ep,Dae=AT,$ae=Ca;function Iae(e,t){return e&&e.length?Mae(e,$ae(t),Dae):void 0}var Lae=Iae;const Rae=jt(Lae);var Bae=ep,Fae=Ca,zae=PT;function Vae(e,t){return e&&e.length?Bae(e,Fae(t),zae):void 0}var Uae=Vae;const Wae=jt(Uae);var Hae=["cx","cy","angle","ticks","axisLine"],qae=["ticks","tick","angle","tickFormatter","stroke"];function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fc.apply(this,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ui(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){op(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IS(e,t){if(e==null)return{};var r=Gae(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gae(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Kae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gk(n.key),n)}}function Yae(e,t,r){return t&&LS(e.prototype,t),r&&LS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xae(e,t,r){return t=Mm(t),Jae(e,pk()?Reflect.construct(t,r||[],Mm(e).constructor):t.apply(e,r))}function Jae(e,t){if(t&&(hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zae(e)}function Zae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pk=function(){return!!e})()}function Mm(e){return Mm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mm(e)}function Qae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ey(e,t)}function ey(e,t){return ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ey(e,t)}function op(e,t,r){return t=gk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gk(e){var t=ese(e,"string");return hl(t)=="symbol"?t:t+""}function ese(e,t){if(hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lp=function(e){function t(){return Kae(this,t),Xae(this,t,arguments)}return Qae(t,e),Yae(t,[{key:"getTickValueCoord",value:function(n){var s=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Tt(l,c,s,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,s;switch(n){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=Rae(l,function(f){return f.coordinate||0}),u=Wae(l,function(f){return f.coordinate||0});return{cx:s,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=IS(n,Hae),f=l.reduce(function(b,h){return[Math.min(b[0],h.coordinate),Math.max(b[1],h.coordinate)]},[1/0,-1/0]),d=Tt(s,i,f[0],o),m=Tt(s,i,f[1],o),g=ui(ui(ui({},Ge(u,!1)),{},{fill:"none"},Ge(c,!1)),{},{x1:d.x,y1:d.y,x2:m.x,y2:m.y});return V.createElement("line",Fc({className:"recharts-polar-radius-axis-line"},g))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.angle,c=s.tickFormatter,u=s.stroke,f=IS(s,qae),d=this.getTickTextAnchor(),m=Ge(f,!1),g=Ge(o,!1),b=i.map(function(h,j){var p=n.getTickValueCoord(h),y=ui(ui(ui(ui({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(p.x,", ").concat(p.y,")")},m),{},{stroke:"none",fill:u},g),{},{index:j},p),{},{payload:h});return V.createElement(vt,Fc({className:nt("recharts-polar-radius-axis-tick",tk(o)),key:"tick-".concat(h.coordinate)},Hi(n.props,h,j)),t.renderTickItem(o,y,c?c(h.value,j):h.value))});return V.createElement(vt,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.axisLine,o=n.tick;return!s||!s.length?null:V.createElement(vt,{className:nt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),br.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return V.isValidElement(n)?o=V.cloneElement(n,s):Je(n)?o=n(s):o=V.createElement(qi,Fc({},s,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(N.PureComponent);op(lp,"displayName","PolarRadiusAxis");op(lp,"axisType","radiusAxis");op(lp,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ji.apply(this,arguments)}function RS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RS(Object(r),!0).forEach(function(n){cp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yk(n.key),n)}}function rse(e,t,r){return t&&BS(e.prototype,t),r&&BS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nse(e,t,r){return t=Dm(t),ase(e,xk()?Reflect.construct(t,r||[],Dm(e).constructor):t.apply(e,r))}function ase(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sse(e)}function sse(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xk=function(){return!!e})()}function Dm(e){return Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dm(e)}function ise(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ty(e,t)}function ty(e,t){return ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ty(e,t)}function cp(e,t,r){return t=yk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yk(e){var t=ose(e,"string");return pl(t)=="symbol"?t:t+""}function ose(e,t){if(pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lse=Math.PI/180,FS=1e-5,up=function(e){function t(){return tse(this,t),nse(this,t,arguments)}return ise(t,e),rse(t,[{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.cx,o=s.cy,l=s.radius,c=s.orientation,u=s.tickSize,f=u||8,d=Tt(i,o,l,n.coordinate),m=Tt(i,o,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var s=this.props.orientation,i=Math.cos(-n.coordinate*lse),o;return i>FS?o=s==="outer"?"start":"end":i<-FS?o=s==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=di(di({},Ge(this.props,!1)),{},{fill:"none"},Ge(l,!1));if(c==="circle")return V.createElement(Wb,ji({className:"recharts-polar-angle-axis-line"},u,{cx:s,cy:i,r:o}));var f=this.props.ticks,d=f.map(function(m){return Tt(s,i,o,m.coordinate)});return V.createElement(Nae,ji({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,s=this.props,i=s.ticks,o=s.tick,l=s.tickLine,c=s.tickFormatter,u=s.stroke,f=Ge(this.props,!1),d=Ge(o,!1),m=di(di({},f),{},{fill:"none"},Ge(l,!1)),g=i.map(function(b,h){var j=n.getTickLineCoord(b),p=n.getTickTextAnchor(b),y=di(di(di({textAnchor:p},f),{},{stroke:"none",fill:u},d),{},{index:h,payload:b,x:j.x2,y:j.y2});return V.createElement(vt,ji({className:nt("recharts-polar-angle-axis-tick",tk(o)),key:"tick-".concat(b.coordinate)},Hi(n.props,b,h)),l&&V.createElement("line",ji({className:"recharts-polar-angle-axis-tick-line"},m,j)),o&&t.renderTickItem(o,y,c?c(b.value,h):b.value))});return V.createElement(vt,{className:"recharts-polar-angle-axis-ticks"},g)}},{key:"render",value:function(){var n=this.props,s=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!s||!s.length?null:V.createElement(vt,{className:nt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,s,i){var o;return V.isValidElement(n)?o=V.cloneElement(n,s):Je(n)?o=n(s):o=V.createElement(qi,ji({},s,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(N.PureComponent);cp(up,"displayName","PolarAngleAxis");cp(up,"axisType","angleAxis");cp(up,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var cse=wO,use=cse(Object.getPrototypeOf,Object),dse=use,fse=ls,mse=dse,hse=cs,pse="[object Object]",gse=Function.prototype,xse=Object.prototype,vk=gse.toString,yse=xse.hasOwnProperty,vse=vk.call(Object);function bse(e){if(!hse(e)||fse(e)!=pse)return!1;var t=mse(e);if(t===null)return!0;var r=yse.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&vk.call(r)==vse}var jse=bse;const wse=jt(jse);var Nse=ls,Sse=cs,_se="[object Boolean]";function Ase(e){return e===!0||e===!1||Sse(e)&&Nse(e)==_se}var Pse=Ase;const Ese=jt(Pse);function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function $m(){return $m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$m.apply(this,arguments)}function Cse(e,t){return Mse(e)||kse(e,t)||Tse(e,t)||Ose()}function Ose(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tse(e,t){if(e){if(typeof e=="string")return zS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zS(e,t)}}function zS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Mse(e){if(Array.isArray(e))return e}function VS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function US(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VS(Object(r),!0).forEach(function(n){Dse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dse(e,t,r){return t=$se(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $se(e){var t=Ise(e,"string");return Bu(t)=="symbol"?t:t+""}function Ise(e,t){if(Bu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WS=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Lse={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rse=function(t){var r=US(US({},Lse),t),n=N.useRef(),s=N.useState(-1),i=Cse(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,m=r.height,g=r.className,b=r.animationEasing,h=r.animationDuration,j=r.animationBegin,p=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||m!==+m||f===0&&d===0||m===0)return null;var y=nt("recharts-trapezoid",g);return p?V.createElement(is,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:m,x:c,y:u},duration:h,animationEasing:b,isActive:p},function(x){var S=x.upperWidth,w=x.lowerWidth,v=x.height,_=x.x,P=x.y;return V.createElement(is,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:j,duration:h,easing:b},V.createElement("path",$m({},Ge(r,!0),{className:y,d:WS(_,P,S,w,v),ref:n})))}):V.createElement("g",null,V.createElement("path",$m({},Ge(r,!0),{className:y,d:WS(c,u,f,d,m)})))},Bse=["option","shapeType","propTransformer","activeClassName","isActive"];function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}function Fse(e,t){if(e==null)return{};var r=zse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function HS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Im(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HS(Object(r),!0).forEach(function(n){Vse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vse(e,t,r){return t=Use(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Use(e){var t=Wse(e,"string");return Fu(t)=="symbol"?t:t+""}function Wse(e,t){if(Fu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hse(e,t){return Im(Im({},t),e)}function qse(e,t){return e==="symbols"}function qS(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return V.createElement(Ub,r);case"trapezoid":return V.createElement(Rse,r);case"sector":return V.createElement(ak,r);case"symbols":if(qse(t))return V.createElement(lb,r);break;default:return null}}function Gse(e){return N.isValidElement(e)?e.props:e}function bk(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?Hse:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=Fse(e,Bse),u;if(N.isValidElement(t))u=N.cloneElement(t,Im(Im({},c),Gse(t)));else if(Je(t))u=t(c);else if(wse(t)&&!Ese(t)){var f=s(t,c);u=V.createElement(qS,{shapeType:r,elementProps:f})}else{var d=c;u=V.createElement(qS,{shapeType:r,elementProps:d})}return l?V.createElement(vt,{className:o},u):u}function dp(e,t){return t!=null&&"trapezoids"in e.props}function fp(e,t){return t!=null&&"sectors"in e.props}function zu(e,t){return t!=null&&"points"in e.props}function Kse(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function Yse(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function Xse(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function Jse(e,t){var r;return dp(e,t)?r=Kse:fp(e,t)?r=Yse:zu(e,t)&&(r=Xse),r}function Zse(e,t){var r;return dp(e,t)?r="trapezoids":fp(e,t)?r="sectors":zu(e,t)&&(r="points"),r}function Qse(e,t){if(dp(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(fp(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return zu(e,t)?t.payload:{}}function eie(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=Zse(r,t),i=Qse(r,t),o=n.filter(function(c,u){var f=np(i,c),d=r.props[s].filter(function(b){var h=Jse(r,t);return h(b,t)}),m=r.props[s].indexOf(d[d.length-1]),g=u===m;return f&&g}),l=n.indexOf(o[o.length-1]);return l}var hf;function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},To.apply(this,arguments)}function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){Dn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wk(n.key),n)}}function rie(e,t,r){return t&&KS(e.prototype,t),r&&KS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nie(e,t,r){return t=Lm(t),aie(e,jk()?Reflect.construct(t,r||[],Lm(e).constructor):t.apply(e,r))}function aie(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sie(e)}function sie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jk=function(){return!!e})()}function Lm(e){return Lm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lm(e)}function iie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ry(e,t)}function ry(e,t){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ry(e,t)}function Dn(e,t,r){return t=wk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wk(e){var t=oie(e,"string");return gl(t)=="symbol"?t:t+""}function oie(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ds=function(e){function t(r){var n;return tie(this,t),n=nie(this,t,[r]),Dn(n,"pieRef",null),Dn(n,"sectorRefs",[]),Dn(n,"id",id("recharts-pie-")),Dn(n,"handleAnimationEnd",function(){var s=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Je(s)&&s()}),Dn(n,"handleAnimationStart",function(){var s=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Je(s)&&s()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return iie(t,e),rie(t,[{key:"isActiveIndex",value:function(n){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(n)!==-1:n===s}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,f=Ge(this.props,!1),d=Ge(o,!1),m=Ge(l,!1),g=o&&o.offsetRadius||20,b=n.map(function(h,j){var p=(h.startAngle+h.endAngle)/2,y=Tt(h.cx,h.cy,h.outerRadius+g,p),x=Pt(Pt(Pt(Pt({},f),h),{},{stroke:"none"},d),{},{index:j,textAnchor:t.getTextAnchor(y.x,h.cx)},y),S=Pt(Pt(Pt(Pt({},f),h),{},{fill:"none",stroke:h.fill},m),{},{index:j,points:[Tt(h.cx,h.cy,h.outerRadius,p),y]}),w=c;return it(c)&&it(u)?w="value":it(c)&&(w=u),V.createElement(vt,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(j)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,x,Rr(h,w)))});return V.createElement(vt,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var s=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=s.isActiveIndex(f),m=c&&s.hasActiveIndex()?c:null,g=d?o:m,b=Pt(Pt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return V.createElement(vt,To({ref:function(j){j&&!s.sectorRefs.includes(j)&&s.sectorRefs.push(j)},tabIndex:-1,className:"recharts-pie-sector"},Hi(s.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),V.createElement(bk,To({option:g,isActive:d,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,s=this.props,i=s.sectors,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,f=s.animationId,d=this.state,m=d.prevSectors,g=d.prevIsAnimationActive;return V.createElement(is,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(g),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var h=b.t,j=[],p=i&&i[0],y=p.startAngle;return i.forEach(function(x,S){var w=m&&m[S],v=S>0?wn(x,"paddingAngle",0):0;if(w){var _=vs(w.endAngle-w.startAngle,x.endAngle-x.startAngle),P=Pt(Pt({},x),{},{startAngle:y+v,endAngle:y+_(h)+v});j.push(P),y=P.endAngle}else{var C=x.endAngle,$=x.startAngle,A=vs(0,C-$),T=A(h),O=Pt(Pt({},x),{},{startAngle:y+v,endAngle:y+T+v});j.push(O),y=O.endAngle}}),V.createElement(vt,null,n.renderSectorsStatically(j))})}},{key:"attachKeyboardHandlers",value:function(n){var s=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[l].focus(),s.setState({sectorToFocus:l});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,s=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&s&&s.length&&(!o||!np(o,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,s=this.props,i=s.hide,o=s.sectors,l=s.className,c=s.label,u=s.cx,f=s.cy,d=s.innerRadius,m=s.outerRadius,g=s.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!we(u)||!we(f)||!we(d)||!we(m))return null;var h=nt("recharts-pie",l);return V.createElement(vt,{tabIndex:this.props.rootTabIndex,className:h,ref:function(p){n.pieRef=p}},this.renderSectors(),c&&this.renderLabels(o),br.renderCallByParent(this.props,null,!1),(!g||b)&&Vs.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return s.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:n.sectors!==s.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,s){return n>s?"start":n<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,s,i){if(V.isValidElement(n))return V.cloneElement(n,s);if(Je(n))return n(s);var o=nt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return V.createElement(z0,To({},s,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,s,i){if(V.isValidElement(n))return V.cloneElement(n,s);var o=i;if(Je(n)&&(o=n(s),V.isValidElement(o)))return o;var l=nt("recharts-pie-label-text",typeof n!="boolean"&&!Je(n)?n.className:"");return V.createElement(qi,To({},s,{alignmentBaseline:"middle",className:l}),o)}}])}(N.PureComponent);hf=ds;Dn(ds,"displayName","Pie");Dn(ds,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!zl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Dn(ds,"parseDeltaAngle",function(e,t){var r=Gr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Dn(ds,"getRealPieData",function(e){var t=e.data,r=e.children,n=Ge(e,!1),s=Rn(r,Gh);return t&&t.length?t.map(function(i,o){return Pt(Pt(Pt({payload:i},n),i),s&&s[o]&&s[o].props)}):s&&s.length?s.map(function(i){return Pt(Pt({},n),i.props)}):[]});Dn(ds,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,s=t.width,i=t.height,o=ek(s,i),l=n+Kr(e.cx,s,s/2),c=r+Kr(e.cy,i,i/2),u=Kr(e.innerRadius,o,0),f=Kr(e.outerRadius,o,o*.8),d=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:d}});Dn(ds,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Pt(Pt({},t.type.defaultProps),t.props):t.props,s=hf.getRealPieData(n);if(!s||!s.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,f=n.nameKey,d=n.valueKey,m=n.tooltipType,g=Math.abs(n.minAngle),b=hf.parseCoordinateOfPie(n,r),h=hf.parseDeltaAngle(o,l),j=Math.abs(h),p=u;it(u)&&it(d)?(na(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):it(u)&&(na(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=d);var y=s.filter(function(P){return Rr(P,p,0)!==0}).length,x=(j>=360?y:y-1)*c,S=j-y*g-x,w=s.reduce(function(P,C){var $=Rr(C,p,0);return P+(we($)?$:0)},0),v;if(w>0){var _;v=s.map(function(P,C){var $=Rr(P,p,0),A=Rr(P,f,C),T=(we($)?$:0)/w,O;C?O=_.endAngle+Gr(h)*c*($!==0?1:0):O=o;var L=O+Gr(h)*(($!==0?g:0)+T*S),M=(O+L)/2,F=(b.innerRadius+b.outerRadius)/2,R=[{name:A,value:$,payload:P,dataKey:p,type:m}],B=Tt(b.cx,b.cy,F,M);return _=Pt(Pt(Pt({percent:T,cornerRadius:i,name:A,tooltipPayload:R,midAngle:M,middleRadius:F,tooltipPosition:B},P),b),{},{value:Rr(P,p),startAngle:O,endAngle:L,payload:P,paddingAngle:Gr(h)*c}),_})}return Pt(Pt({},b),{},{sectors:v,data:s})});var lie=Math.ceil,cie=Math.max;function uie(e,t,r,n){for(var s=-1,i=cie(lie((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var die=uie,fie=zO,YS=1/0,mie=17976931348623157e292;function hie(e){if(!e)return e===0?e:0;if(e=fie(e),e===YS||e===-YS){var t=e<0?-1:1;return t*mie}return e===e?e:0}var Nk=hie,pie=die,gie=qh,Og=Nk;function xie(e){return function(t,r,n){return n&&typeof n!="number"&&gie(t,r,n)&&(r=n=void 0),t=Og(t),r===void 0?(r=t,t=0):r=Og(r),n=n===void 0?t<r?1:-1:Og(n),pie(t,r,n,e)}}var yie=xie,vie=yie,bie=vie(),jie=bie;const Rm=jt(jie);function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(n){Sk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sk(e,t,r){return t=wie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wie(e){var t=Nie(e,"string");return Vu(t)=="symbol"?t:t+""}function Nie(e,t){if(Vu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sie=["Webkit","Moz","O","ms"],_ie=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=Sie.reduce(function(i,o){return JS(JS({},i),{},Sk({},o+n,r))},{});return s[t]=r,s};function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function ZS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(r),!0).forEach(function(n){hn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QS(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ak(n.key),n)}}function Pie(e,t,r){return t&&QS(e.prototype,t),r&&QS(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eie(e,t,r){return t=Fm(t),Cie(e,_k()?Reflect.construct(t,r||[],Fm(e).constructor):t.apply(e,r))}function Cie(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Oie(e)}function Oie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_k=function(){return!!e})()}function Fm(e){return Fm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fm(e)}function Tie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ny(e,t)}function ny(e,t){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},ny(e,t)}function hn(e,t,r){return t=Ak(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ak(e){var t=kie(e,"string");return xl(t)=="symbol"?t:t+""}function kie(e,t){if(xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mie=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Ic().domain(Rm(0,c)).range([i,i+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},e_=function(t){return t.changedTouches&&!!t.changedTouches.length},yl=function(e){function t(r){var n;return Aie(this,t),n=Eie(this,t,[r]),hn(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),hn(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),hn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),hn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),hn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),hn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),hn(n,"handleSlideDragStart",function(s){var i=e_(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Tie(t,e),Pie(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(s,i),m=Math.max(s,i),g=t.getIndexInRange(o,d),b=t.getIndexInRange(o,m);return{startIndex:g-g%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Rr(i[n],l,n);return Je(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,m=c.startIndex,g=c.endIndex,b=c.onChange,h=n.pageX-i;h>0?h=Math.min(h,u+f-d-l,u+f-d-o):h<0&&(h=Math.max(h,u-o,u-l));var j=this.getIndex({startX:o+h,endX:l+h});(j.startIndex!==m||j.endIndex!==g)&&b&&b(j),this.setState({startX:o+h,endX:l+h,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=e_(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],f=this.props,d=f.x,m=f.width,g=f.travellerWidth,b=f.onChange,h=f.gap,j=f.data,p={startX:this.state.startX,endX:this.state.endX},y=n.pageX-i;y>0?y=Math.min(y,d+m-g-u):y<0&&(y=Math.max(y,d-u)),p[o]=u+y;var x=this.getIndex(p),S=x.startIndex,w=x.endIndex,v=function(){var P=j.length-1;return o==="startX"&&(l>c?S%h===0:w%h===0)||l<c&&w===P||o==="endX"&&(l>c?w%h===0:S%h===0)||l>c&&w===P};this.setState(hn(hn({},o,u+y),"brushMoveStartX",n.pageX),function(){b&&v()&&b(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[s],d=l.indexOf(f);if(d!==-1){var m=d+n;if(!(m===-1||m>=l.length)){var g=l[m];s==="startX"&&g>=u||s==="endX"&&g<=c||this.setState(hn({},s,g),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return V.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=N.Children.only(u);return d?V.cloneElement(d,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,m=c.traveller,g=c.ariaLabel,b=c.data,h=c.startIndex,j=c.endIndex,p=Math.max(n,this.props.x),y=Tg(Tg({},Ge(this.props,!1)),{},{x:p,y:u,width:f,height:d}),x=g||"Min value: ".concat((i=b[h])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[j])===null||o===void 0?void 0:o.name);return V.createElement(vt,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,y))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,d=Math.max(Math.abs(s-n)-u,0);return V.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,m=f.endX,g=5,b={pointerEvents:"none",fill:u};return V.createElement(vt,{className:"recharts-brush-texts"},V.createElement(qi,Bm({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,m)-g,y:o+l/2},b),this.getTextOfTick(s)),V.createElement(qi,Bm({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,m)+c+g,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,m=this.state,g=m.startX,b=m.endX,h=m.isTextActive,j=m.isSlideMoving,p=m.isTravellerMoving,y=m.isTravellerFocused;if(!s||!s.length||!we(l)||!we(c)||!we(u)||!we(f)||u<=0||f<=0)return null;var x=nt("recharts-brush",i),S=V.Children.count(o)===1,w=_ie("userSelect","none");return V.createElement(vt,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(g,b),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(b,"endX"),(h||j||p||y||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return V.createElement(V.Fragment,null,V.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),V.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),V.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return V.isValidElement(n)?i=V.cloneElement(n,s):Je(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Tg({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Mie({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(g){return s.scale(g)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(N.PureComponent);hn(yl,"displayName","Brush");hn(yl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Die=pb;function $ie(e,t){var r;return Die(e,function(n,s,i){return r=t(n,s,i),!r}),!!r}var Iie=$ie,Lie=hO,Rie=Ca,Bie=Iie,Fie=mn,zie=qh;function Vie(e,t,r){var n=Fie(e)?Lie:Bie;return r&&zie(e,t,r)&&(t=void 0),n(e,Rie(t))}var Uie=Vie;const Wie=jt(Uie);var Sa=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},t_=IO;function Hie(e,t,r){t=="__proto__"&&t_?t_(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var qie=Hie,Gie=qie,Kie=DO,Yie=Ca;function Xie(e,t){var r={};return t=Yie(t),Kie(e,function(n,s,i){Gie(r,s,t(n,s,i))}),r}var Jie=Xie;const Zie=jt(Jie);function Qie(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var eoe=Qie,toe=pb;function roe(e,t){var r=!0;return toe(e,function(n,s,i){return r=!!t(n,s,i),r}),r}var noe=roe,aoe=eoe,soe=noe,ioe=Ca,ooe=mn,loe=qh;function coe(e,t,r){var n=ooe(e)?aoe:soe;return r&&loe(e,t,r)&&(t=void 0),n(e,ioe(t))}var uoe=coe;const Pk=jt(uoe);var doe=["x","y"];function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(this,arguments)}function r_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r_(Object(r),!0).forEach(function(n){foe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function foe(e,t,r){return t=moe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function moe(e){var t=hoe(e,"string");return Uu(t)=="symbol"?t:t+""}function hoe(e,t){if(Uu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Uu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function poe(e,t){if(e==null)return{};var r=goe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function goe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xoe(e,t){var r=e.x,n=e.y,s=poe(e,doe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),d="".concat(t.width||s.width),m=parseInt(d,10);return mc(mc(mc(mc(mc({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function n_(e){return V.createElement(bk,ay({shapeType:"rectangle",propTransformer:xoe,activeClassName:"recharts-active-bar"},e))}var yoe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=we(n)||Fz(n);return i?t(n,s):(i||Ki(),r)}},voe=["value","background"],Ek;function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function boe(e,t){if(e==null)return{};var r=joe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function joe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(this,arguments)}function a_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a_(Object(r),!0).forEach(function(n){Cs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function woe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ok(n.key),n)}}function Noe(e,t,r){return t&&s_(e.prototype,t),r&&s_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Soe(e,t,r){return t=Vm(t),_oe(e,Ck()?Reflect.construct(t,r||[],Vm(e).constructor):t.apply(e,r))}function _oe(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aoe(e)}function Aoe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ck(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ck=function(){return!!e})()}function Vm(e){return Vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vm(e)}function Poe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sy(e,t)}function sy(e,t){return sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},sy(e,t)}function Cs(e,t,r){return t=Ok(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ok(e){var t=Eoe(e,"string");return vl(t)=="symbol"?t:t+""}function Eoe(e,t){if(vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var on=function(e){function t(){var r;woe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Soe(this,t,[].concat(s)),Cs(r,"state",{isAnimationFinished:!1}),Cs(r,"id",id("recharts-bar-")),Cs(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Cs(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Poe(t,e),Noe(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,f=Ge(this.props,!1);return n&&n.map(function(d,m){var g=m===c,b=g?u:o,h=or(or(or({},f),d),{},{isActive:g,option:b,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return V.createElement(vt,zm({className:"recharts-bar-rectangle"},Hi(s.props,d,m),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(m)}),V.createElement(n_,h))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,f=s.animationEasing,d=s.animationId,m=this.state.prevData;return V.createElement(is,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var b=g.t,h=i.map(function(j,p){var y=m&&m[p];if(y){var x=vs(y.x,j.x),S=vs(y.y,j.y),w=vs(y.width,j.width),v=vs(y.height,j.height);return or(or({},j),{},{x:x(b),y:S(b),width:w(b),height:v(b)})}if(o==="horizontal"){var _=vs(0,j.height),P=_(b);return or(or({},j),{},{y:j.y+j.height-P,height:P})}var C=vs(0,j.width),$=C(b);return or(or({},j),{},{width:$})});return V.createElement(vt,null,n.renderRectanglesStatically(h))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!np(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Ge(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,m=boe(u,voe);if(!d)return null;var g=or(or(or(or(or({},m),{},{fill:"#eee"},d),c),Hi(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return V.createElement(n_,zm({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},g))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Rn(f,ip);if(!d)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,g=function(j,p){var y=Array.isArray(j.value)?j.value[1]:j.value;return{x:j.x,y:j.y,value:y,errorVal:Rr(j,p)}},b={clipPath:n?"url(#clipPath-".concat(s,")"):null};return V.createElement(vt,b,d.map(function(h){return V.cloneElement(h,{key:"error-bar-".concat(s,"-").concat(h.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:g})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,m=n.height,g=n.isAnimationActive,b=n.background,h=n.id;if(s||!i||!i.length)return null;var j=this.state.isAnimationFinished,p=nt("recharts-bar",o),y=l&&l.allowDataOverflow,x=c&&c.allowDataOverflow,S=y||x,w=it(h)?this.id:h;return V.createElement(vt,{className:p},y||x?V.createElement("defs",null,V.createElement("clipPath",{id:"clipPath-".concat(w)},V.createElement("rect",{x:y?u:u-d/2,y:x?f:f-m/2,width:y?d:d*2,height:x?m:m*2}))):null,V.createElement(vt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(w,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,w),(!g||j)&&Vs.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(N.PureComponent);Ek=on;Cs(on,"displayName","Bar");Cs(on,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!zl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Cs(on,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,g=ate(n,r);if(!g)return null;var b=t.layout,h=r.type.defaultProps,j=h!==void 0?or(or({},h),r.props):r.props,p=j.dataKey,y=j.children,x=j.minPointSize,S=b==="horizontal"?o:i,w=u?S.scale.domain():null,v=dte({numericAxis:S}),_=Rn(y,Gh),P=d.map(function(C,$){var A,T,O,L,M,F;u?A=ste(u[f+$],w):(A=Rr(C,p),Array.isArray(A)||(A=[v,A]));var R=yoe(x,Ek.defaultProps.minPointSize)(A[1],$);if(b==="horizontal"){var B,z=[o.scale(A[0]),o.scale(A[1])],I=z[0],X=z[1];T=J2({axis:i,ticks:l,bandSize:s,offset:g.offset,entry:C,index:$}),O=(B=X??I)!==null&&B!==void 0?B:void 0,L=g.size;var re=I-X;if(M=Number.isNaN(re)?0:re,F={x:T,y:o.y,width:L,height:o.height},Math.abs(R)>0&&Math.abs(M)<Math.abs(R)){var W=Gr(M||R)*(Math.abs(R)-Math.abs(M));O-=W,M+=W}}else{var de=[i.scale(A[0]),i.scale(A[1])],Ae=de[0],Be=de[1];if(T=Ae,O=J2({axis:o,ticks:c,bandSize:s,offset:g.offset,entry:C,index:$}),L=Be-Ae,M=g.size,F={x:i.x,y:O,width:i.width,height:M},Math.abs(R)>0&&Math.abs(L)<Math.abs(R)){var K=Gr(L||R)*(Math.abs(R)-Math.abs(L));L+=K}}return or(or(or({},C),{},{x:T,y:O,width:L,height:M,value:u?A:A[1],payload:C,background:F},_&&_[$]&&_[$].props),{},{tooltipPayload:[ZT(r,C)],tooltipPosition:{x:T+L/2,y:O+M/2}})});return or({data:P,layout:b},m)});function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function Coe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Tk(n.key),n)}}function Ooe(e,t,r){return t&&i_(e.prototype,t),r&&i_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o_(Object(r),!0).forEach(function(n){mp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mp(e,t,r){return t=Tk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tk(e){var t=Toe(e,"string");return Wu(t)=="symbol"?t:t+""}function Toe(e,t){if(Wu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var koe=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!gn(u,on);return f.reduce(function(g,b){var h=r[b],j=h.orientation,p=h.domain,y=h.padding,x=y===void 0?{}:y,S=h.mirror,w=h.reversed,v="".concat(j).concat(S?"Mirror":""),_,P,C,$,A;if(h.type==="number"&&(h.padding==="gap"||h.padding==="no-gap")){var T=p[1]-p[0],O=1/0,L=h.categoricalDomain.sort(Uz);if(L.forEach(function(de,Ae){Ae>0&&(O=Math.min((de||0)-(L[Ae-1]||0),O))}),Number.isFinite(O)){var M=O/T,F=h.layout==="vertical"?n.height:n.width;if(h.padding==="gap"&&(_=M*F/2),h.padding==="no-gap"){var R=Kr(t.barCategoryGap,M*F),B=M*F/2;_=B-R-(B-R)/F*R}}}s==="xAxis"?P=[n.left+(x.left||0)+(_||0),n.left+n.width-(x.right||0)-(_||0)]:s==="yAxis"?P=c==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(_||0),n.top+n.height-(x.bottom||0)-(_||0)]:P=h.range,w&&(P=[P[1],P[0]]);var z=KT(h,i,m),I=z.scale,X=z.realScaleType;I.domain(p).range(P),YT(I);var re=XT(I,Xn(Xn({},h),{},{realScaleType:X}));s==="xAxis"?(A=j==="top"&&!S||j==="bottom"&&S,C=n.left,$=d[v]-A*h.height):s==="yAxis"&&(A=j==="left"&&!S||j==="right"&&S,C=d[v]-A*h.width,$=n.top);var W=Xn(Xn(Xn({},h),re),{},{realScaleType:X,x:C,y:$,scale:I,width:s==="xAxis"?n.width:h.width,height:s==="yAxis"?n.height:h.height});return W.bandSize=_m(W,re),!h.hide&&s==="xAxis"?d[v]+=(A?-1:1)*W.height:h.hide||(d[v]+=(A?-1:1)*W.width),Xn(Xn({},g),{},mp({},b,W))},{})},kk=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},Moe=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return kk({x:r,y:n},{x:s,y:i})},Mk=function(){function e(t){Coe(this,e),this.scale=t}return Ooe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();mp(Mk,"EPS",1e-4);var Hb=function(t){var r=Object.keys(t).reduce(function(n,s){return Xn(Xn({},n),{},mp({},s,Mk.create(t[s])))},{});return Xn(Xn({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Zie(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return Pk(s,function(i,o){return r[o].isInRange(i)})}})};function Doe(e){return(e%180+180)%180}var $oe=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Doe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Ioe=Ca,Loe=od,Roe=Wh;function Boe(e){return function(t,r,n){var s=Object(t);if(!Loe(t)){var i=Ioe(r);t=Roe(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:void 0}}var Foe=Boe,zoe=Nk;function Voe(e){var t=zoe(e),r=t%1;return t===t?r?t-r:t:0}var Uoe=Voe,Woe=EO,Hoe=Ca,qoe=Uoe,Goe=Math.max;function Koe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:qoe(r);return s<0&&(s=Goe(n+s,0)),Woe(e,Hoe(t),s)}var Yoe=Koe,Xoe=Foe,Joe=Yoe,Zoe=Xoe(Joe),Qoe=Zoe;const ele=jt(Qoe);var tle=qF(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),qb=N.createContext(void 0),Gb=N.createContext(void 0),Dk=N.createContext(void 0),$k=N.createContext({}),Ik=N.createContext(void 0),Lk=N.createContext(0),Rk=N.createContext(0),l_=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=tle(i);return V.createElement(qb.Provider,{value:n},V.createElement(Gb.Provider,{value:s},V.createElement($k.Provider,{value:i},V.createElement(Dk.Provider,{value:f},V.createElement(Ik.Provider,{value:o},V.createElement(Lk.Provider,{value:u},V.createElement(Rk.Provider,{value:c},l)))))))},rle=function(){return N.useContext(Ik)},Bk=function(t){var r=N.useContext(qb);r==null&&Ki();var n=r[t];return n==null&&Ki(),n},nle=function(){var t=N.useContext(qb);return Ns(t)},ale=function(){var t=N.useContext(Gb),r=ele(t,function(n){return Pk(n.domain,Number.isFinite)});return r||Ns(t)},Fk=function(t){var r=N.useContext(Gb);r==null&&Ki();var n=r[t];return n==null&&Ki(),n},sle=function(){var t=N.useContext(Dk);return t},ile=function(){return N.useContext($k)},Kb=function(){return N.useContext(Rk)},Yb=function(){return N.useContext(Lk)};function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function ole(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Vk(n.key),n)}}function cle(e,t,r){return t&&lle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ule(e,t,r){return t=Um(t),dle(e,zk()?Reflect.construct(t,r||[],Um(e).constructor):t.apply(e,r))}function dle(e,t){if(t&&(bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fle(e)}function fle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zk=function(){return!!e})()}function Um(e){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Um(e)}function mle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iy(e,t)}function iy(e,t){return iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},iy(e,t)}function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function u_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c_(Object(r),!0).forEach(function(n){Xb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xb(e,t,r){return t=Vk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vk(e){var t=hle(e,"string");return bl(t)=="symbol"?t:t+""}function hle(e,t){if(bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ple(e,t){return vle(e)||yle(e,t)||xle(e,t)||gle()}function gle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xle(e,t){if(e){if(typeof e=="string")return d_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d_(e,t)}}function d_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function vle(e){if(Array.isArray(e))return e}function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(this,arguments)}var ble=function(t,r){var n;return V.isValidElement(t)?n=V.cloneElement(t,r):Je(t)?n=t(r):n=V.createElement("line",oy({},r,{className:"recharts-reference-line-line"})),n},jle=function(t,r,n,s,i,o,l,c,u){var f=i.x,d=i.y,m=i.width,g=i.height;if(n){var b=u.y,h=t.y.apply(b,{position:o});if(Sa(u,"discard")&&!t.y.isInRange(h))return null;var j=[{x:f+m,y:h},{x:f,y:h}];return c==="left"?j.reverse():j}if(r){var p=u.x,y=t.x.apply(p,{position:o});if(Sa(u,"discard")&&!t.x.isInRange(y))return null;var x=[{x:y,y:d+g},{x:y,y:d}];return l==="top"?x.reverse():x}if(s){var S=u.segment,w=S.map(function(v){return t.apply(v,{position:o})});return Sa(u,"discard")&&Wie(w,function(v){return!t.isInRange(v)})?null:w}return null};function wle(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=rle(),f=Bk(s),d=Fk(i),m=sle();if(!u||!m)return null;na(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=Hb({x:f.scale,y:d.scale}),b=gr(t),h=gr(r),j=n&&n.length===2,p=jle(g,b,h,j,m,e.position,f.orientation,d.orientation,e);if(!p)return null;var y=ple(p,2),x=y[0],S=x.x,w=x.y,v=y[1],_=v.x,P=v.y,C=Sa(e,"hidden")?"url(#".concat(u,")"):void 0,$=u_(u_({clipPath:C},Ge(e,!0)),{},{x1:S,y1:w,x2:_,y2:P});return V.createElement(vt,{className:nt("recharts-reference-line",l)},ble(o,$),br.renderCallByParent(e,Moe({x1:S,y1:w,x2:_,y2:P})))}var Jb=function(e){function t(){return ole(this,t),ule(this,t,arguments)}return mle(t,e),cle(t,[{key:"render",value:function(){return V.createElement(wle,this.props)}}])}(V.Component);Xb(Jb,"displayName","ReferenceLine");Xb(Jb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(this,arguments)}function jl(e){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(e)}function f_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function m_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f_(Object(r),!0).forEach(function(n){hp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wk(n.key),n)}}function _le(e,t,r){return t&&Sle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ale(e,t,r){return t=Wm(t),Ple(e,Uk()?Reflect.construct(t,r||[],Wm(e).constructor):t.apply(e,r))}function Ple(e,t){if(t&&(jl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ele(e)}function Ele(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uk=function(){return!!e})()}function Wm(e){return Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wm(e)}function Cle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},cy(e,t)}function hp(e,t,r){return t=Wk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wk(e){var t=Ole(e,"string");return jl(t)=="symbol"?t:t+""}function Ole(e,t){if(jl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Tle=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=Hb({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Sa(t,"discard")&&!o.isInRange(l)?null:l},pp=function(e){function t(){return Nle(this,t),Ale(this,t,arguments)}return Cle(t,e),_le(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=gr(s),f=gr(i);if(na(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=Tle(this.props);if(!d)return null;var m=d.x,g=d.y,b=this.props,h=b.shape,j=b.className,p=Sa(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=m_(m_({clipPath:p},Ge(this.props,!0)),{},{cx:m,cy:g});return V.createElement(vt,{className:nt("recharts-reference-dot",j)},t.renderDot(h,y),br.renderCallByParent(this.props,{x:m-o,y:g-o,width:2*o,height:2*o}))}}])}(V.Component);hp(pp,"displayName","ReferenceDot");hp(pp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});hp(pp,"renderDot",function(e,t){var r;return V.isValidElement(e)?r=V.cloneElement(e,t):Je(e)?r=e(t):r=V.createElement(Wb,ly({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(this,arguments)}function wl(e){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wl(e)}function h_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h_(Object(r),!0).forEach(function(n){gp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mle(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qk(n.key),n)}}function Dle(e,t,r){return t&&Mle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $le(e,t,r){return t=Hm(t),Ile(e,Hk()?Reflect.construct(t,r||[],Hm(e).constructor):t.apply(e,r))}function Ile(e,t){if(t&&(wl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lle(e)}function Lle(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hk=function(){return!!e})()}function Hm(e){return Hm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hm(e)}function Rle(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dy(e,t)}function dy(e,t){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},dy(e,t)}function gp(e,t,r){return t=qk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qk(e){var t=Ble(e,"string");return wl(t)=="symbol"?t:t+""}function Ble(e,t){if(wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fle=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var m=Hb({x:f.scale,y:d.scale}),g={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},b={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Sa(i,"discard")&&(!m.isInRange(g)||!m.isInRange(b))?null:kk(g,b)},xp=function(e){function t(){return kle(this,t),$le(this,t,arguments)}return Rle(t,e),Dle(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;na(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=gr(s),m=gr(i),g=gr(o),b=gr(l),h=this.props.shape;if(!d&&!m&&!g&&!b&&!h)return null;var j=Fle(d,m,g,b,this.props);if(!j&&!h)return null;var p=Sa(this.props,"hidden")?"url(#".concat(f,")"):void 0;return V.createElement(vt,{className:nt("recharts-reference-area",c)},t.renderRect(h,p_(p_({clipPath:p},Ge(this.props,!0)),j)),br.renderCallByParent(this.props,j))}}])}(V.Component);gp(xp,"displayName","ReferenceArea");gp(xp,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});gp(xp,"renderRect",function(e,t){var r;return V.isValidElement(e)?r=V.cloneElement(e,t):Je(e)?r=e(t):r=V.createElement(Ub,uy({},t,{className:"recharts-reference-area-rect"})),r});function Gk(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function zle(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return $oe(n,r)}function Vle(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function qm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Ule(e,t){return Gk(e,t+1)}function Wle(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var b=n==null?void 0:n[c];if(b===void 0)return{v:Gk(n,u)};var h=c,j,p=function(){return j===void 0&&(j=r(b,h)),j},y=b.coordinate,x=c===0||qm(e,y,p,f,l);x||(c=0,f=o,u+=1),x&&(f=y+e*(p()/2+s),c+=u)},m;u<=i.length;)if(m=d(),m)return m.v;return[]}function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function g_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(r),!0).forEach(function(n){Hle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hle(e,t,r){return t=qle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qle(e){var t=Gle(e,"string");return Hu(t)=="symbol"?t:t+""}function Gle(e,t){if(Hu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kle(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var g=i[m],b,h=function(){return b===void 0&&(b=r(g,m)),b};if(m===o-1){var j=e*(g.coordinate+e*h()/2-c);i[m]=g=$r($r({},g),{},{tickCoord:j>0?g.coordinate-j*e:g.coordinate})}else i[m]=g=$r($r({},g),{},{tickCoord:g.coordinate});var p=qm(e,g.tickCoord,h,l,c);p&&(c=g.tickCoord-e*(h()/2+s),i[m]=$r($r({},g),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function Yle(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var f=n[l-1],d=r(f,l-1),m=e*(f.coordinate+e*d/2-u);o[l-1]=f=$r($r({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var g=qm(e,f.tickCoord,function(){return d},c,u);g&&(u=f.tickCoord-e*(d/2+s),o[l-1]=$r($r({},f),{},{isShow:!0}))}for(var b=i?l-1:l,h=function(y){var x=o[y],S,w=function(){return S===void 0&&(S=r(x,y)),S};if(y===0){var v=e*(x.coordinate-e*w()/2-c);o[y]=x=$r($r({},x),{},{tickCoord:v<0?x.coordinate-v*e:x.coordinate})}else o[y]=x=$r($r({},x),{},{tickCoord:x.coordinate});var _=qm(e,x.tickCoord,w,c,u);_&&(c=x.tickCoord+e*(w()/2+s),o[y]=$r($r({},x),{},{isShow:!0}))},j=0;j<b;j++)h(j);return o}function Zb(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(we(c)||zl.isSsr)return Ule(s,typeof c=="number"&&we(c)?c:0);var m=[],g=l==="top"||l==="bottom"?"width":"height",b=f&&g==="width"?$c(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},h=function(x,S){var w=Je(u)?u(x.value,S):x.value;return g==="width"?zle($c(w,{fontSize:t,letterSpacing:r}),b,d):$c(w,{fontSize:t,letterSpacing:r})[g]},j=s.length>=2?Gr(s[1].coordinate-s[0].coordinate):1,p=Vle(i,j,g);return c==="equidistantPreserveStart"?Wle(j,p,h,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=Yle(j,p,h,s,o,c==="preserveStartEnd"):m=Kle(j,p,h,s,o),m.filter(function(y){return y.isShow}))}var Xle=["viewBox"],Jle=["viewBox"],Zle=["ticks"];function Nl(e){"@babel/helpers - typeof";return Nl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nl(e)}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ko.apply(this,arguments)}function x_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(r),!0).forEach(function(n){Qb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kg(e,t){if(e==null)return{};var r=Qle(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qle(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ece(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yk(n.key),n)}}function tce(e,t,r){return t&&y_(e.prototype,t),r&&y_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rce(e,t,r){return t=Gm(t),nce(e,Kk()?Reflect.construct(t,r||[],Gm(e).constructor):t.apply(e,r))}function nce(e,t){if(t&&(Nl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ace(e)}function ace(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kk=function(){return!!e})()}function Gm(e){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gm(e)}function sce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fy(e,t)}function fy(e,t){return fy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},fy(e,t)}function Qb(e,t,r){return t=Yk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yk(e){var t=ice(e,"string");return Nl(t)=="symbol"?t:t+""}function ice(e,t){if(Nl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Hl=function(e){function t(r){var n;return ece(this,t),n=rce(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return sce(t,e),tce(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=kg(n,Xle),l=this.props,c=l.viewBox,u=kg(l,Jle);return!Uo(i,c)||!Uo(o,u)||!Uo(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,f=s.tickSize,d=s.mirror,m=s.tickMargin,g,b,h,j,p,y,x=d?-1:1,S=n.tickSize||f,w=we(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":g=b=n.coordinate,j=o+ +!d*c,h=j-x*S,y=h-x*m,p=w;break;case"left":h=j=n.coordinate,b=i+ +!d*l,g=b-x*S,p=g-x*m,y=w;break;case"right":h=j=n.coordinate,b=i+ +d*l,g=b+x*S,p=g+x*m,y=w;break;default:g=b=n.coordinate,j=o+ +d*c,h=j+x*S,y=h+x*m,p=w;break}return{line:{x1:g,y1:h,x2:b,y2:j},tick:{x:p,y}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=dr(dr(dr({},Ge(this.props,!1)),Ge(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);d=dr(dr({},d),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var g=+(c==="left"&&!u||c==="right"&&u);d=dr(dr({},d),{},{x1:s+g*o,y1:i,x2:s+g*o,y2:i+l})}return V.createElement("line",ko({},d,{className:nt("recharts-cartesian-axis-line",wn(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,m=l.unit,g=Zb(dr(dr({},this.props),{},{ticks:n}),s,i),b=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),j=Ge(this.props,!1),p=Ge(f,!1),y=dr(dr({},j),{},{fill:"none"},Ge(c,!1)),x=g.map(function(S,w){var v=o.getTickLineCoord(S),_=v.line,P=v.tick,C=dr(dr(dr(dr({textAnchor:b,verticalAnchor:h},j),{},{stroke:"none",fill:u},p),P),{},{index:w,payload:S,visibleTicksCount:g.length,tickFormatter:d});return V.createElement(vt,ko({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Hi(o.props,S,w)),c&&V.createElement("line",ko({},y,_,{className:nt("recharts-cartesian-axis-tick-line",wn(c,"className"))})),f&&t.renderTickItem(f,C,"".concat(Je(d)?d(S.value,w):S.value).concat(m||"")))});return V.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var d=this.props,m=d.ticks,g=kg(d,Zle),b=m;return Je(c)&&(b=m&&m.length>0?c(this.props):c(g)),o<=0||l<=0||!b||!b.length?null:V.createElement(vt,{className:nt("recharts-cartesian-axis",u),ref:function(j){n.layerReference=j}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),br.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=nt(s.className,"recharts-cartesian-axis-tick-value");return V.isValidElement(n)?o=V.cloneElement(n,dr(dr({},s),{},{className:l})):Je(n)?o=n(dr(dr({},s),{},{className:l})):o=V.createElement(qi,ko({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(N.Component);Qb(Hl,"displayName","CartesianAxis");Qb(Hl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var oce=["x1","y1","x2","y2","key"],lce=["offset"];function Yi(e){"@babel/helpers - typeof";return Yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yi(e)}function v_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(r),!0).forEach(function(n){cce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cce(e,t,r){return t=uce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uce(e){var t=dce(e,"string");return Yi(t)=="symbol"?t:t+""}function dce(e,t){if(Yi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Yi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oi(){return Oi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oi.apply(this,arguments)}function b_(e,t){if(e==null)return{};var r=fce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mce=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return V.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Xk(e,t){var r;if(V.isValidElement(e))r=V.cloneElement(e,t);else if(Je(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=b_(t,oce),u=Ge(c,!1);u.offset;var f=b_(u,lce);r=V.createElement("line",Oi({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function hce(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Lr(Lr({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return Xk(s,u)});return V.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function pce(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Lr(Lr({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return Xk(s,u)});return V.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function gce(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,g){return m-g});s!==f[0]&&f.unshift(0);var d=f.map(function(m,g){var b=!f[g+1],h=b?s+o-m:f[g+1]-m;if(h<=0)return null;var j=g%t.length;return V.createElement("rect",{key:"react-".concat(g),y:m,x:n,height:h,width:i,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function xce(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,g){return m-g});i!==f[0]&&f.unshift(0);var d=f.map(function(m,g){var b=!f[g+1],h=b?i+l-m:f[g+1]-m;if(h<=0)return null;var j=g%n.length;return V.createElement("rect",{key:"react-".concat(g),x:m,y:o,width:h,height:c,stroke:"none",fill:n[j],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return V.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var yce=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return GT(Zb(Lr(Lr(Lr({},Hl.defaultProps),n),{},{ticks:Wa(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},vce=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return GT(Zb(Lr(Lr(Lr({},Hl.defaultProps),n),{},{ticks:Wa(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},co={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function qo(e){var t,r,n,s,i,o,l=Kb(),c=Yb(),u=ile(),f=Lr(Lr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:co.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:co.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:co.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:co.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:co.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:co.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),d=f.x,m=f.y,g=f.width,b=f.height,h=f.syncWithTicks,j=f.horizontalValues,p=f.verticalValues,y=nle(),x=ale();if(!we(g)||g<=0||!we(b)||b<=0||!we(d)||d!==+d||!we(m)||m!==+m)return null;var S=f.verticalCoordinatesGenerator||yce,w=f.horizontalCoordinatesGenerator||vce,v=f.horizontalPoints,_=f.verticalPoints;if((!v||!v.length)&&Je(w)){var P=j&&j.length,C=w({yAxis:x?Lr(Lr({},x),{},{ticks:P?j:x.ticks}):void 0,width:l,height:c,offset:u},P?!0:h);na(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Yi(C),"]")),Array.isArray(C)&&(v=C)}if((!_||!_.length)&&Je(S)){var $=p&&p.length,A=S({xAxis:y?Lr(Lr({},y),{},{ticks:$?p:y.ticks}):void 0,width:l,height:c,offset:u},$?!0:h);na(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Yi(A),"]")),Array.isArray(A)&&(_=A)}return V.createElement("g",{className:"recharts-cartesian-grid"},V.createElement(mce,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),V.createElement(hce,Oi({},f,{offset:u,horizontalPoints:v,xAxis:y,yAxis:x})),V.createElement(pce,Oi({},f,{offset:u,verticalPoints:_,xAxis:y,yAxis:x})),V.createElement(gce,Oi({},f,{horizontalPoints:v})),V.createElement(xce,Oi({},f,{verticalPoints:_})))}qo.displayName="CartesianGrid";function Sl(e){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sl(e)}function bce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qk(n.key),n)}}function wce(e,t,r){return t&&jce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nce(e,t,r){return t=Km(t),Sce(e,Jk()?Reflect.construct(t,r||[],Km(e).constructor):t.apply(e,r))}function Sce(e,t){if(t&&(Sl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ce(e)}function _ce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jk(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jk=function(){return!!e})()}function Km(e){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Km(e)}function Ace(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},my(e,t)}function Zk(e,t,r){return t=Qk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qk(e){var t=Pce(e,"string");return Sl(t)=="symbol"?t:t+""}function Pce(e,t){if(Sl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}function Ece(e){var t=e.xAxisId,r=Kb(),n=Yb(),s=Bk(t);return s==null?null:N.createElement(Hl,hy({},s,{className:nt("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Wa(o,!0)}}))}var Us=function(e){function t(){return bce(this,t),Nce(this,t,arguments)}return Ace(t,e),wce(t,[{key:"render",value:function(){return N.createElement(Ece,this.props)}}])}(N.Component);Zk(Us,"displayName","XAxis");Zk(Us,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function _l(e){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_l(e)}function Cce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r5(n.key),n)}}function Tce(e,t,r){return t&&Oce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kce(e,t,r){return t=Ym(t),Mce(e,e5()?Reflect.construct(t,r||[],Ym(e).constructor):t.apply(e,r))}function Mce(e,t){if(t&&(_l(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dce(e)}function Dce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e5=function(){return!!e})()}function Ym(e){return Ym=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ym(e)}function $ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&py(e,t)}function py(e,t){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},py(e,t)}function t5(e,t,r){return t=r5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r5(e){var t=Ice(e,"string");return _l(t)=="symbol"?t:t+""}function Ice(e,t){if(_l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gy(){return gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gy.apply(this,arguments)}var Lce=function(t){var r=t.yAxisId,n=Kb(),s=Yb(),i=Fk(r);return i==null?null:N.createElement(Hl,gy({},i,{className:nt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Wa(l,!0)}}))},Ws=function(e){function t(){return Cce(this,t),kce(this,t,arguments)}return $ce(t,e),Tce(t,[{key:"render",value:function(){return N.createElement(Lce,this.props)}}])}(N.Component);t5(Ws,"displayName","YAxis");t5(Ws,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function j_(e){return zce(e)||Fce(e)||Bce(e)||Rce()}function Rce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bce(e,t){if(e){if(typeof e=="string")return xy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xy(e,t)}}function Fce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function zce(e){if(Array.isArray(e))return xy(e)}function xy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yy=function(t,r,n,s,i){var o=Rn(t,Jb),l=Rn(t,pp),c=[].concat(j_(o),j_(l)),u=Rn(t,xp),f="".concat(s,"Id"),d=s[0],m=r;if(c.length&&(m=c.reduce(function(h,j){if(j.props[f]===n&&Sa(j.props,"extendDomain")&&we(j.props[d])){var p=j.props[d];return[Math.min(h[0],p),Math.max(h[1],p)]}return h},m)),u.length){var g="".concat(d,"1"),b="".concat(d,"2");m=u.reduce(function(h,j){if(j.props[f]===n&&Sa(j.props,"extendDomain")&&we(j.props[g])&&we(j.props[b])){var p=j.props[g],y=j.props[b];return[Math.min(h[0],p,y),Math.max(h[1],p,y)]}return h},m)}return i&&i.length&&(m=i.reduce(function(h,j){return we(j)?[Math.min(h[0],j),Math.max(h[1],j)]:h},m)),m},n5={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,d||c,m),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],g]:c._events[b].push(g):(c._events[b]=g,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var m=0,g=d.length,b=new Array(g);m<g;m++)b[m]=d[m].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,m,g,b){var h=r?r+u:u;if(!this._events[h])return!1;var j=this._events[h],p=arguments.length,y,x;if(j.fn){switch(j.once&&this.removeListener(u,j.fn,void 0,!0),p){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,f),!0;case 3:return j.fn.call(j.context,f,d),!0;case 4:return j.fn.call(j.context,f,d,m),!0;case 5:return j.fn.call(j.context,f,d,m,g),!0;case 6:return j.fn.call(j.context,f,d,m,g,b),!0}for(x=1,y=new Array(p-1);x<p;x++)y[x-1]=arguments[x];j.fn.apply(j.context,y)}else{var S=j.length,w;for(x=0;x<S;x++)switch(j[x].once&&this.removeListener(u,j[x].fn,void 0,!0),p){case 1:j[x].fn.call(j[x].context);break;case 2:j[x].fn.call(j[x].context,f);break;case 3:j[x].fn.call(j[x].context,f,d);break;case 4:j[x].fn.call(j[x].context,f,d,m);break;default:if(!y)for(w=1,y=new Array(p-1);w<p;w++)y[w-1]=arguments[w];j[x].fn.apply(j[x].context,y)}}return!0},l.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,m){var g=r?r+u:u;if(!this._events[g])return this;if(!f)return o(this,g),this;var b=this._events[g];if(b.fn)b.fn===f&&(!m||b.once)&&(!d||b.context===d)&&o(this,g);else{for(var h=0,j=[],p=b.length;h<p;h++)(b[h].fn!==f||m&&!b[h].once||d&&b[h].context!==d)&&j.push(b[h]);j.length?this._events[g]=j.length===1?j[0]:j:o(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(n5);var Vce=n5.exports;const Uce=jt(Vce);var Mg=new Uce,Dg="recharts.syncMouseEvents";function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function Wce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a5(n.key),n)}}function qce(e,t,r){return t&&Hce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $g(e,t,r){return t=a5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a5(e){var t=Gce(e,"string");return qu(t)=="symbol"?t:t+""}function Gce(e,t){if(qu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Kce=function(){function e(){Wce(this,e),$g(this,"activeIndex",0),$g(this,"coordinateList",[]),$g(this,"layout","horizontal")}return qce(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,m=r.mouseHandlerCallback,g=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:m})}}}])}();function Yce(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&we(n)&&we(s))return!0}return!1}function Xce(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function s5(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=Tt(t,r,n,s),l=Tt(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function Jce(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,m=Tt(l,c,u,d),g=Tt(l,c,f,d);n=m.x,s=m.y,i=g.x,o=g.y}else return s5(t);return[{x:n,y:s},{x:i,y:o}]}function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(n){Zce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zce(e,t,r){return t=Qce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qce(e){var t=eue(e,"string");return Gu(t)=="symbol"?t:t+""}function eue(e,t){if(Gu(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,m=e.chartName,g=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!g||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var b,h=z0;if(m==="ScatterChart")b=o,h=kae;else if(m==="BarChart")b=Xce(d,o,c,f),h=Ub;else if(d==="radial"){var j=s5(o),p=j.cx,y=j.cy,x=j.radius,S=j.startAngle,w=j.endAngle;b={cx:p,cy:y,startAngle:S,endAngle:w,innerRadius:x,outerRadius:x},h=ak}else b={points:Jce(d,o,c)},h=z0;var v=Kd(Kd(Kd(Kd({stroke:"#ccc",pointerEvents:"none"},c),b),Ge(g,!1)),{},{payload:l,payloadIndex:u,className:nt("recharts-tooltip-cursor",g.className)});return N.isValidElement(g)?N.cloneElement(g,v):N.createElement(h,v)}var rue=["item"],nue=["children","className","width","height","style","compact","title","desc"];function Al(e){"@babel/helpers - typeof";return Al=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(e)}function Mo(){return Mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mo.apply(this,arguments)}function N_(e,t){return iue(e)||sue(e,t)||o5(e,t)||aue()}function aue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sue(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iue(e){if(Array.isArray(e))return e}function S_(e,t){if(e==null)return{};var r=oue(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oue(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l5(n.key),n)}}function uue(e,t,r){return t&&cue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function due(e,t,r){return t=Xm(t),fue(e,i5()?Reflect.construct(t,r||[],Xm(e).constructor):t.apply(e,r))}function fue(e,t){if(t&&(Al(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mue(e)}function mue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i5=function(){return!!e})()}function Xm(e){return Xm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xm(e)}function hue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vy(e,t)}function vy(e,t){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},vy(e,t)}function Pl(e){return xue(e)||gue(e)||o5(e)||pue()}function pue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o5(e,t){if(e){if(typeof e=="string")return by(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return by(e,t)}}function gue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xue(e){if(Array.isArray(e))return by(e)}function by(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(n){We(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function We(e,t,r){return t=l5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l5(e){var t=yue(e,"string");return Al(t)=="symbol"?t:t+""}function yue(e,t){if(Al(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Al(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vue={xAxis:["bottom","top"],yAxis:["left","right"]},bue={width:"100%",height:"100%"},c5={x:0,y:0};function Yd(e){return e}var jue=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},wue=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return ae(ae(ae({},s),Tt(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return ae(ae(ae({},s),Tt(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return c5},yp=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Pl(l),Pl(u)):l},[]);return o.length>0?o:t&&t.length&&we(s)&&we(i)?t.slice(s,i+1):[]};function u5(e){return e==="number"?[0,"auto"]:void 0}var jy=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=yp(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var g=d===void 0?l:d;m=Yx(g,o.dataKey,s)}else m=d&&d[n]||l[n];return m?[].concat(Pl(c),[ZT(u,m)]):c},[])},A_=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=jue(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=Zee(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,m=jy(t,r,f,d),g=wue(n,l,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:m,activeCoordinate:g}}return null},Nue=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=t.stackOffset,g=qT(f,i);return n.reduce(function(b,h){var j,p=h.type.defaultProps!==void 0?ae(ae({},h.type.defaultProps),h.props):h.props,y=p.type,x=p.dataKey,S=p.allowDataOverflow,w=p.allowDuplicatedCategory,v=p.scale,_=p.ticks,P=p.includeHidden,C=p[o];if(b[C])return b;var $=yp(t.data,{graphicalItems:s.filter(function(re){var W,de=o in re.props?re.props[o]:(W=re.type.defaultProps)===null||W===void 0?void 0:W[o];return de===C}),dataStartIndex:c,dataEndIndex:u}),A=$.length,T,O,L;Yce(p.domain,S,y)&&(T=I0(p.domain,null,S),g&&(y==="number"||v!=="auto")&&(L=Lc($,x,"category")));var M=u5(y);if(!T||T.length===0){var F,R=(F=p.domain)!==null&&F!==void 0?F:M;if(x){if(T=Lc($,x,y),y==="category"&&g){var B=Vz(T);w&&B?(O=T,T=Rm(0,A)):w||(T=eS(R,T,h).reduce(function(re,W){return re.indexOf(W)>=0?re:[].concat(Pl(re),[W])},[]))}else if(y==="category")w?T=T.filter(function(re){return re!==""&&!it(re)}):T=eS(R,T,h).reduce(function(re,W){return re.indexOf(W)>=0||W===""||it(W)?re:[].concat(Pl(re),[W])},[]);else if(y==="number"){var z=nte($,s.filter(function(re){var W,de,Ae=o in re.props?re.props[o]:(W=re.type.defaultProps)===null||W===void 0?void 0:W[o],Be="hide"in re.props?re.props.hide:(de=re.type.defaultProps)===null||de===void 0?void 0:de.hide;return Ae===C&&(P||!Be)}),x,i,f);z&&(T=z)}g&&(y==="number"||v!=="auto")&&(L=Lc($,x,"category"))}else g?T=Rm(0,A):l&&l[C]&&l[C].hasStack&&y==="number"?T=m==="expand"?[0,1]:JT(l[C].stackGroups,c,u):T=HT($,s.filter(function(re){var W=o in re.props?re.props[o]:re.type.defaultProps[o],de="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return W===C&&(P||!de)}),y,f,!0);if(y==="number")T=yy(d,T,C,i,_),R&&(T=I0(R,T,S));else if(y==="category"&&R){var I=R,X=T.every(function(re){return I.indexOf(re)>=0});X&&(T=I)}}return ae(ae({},b),{},We({},C,ae(ae({},p),{},{axisType:i,domain:T,categoricalDomain:L,duplicateDomain:O,originalDomain:(j=p.domain)!==null&&j!==void 0?j:M,isCategorical:g,layout:f})))},{})},Sue=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=yp(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),g=m.length,b=qT(f,i),h=-1;return n.reduce(function(j,p){var y=p.type.defaultProps!==void 0?ae(ae({},p.type.defaultProps),p.props):p.props,x=y[o],S=u5("number");if(!j[x]){h++;var w;return b?w=Rm(0,g):l&&l[x]&&l[x].hasStack?(w=JT(l[x].stackGroups,c,u),w=yy(d,w,x,i)):(w=I0(S,HT(m,n.filter(function(v){var _,P,C=o in v.props?v.props[o]:(_=v.type.defaultProps)===null||_===void 0?void 0:_[o],$="hide"in v.props?v.props.hide:(P=v.type.defaultProps)===null||P===void 0?void 0:P.hide;return C===x&&!$}),"number",f),s.defaultProps.allowDataOverflow),w=yy(d,w,x,i)),ae(ae({},j),{},We({},x,ae(ae({axisType:i},s.defaultProps),{},{hide:!0,orientation:wn(vue,"".concat(i,".").concat(h%2),null),domain:w,originalDomain:S,isCategorical:b,layout:f})))}return j},{})},_ue=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(s,"Id"),m=Rn(f,i),g={};return m&&m.length?g=Nue(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(g=Sue(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),g},Aue=function(t){var r=Ns(t),n=Wa(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:gb(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:_m(r,n)}},P_=function(t){var r=t.children,n=t.defaultShowTooltip,s=gn(r,yl),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Pue=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ka(r&&r.type);return n&&n.indexOf("Bar")>=0})},E_=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Eue=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,m=n.margin||{},g=gn(d,yl),b=gn(d,wa),h=Object.keys(c).reduce(function(w,v){var _=c[v],P=_.orientation;return!_.mirror&&!_.hide?ae(ae({},w),{},We({},P,w[P]+_.width)):w},{left:m.left||0,right:m.right||0}),j=Object.keys(o).reduce(function(w,v){var _=o[v],P=_.orientation;return!_.mirror&&!_.hide?ae(ae({},w),{},We({},P,wn(w,"".concat(P))+_.height)):w},{top:m.top||0,bottom:m.bottom||0}),p=ae(ae({},j),h),y=p.bottom;g&&(p.bottom+=g.props.height||yl.defaultProps.height),b&&r&&(p=tte(p,s,n,r));var x=u-p.left-p.right,S=f-p.top-p.bottom;return ae(ae({brushBottom:y},p),{},{width:Math.max(x,0),height:Math.max(S,0)})},Cue=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},d5=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,m=function(p,y){var x=y.graphicalItems,S=y.stackGroups,w=y.offset,v=y.updateId,_=y.dataStartIndex,P=y.dataEndIndex,C=p.barSize,$=p.layout,A=p.barGap,T=p.barCategoryGap,O=p.maxBarSize,L=E_($),M=L.numericAxisName,F=L.cateAxisName,R=Pue(x),B=[];return x.forEach(function(z,I){var X=yp(p.data,{graphicalItems:[z],dataStartIndex:_,dataEndIndex:P}),re=z.type.defaultProps!==void 0?ae(ae({},z.type.defaultProps),z.props):z.props,W=re.dataKey,de=re.maxBarSize,Ae=re["".concat(M,"Id")],Be=re["".concat(F,"Id")],K={},U=c.reduce(function(Fe,ye){var Re=y["".concat(ye.axisType,"Map")],rt=re["".concat(ye.axisType,"Id")];Re&&Re[rt]||ye.axisType==="zAxis"||Ki();var ht=Re[rt];return ae(ae({},Fe),{},We(We({},ye.axisType,ht),"".concat(ye.axisType,"Ticks"),Wa(ht)))},K),J=U[F],D=U["".concat(F,"Ticks")],Y=S&&S[Ae]&&S[Ae].hasStack&&fte(z,S[Ae].stackGroups),G=Ka(z.type).indexOf("Bar")>=0,ie=_m(J,D),pe=[],xe=R&&Qee({barSize:C,stackGroups:S,totalSize:Cue(U,F)});if(G){var q,oe,Oe=it(de)?O:de,_e=(q=(oe=_m(J,D,!0))!==null&&oe!==void 0?oe:Oe)!==null&&q!==void 0?q:0;pe=ete({barGap:A,barCategoryGap:T,bandSize:_e!==ie?_e:ie,sizeList:xe[Be],maxBarSize:Oe}),_e!==ie&&(pe=pe.map(function(Fe){return ae(ae({},Fe),{},{position:ae(ae({},Fe.position),{},{offset:Fe.position.offset-_e/2})})}))}var Ce=z&&z.type&&z.type.getComposedData;Ce&&B.push({props:ae(ae({},Ce(ae(ae({},U),{},{displayedData:X,props:p,dataKey:W,item:z,bandSize:ie,barPosition:pe,offset:w,stackedData:Y,layout:$,dataStartIndex:_,dataEndIndex:P}))),{},We(We(We({key:z.key||"item-".concat(I)},M,U[M]),F,U[F]),"animationId",v)),childIndex:e7(z,p.children),item:z})}),B},g=function(p,y){var x=p.props,S=p.dataStartIndex,w=p.dataEndIndex,v=p.updateId;if(!K1({props:x}))return null;var _=x.children,P=x.layout,C=x.stackOffset,$=x.data,A=x.reverseStackOrder,T=E_(P),O=T.numericAxisName,L=T.cateAxisName,M=Rn(_,n),F=ute($,M,"".concat(O,"Id"),"".concat(L,"Id"),C,A),R=c.reduce(function(re,W){var de="".concat(W.axisType,"Map");return ae(ae({},re),{},We({},de,_ue(x,ae(ae({},W),{},{graphicalItems:M,stackGroups:W.axisType===O&&F,dataStartIndex:S,dataEndIndex:w}))))},{}),B=Eue(ae(ae({},R),{},{props:x,graphicalItems:M}),y==null?void 0:y.legendBBox);Object.keys(R).forEach(function(re){R[re]=f(x,R[re],B,re.replace("Map",""),r)});var z=R["".concat(L,"Map")],I=Aue(z),X=m(x,ae(ae({},R),{},{dataStartIndex:S,dataEndIndex:w,updateId:v,graphicalItems:M,stackGroups:F,offset:B}));return ae(ae({formattedGraphicalItems:X,graphicalItems:M,offset:B,stackGroups:F},I),R)},b=function(j){function p(y){var x,S,w;return lue(this,p),w=due(this,p,[y]),We(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),We(w,"accessibilityManager",new Kce),We(w,"handleLegendBBoxUpdate",function(v){if(v){var _=w.state,P=_.dataStartIndex,C=_.dataEndIndex,$=_.updateId;w.setState(ae({legendBBox:v},g({props:w.props,dataStartIndex:P,dataEndIndex:C,updateId:$},ae(ae({},w.state),{},{legendBBox:v}))))}}),We(w,"handleReceiveSyncEvent",function(v,_,P){if(w.props.syncId===v){if(P===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),We(w,"handleBrushChange",function(v){var _=v.startIndex,P=v.endIndex;if(_!==w.state.dataStartIndex||P!==w.state.dataEndIndex){var C=w.state.updateId;w.setState(function(){return ae({dataStartIndex:_,dataEndIndex:P},g({props:w.props,dataStartIndex:_,dataEndIndex:P,updateId:C},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:P})}}),We(w,"handleMouseEnter",function(v){var _=w.getMouseInfo(v);if(_){var P=ae(ae({},_),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var C=w.props.onMouseEnter;Je(C)&&C(P,v)}}),We(w,"triggeredAfterMouseMove",function(v){var _=w.getMouseInfo(v),P=_?ae(ae({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var C=w.props.onMouseMove;Je(C)&&C(P,v)}),We(w,"handleItemMouseEnter",function(v){w.setState(function(){return{isTooltipActive:!0,activeItem:v,activePayload:v.tooltipPayload,activeCoordinate:v.tooltipPosition||{x:v.cx,y:v.cy}}})}),We(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),We(w,"handleMouseMove",function(v){v.persist(),w.throttleTriggeredAfterMouseMove(v)}),We(w,"handleMouseLeave",function(v){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var P=w.props.onMouseLeave;Je(P)&&P(_,v)}),We(w,"handleOuterEvent",function(v){var _=Qz(v),P=wn(w.props,"".concat(_));if(_&&Je(P)){var C,$;/.*touch.*/i.test(_)?$=w.getMouseInfo(v.changedTouches[0]):$=w.getMouseInfo(v),P((C=$)!==null&&C!==void 0?C:{},v)}}),We(w,"handleClick",function(v){var _=w.getMouseInfo(v);if(_){var P=ae(ae({},_),{},{isTooltipActive:!0});w.setState(P),w.triggerSyncEvent(P);var C=w.props.onClick;Je(C)&&C(P,v)}}),We(w,"handleMouseDown",function(v){var _=w.props.onMouseDown;if(Je(_)){var P=w.getMouseInfo(v);_(P,v)}}),We(w,"handleMouseUp",function(v){var _=w.props.onMouseUp;if(Je(_)){var P=w.getMouseInfo(v);_(P,v)}}),We(w,"handleTouchMove",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(v.changedTouches[0])}),We(w,"handleTouchStart",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.handleMouseDown(v.changedTouches[0])}),We(w,"handleTouchEnd",function(v){v.changedTouches!=null&&v.changedTouches.length>0&&w.handleMouseUp(v.changedTouches[0])}),We(w,"handleDoubleClick",function(v){var _=w.props.onDoubleClick;if(Je(_)){var P=w.getMouseInfo(v);_(P,v)}}),We(w,"handleContextMenu",function(v){var _=w.props.onContextMenu;if(Je(_)){var P=w.getMouseInfo(v);_(P,v)}}),We(w,"triggerSyncEvent",function(v){w.props.syncId!==void 0&&Mg.emit(Dg,w.props.syncId,v,w.eventEmitterSymbol)}),We(w,"applySyncEvent",function(v){var _=w.props,P=_.layout,C=_.syncMethod,$=w.state.updateId,A=v.dataStartIndex,T=v.dataEndIndex;if(v.dataStartIndex!==void 0||v.dataEndIndex!==void 0)w.setState(ae({dataStartIndex:A,dataEndIndex:T},g({props:w.props,dataStartIndex:A,dataEndIndex:T,updateId:$},w.state)));else if(v.activeTooltipIndex!==void 0){var O=v.chartX,L=v.chartY,M=v.activeTooltipIndex,F=w.state,R=F.offset,B=F.tooltipTicks;if(!R)return;if(typeof C=="function")M=C(B,v);else if(C==="value"){M=-1;for(var z=0;z<B.length;z++)if(B[z].value===v.activeLabel){M=z;break}}var I=ae(ae({},R),{},{x:R.left,y:R.top}),X=Math.min(O,I.x+I.width),re=Math.min(L,I.y+I.height),W=B[M]&&B[M].value,de=jy(w.state,w.props.data,M),Ae=B[M]?{x:P==="horizontal"?B[M].coordinate:X,y:P==="horizontal"?re:B[M].coordinate}:c5;w.setState(ae(ae({},v),{},{activeLabel:W,activeCoordinate:Ae,activePayload:de,activeTooltipIndex:M}))}else w.setState(v)}),We(w,"renderCursor",function(v){var _,P=w.state,C=P.isTooltipActive,$=P.activeCoordinate,A=P.activePayload,T=P.offset,O=P.activeTooltipIndex,L=P.tooltipAxisBandSize,M=w.getTooltipEventType(),F=(_=v.props.active)!==null&&_!==void 0?_:C,R=w.props.layout,B=v.key||"_recharts-cursor";return V.createElement(tue,{key:B,activeCoordinate:$,activePayload:A,activeTooltipIndex:O,chartName:r,element:v,isActive:F,layout:R,offset:T,tooltipAxisBandSize:L,tooltipEventType:M})}),We(w,"renderPolarAxis",function(v,_,P){var C=wn(v,"type.axisType"),$=wn(w.state,"".concat(C,"Map")),A=v.type.defaultProps,T=A!==void 0?ae(ae({},A),v.props):v.props,O=$&&$[T["".concat(C,"Id")]];return N.cloneElement(v,ae(ae({},O),{},{className:nt(C,O.className),key:v.key||"".concat(_,"-").concat(P),ticks:Wa(O,!0)}))}),We(w,"renderPolarGrid",function(v){var _=v.props,P=_.radialLines,C=_.polarAngles,$=_.polarRadius,A=w.state,T=A.radiusAxisMap,O=A.angleAxisMap,L=Ns(T),M=Ns(O),F=M.cx,R=M.cy,B=M.innerRadius,z=M.outerRadius;return N.cloneElement(v,{polarAngles:Array.isArray(C)?C:Wa(M,!0).map(function(I){return I.coordinate}),polarRadius:Array.isArray($)?$:Wa(L,!0).map(function(I){return I.coordinate}),cx:F,cy:R,innerRadius:B,outerRadius:z,key:v.key||"polar-grid",radialLines:P})}),We(w,"renderLegend",function(){var v=w.state.formattedGraphicalItems,_=w.props,P=_.children,C=_.width,$=_.height,A=w.props.margin||{},T=C-(A.left||0)-(A.right||0),O=UT({children:P,formattedGraphicalItems:v,legendWidth:T,legendContent:u});if(!O)return null;var L=O.item,M=S_(O,rue);return N.cloneElement(L,ae(ae({},M),{},{chartWidth:C,chartHeight:$,margin:A,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),We(w,"renderTooltip",function(){var v,_=w.props,P=_.children,C=_.accessibilityLayer,$=gn(P,qr);if(!$)return null;var A=w.state,T=A.isTooltipActive,O=A.activeCoordinate,L=A.activePayload,M=A.activeLabel,F=A.offset,R=(v=$.props.active)!==null&&v!==void 0?v:T;return N.cloneElement($,{viewBox:ae(ae({},F),{},{x:F.left,y:F.top}),active:R,label:M,payload:R?L:[],coordinate:O,accessibilityLayer:C})}),We(w,"renderBrush",function(v){var _=w.props,P=_.margin,C=_.data,$=w.state,A=$.offset,T=$.dataStartIndex,O=$.dataEndIndex,L=$.updateId;return N.cloneElement(v,{key:v.key||"_recharts-brush",onChange:Wd(w.handleBrushChange,v.props.onChange),data:C,x:we(v.props.x)?v.props.x:A.left,y:we(v.props.y)?v.props.y:A.top+A.height+A.brushBottom-(P.bottom||0),width:we(v.props.width)?v.props.width:A.width,startIndex:T,endIndex:O,updateId:"brush-".concat(L)})}),We(w,"renderReferenceElement",function(v,_,P){if(!v)return null;var C=w,$=C.clipPathId,A=w.state,T=A.xAxisMap,O=A.yAxisMap,L=A.offset,M=v.type.defaultProps||{},F=v.props,R=F.xAxisId,B=R===void 0?M.xAxisId:R,z=F.yAxisId,I=z===void 0?M.yAxisId:z;return N.cloneElement(v,{key:v.key||"".concat(_,"-").concat(P),xAxis:T[B],yAxis:O[I],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:$})}),We(w,"renderActivePoints",function(v){var _=v.item,P=v.activePoint,C=v.basePoint,$=v.childIndex,A=v.isRange,T=[],O=_.props.key,L=_.item.type.defaultProps!==void 0?ae(ae({},_.item.type.defaultProps),_.item.props):_.item.props,M=L.activeDot,F=L.dataKey,R=ae(ae({index:$,dataKey:F,cx:P.x,cy:P.y,r:4,fill:Vb(_.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Ge(M,!1)),Zf(M));return T.push(p.renderActiveDot(M,R,"".concat(O,"-activePoint-").concat($))),C?T.push(p.renderActiveDot(M,ae(ae({},R),{},{cx:C.x,cy:C.y}),"".concat(O,"-basePoint-").concat($))):A&&T.push(null),T}),We(w,"renderGraphicChild",function(v,_,P){var C=w.filterFormatItem(v,_,P);if(!C)return null;var $=w.getTooltipEventType(),A=w.state,T=A.isTooltipActive,O=A.tooltipAxis,L=A.activeTooltipIndex,M=A.activeLabel,F=w.props.children,R=gn(F,qr),B=C.props,z=B.points,I=B.isRange,X=B.baseLine,re=C.item.type.defaultProps!==void 0?ae(ae({},C.item.type.defaultProps),C.item.props):C.item.props,W=re.activeDot,de=re.hide,Ae=re.activeBar,Be=re.activeShape,K=!!(!de&&T&&R&&(W||Ae||Be)),U={};$!=="axis"&&R&&R.props.trigger==="click"?U={onClick:Wd(w.handleItemMouseEnter,v.props.onClick)}:$!=="axis"&&(U={onMouseLeave:Wd(w.handleItemMouseLeave,v.props.onMouseLeave),onMouseEnter:Wd(w.handleItemMouseEnter,v.props.onMouseEnter)});var J=N.cloneElement(v,ae(ae({},C.props),U));function D(ye){return typeof O.dataKey=="function"?O.dataKey(ye.payload):null}if(K)if(L>=0){var Y,G;if(O.dataKey&&!O.allowDuplicatedCategory){var ie=typeof O.dataKey=="function"?D:"payload.".concat(O.dataKey.toString());Y=Yx(z,ie,M),G=I&&X&&Yx(X,ie,M)}else Y=z==null?void 0:z[L],G=I&&X&&X[L];if(Be||Ae){var pe=v.props.activeIndex!==void 0?v.props.activeIndex:L;return[N.cloneElement(v,ae(ae(ae({},C.props),U),{},{activeIndex:pe})),null,null]}if(!it(Y))return[J].concat(Pl(w.renderActivePoints({item:C,activePoint:Y,basePoint:G,childIndex:L,isRange:I})))}else{var xe,q=(xe=w.getItemByXY(w.state.activeCoordinate))!==null&&xe!==void 0?xe:{graphicalItem:J},oe=q.graphicalItem,Oe=oe.item,_e=Oe===void 0?v:Oe,Ce=oe.childIndex,Fe=ae(ae(ae({},C.props),U),{},{activeIndex:Ce});return[N.cloneElement(_e,Fe),null,null]}return I?[J,null,null]:[J,null]}),We(w,"renderCustomized",function(v,_,P){return N.cloneElement(v,ae(ae({key:"recharts-customized-".concat(P)},w.props),w.state))}),We(w,"renderMap",{CartesianGrid:{handler:Yd,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Yd},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Yd},YAxis:{handler:Yd},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=y.id)!==null&&x!==void 0?x:id("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=VO(w.triggeredAfterMouseMove,(S=y.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return hue(p,j),uue(p,[{key:"componentDidMount",value:function(){var x,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,S=x.children,w=x.data,v=x.height,_=x.layout,P=gn(S,qr);if(P){var C=P.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var $=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,A=jy(this.state,w,C,$),T=this.state.tooltipTicks[C].coordinate,O=(this.state.offset.top+v)/2,L=_==="horizontal",M=L?{x:T,y:O}:{y:T,x:O},F=this.state.formattedGraphicalItems.find(function(B){var z=B.item;return z.type.name==="Scatter"});F&&(M=ae(ae({},M),F.props.points[C].tooltipPosition),A=F.props.points[C].tooltipPayload);var R={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:$,activePayload:A,activeCoordinate:M};this.setState(R),this.renderCursor(P),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,v;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(v=this.props.margin.top)!==null&&v!==void 0?v:0}})}return null}},{key:"componentDidUpdate",value:function(x){Jx([gn(x.children,qr)],[gn(this.props.children,qr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=gn(this.props.children,qr);if(x&&typeof x.props.shared=="boolean"){var S=x.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),v=AX(w),_={chartX:Math.round(x.pageX-v.left),chartY:Math.round(x.pageY-v.top)},P=w.width/S.offsetWidth||1,C=this.inRange(_.chartX,_.chartY,P);if(!C)return null;var $=this.state,A=$.xAxisMap,T=$.yAxisMap,O=this.getTooltipEventType(),L=A_(this.state,this.props.data,this.props.layout,C);if(O!=="axis"&&A&&T){var M=Ns(A).scale,F=Ns(T).scale,R=M&&M.invert?M.invert(_.chartX):null,B=F&&F.invert?F.invert(_.chartY):null;return ae(ae({},_),{},{xValue:R,yValue:B},L)}return L?ae(ae({},_),L):null}},{key:"inRange",value:function(x,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,v=this.props.layout,_=x/w,P=S/w;if(v==="horizontal"||v==="vertical"){var C=this.state.offset,$=_>=C.left&&_<=C.left+C.width&&P>=C.top&&P<=C.top+C.height;return $?{x:_,y:P}:null}var A=this.state,T=A.angleAxisMap,O=A.radiusAxisMap;if(T&&O){var L=Ns(T);return nS({x:_,y:P},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,S=this.getTooltipEventType(),w=gn(x,qr),v={};w&&S==="axis"&&(w.props.trigger==="click"?v={onClick:this.handleClick}:v={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Zf(this.props,this.handleOuterEvent);return ae(ae({},_),v)}},{key:"addListener",value:function(){Mg.on(Dg,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mg.removeListener(Dg,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,S,w){for(var v=this.state.formattedGraphicalItems,_=0,P=v.length;_<P;_++){var C=v[_];if(C.item===x||C.props.key===x.key||S===Ka(C.item.type)&&w===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,S=this.state.offset,w=S.left,v=S.top,_=S.height,P=S.width;return V.createElement("defs",null,V.createElement("clipPath",{id:x},V.createElement("rect",{x:w,y:v,height:_,width:P})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(S,w){var v=N_(w,2),_=v[0],P=v[1];return ae(ae({},S),{},We({},_,P.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(S,w){var v=N_(w,2),_=v[0],P=v[1];return ae(ae({},S),{},We({},_,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(x){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[x])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(x){var S=this.state,w=S.formattedGraphicalItems,v=S.activeItem;if(w&&w.length)for(var _=0,P=w.length;_<P;_++){var C=w[_],$=C.props,A=C.item,T=A.type.defaultProps!==void 0?ae(ae({},A.type.defaultProps),A.props):A.props,O=Ka(A.type);if(O==="Bar"){var L=($.data||[]).find(function(B){return fae(x,B)});if(L)return{graphicalItem:C,payload:L}}else if(O==="RadialBar"){var M=($.data||[]).find(function(B){return nS(x,B)});if(M)return{graphicalItem:C,payload:M}}else if(dp(C,v)||fp(C,v)||zu(C,v)){var F=eie({graphicalItem:C,activeTooltipItem:v,itemData:T.data}),R=T.activeIndex===void 0?F:T.activeIndex;return{graphicalItem:ae(ae({},C),{},{childIndex:R}),payload:zu(C,v)?T.data[F]:C.props.data[F]}}}return null}},{key:"render",value:function(){var x=this;if(!K1(this))return null;var S=this.props,w=S.children,v=S.className,_=S.width,P=S.height,C=S.style,$=S.compact,A=S.title,T=S.desc,O=S_(S,nue),L=Ge(O,!1);if($)return V.createElement(l_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement(Qx,Mo({},L,{width:_,height:P,title:A,desc:T}),this.renderClipPath(),X1(w,this.renderMap)));if(this.props.accessibilityLayer){var M,F;L.tabIndex=(M=this.props.tabIndex)!==null&&M!==void 0?M:0,L.role=(F=this.props.role)!==null&&F!==void 0?F:"application",L.onKeyDown=function(B){x.accessibilityManager.keyboardEvent(B)},L.onFocus=function(){x.accessibilityManager.focus()}}var R=this.parseEventsOfWrapper();return V.createElement(l_,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},V.createElement("div",Mo({className:nt("recharts-wrapper",v),style:ae({position:"relative",cursor:"default",width:_,height:P},C)},R,{ref:function(z){x.container=z}}),V.createElement(Qx,Mo({},L,{width:_,height:P,title:A,desc:T,style:bue}),this.renderClipPath(),X1(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);We(b,"displayName",r),We(b,"defaultProps",ae({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),We(b,"getDerivedStateFromProps",function(j,p){var y=j.dataKey,x=j.data,S=j.children,w=j.width,v=j.height,_=j.layout,P=j.stackOffset,C=j.margin,$=p.dataStartIndex,A=p.dataEndIndex;if(p.updateId===void 0){var T=P_(j);return ae(ae(ae({},T),{},{updateId:0},g(ae(ae({props:j},T),{},{updateId:0}),p)),{},{prevDataKey:y,prevData:x,prevWidth:w,prevHeight:v,prevLayout:_,prevStackOffset:P,prevMargin:C,prevChildren:S})}if(y!==p.prevDataKey||x!==p.prevData||w!==p.prevWidth||v!==p.prevHeight||_!==p.prevLayout||P!==p.prevStackOffset||!Uo(C,p.prevMargin)){var O=P_(j),L={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},M=ae(ae({},A_(p,x,_)),{},{updateId:p.updateId+1}),F=ae(ae(ae({},O),L),M);return ae(ae(ae({},F),g(ae({props:j},F),p)),{},{prevDataKey:y,prevData:x,prevWidth:w,prevHeight:v,prevLayout:_,prevStackOffset:P,prevMargin:C,prevChildren:S})}if(!Jx(S,p.prevChildren)){var R,B,z,I,X=gn(S,yl),re=X&&(R=(B=X.props)===null||B===void 0?void 0:B.startIndex)!==null&&R!==void 0?R:$,W=X&&(z=(I=X.props)===null||I===void 0?void 0:I.endIndex)!==null&&z!==void 0?z:A,de=re!==$||W!==A,Ae=!it(x),Be=Ae&&!de?p.updateId:p.updateId+1;return ae(ae({updateId:Be},g(ae(ae({props:j},p),{},{updateId:Be,dataStartIndex:re,dataEndIndex:W}),p)),{},{prevChildren:S,dataStartIndex:re,dataEndIndex:W})}return null}),We(b,"renderActiveDot",function(j,p,y){var x;return N.isValidElement(j)?x=N.cloneElement(j,p):Je(j)?x=j(p):x=V.createElement(Wb,p),V.createElement(vt,{className:"recharts-active-dot",key:y},x)});var h=N.forwardRef(function(p,y){return V.createElement(b,Mo({},p,{ref:y}))});return h.displayName=b.displayName,h},zc=d5({chartName:"BarChart",GraphicalChild:on,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Us},{axisType:"yAxis",AxisComp:Ws}],formatAxisMap:koe}),Oue=d5({chartName:"PieChart",GraphicalChild:ds,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:up},{axisType:"radiusAxis",AxisComp:lp}],formatAxisMap:wte,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function Tue(){const e=at(),[t,r]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,b]=N.useState(!0),[h,j]=N.useState(null),[p,y]=N.useState("semaine"),[x,S]=N.useState(je(new Date,"yyyy-MM-dd")),w=async A=>{if(!A){console.error("Aucun ID d'lve fourni"),j("Aucun ID d'lve fourni dans l'URL"),b(!1);return}try{b(!0),j(null);const T=await Yt.getById(A),O=(T==null?void 0:T.data)||T;if(!O||!O.id){console.error("lve non trouv ou donnes invalides:",T),j("lve non trouv ou donnes invalides"),b(!1);return}if(r(O),O){try{const L=await jn.getByEleve(A),M=(L==null?void 0:L.data)||L||[],F=Array.isArray(M)?M.find(R=>R.statut==="Active"):M;if(F&&F.bus_id){const R=await Pr.getById(F.bus_id),B=(R==null?void 0:R.data)||R;if(s(B),B&&B.trajet_id){const z=await ha.getById(B.trajet_id),I=(z==null?void 0:z.data)||z;o(I)}if(B&&B.chauffeur_id)try{const z=await an.getById(B.chauffeur_id),I=(z==null?void 0:z.data)||z;c(I)}catch(z){console.warn("Erreur lors du chargement du chauffeur:",z)}}}catch(L){console.warn("Erreur lors du chargement des inscriptions:",L)}try{const L=new Date().toISOString().split("T")[0],M=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],F=await ua.getByEleve(A,M,L),B=((F==null?void 0:F.data)||F||[]).sort((z,I)=>new Date(I.date||0)-new Date(z.date||0));m(B),f(B.slice(0,7))}catch(L){console.warn("Prsences non disponibles:",L),f([]),m([])}}}catch(T){console.error("Erreur lors du chargement:",T),j("Erreur lors du chargement des donnes de l'lve: "+(T.message||"Erreur inconnue"))}finally{b(!1)}};if(N.useEffect(()=>{if(!localStorage.getItem("responsable_session")){e(ke("ResponsableLogin"));return}const T=new URLSearchParams(window.location.search),O=T.get("eleveId")||T.get("eleveld");O?w(O):(j("Aucun ID d'lve fourni dans l'URL"),b(!1))},[e]),g)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"})})});if(!g&&!t&&!h)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-500 mb-2",children:"lve non trouv ou ID invalide."}),a.jsx(te,{onClick:()=>e(ke("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})});if(!g&&h&&!t)return a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-500 mb-2",children:h}),a.jsx(te,{onClick:()=>e(ke("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})});const v=N.useMemo(()=>{if(!d||d.length===0)return[];const A=new Date;let T,O;switch(p){case"jour":const L=new Date(x);return T=Jf(L),O=qv(L),d.filter(M=>{const F=new Date(M.date);return F>=T&&F<=O});case"semaine":return T=Xs(A,6),O=A,d.filter(M=>{const F=new Date(M.date);return F>=T&&F<=O}).slice(0,7);case"mois":return T=Xs(A,29),O=A,d.filter(M=>{const F=new Date(M.date);return F>=T&&F<=O});default:return d.slice(0,7)}},[d,p,x]),_=N.useMemo(()=>{if(!v||v.length===0)return[];const A={};return v.forEach(T=>{const O=je(new Date(T.date),"dd/MM",{locale:Xt});A[O]||(A[O]={date:O,absents:0,presents:0}),T.present_matin?A[O].presents++:A[O].absents++,T.present_soir?A[O].presents++:A[O].absents++}),Object.values(A).sort((T,O)=>{try{const[L,M]=T.date.split("/"),F=new Date(new Date().getFullYear(),parseInt(M)-1,parseInt(L)),[R,B]=O.date.split("/"),z=new Date(new Date().getFullYear(),parseInt(B)-1,parseInt(R));return F-z}catch(L){return console.error("Erreur lors du tri des dates:",L),0}})},[v]);N.useEffect(()=>{t&&t.id&&f(v)},[p,x,v,t]);const C=(A=>{const T=je(new Date(A),"yyyy-MM-dd"),O=d.find(L=>je(new Date(L.date),"yyyy-MM-dd")===T);return O?{absent:!O.present_matin||!O.present_soir,matin:!O.present_matin,soir:!O.present_soir}:{absent:!1,matin:!1,soir:!1}})(x),$=A=>({Actif:"bg-green-100 text-green-700",Inactif:"bg-amber-100 text-amber-700",Suspendu:"bg-red-100 text-red-700"})[A]||"bg-gray-100 text-gray-700";return t?a.jsx(nc,{title:`Dtails - ${(t==null?void 0:t.prenom)||""} ${(t==null?void 0:t.nom)||""}`,children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("button",{onClick:()=>e(ke("ResponsableDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-purple-600 mb-6 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),h&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:h}),a.jsx("button",{onClick:()=>j(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:a.jsx("div",{className:"p-6 bg-gradient-to-r from-purple-500 to-purple-600",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 flex items-center justify-center",children:a.jsx(hr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1 text-white",children:[a.jsxs("h1",{className:"text-2xl font-bold",children:[(t==null?void 0:t.prenom)||""," ",(t==null?void 0:t.nom)||""]}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("p",{className:"text-lg opacity-90",children:(t==null?void 0:t.classe)||"N/A"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${$((t==null?void 0:t.statut)||"Inactif")}`,children:(t==null?void 0:t.statut)||"Inactif"})]})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-purple-500"}),"Informations personnelles"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Classe"}),a.jsx("span",{className:"font-medium text-gray-800",children:(t==null?void 0:t.classe)||"N/A"})]}),(t==null?void 0:t.date_naissance)&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Date de naissance"}),a.jsx("span",{className:"font-medium text-gray-800",children:je(new Date(t.date_naissance),"dd/MM/yyyy",{locale:Xt})})]}),(t==null?void 0:t.adresse)&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Adresse"}),a.jsx("span",{className:"font-medium text-gray-800 text-right max-w-[200px]",children:t.adresse})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-purple-500"}),"Informations de transport"]}),n&&(t==null?void 0:t.statut)==="Actif"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-purple-50 rounded-2xl p-4 border border-purple-100",children:[a.jsx("p",{className:"text-sm text-purple-600 font-medium mb-1",children:"Bus assign"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.numero?n.numero.toString().replace(/^#\s*/,""):"N/A"}),n.immatriculation&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.immatriculation})]}),n.marque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Marque/Modle"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.marque," ",n.modele||""]})]}),n.capacite&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.capacite," places"]})]}),l&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Chauffeur"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Nom"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[l.prenom," ",l.nom]})]}),l.telephone&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone"}),a.jsx("span",{className:"font-medium text-gray-800",children:l.telephone})]})]})]}),i&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex justify-between py-2 mb-3",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium text-gray-800",children:i.nom||"N/A"})]}),i.heure_depart_matin_a&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Horaires:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_matin_a," - ",i.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_soir_a," - ",i.heure_arrivee_soir_a]})]})]})]})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-medium",children:"Aucun bus affect"}),a.jsx("p",{className:"text-sm mt-1",children:"L'affectation sera faite aprs validation"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-purple-500"}),"Historique des absences"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs($e,{value:p,onValueChange:y,children:[a.jsxs(Me,{className:"w-40 rounded-xl",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),a.jsx(De,{})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"jour",children:"Jour"}),a.jsx(H,{value:"semaine",children:"Semaine"}),a.jsx(H,{value:"mois",children:"Mois"})]})]}),p==="jour"&&a.jsx(le,{type:"date",value:x,onChange:A=>S(A.target.value),className:"w-40 rounded-xl"})]})]}),p==="jour"&&a.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border-2 border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:["tat pour le ",je(new Date(x),"EEEE d MMMM yyyy",{locale:Xt})]}),C.absent?a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:"text-red-600 font-semibold",children:"Absent"}),C.matin&&a.jsx("span",{className:"text-sm text-red-600",children:"Matin"}),C.soir&&a.jsx("span",{className:"text-sm text-red-600",children:"Soir"})]}):a.jsx("span",{className:"text-green-600 font-semibold",children:"Prsent (matin et soir)"})]}),a.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${C.absent?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:C.absent?"Absent":"Prsent"})]})}),_.length>0?a.jsx("div",{className:"mb-6",children:a.jsx(Eo,{width:"100%",height:300,children:a.jsxs(zc,{data:_,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Us,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),a.jsx(Ws,{}),a.jsx(qr,{}),a.jsx(wa,{}),a.jsx(on,{dataKey:"absents",fill:"#EF4444",name:"Absences"}),a.jsx(on,{dataKey:"presents",fill:"#10B981",name:"Prsences"})]})})}):a.jsxs("div",{className:"text-center py-8 text-gray-400 mb-6",children:[a.jsx(el,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune donne de prsence disponible pour cette priode"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:["Dtail des prsences ",p==="jour"?"du jour":p==="semaine"?"de la semaine":"du mois"]}),u.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Gs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun historique de prsence"})]}):a.jsx("div",{className:"space-y-2",children:u.map((A,T)=>{const O=new Date(A.date),L=je(O,"yyyy-MM-dd")===je(new Date,"yyyy-MM-dd"),M=p==="jour"&&je(O,"yyyy-MM-dd")===x;return a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl transition-colors ${M?"bg-purple-100 border-2 border-purple-300":"bg-gray-50 hover:bg-gray-100"}`,children:[a.jsxs("span",{className:"font-medium text-gray-700",children:[je(O,"EEEE d MMMM",{locale:Xt}),L&&a.jsx("span",{className:"ml-2 text-xs text-purple-600",children:"(Aujourd'hui)"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Matin:"}),a.jsx("span",{className:`text-sm font-medium ${A.present_matin?"text-green-600":"text-red-600"}`,children:A.present_matin?"Prsent":"Absent"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Soir:"}),a.jsx("span",{className:`text-sm font-medium ${A.present_soir?"text-green-600":"text-red-600"}`,children:A.present_soir?"Prsent":"Absent"})]})]})]},A.id||T)})})]})]})]})})}):a.jsx(nc,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-gray-500",children:"lve non trouv ou ID invalide."}),a.jsx(te,{onClick:()=>e(ke("ResponsableDashboard")),className:"mt-4 bg-purple-500 hover:bg-purple-600 rounded-xl",children:"Retour au tableau de bord"})]})})})}function kue(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=async l=>{r(!0),s("");try{const c=await es.login(l.email,l.password,"tuteur");c.success?(c.token&&localStorage.setItem("token",c.token),es.saveUser(c.user),localStorage.setItem("tuteur_session",JSON.stringify(c.user)),e(ke("TuteurDashboard"))):s(c.message||"Identifiants incorrects")}catch(c){console.error("Erreur de connexion:",c),s("Erreur de connexion. Veuillez vrifier vos identifiants.")}r(!1)},o=()=>{e(ke("TuteurRegister"))};return a.jsx(Nh,{title:"Espace Tuteur",icon:zt,onLogin:i,onRegister:o,showRegister:!0,loading:t,error:n})}function Mue({tuteur:e,notifications:t=[],newCounts:r={inscriptions:0,accidents:0,paiements:0,notifications:0},onLogout:n}){var y,x;const s=at(),i=fn(),[o,l]=N.useState(!1),[c,u]=N.useState(!1);N.useEffect(()=>{const S=()=>{window.innerWidth>=1024&&u(!1)};return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]);const f=[{title:"Dashboard",icon:wv,link:"TuteurDashboard",path:"/TuteurDashboard",badgeKeys:["inscriptions","accidents","paiements"]},{title:"Inscrire un lve",icon:hh,link:"TuteurInscription",path:"/TuteurInscription",badgeKey:null},{title:"Mes Demandes",icon:ya,link:"TuteurDemandes",path:"/TuteurDemandes",badgeKey:"inscriptions"},{title:"Notifications",icon:zn,link:"TuteurNotifications",path:"/TuteurNotifications",badgeKey:"notifications"},{title:"Profil",icon:ft,link:"TuteurProfile",path:"/TuteurProfile",badgeKey:null}],d=i.pathname==="/TuteurDashboard"||i.pathname.startsWith("/TuteurDashboard"),g=new URLSearchParams(i.search).get("tab")||"eleves",b=[{title:"Mes Enfants",icon:hr,tab:"eleves",badgeKey:null},{title:"Demandes refuses",icon:Dr,tab:"historique",badgeKey:null},{title:"Paiements",icon:Ar,tab:"paiements",badgeKey:"paiements"}],h=S=>{S.path?s(S.path):s(ke(S.link)),u(!1)},j=S=>{s(`/TuteurDashboard?tab=${S}`),u(!1)},p=S=>i.pathname===S||i.pathname.startsWith(S+"/");return t.filter(S=>!S.lue).length,a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>u(!c),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-lime-500 text-white rounded-xl shadow-lg hover:bg-lime-600 transition-colors",children:c?a.jsx(Ze,{className:"w-6 h-6"}):a.jsx(tl,{className:"w-6 h-6"})}),a.jsx(Br,{children:c&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>u(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(ee.aside,{initial:!1,animate:{width:o?"80px":"280px",x:c?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-lime-50 to-white
          border-r-2 border-lime-200 shadow-2xl z-40
          flex flex-col
          ${o?"items-center":""}
        `,children:[a.jsx("div",{className:"p-4 border-b border-lime-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!o&&a.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-lime-500 to-lime-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(hr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-gray-800 text-sm",children:"Espace Tuteur"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Transport Scolaire"})]})]}),o&&a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-lime-500 to-lime-600 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsx(hr,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:()=>l(!o),className:"hidden lg:block p-2 hover:bg-lime-100 rounded-lg transition-colors text-gray-600 hover:text-lime-600",children:o?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ze,{className:"w-5 h-5"})})]})}),!o&&e&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-lime-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-lime-500 rounded-full flex items-center justify-center text-white font-bold",children:((y=e.prenom)==null?void 0:y[0])||((x=e.nom)==null?void 0:x[0])||"T"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-semibold text-gray-800 text-sm truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsxs("div",{className:"space-y-1",children:[d&&!o&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"px-3 py-2 mb-2",children:a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Onglets"})}),b.map((S,w)=>{const v=g===S.tab,_=S.icon,P=S.badgeKey&&r[S.badgeKey]||0,C=P>0;return a.jsxs(ee.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.05},onClick:()=>j(S.tab),className:`
                        w-full flex items-center gap-3 px-4 py-3 rounded-xl
                        transition-all duration-200
                        ${v?"bg-gradient-to-r from-lime-500 to-lime-600 text-white shadow-lg":"text-gray-700 hover:bg-lime-100 hover:text-lime-700"}
                      `,children:[a.jsxs("div",{className:"relative",children:[a.jsx(_,{className:`w-5 h-5 ${v?"text-white":"text-gray-600"}`}),C&&!v&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold w-5 h-5",children:P>99?"99+":P})]}),a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:S.title})]},`tab-${S.tab}`)}),a.jsx("div",{className:"px-3 py-2 mt-4 mb-2",children:a.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Navigation"})})]}),f.map((S,w)=>{const v=p(S.path),_=S.icon;let P=0;S.badgeKeys&&Array.isArray(S.badgeKeys)?P=S.badgeKeys.reduce(($,A)=>$+(r[A]||0),0):S.badgeKey&&r[S.badgeKey]!==void 0&&(P=r[S.badgeKey]||0);const C=P>0;return a.jsxs(ee.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w*.05},onClick:()=>h(S),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${v?"bg-gradient-to-r from-lime-500 to-lime-600 text-white shadow-lg":"text-gray-700 hover:bg-lime-100 hover:text-lime-700"}
                    ${o?"justify-center":""}
                  `,title:o?S.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_,{className:`w-5 h-5 ${v?"text-white":"text-gray-600"}`}),C&&a.jsx("span",{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold ${P>99?"px-1.5 py-0.5":P>9?"min-w-[20px] h-5 px-1":"w-5 h-5"}`,children:P>99?"99+":P})]}),!o&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:S.title})]},S.link)})]})}),a.jsx("div",{className:"p-4 border-t border-lime-200 space-y-2",children:a.jsxs(ee.button,{onClick:n,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${o?"justify-center":""}
            `,title:o?"Dconnexion":"",children:[a.jsx(Mi,{className:"w-5 h-5"}),!o&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${o?"ml-[80px]":"ml-[280px]"}
        `})]})}function Ma({children:e,title:t="Espace Tuteur"}){const r=at(),n=fn(),[s,i]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState({inscriptions:0,accidents:0,paiements:0,notifications:0}),[f,d]=N.useState(!0);N.useEffect(()=>{const h=localStorage.getItem("tuteur_session");if(!h){r(ke("TuteurLogin"));return}const j=JSON.parse(h);i(j),Promise.all([m(j.id),g(j)]).finally(()=>{d(!1)})},[r]),N.useEffect(()=>{s&&n.pathname==="/TuteurNotifications"&&m(s.id)},[n.pathname,s]),N.useEffect(()=>{if(!s)return;const h=async()=>{await Promise.all([m(s.id),g(s)])};h();const j=setInterval(h,3e4);return()=>clearInterval(j)},[s]);const m=async h=>{try{const j=await lt.getByUser(h,"tuteur"),p=(j==null?void 0:j.data)||j||[];l(p.sort((x,S)=>new Date(S.date||S.date_creation||0)-new Date(x.date||x.date_creation||0)));const y=p.filter(x=>!x.lue).length;u(x=>({...x,notifications:y}))}catch(j){console.warn("Erreur lors du chargement des notifications:",j),l([])}},g=async h=>{try{const j=h.type_id||h.id;try{const p=await cr.getByTuteur(j),x=((p==null?void 0:p.data)||p||[]).filter(S=>S.type_demande==="inscription"&&(S.statut==="En attente"||S.statut==="En cours de traitement")).length;u(S=>({...S,inscriptions:x}))}catch(p){console.warn("Erreur chargement demandes:",p)}try{const p=await ri.getEleves(j),y=(p==null?void 0:p.data)||p||[],x=Array.isArray(y)?y.map(S=>S.id||S.eleve_id).filter(Boolean):[];if(x.length>0){const S=await vn.getAll(),v=((S==null?void 0:S.data)||S||[]).filter(_=>{try{const P=_.eleves_concernes?typeof _.eleves_concernes=="string"?JSON.parse(_.eleves_concernes||"[]"):_.eleves_concernes:[];if(!(Array.isArray(P)&&P.some(L=>x.includes(parseInt(L))||x.includes(L))))return!1;const $=new Date(_.date||_.date_creation||0),T=(new Date-$)/(1e3*60*60*24)<=7;return _.statut!=="Rsolu"&&_.statut!=="rsolu"&&_.statut!=="Resolu"||T}catch(P){return console.warn("Erreur parsing eleves_concernes:",P),!1}}).length;u(_=>({..._,accidents:v}))}else u(S=>({...S,accidents:0}))}catch(p){console.warn("Erreur chargement accidents:",p),u(y=>({...y,accidents:0}))}try{const p=await Fo.getByTuteur(j),x=((p==null?void 0:p.data)||p||[]).filter(S=>S.type_paiement==="mensuel"&&(S.statut==="Impay"||S.statut==="En attente"||S.statut==="impay"||S.statut==="en attente")).length;u(S=>({...S,paiements:x}))}catch(p){console.warn("Erreur chargement paiements:",p)}}catch(j){console.warn("Erreur lors du chargement des compteurs:",j)}},b=()=>{localStorage.removeItem("tuteur_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(ke("Home"))};return f?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50",children:[a.jsx(Mue,{tuteur:s,notifications:o,newCounts:c,onLogout:b}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function vp({isOpen:e,title:t="Information",message:r,type:n="info",onClose:s}){if(!e)return null;const i=()=>{switch(n){case"success":return a.jsx(ct,{className:"w-6 h-6 text-white"});case"error":return a.jsx(Dr,{className:"w-6 h-6 text-white"});case"warning":return a.jsx(qe,{className:"w-6 h-6 text-white"});default:return a.jsx(Qu,{className:"w-6 h-6 text-white"})}},o=()=>{switch(n){case"success":return"bg-gradient-to-r from-green-500 to-green-600";case"error":return"bg-gradient-to-r from-red-500 to-red-600";case"warning":return"bg-gradient-to-r from-amber-500 to-amber-600";default:return"bg-gradient-to-r from-blue-500 to-blue-600"}};return a.jsx(Br,{children:a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:a.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},onClick:l=>l.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden",children:[a.jsx("div",{className:`p-6 ${o()}`,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center",children:i()}),a.jsx("h3",{className:"text-xl font-bold text-white",children:t})]})}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:r})}),a.jsx("div",{className:"p-6 border-t border-gray-100 flex justify-end bg-gray-50",children:a.jsx(te,{onClick:s,className:"rounded-xl",children:"OK"})})]})})})}function Due(){var Ta;const e=at(),t=fn(),[r,n]=N.useState(null),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState("all"),m=new URLSearchParams(t.search),g=m.get("tab")||"eleves",[b,h]=N.useState(g);N.useEffect(()=>{const E=m.get("tab")||"eleves";E!==b&&h(E)},[t.search]);const[j,p]=N.useState(!1),[y,x]=N.useState(null),[S,w]=N.useState(""),[v,_]=N.useState(!1),[P,C]=N.useState(""),[$,A]=N.useState([]),[T,O]=N.useState(!1),[L,M]=N.useState(!1),[F,R]=N.useState(!1),[B,z]=N.useState(null),[I,X]=N.useState(null),[re,W]=N.useState(""),[de,Ae]=N.useState({zone:"",type_transport:"",abonnement:""}),[Be,K]=N.useState([]),[U,J]=N.useState(""),[D,Y]=N.useState(""),[G,ie]=N.useState({show:!1,eleve:null,type:null}),[pe,xe]=N.useState({show:!1,eleve:null}),[q,oe]=N.useState({show:!1,message:"",type:"info"}),[Oe,_e]=N.useState(!1),[Ce,Fe]=N.useState(null),[ye,Re]=N.useState(null),[rt,ht]=N.useState(null),[et,Ke]=N.useState([]),[Ye,kt]=N.useState(!1);N.useEffect(()=>{const E=localStorage.getItem("tuteur_session");if(!E){e(ke("TuteurLogin"));return}const Q=JSON.parse(E);n(Q);const he=Q.type_id||Q.id;ze(he,Q.id),Ft()},[e]);const Ft=async()=>{try{const E=await Ps.getAll(),Q=(E==null?void 0:E.data)||E||[];K(Array.isArray(Q)?Q:[])}catch(E){console.error("Erreur lors du chargement des zones:",E)}},ze=async(E,Q)=>{var he,Ee,Ne,ve,ue;u(!0);try{const[Se,k,Z,fe,Pe]=await Promise.allSettled([Yt.getAll(),lt.getByUser(Q,"tuteur"),cr.getAll(),jn.getAll(),Fo.getByTuteur(E)]),me=Se.status==="fulfilled"?Array.isArray((he=Se.value)==null?void 0:he.data)?Se.value.data:Array.isArray(Se.value)?Se.value:[]:[],se=k.status==="fulfilled"?Array.isArray((Ee=k.value)==null?void 0:Ee.data)?k.value.data:Array.isArray(k.value)?k.value:[]:[],ce=Z.status==="fulfilled"?Array.isArray((Ne=Z.value)==null?void 0:Ne.data)?Z.value.data:Array.isArray(Z.value)?Z.value:[]:[],Ue=fe.status==="fulfilled"?Array.isArray((ve=fe.value)==null?void 0:ve.data)?fe.value.data:Array.isArray(fe.value)?fe.value:[]:[],_t=Pe.status==="fulfilled"?Array.isArray((ue=Pe.value)==null?void 0:ue.data)?Pe.value.data:Array.isArray(Pe.value)?Pe.value:[]:[],st=Array.isArray(me)?me.filter(Xe=>Xe.tuteur_id===E):[];A(Array.isArray(_t)?_t:[]);const qt=Array.isArray(ce)?ce.filter(Xe=>Xe.type_demande==="inscription"&&Xe.tuteur_id===E):[],ao=st.map(Xe=>{const Or=qt.filter(ut=>ut.eleve_id===Xe.id).sort((ut,bp)=>new Date(bp.date_creation||0)-new Date(ut.date_creation||0))[0],ql=Array.isArray(Ue)?Ue.find(ut=>ut.eleve_id===Xe.id&&(ut.statut==="Active"||ut.statut==="Dsabonn")):null,f5=(Array.isArray(_t)?_t.filter(ut=>ut.eleve_id===Xe.id&&ut.statut==="Pay"):[]).reduce((ut,bp)=>ut+(parseFloat(bp.montant)||0),0);let tj=null,rj=0,nj=0;if(Or!=null&&Or.description)try{const ut=typeof Or.description=="string"?JSON.parse(Or.description):Or.description;ut!=null&&ut.taux_reduction&&ut.taux_reduction>0&&(tj=ut==null?void 0:ut.montant_avant_reduction,rj=ut==null?void 0:ut.taux_reduction,nj=(ut==null?void 0:ut.montant_reduction)||0)}catch{}let fs=null;if(ql)ql.statut==="Dsabonn"?fs="Dsabonn":fs="Inscrit";else if(Or){const ut=Or.statut||"En attente";ut==="En attente"?fs="En cours de traitement":ut==="Valide"||ut==="En attente de paiement"?fs="En attente de paiement":ut==="Refuse"?fs="Refuse":fs=ut}else fs="En cours de traitement";return{...Xe,demande_inscription:Or,inscription:ql,statut_demande:fs,montant_total_paye:f5,montant_avant_reduction:tj,taux_reduction:rj,montant_reduction:nj}});i(ao),l(se.sort((Xe,Or)=>new Date(Or.date||Or.date_creation||0)-new Date(Xe.date||Xe.date_creation||0)))}catch(Se){console.error("Erreur lors du chargement:",Se)}finally{u(!1),O(!1)}},Nt=E=>{const Q="px-4 py-2 rounded-xl text-sm font-medium border";return E==="En cours de traitement"?`${Q} bg-[#64B5F6] text-white border-[#64B5F6]`:E==="Inscrit"?`${Q} bg-[#A5D6A7] text-[#1B5E20] border-[#A5D6A7]`:E==="Dsabonn"?`${Q} bg-[#E57373] text-white border-[#E57373]`:E==="En attente de paiement"?`${Q} bg-orange-100 text-orange-700 border-orange-200`:E==="Paye"?`${Q} bg-amber-100 text-amber-700 border-amber-200`:E==="Refuse"?`${Q} bg-red-100 text-red-700 border-red-200`:E==="En attente"?`${Q} bg-yellow-100 text-yellow-700 border-yellow-200`:`${Q} bg-gray-100 text-gray-700 border-gray-200`},Qe=async()=>{var Q;if(!pe.eleve)return;const E=pe.eleve;try{if((Q=E.demande_inscription)!=null&&Q.id)try{await cr.delete(E.demande_inscription.id),console.log("Demande supprime avec succs")}catch(Ee){console.warn("Erreur lors de la suppression de la demande:",Ee)}try{await Yt.delete(E.id),console.log("lve supprim avec succs")}catch(Ee){throw console.error("Erreur lors de la suppression de l'lve:",Ee),Ee}if(!r)return;const he=r.type_id||r.id;await ze(he,r.id),xe({show:!1,eleve:null}),J("Demande annule avec succs"),setTimeout(()=>J(""),5e3)}catch(he){console.error("Erreur lors de l'annulation:",he),xe({show:!1,eleve:null}),Y("Erreur lors de l'annulation de la demande: "+(he.message||"Erreur inconnue")),setTimeout(()=>Y(""),5e3)}},Qt=E=>{xe({show:!0,eleve:E})},Vr=async()=>{if(!G.eleve||!r)return;const E=G.eleve;try{await Yt.delete(E.id);const Q=r.type_id||r.id;await ze(Q,r.id),ie({show:!1,eleve:null,type:null}),J("Inscription supprime avec succs"),setTimeout(()=>J(""),5e3)}catch(Q){console.error("Erreur lors de la suppression:",Q),ie({show:!1,eleve:null,type:null}),Y("Erreur lors de la suppression de l'inscription"),setTimeout(()=>Y(""),5e3)}},Ur=E=>{ie({show:!0,eleve:E,type:"delete"})},Mt=async()=>{if(!B||!re.trim()){Y("Veuillez saisir la raison du dsabonnement"),setTimeout(()=>Y(""),5e3);return}try{Y("");const E=r.type_id||r.id;await cr.create({eleve_id:B.id,tuteur_id:E,type_demande:"desinscription",description:JSON.stringify({raison:re}),statut:"Valide"}),await Yt.delete(B.id),J("Dsabonnement effectu avec succs. L'lve a t supprim."),M(!1),z(null),W(""),await ze(E,r.id),setTimeout(()=>J(""),5e3)}catch(E){console.error("Erreur lors du dsabonnement:",E),Y("Erreur lors du dsabonnement"),setTimeout(()=>Y(""),5e3)}},Oa=async()=>{if(I){if(!de.zone&&!de.type_transport&&!de.abonnement){Y("Veuillez slectionner au moins un lment  modifier"),setTimeout(()=>Y(""),5e3);return}try{const E=r.type_id||r.id,Q=I.demande_inscription;let he={};if(Q!=null&&Q.description)try{he=typeof Q.description=="string"?JSON.parse(Q.description):Q.description}catch(Ne){console.warn("Erreur parsing description:",Ne)}const Ee={...he,type_transport:de.type_transport||he.type_transport,abonnement:de.abonnement||he.abonnement,zone:de.zone||he.zone};await cr.create({eleve_id:I.id,tuteur_id:E,type_demande:"modification",zone_geographique:de.zone||(Q==null?void 0:Q.zone_geographique),description:JSON.stringify(Ee),statut:"En attente"}),J("Demande de modification envoye avec succs"),R(!1),X(null),Ae({zone:"",type_transport:"",abonnement:""}),await ze(E,r.id),setTimeout(()=>J(""),5e3)}catch(E){console.error("Erreur lors de la demande de changement:",E),Y("Erreur lors de l'envoi de la demande de modification"),setTimeout(()=>Y(""),5e3)}}},gt=s.filter(E=>E.statut_demande!=="Refuse"),Ht=s.filter(E=>E.statut_demande==="Refuse"),en=gt.filter(E=>f==="all"?!0:f==="inscrit"?E.statut_demande==="Inscrit":f==="en_attente"?E.statut_demande==="En attente de paiement":f==="en_traitement"?E.statut_demande==="En cours de traitement":!0);return o.filter(E=>!E.lue).length,c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[U&&a.jsxs(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center justify-between gap-2 text-green-700 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ct,{className:"w-5 h-5"}),a.jsx("span",{children:U})]}),a.jsx("button",{onClick:()=>J(""),className:"text-green-600 hover:text-green-800 transition-colors",children:a.jsx(Dr,{className:"w-5 h-5"})})]}),D&&a.jsxs(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center justify-between gap-2 text-red-600 shadow-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(qe,{className:"w-5 h-5"}),a.jsx("span",{children:D})]}),a.jsx("button",{onClick:()=>Y(""),className:"text-red-600 hover:text-red-800 transition-colors",children:a.jsx(Dr,{className:"w-5 h-5"})})]}),a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zt,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:["Bienvenue, ",r==null?void 0:r.prenom," ",r==null?void 0:r.nom]}),a.jsx("p",{className:"text-gray-500",children:r==null?void 0:r.email})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx(ea,{title:"Mes Enfants",value:s.length,icon:hr,color:"lime"}),a.jsx(ea,{title:"En attente",value:s.filter(E=>E.statut_demande==="En cours de traitement"||E.statut_demande==="En attente").length,icon:Gs,color:"orange"}),a.jsx(ea,{title:"Inscrits",value:s.filter(E=>E.statut_demande==="Inscrit"||E.statut_demande==="En attente de paiement").length,icon:ct,color:"green"})]}),b==="eleves"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(hr,{className:"w-6 h-6 text-lime-500"}),"Mes Enfants"]}),a.jsxs($e,{value:f,onValueChange:d,children:[a.jsx(Me,{className:"w-48 rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les lves"}),a.jsx(H,{value:"inscrit",children:"Inscrits"}),a.jsx(H,{value:"en_attente",children:"En attente de paiement"}),a.jsx(H,{value:"en_traitement",children:"En cours de traitement"})]})]})]})}),en.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(hr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun lve inscrit pour le moment"}),a.jsx(Ff,{to:ke("TuteurInscription"),children:a.jsx(te,{className:"mt-4 bg-lime-500 hover:bg-lime-600 text-white rounded-xl",children:"Inscrire un lve"})})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:en.map((E,Q)=>{var he,Ee;return a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Q},className:"p-6 hover:bg-lime-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center",children:a.jsx(hr,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[E.nom," ",E.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:E.classe}),E.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[E.adresse.substring(0,30),"..."]})]})]}),E.montant_total_paye>0&&a.jsx("div",{className:"mt-2 space-y-1",children:E.taux_reduction>0&&E.montant_avant_reduction?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg text-sm font-medium bg-green-100 text-green-700 flex-wrap",children:[a.jsx(Ar,{className:"w-4 h-4"}),a.jsxs("span",{className:"line-through text-gray-500",children:[parseFloat(E.montant_avant_reduction).toFixed(2)," DH"]}),a.jsx("span",{children:""}),a.jsxs("span",{className:"font-bold",children:["Total pay: ",E.montant_total_paye.toFixed(2)," DH"]}),a.jsxs("span",{className:"text-xs bg-green-200 px-2 py-0.5 rounded",children:["-",Math.round(E.taux_reduction*100),"%"]})]}),a.jsxs("div",{className:"text-xs text-green-600 ml-3",children:["Rduction: ",E.montant_reduction.toFixed(2)," DH"]})]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-lg text-sm font-medium bg-green-100 text-green-700",children:[a.jsx(Ar,{className:"w-4 h-4"}),"Total pay: ",E.montant_total_paye.toFixed(2)," DH"]})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("span",{className:Nt(E.statut_demande),children:E.statut_demande}),a.jsxs(te,{onClick:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),e(`/TuteurEleveDetails?eleveId=${E.id}`)},className:"rounded-xl bg-blue-500 hover:bg-blue-600 text-white border-2 border-blue-600",children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"Dtails"]}),(E.statut_demande==="En cours de traitement"||E.statut_demande==="En attente")&&a.jsxs(a.Fragment,{children:[a.jsx(Ff,{to:ke(`TuteurDemandes${(he=E.demande_inscription)!=null&&he.id?`?demandeId=${E.demande_inscription.id}`:""}`),onClick:Ne=>{var ve;(ve=E.demande_inscription)!=null&&ve.id||console.warn("Pas d'ID de demande trouv pour l'lve:",E)},children:a.jsxs(te,{className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]})}),a.jsxs(te,{onClick:Ne=>{Ne.preventDefault(),Ne.stopPropagation(),Qt(E)},className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Annuler"]})]}),E.statut_demande==="En attente de paiement"&&((Ee=E.demande_inscription)==null?void 0:Ee.id)&&a.jsxs(te,{onClick:()=>{x(E),p(!0),w(""),C("")},className:"bg-gradient-to-r from-lime-600 to-lime-600 hover:from-lime-700 hover:to-lime-700 text-white rounded-xl font-semibold shadow-md",children:[a.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Payer"]}),E.statut_demande==="Inscrit"&&a.jsx(a.Fragment,{children:a.jsxs(te,{onClick:()=>{z(E),M(!0),W("")},className:"rounded-xl text-white border-2",style:{backgroundColor:"#E57373",borderColor:"#E57373"},onMouseEnter:Ne=>Ne.target.style.backgroundColor="#EF5350",onMouseLeave:Ne=>Ne.target.style.backgroundColor="#E57373",children:[a.jsx(Mi,{className:"w-4 h-4 mr-2"}),"Dsabonnement"]})})]})]})},E.id)})})]}),b==="historique"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Dr,{className:"w-6 h-6 text-lime-500"}),"Demandes Refuses"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:[Ht.length," demande(s) refuse(s)"]})]}),Ht.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Dr,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucune demande refuse"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:Ht.map((E,Q)=>{var he;return a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Q},className:"p-6 hover:bg-red-50/50 transition-colors cursor-pointer",onClick:()=>e(`/TuteurEleveDetails?eleveId=${E.id}`),children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-red-100 flex items-center justify-center",children:a.jsx(Dr,{className:"w-7 h-7 text-red-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[E.nom," ",E.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:E.classe}),E.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[E.adresse.substring(0,30),"..."]})]})]}),a.jsxs("div",{className:"mt-2",children:[a.jsx("span",{className:"px-3 py-1 rounded-xl text-sm font-medium border border-red-300 bg-red-50 text-red-700",children:"Refuse"}),((he=E.demande_inscription)==null?void 0:he.date_creation)&&a.jsxs("span",{className:"ml-3 text-xs text-gray-500",children:["Le ",new Date(E.demande_inscription.date_creation).toLocaleDateString("fr-FR")]})]})]})]}),a.jsx("div",{className:"flex flex-wrap items-center gap-3",children:a.jsxs(te,{onClick:Ee=>{Ee.stopPropagation(),Ur(E)},className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})})]})},E.id)})})]}),b==="demandes"&&a.jsx($ue,{tuteur:r,eleves:s}),b==="paiements"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(Ar,{className:"w-6 h-6 text-lime-500"}),"Mes Paiements"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:["Total: ",$.filter(E=>E.statut==="Pay").reduce((E,Q)=>E+(parseFloat(Q.montant)||0),0).toFixed(2)," DH"]})]}),$.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Ar,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Aucun paiement enregistr"})]}):a.jsx("div",{className:"divide-y divide-gray-100",children:$.map((E,Q)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*Q},className:"p-6 hover:bg-lime-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${E.type_paiement==="initial"?"bg-blue-100":"bg-green-100"}`,children:a.jsx(Ar,{className:`w-7 h-7 ${E.type_paiement==="initial"?"text-blue-500":"text-green-500"}`})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[E.eleve_prenom," ",E.eleve_nom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:E.eleve_classe||"N/A"}),E.bus_numero&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{children:["Bus ",E.bus_numero]})]}),E.date_paiement&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:new Date(E.date_paiement).toLocaleDateString("fr-FR")})]})]}),a.jsxs("div",{className:"mt-2 flex gap-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-medium ${E.type_paiement==="initial"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:E.type_paiement==="initial"?"Paiement initial":`Mois ${E.mois}/${E.annee}`}),a.jsx("span",{className:`px-3 py-1 rounded-xl text-xs font-medium border ${E.statut==="Pay"?"bg-green-100 text-green-700 border-green-200":"bg-yellow-100 text-yellow-700 border-yellow-200"}`,children:E.statut})]})]})]}),a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"text-2xl font-bold text-lime-600",children:[parseFloat(E.montant||0).toFixed(2)," DH"]})})]})},E.id))})]}),Oe&&Ce&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(_a,{className:"w-6 h-6"}),"Dtails de ",Ce.prenom," ",Ce.nom]}),a.jsx("button",{onClick:()=>{_e(!1),Fe(null),Re(null),ht(null),Ke([])},className:"text-white hover:text-lime-100 transition-colors",children:a.jsx(Dr,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 space-y-6",children:Ye?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-lime-500"}),"Informations gnrales"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Classe:"}),a.jsx("span",{className:"ml-2 font-medium",children:Ce.classe||"N/A"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Statut:"}),a.jsx("span",{className:`ml-2 px-2 py-1 rounded-lg text-xs font-medium ${Nt(Ce.statut_demande)}`,children:Ce.statut_demande})]})]})]}),Ce.inscription&&Ce.inscription.bus_id?a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-4 border border-lime-200",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations du bus"]}),ye?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-lime-200",children:[a.jsx("p",{className:"text-sm text-lime-600 font-medium mb-1",children:"Bus assign"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:ye.numero}),ye.immatriculation&&a.jsx("p",{className:"text-sm text-gray-500",children:ye.immatriculation})]}),ye.marque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Marque/Modle"}),a.jsxs("span",{className:"font-medium",children:[ye.marque," ",ye.modele||""]})]}),a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium",children:[ye.capacite," places"]})]}),rt&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-200",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium",children:rt.nom})]}),rt.heure_depart_matin_a&&a.jsxs("div",{className:"mt-3",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Horaires:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200",children:[a.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Matin"}),a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:rt.heure_depart_matin_a})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-3 border border-orange-200",children:[a.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Soir"}),a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:rt.heure_depart_soir_a})]})]})]})]})]}):a.jsx("p",{className:"text-gray-500 text-sm",children:"Chargement des informations du bus..."})]}):a.jsx("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-200",children:a.jsxs("p",{className:"text-gray-500 text-sm flex items-center gap-2",children:[a.jsx(qe,{className:"w-4 h-4"}),"L'lve n'est pas encore assign  un bus"]})}),a.jsxs("div",{className:"bg-red-50 rounded-2xl p-4 border border-red-200",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[a.jsx(qe,{className:"w-5 h-5 text-red-500"}),"Absences (30 derniers jours)"]}),et.length>0?a.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:et.map((E,Q)=>a.jsxs("div",{className:"bg-white rounded-xl p-3 border border-red-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Jr,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"font-medium text-gray-800",children:E.date?new Date(E.date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Date inconnue"})]}),a.jsx("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-lg text-xs font-medium",children:"Absent"})]},Q))}):a.jsx("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:a.jsxs("p",{className:"text-green-700 text-sm flex items-center gap-2",children:[a.jsx(ct,{className:"w-4 h-4"}),"Aucune absence enregistre sur les 30 derniers jours"]})})]})]})})]})}),j&&y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-600 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Ar,{className:"w-6 h-6"}),"Paiement"]}),a.jsx("button",{onClick:()=>{p(!1),x(null),w(""),C("")},className:"text-white/80 hover:text-white transition-colors",children:a.jsx(Dr,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"bg-lime-50 rounded-xl p-4 mb-6 border border-lime-200",children:a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"lve:"}),a.jsxs("span",{className:"font-semibold",children:[y.prenom," ",y.nom]})]}),((Ta=y.demande_inscription)==null?void 0:Ta.montant_facture)&&a.jsxs("div",{className:"flex justify-between pt-2 border-t border-lime-200",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"Montant:"}),a.jsxs("span",{className:"text-lg font-bold text-lime-700",children:[parseFloat(y.demande_inscription.montant_facture).toFixed(2)," DH"]})]})]})}),a.jsx("div",{className:"bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," Veuillez consulter l'cole pour effectuer le paiement et rcuprer le code de vrification  saisir ci-dessous."]})}),P&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(qe,{className:"w-5 h-5"}),P]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Code de vrification (fourni par l'cole)"}),a.jsx(le,{value:S,onChange:E=>w(E.target.value.toUpperCase()),placeholder:"Entrez le code de vrification",className:"h-12 rounded-xl text-center text-xl tracking-widest font-mono uppercase",maxLength:10,disabled:v,autoFocus:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{type:"button",onClick:()=>{p(!1),x(null),w(""),C("")},className:"flex-1 rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",disabled:v,children:"Annuler"}),a.jsx(te,{onClick:async E=>{if(setTimeout(()=>E.currentTarget.blur(),0),!S||S.length<4){C("Veuillez saisir le code de vrification");return}_(!0),C("");try{const Q=await cr.verifierCode(y.demande_inscription.id,S);if(!Q.success){C(Q.message||"Code de vrification incorrect"),_(!1);return}p(!1),x(null),w("");const he=r.type_id||r.id;await ze(he,r.id)}catch(Q){console.error("Erreur lors de la vrification:",Q),C(Q.message||"Erreur lors de la vrification du code. Veuillez ressayer.")}_(!1)},disabled:v,className:"flex-1 bg-gradient-to-r from-lime-600 to-lime-600 hover:from-lime-700 hover:to-lime-700 text-white rounded-xl font-semibold",children:v?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-5 h-5 mr-2"}),"Confirmer"]})})]})]})]})]})}),L&&B&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-red-500 to-red-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Mi,{className:"w-6 h-6"}),"Dsabonnement"]}),a.jsx("button",{onClick:()=>{M(!1),z(null),W("")},className:"text-white hover:text-red-100 transition-colors",children:a.jsx(Dr,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:E=>{E.preventDefault();const Q=E.target.querySelector('button[type="submit"]');Q&&Q.blur(),Mt()},className:"p-6 space-y-4",children:[a.jsx("div",{className:"bg-red-50 rounded-xl p-4 border border-red-200",children:a.jsxs("p",{className:"text-sm text-red-800",children:[a.jsx("strong",{children:"Attention :"})," Vous tes sur le point de dsabonner ",a.jsxs("strong",{children:[B.prenom," ",B.nom]}),". Cette action est irrversible et supprimera dfinitivement toutes les donnes de l'lve."]})}),a.jsxs("div",{children:[a.jsx(ne,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Raison du dsabonnement *"}),a.jsx(ja,{value:re,onChange:E=>W(E.target.value),className:"rounded-xl border-2 border-gray-200 focus:border-red-500 min-h-[100px]",placeholder:"Veuillez indiquer la raison du dsabonnement...",required:!0})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(te,{type:"button",onClick:()=>{M(!1),z(null),W("")},className:"rounded-xl bg-gray-500 hover:bg-gray-600 text-white border-2 border-gray-600",children:"Annuler"}),a.jsxs(te,{type:"submit",className:"rounded-xl bg-red-500 hover:bg-red-600 text-white border-2 border-red-600",children:[a.jsx(Mi,{className:"w-4 h-4 mr-2"}),"Confirmer le dsabonnement"]})]})]})]})}),F&&I&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(_w,{className:"w-6 h-6"}),"Demande de changement"]}),a.jsx("button",{onClick:()=>{R(!1),X(null),Ae({zone:"",type_transport:"",abonnement:""})},className:"text-white hover:text-lime-100 transition-colors",children:a.jsx(Dr,{className:"w-6 h-6"})})]})}),a.jsxs("form",{onSubmit:E=>{E.preventDefault();const Q=E.target.querySelector('button[type="submit"]');Q&&Q.blur(),Oa()},className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-lime-50 rounded-xl p-4 border border-lime-200",children:[a.jsxs("p",{className:"text-sm text-lime-800",children:["Demande de changement pour ",a.jsxs("strong",{children:[I.prenom," ",I.nom]}),"."]}),a.jsx("p",{className:"text-xs text-lime-700 mt-2",children:"Slectionnez uniquement les lments que vous souhaitez modifier."})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Zone gographique"}),a.jsxs($e,{value:de.zone,onValueChange:E=>Ae({...de,zone:E}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez une nouvelle zone (optionnel)"})}),a.jsx(Te,{children:Be.filter(E=>E.actif!==!1).map(E=>a.jsx(H,{value:E.nom,children:E.nom},E.id))})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de transport"}),a.jsxs($e,{value:de.type_transport,onValueChange:E=>Ae({...de,type_transport:E}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez un nouveau type (optionnel)"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Aller-Retour",children:"Aller-Retour"}),a.jsx(H,{value:"Aller",children:"Aller uniquement"}),a.jsx(H,{value:"Retour",children:"Retour uniquement"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type d'abonnement"}),a.jsxs($e,{value:de.abonnement,onValueChange:E=>Ae({...de,abonnement:E}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-lime-500",children:a.jsx(De,{placeholder:"Slectionnez un nouveau type d'abonnement (optionnel)"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Mensuel",children:"Mensuel"}),a.jsx(H,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx(te,{type:"button",onClick:()=>{R(!1),X(null),Ae({zone:"",type_transport:"",abonnement:""})},className:"rounded-xl bg-gray-500 hover:bg-gray-600 text-white border-2 border-gray-600",children:"Annuler"}),a.jsxs(te,{type:"submit",className:"rounded-xl bg-lime-500 hover:bg-lime-600 text-white border-2 border-lime-600",children:[a.jsx(_w,{className:"w-4 h-4 mr-2"}),"Envoyer la demande"]})]})]})]})}),a.jsx(zr,{isOpen:G.show,title:"Supprimer l'inscription",message:G.eleve?`tes-vous sr de vouloir supprimer dfinitivement l'inscription de ${G.eleve.prenom} ${G.eleve.nom} ?`:"",onConfirm:Vr,onCancel:()=>ie({show:!1,eleve:null,type:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(zr,{isOpen:pe.show,title:"Annuler la demande",message:pe.eleve?`tes-vous sr de vouloir annuler la demande d'inscription de ${pe.eleve.prenom} ${pe.eleve.nom} ?`:"",onConfirm:Qe,onCancel:()=>xe({show:!1,eleve:null}),confirmText:"Annuler la demande",cancelText:"Non",variant:"default"}),a.jsx(vp,{isOpen:q.show,title:"Information",message:q.message,type:q.type,onClose:()=>oe({show:!1,message:"",type:"info"})})]})}function $ue({tuteur:e,eleves:t}){const r=["agdal","(takaddoum-haynahda)","hay riad","temara","medina","hay el fath","hay lmohit","yaakoub al mansour"],[n,s]=N.useState(!1),[i,o]=N.useState(!1),[l,c]=N.useState({eleve_id:"",nouvelle_adresse:"",nouvelle_zone:"",date_demenagement:"",raisons:""}),u=async d=>{d.preventDefault();const m=d.target.querySelector('button[type="submit"]');m&&m.blur(),s(!0);try{await cr.create({eleve_id:parseInt(l.eleve_id),tuteur_id:e.id,type_demande:"Dmnagement",nouvelle_adresse:l.nouvelle_adresse,nouvelle_zone:l.nouvelle_zone,date_demenagement:l.date_demenagement,raisons:l.raisons,statut:"En attente"}),await lt.create({destinataire_id:1,destinataire_type:"admin",titre:"Nouvelle demande de changement d'adresse/zone",message:`${e.prenom} ${e.nom} a fait une demande de changement d'adresse/zone pour un lve.`,type:"info"}),o(!0),c({eleve_id:"",nouvelle_adresse:"",nouvelle_zone:"",date_demenagement:"",raisons:""}),setTimeout(()=>o(!1),3e3)}catch(g){console.error("Erreur lors de l'envoi de la demande:",g),setAlertDialog({show:!0,message:"Erreur lors de l'envoi de la demande",type:"error"})}finally{s(!1)}},f=t.find(d=>d.id===parseInt(l.eleve_id));return a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:[a.jsx(lu,{className:"w-6 h-6 text-lime-500"}),"Demande de changement d'adresse / Zone (Dmnagement)"]}),i&&a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(ct,{className:"w-5 h-5"}),"Demande envoye avec succs !"]}),a.jsxs("form",{onSubmit:u,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium mb-2",children:"Slectionner l'lve"}),a.jsxs($e,{value:l.eleve_id,onValueChange:d=>c({...l,eleve_id:d}),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez un lve"})}),a.jsx(Te,{children:t.map(d=>a.jsxs(H,{value:d.id.toString(),children:[d.prenom," ",d.nom," - ",d.classe]},d.id))})]})]}),f&&a.jsxs("div",{className:"bg-lime-50 rounded-xl p-4 border border-lime-100",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Informations actuelles"}),a.jsxs("p",{className:"font-medium",children:["Adresse actuelle: ",a.jsx("span",{className:"text-gray-700",children:f.adresse||"Non renseigne"})]})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-lime-500"}),"Nouvelle adresse"]}),a.jsx(le,{value:l.nouvelle_adresse,onChange:d=>c({...l,nouvelle_adresse:d.target.value}),className:"mt-1 h-12 rounded-xl",placeholder:"Nouvelle adresse complte",required:!0})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-lime-500"}),"Nouvelle zone"]}),a.jsxs($e,{value:l.nouvelle_zone,onValueChange:d=>c({...l,nouvelle_zone:d}),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez la nouvelle zone"})}),a.jsx(Te,{children:r.map(d=>a.jsx(H,{value:d,children:d},d))})]})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium mb-2 flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4 text-lime-500"}),"Date de dmnagement"]}),a.jsx(le,{type:"date",value:l.date_demenagement,onChange:d=>c({...l,date_demenagement:d.target.value}),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium mb-2",children:"Raisons / Justification"}),a.jsx(ja,{value:l.raisons,onChange:d=>c({...l,raisons:d.target.value}),className:"mt-1 rounded-xl min-h-[120px]",placeholder:"Expliquez les raisons du dmnagement...",required:!0})]}),a.jsx(te,{type:"submit",disabled:n||!l.eleve_id,className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-500 hover:from-lime-600 hover:to-lime-600 text-white rounded-xl",children:n?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Envoyer la demande"})]})]})}function Iue(){return a.jsx(Ma,{children:a.jsx(Due,{})})}function Lue(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",confirm_password:"",adresse:""}),u=(d,m)=>{c(g=>({...g,[d]:m}))},f=async d=>{if(d.preventDefault(),s(""),l.mot_de_passe!==l.confirm_password){s("Les mots de passe ne correspondent pas");return}if(l.mot_de_passe.length<6){s("Le mot de passe doit contenir au moins 6 caractres");return}r(!0);try{const{confirm_password:m,adresse:g,...b}=l;b.role="tuteur";const h=await es.register(b);h.success?e(ke("TuteurLogin")):s(h.message||"Erreur lors de la cration du compte")}catch(m){console.error("Erreur lors de l'inscription:",m);const g=m.message||"";g.toLowerCase().includes("email")||g.toLowerCase().includes("dj")?s("Un compte existe dj avec cet email"):s(g||"Erreur lors de la cration du compte. Veuillez ressayer.")}r(!1)};return a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:a.jsx(ee.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5},className:"w-full max-w-lg",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 border border-amber-100",children:[a.jsxs("button",{onClick:()=>e(ke("TuteurLogin")),className:"flex items-center gap-2 text-gray-500 hover:text-amber-600 mb-6 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour  la connexion"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(zt,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Crer un compte"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Inscription Espace Tuteur"})]}),n&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm text-center",children:n}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Nom"}),a.jsx(le,{value:l.nom,onChange:d=>u("nom",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre nom",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Prnom"}),a.jsx(le,{value:l.prenom,onChange:d=>u("prenom",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre prnom",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Email"}),a.jsx(le,{type:"email",value:l.email,onChange:d=>u("email",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"exemple@email.com",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Tlphone"}),a.jsx(le,{value:l.telephone,onChange:d=>u("telephone",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"06XXXXXXXX",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(le,{value:l.adresse,onChange:d=>u("adresse",d.target.value),className:"mt-1 h-11 rounded-xl border-gray-200",placeholder:"Votre adresse"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Mot de passe"}),a.jsx("div",{className:"relative mt-1",children:a.jsx(le,{type:i?"text":"password",value:l.mot_de_passe,onChange:d=>u("mot_de_passe",d.target.value),className:"h-11 rounded-xl border-gray-200",placeholder:"",required:!0,minLength:6})})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Confirmer"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsx(le,{type:i?"text":"password",value:l.confirm_password,onChange:d=>u("confirm_password",d.target.value),className:"h-11 rounded-xl border-gray-200",placeholder:"",required:!0,minLength:6}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?a.jsx(zf,{className:"w-4 h-4"}):a.jsx(_a,{className:"w-4 h-4"})})]})]})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Le mot de passe doit contenir au moins 6 caractres"}),a.jsx(te,{type:"submit",disabled:t,className:"w-full h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg mt-6",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(hh,{className:"w-5 h-5 mr-2"}),"Crer mon compte"]})})]}),a.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500",children:["Vous avez dj un compte ?"," ",a.jsx("button",{onClick:()=>e(ke("TuteurLogin")),className:"text-amber-600 hover:text-amber-700 font-medium",children:"Se connecter"})]})]})})})}function Rue(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(null),[u,f]=N.useState({nom:"",prenom:"",email:"",telephone:"",adresse:""});N.useEffect(()=>{const g=localStorage.getItem("tuteur_session");if(!g){e(ke("TuteurLogin"));return}const b=JSON.parse(g);c(b.id),f({nom:b.nom||"",prenom:b.prenom||"",email:b.email||"",telephone:b.telephone||"",adresse:b.adresse||""})},[e]);const d=(g,b)=>{f(h=>({...h,[g]:b}))},m=async g=>{var b,h;if(g.preventDefault(),g.target){const j=g.target.querySelector('button[type="submit"]');j&&j.blur()}r(!0),o(""),s(!1);try{const j=await ri.update(l,u);if(!j.success)throw new Error(j.message||"Erreur lors de la mise  jour");const p=JSON.parse(localStorage.getItem("tuteur_session")),y={...p,...j.data||u,...p.type_id?{type_id:p.type_id}:{}};localStorage.setItem("tuteur_session",JSON.stringify(y)),s(!0),setTimeout(()=>s(!1),3e3)}catch(j){console.error("Erreur lors de la mise  jour:",j);const p=((h=(b=j.response)==null?void 0:b.data)==null?void 0:h.message)||j.message||"Erreur lors de la mise  jour du profil. Veuillez ressayer.";o(p)}finally{r(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-8",children:[a.jsxs("button",{onClick:()=>e(ke("TuteurDashboard")),className:"flex items-center gap-2 text-gray-500 hover:text-lime-600 mb-6 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:a.jsx(zt,{className:"w-10 h-10 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Mon Profil"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Modifiez vos informations personnelles"})]}),n&&a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(ct,{className:"w-5 h-5"}),"Profil mis  jour avec succs !"]}),i&&a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(qe,{className:"w-5 h-5"}),i]}),a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Nom"}),a.jsx(le,{value:u.nom,onChange:g=>d("nom",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Prnom"}),a.jsx(le,{value:u.prenom,onChange:g=>d("prenom",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Email"}),a.jsx(le,{type:"email",value:u.email,onChange:g=>d("email",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Tlphone"}),a.jsx(le,{value:u.telephone,onChange:g=>d("telephone",g.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(le,{value:u.adresse,onChange:g=>d("adresse",g.target.value),className:"mt-1 h-12 rounded-xl"})]}),a.jsx(te,{type:"submit",disabled:t,onClick:g=>{setTimeout(()=>g.currentTarget.blur(),0)},className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl font-semibold shadow-lg mt-4",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),"Enregistrer les modifications"]})})]})]})})})}const ej=(e,t)=>{const r=e==="Aller-Retour"?400:250;return t==="Annuel"?r*10:r},Bue=(e,t)=>{const r=ej(e,t);return t==="Mensuel"?`${r} DH/mois`:`${r} DH/an`},wy=e=>{try{const t=typeof e=="string"?JSON.parse(e):e;return{type_transport:(t==null?void 0:t.type_transport)||"Aller-Retour",abonnement:(t==null?void 0:t.abonnement)||"Mensuel",groupe:(t==null?void 0:t.groupe)||null,zone:(t==null?void 0:t.zone)||null,niveau:(t==null?void 0:t.niveau)||null,lien_parente:(t==null?void 0:t.lien_parente)||null,sexe:(t==null?void 0:t.sexe)||null}}catch(t){return console.warn("Erreur parsing description:",t),{type_transport:"Aller-Retour",abonnement:"Mensuel",groupe:null,zone:null,niveau:null,lien_parente:null,sexe:null}}},Fue=async()=>{const e=await fetch("http://localhost/backend/api/utilisateurs/getAdmins.php");return e.ok?await e.json():{success:!1,data:[]}};function zue(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(null),[l,c]=N.useState(1),[u,f]=N.useState([{nom:"",prenom:"",date_naissance:"",sexe:"",classe:"",niveau:"",ville:"",zone:"",adresse:""}]),[d,m]=N.useState({lien_parente:"",lien_parente_custom:"",type_transport:"",abonnement:"",groupe:""}),g=["Rabat","Sal","Temara"],[b,h]=N.useState([]),[j,p]=N.useState([]),y={Primaire:["1AP","2AP","3AP","4AP","5AP","6AP"],Collge:["1AC","2AC","3AC"],Lyce:["TC","1BAC","2BAC"]},x=A=>A?y[A]||[]:[];N.useEffect(()=>{const A=localStorage.getItem("tuteur_session");if(!A){e(ke("TuteurLogin"));return}o(JSON.parse(A)),S()},[e]),N.useEffect(()=>{b.length===0&&(console.log(" Rechargement des zones car aucune zone n'est charge"),S())},[b.length]),N.useEffect(()=>{if(d.ville){const A=b.filter(T=>{const O=T.ville&&T.ville.trim()===d.ville.trim(),L=T.actif===!0||T.actif===1||T.actif==="1";return O&&L});p(A),d.zone&&!A.some(T=>T.nom===d.zone)&&m(T=>({...T,zone:""}))}else p([]),m(A=>({...A,zone:""}))},[d.ville,b]);const S=async()=>{try{console.log(" Chargement des zones...");const A=await Ps.getAll();console.log(" Rponse brute zonesAPI.getAll():",A),console.log(" Type de rponse:",typeof A),console.log(" Est un tableau?",Array.isArray(A));let T;A&&typeof A=="object"&&A.success!==!1&&A.data?(T=A.data,console.log(" Format dtect: { success, data }")):Array.isArray(A)?(T=A,console.log(" Format dtect: Tableau direct")):A&&typeof A=="object"&&A.data&&Array.isArray(A.data)?(T=A.data,console.log(" Format dtect: { data }")):(console.warn(" Format de rponse non reconnu:",A),T=[]);const O=Array.isArray(T)?T:[];if(console.log(` Zones charges: ${O.length} zone(s)`),O.length>0){console.log(" Exemple de zone:",O[0]);const L=[...new Set(O.map(M=>M.ville).filter(Boolean))];console.log(" Villes disponibles:",L),console.log(" Rpartition par ville:",L.map(M=>({ville:M,count:O.filter(F=>F.ville===M).length})))}else console.warn(" Aucune zone charge!");return h(O),O}catch(A){console.error(" Erreur lors du chargement des zones:",A),console.error(" Dtails:",A.message,A.stack);const T=A.message||"Erreur inconnue";return T.includes("connexion")||T.includes("base de donnes")||T.includes("MySQL")?s("Impossible de charger les zones. Vrifiez que MySQL est dmarr dans XAMPP."):s("Erreur lors du chargement des zones: "+T),h([]),[]}},w=(A,T)=>{m(O=>({...O,[A]:T}))},v=(A,T,O)=>{f(L=>{const M=[...L];return M[A]={...M[A],[T]:O},T==="niveau"&&(M[A].classe=""),T==="ville"&&(M[A].zone="",b.length===0&&(console.log(" Rechargement des zones car la ville a chang et aucune zone n'est charge"),S())),M})},_=()=>{f(A=>[...A,{nom:"",prenom:"",date_naissance:"",sexe:"",classe:"",niveau:"",ville:"",zone:"",adresse:""}])},P=A=>{u.length>1&&f(T=>T.filter((O,L)=>L!==A))},C=async A=>{var T;A.preventDefault(),r(!0),s("");try{if(!d.type_transport||!d.abonnement||!d.groupe){s("Veuillez remplir tous les champs de transport"),r(!1);return}for(let F=0;F<u.length;F++){const R=u[F];if(!R.nom||!R.prenom||!R.classe||!R.ville||!R.zone||!R.adresse){s(`Veuillez remplir tous les champs obligatoires pour l'lve ${F+1}`),r(!1);return}}const O=i.type_id||i.id,L=d.lien_parente==="Autre"?d.lien_parente_custom.trim():d.lien_parente,M=[];for(const F of u){const R=await Yt.create({nom:F.nom,prenom:F.prenom,date_naissance:F.date_naissance||null,adresse:F.adresse,telephone_parent:i.telephone,email_parent:i.email,classe:F.classe,tuteur_id:O,statut:"Inactif"});if(!R||!R.success||!R.data){const I=(R==null?void 0:R.message)||"Erreur lors de la cration de l'lve";throw console.error("Erreur cration lve:",R),new Error(I)}const B=R.data,z=await cr.create({eleve_id:B.id,tuteur_id:O,type_demande:"inscription",zone_geographique:F.zone,description:JSON.stringify({type_transport:d.type_transport,abonnement:d.abonnement,groupe:d.groupe,zone:F.zone,niveau:F.niveau,lien_parente:L,sexe:F.sexe}),statut:"En attente"});if(!z||!z.success){const I=(z==null?void 0:z.message)||"Erreur lors de la cration de la demande";throw console.error("Erreur cration demande:",z),new Error(I)}M.push({eleve:B,demande:z})}try{const F=u.map(R=>`${R.prenom} ${R.nom}`).join(", ");await lt.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Inscription(s) envoye(s)",message:`L'inscription de ${u.length===1?F:`${u.length} lves (${F})`} a t envoye et est en attente de validation.`,type:"info"})}catch(F){console.warn("Erreur notification tuteur:",F)}try{const F=await Fue();if(F.success&&F.data&&F.data.length>0){const R=u.map(z=>`${z.prenom} ${z.nom}`).join(", "),B=F.data.map(z=>lt.create({destinataire_id:z.id,destinataire_type:"admin",titre:"Nouvelle(s) demande(s) d'inscription",message:`${u.length===1?"Nouvelle demande":`${u.length} nouvelles demandes`} d'inscription pour ${R} de ${i.prenom} ${i.nom}`,type:"info"}));await Promise.all(B)}}catch(F){console.warn("Impossible de rcuprer les admins pour la notification:",F)}setTimeout(()=>{e(ke("TuteurDashboard"))},500)}catch(O){console.error("Erreur lors de l'inscription:",O);const L=O.message||((T=O.response)==null?void 0:T.message)||"Erreur lors de l'envoi de l'inscription. Veuillez ressayer.";s(L),r(!1)}finally{r(!1)}},$=[{num:1,title:"Infos Tuteur",icon:ft},{num:2,title:"Infos lve",icon:hr},{num:3,title:"Transport",icon:tt}];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:[a.jsxs("button",{onClick:()=>e(ke("TuteurDashboard")),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour"]}),a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(hh,{className:"w-7 h-7"}),"Inscription ",u.length===1?"d'un lve":`de ${u.length} lves`]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsx("div",{className:"flex justify-between",children:$.map((A,T)=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:`flex items-center gap-2 cursor-pointer ${l>=A.num?"text-amber-600":"text-gray-400"}`,onClick:()=>l>A.num&&c(A.num),children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${l>=A.num?"bg-lime-500 text-white":"bg-gray-100 text-gray-400"}`,children:l>A.num?a.jsx(ct,{className:"w-5 h-5"}):a.jsx(A.icon,{className:"w-5 h-5"})}),a.jsx("span",{className:"hidden sm:block font-medium",children:A.title})]}),T<$.length-1&&a.jsx("div",{className:`w-12 sm:w-24 h-1 mx-2 rounded ${l>A.num?"bg-lime-500":"bg-gray-200"}`})]},A.num))})}),n&&a.jsx("div",{className:"mx-6 mt-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm",children:n}),a.jsxs("form",{onSubmit:C,className:"p-6",children:[l===1&&a.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 border border-lime-100",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-lime-500"}),"Informations du Tuteur"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-600",children:"Nom"}),a.jsx(le,{value:(i==null?void 0:i.nom)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-600",children:"Prnom"}),a.jsx(le,{value:(i==null?void 0:i.prenom)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-600",children:"Email"}),a.jsx(le,{value:(i==null?void 0:i.email)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-600",children:"Tlphone"}),a.jsx(le,{value:(i==null?void 0:i.telephone)||"",disabled:!0,className:"mt-1 bg-white border-gray-200"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Lien de parent avec l'lve"}),a.jsxs($e,{value:d.lien_parente,onValueChange:A=>{w("lien_parente",A),A!=="Autre"&&w("lien_parente_custom","")},children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez le lien"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Pre",children:"Pre"}),a.jsx(H,{value:"Mre",children:"Mre"}),a.jsx(H,{value:"Tuteur lgal",children:"Tuteur lgal"}),a.jsx(H,{value:"Grand-pre",children:"Grand-pre"}),a.jsx(H,{value:"Grand-mre",children:"Grand-mre"}),a.jsx(H,{value:"Oncle",children:"Oncle"}),a.jsx(H,{value:"Tante",children:"Tante"}),a.jsx(H,{value:"Frre",children:"Frre"}),a.jsx(H,{value:"Sur",children:"Sur"}),a.jsx(H,{value:"Autre",children:"Autre (prcisez)"})]})]}),d.lien_parente==="Autre"&&a.jsx(le,{type:"text",placeholder:"Prcisez le lien de parent (ex: cousin, beau-pre, etc.)",value:d.lien_parente_custom,onChange:A=>w("lien_parente_custom",A.target.value),className:"mt-2 h-12 rounded-xl",required:!0})]}),a.jsx(te,{type:"button",onClick:()=>c(2),disabled:!d.lien_parente||d.lien_parente==="Autre"&&!d.lien_parente_custom.trim(),className:"w-full h-12 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl",children:"Continuer"})]}),l===2&&a.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-lime-500"}),"Informations des lves (",u.length,")"]}),a.jsxs(te,{type:"button",onClick:_,variant:"outline",className:"rounded-xl",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Ajouter un lve"]})]}),u.map((A,T)=>{const O=x(A.niveau),L=A.ville?b.filter(M=>{const F=(M.ville||"").toString().trim(),R=(A.ville||"").toString().trim(),B=F.toLowerCase()===R.toLowerCase(),z=M.actif===!0||M.actif===1||M.actif==="1"||M.actif==="true";return B&&z}):[];if(A.ville&&(console.log(`Filtrage zones pour "${A.ville}":`),console.log(`  - Total zones charges: ${b.length}`),console.log(`  - Zones filtres: ${L.length}`),console.log("  - Zones trouves:",L.map(M=>M.nom)),L.length===0&&b.length>0)){const M=b.filter(F=>{const R=(F.ville||"").toString().trim().toLowerCase(),B=(A.ville||"").toString().trim().toLowerCase();return R===B});console.log(`  - Zones avec mme ville (sans filtre actif): ${M.length}`,M)}return a.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6 border-2 border-lime-200 relative",children:[u.length>1&&a.jsx("button",{type:"button",onClick:()=>P(T),className:"absolute top-4 right-4 w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})}),a.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-lime-500 text-white rounded-full flex items-center justify-center font-bold",children:T+1}),a.jsxs("h4",{className:"font-semibold text-gray-800",children:["lve ",T+1]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Nom *"}),a.jsx(le,{value:A.nom,onChange:M=>v(T,"nom",M.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Prnom *"}),a.jsx(le,{value:A.prenom,onChange:M=>v(T,"prenom",M.target.value),className:"mt-1 h-12 rounded-xl",required:!0})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Date de naissance"}),a.jsx(le,{type:"date",value:A.date_naissance,onChange:M=>v(T,"date_naissance",M.target.value),className:"mt-1 h-12 rounded-xl"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Sexe"}),a.jsxs($e,{value:A.sexe,onValueChange:M=>v(T,"sexe",M),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Masculin",children:"Masculin"}),a.jsx(H,{value:"Fminin",children:"Fminin"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Niveau"}),a.jsxs($e,{value:A.niveau,onValueChange:M=>v(T,"niveau",M),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Primaire",children:"Primaire"}),a.jsx(H,{value:"Collge",children:"Collge"}),a.jsx(H,{value:"Lyce",children:"Lyce"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Classe *"}),a.jsxs($e,{value:A.classe,onValueChange:M=>v(T,"classe",M),disabled:!A.niveau,children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:A.niveau?"Slectionnez":"Slectionnez d'abord le niveau"})}),a.jsx(Te,{children:O.length>0?O.map(M=>a.jsx(H,{value:M,children:M},M)):a.jsx(H,{value:"",disabled:!0,children:"Aucune classe disponible"})})]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-lime-500"}),"Ville *"]}),a.jsxs($e,{value:A.ville,onValueChange:M=>v(T,"ville",M),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez votre ville"})}),a.jsx(Te,{children:g.map(M=>a.jsx(H,{value:M,children:M},M))})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-lime-500"}),"Zone gographique *"]}),a.jsxs($e,{value:A.zone,onValueChange:M=>v(T,"zone",M),disabled:!A.ville||L.length===0,children:[a.jsx(Me,{className:`mt-1 h-12 rounded-xl ${!A.ville||L.length===0?"border-orange-300":""}`,children:a.jsx(De,{placeholder:A.ville?"Slectionnez votre zone":"Slectionnez d'abord la ville"})}),a.jsx(Te,{children:L.length>0?L.map(M=>a.jsx(H,{value:M.nom,children:M.nom},M.id||M.nom)):a.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500",children:A.ville?"Aucune zone disponible pour cette ville":"Slectionnez d'abord la ville"})})]}),A.ville&&L.length===0&&a.jsxs("div",{className:"mt-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[a.jsxs("p",{className:"text-sm text-amber-700 flex items-center gap-2 mb-2",children:[a.jsx(qe,{className:"w-4 h-4"}),"Aucune zone disponible pour ",A.ville]}),a.jsxs("div",{className:"text-xs text-amber-600 space-y-1",children:[a.jsxs("p",{children:[" Zones charges: ",b.length]}),a.jsxs("p",{children:[" Zones pour cette ville: ",b.filter(M=>{const F=(M.ville||"").toString().trim().toLowerCase(),R=(A.ville||"").toString().trim().toLowerCase();return F===R}).length]}),b.length===0&&a.jsx("p",{className:"text-red-600 font-medium mt-2",children:" Les zones ne sont pas charges. Vrifiez que MySQL est dmarr dans XAMPP."}),a.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:async()=>{console.log(" Rechargement manuel des zones"),s(""),await S()},className:"mt-2 text-xs",children:"Recharger les zones"})]})]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-lime-500"}),"Adresse *"]}),a.jsx(le,{value:A.adresse,onChange:M=>v(T,"adresse",M.target.value),className:"mt-1 h-12 rounded-xl",placeholder:"Ex: Quartier Hay Riad, Rue Mohammed V, Maison N12",required:!0}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Veuillez entrer le quartier, la rue et le nom/numro de la maison"})]})]},T)}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{type:"button",variant:"outline",onClick:()=>c(1),className:"flex-1 h-12 rounded-xl",children:"Retour"}),a.jsx(te,{type:"button",onClick:()=>c(3),disabled:u.some(A=>!A.nom||!A.prenom||!A.niveau||!A.classe||!A.ville||!A.zone||!A.adresse),className:"flex-1 h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:"Continuer"})]})]}),l===3&&a.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-5",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations de Transport"]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Type de transport"}),a.jsxs($e,{value:d.type_transport,onValueChange:A=>w("type_transport",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Aller",children:"Aller uniquement"}),a.jsx(H,{value:"Retour",children:"Retour uniquement"}),a.jsx(H,{value:"Aller-Retour",children:"Aller-Retour"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Type d'abonnement"}),a.jsxs($e,{value:d.abonnement,onValueChange:A=>w("abonnement",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Mensuel",children:"Mensuel"}),a.jsx(H,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Groupe horaire"}),a.jsxs($e,{value:d.groupe,onValueChange:A=>w("groupe",A),children:[a.jsx(Me,{className:"mt-1 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"A",children:"Groupe A (Matin: 7h30-8h00 / Soir: 17h00-17h30)"}),a.jsx(H,{value:"B",children:"Groupe B (Matin: 8h00-8h30 / Soir: 17h30-18h00)"})]})]})]}),a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 border border-lime-100",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Rcapitulatif"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Type de transport:"}),a.jsx("span",{className:"font-medium",children:d.type_transport||"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Abonnement:"}),a.jsx("span",{className:"font-medium",children:d.abonnement||"-"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Groupe:"}),a.jsx("span",{className:"font-medium",children:d.groupe||"-"})]}),a.jsxs("div",{className:"border-t border-amber-200 pt-2 mt-2 flex justify-between",children:[a.jsx("span",{className:"text-gray-800 font-semibold",children:"Montant estim:"}),a.jsx("span",{className:"font-bold text-amber-600",children:d.type_transport&&d.abonnement?Bue(d.type_transport,d.abonnement):"-"})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{type:"button",variant:"outline",onClick:()=>c(2),className:"flex-1 h-12 rounded-xl",children:"Retour"}),a.jsx(te,{type:"submit",disabled:t||!d.type_transport||!d.abonnement||!d.groupe,className:"flex-1 h-12 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-5 h-5 mr-2"}),"Envoyer ",u.length===1?"l'inscription":`les ${u.length} inscriptions`]})})]})]})]})]})})})}function Vue(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState(null),[g,b]=N.useState("");N.useEffect(()=>{const y=localStorage.getItem("tuteur_session");if(!y){e(ke("TuteurLogin"));return}const x=JSON.parse(y);m(x);const w=new URLSearchParams(window.location.search).get("demandeId");if(w){const v=x.type_id||x.id;h(w,v)}},[e]);const h=async(y,x)=>{try{const S=await cr.getByTuteur(x),v=((S==null?void 0:S.data)||[]).find(_=>_.id===parseInt(y));if(!v){s("Demande non trouve");return}if(v.statut!=="En attente de paiement"&&v.statut!=="Valide"){s("Cette demande n'est pas en attente de paiement");return}if(c(v),v.eleve_id)try{const _=await Yt.getById(v.eleve_id);f(_)}catch(_){console.warn("Impossible de charger l'lve:",_)}}catch(S){console.error("Erreur lors du chargement de la demande:",S),s("Impossible de charger les informations de la demande")}},j=()=>{if(l!=null&&l.montant_facture)return parseFloat(l.montant_facture);if(l){const y=wy(l.description);return ej(y.type_transport,y.abonnement)}return 0},p=async y=>{if(y.preventDefault(),s(""),!g||g.length<4){s("Veuillez saisir le code de vrification");return}if(!l){s("Demande non trouve");return}r(!0);try{const x=await cr.verifierCode(l.id,g);if(!x.success){s(x.message||"Code de vrification incorrect"),r(!1);return}o(!0),setTimeout(()=>{e(ke("TuteurDashboard"))},2e3)}catch(x){console.error("Erreur lors de la vrification:",x),s(x.message||"Erreur lors de la vrification du code. Veuillez ressayer.")}r(!1)};return l?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:[a.jsxs("button",{onClick:()=>e(ke("TuteurDashboard")),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour"]}),a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Ar,{className:"w-7 h-7"}),"Paiement"]})]}),i?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ee.div,{initial:{scale:0},animate:{scale:1},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(ct,{className:"w-10 h-10 text-green-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Paiement russi !"}),a.jsx("p",{className:"text-gray-500",children:"Redirection vers le tableau de bord..."})]}):a.jsxs("div",{className:"p-6",children:[(()=>{try{const y=typeof l.description=="string"?JSON.parse(l.description):l.description,x=(y==null?void 0:y.taux_reduction)??0,S=(y==null?void 0:y.montant_reduction)??0,w=(y==null?void 0:y.nombre_eleves_total)??0;if(x>0&&S>0){const v=Math.round(x*100);return a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-50 rounded-xl p-4 mb-6 border border-green-200 flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(ZD,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-green-800 mb-1",children:v===10?" Flicitations ! Vous avez bnfici d'une rduction de 10%":v===20?" Flicitations ! Vous avez bnfici d'une rduction de 20%":"Rduction familiale applique !"}),a.jsxs("div",{className:"text-sm text-green-700",children:[w," ",w===1?"lve inscrit":"lves inscrits","  -",v,"% sur ce paiement"]})]}),a.jsxs("div",{className:"flex-shrink-0 text-right",children:[a.jsx("div",{className:"text-xs text-green-600 mb-1",children:"conomie totale"}),a.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[S.toFixed(2)," DH"]})]})]})}return null}catch{return null}})(),a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-6 mb-6 border border-lime-100",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-lime-500"}),"Facture"]}),a.jsxs("div",{className:"space-y-3 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"lve:"}),a.jsxs("span",{className:"font-medium",children:[l.eleve_prenom," ",l.eleve_nom]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Classe:"}),a.jsx("span",{className:"font-medium",children:l.eleve_classe||"Non spcifie"})]}),l.zone_geographique&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Zone:"}),a.jsx("span",{className:"font-medium",children:l.zone_geographique})]}),(()=>{const y=typeof l.description=="string"?JSON.parse(l.description):l.description;return a.jsxs(a.Fragment,{children:[(y==null?void 0:y.type_transport)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Type de transport:"}),a.jsx("span",{className:"font-medium",children:y.type_transport})]}),(y==null?void 0:y.abonnement)&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Abonnement:"}),a.jsx("span",{className:"font-medium",children:y.abonnement})]})]})})(),(()=>{try{const y=typeof l.description=="string"?JSON.parse(l.description):l.description,x=y==null?void 0:y.montant_avant_reduction,S=(y==null?void 0:y.montant_reduction)??0,w=(y==null?void 0:y.taux_reduction)??0;return w>0&&x?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"border-t border-amber-200 pt-3",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600",children:"Montant initial:"}),a.jsxs("span",{className:"font-medium text-gray-700",children:[parseFloat(x).toFixed(2)," DH"]})]}),a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsxs("span",{className:"text-green-600 font-medium",children:["Rduction (",Math.round(w*100),"%):"]}),a.jsxs("span",{className:"font-medium text-green-600",children:["-",parseFloat(S).toFixed(2)," DH"]})]})]}),a.jsxs("div",{className:"border-t border-amber-200 pt-3 flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[j().toFixed(2)," DH"]})]})]}):a.jsxs("div",{className:"border-t border-amber-200 pt-3 flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[j().toFixed(2)," DH"]})]})}catch{return a.jsxs("div",{className:"border-t border-amber-200 pt-3 flex justify-between",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Montant total:"}),a.jsxs("span",{className:"text-2xl font-bold text-amber-600",children:[j().toFixed(2)," DH"]})]})}})()]})]}),a.jsx("div",{className:"bg-blue-50 rounded-2xl p-4 mb-6 border border-blue-100",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Instructions:"})," Veuillez consulter l'cole pour effectuer le paiement et rcuprer le code de vrification  saisir ci-dessous."]})}),n&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(qe,{className:"w-5 h-5"}),n]}),a.jsxs("form",{onSubmit:p,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Code de validation (fourni par l'cole)"}),a.jsx(le,{value:g,onChange:y=>b(y.target.value),placeholder:"Entrez le code de validation",className:"mt-1 h-12 rounded-xl text-center text-2xl tracking-widest font-mono",required:!0}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ce code vous a t communiqu par l'administration de l'cole"})]}),a.jsx(te,{type:"submit",disabled:t,className:"w-full h-14 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white rounded-xl font-semibold text-lg shadow-lg",children:t?a.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Ar,{className:"w-5 h-5 mr-2"}),"Confirmer le paiement"]})})]})]})]})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})})}function Uue(){const e=at(),[t,r]=N.useState(null),[n,s]=N.useState(null),[i,o]=N.useState(null),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState([]),[g,b]=N.useState([]),[h,j]=N.useState(!0),[p,y]=N.useState(null),[x,S]=N.useState("semaine"),[w,v]=N.useState(je(new Date,"yyyy-MM-dd"));N.useEffect(()=>{try{console.log("TuteurEleveDetails - Composant mont"),console.log("URL:",window.location.href),console.log("Search:",window.location.search)}catch(O){console.error("Erreur dans useEffect initial:",O),y("Erreur lors de l'initialisation: "+O.message),j(!1)}},[]),N.useEffect(()=>{const O=setTimeout(()=>{h&&!t&&!p&&(console.warn("Timeout: La page prend trop de temps  charger"),y("Le chargement prend plus de temps que prvu. Vrifiez votre connexion."),j(!1))},1e4);return()=>clearTimeout(O)},[h,t,p]);const _=N.useCallback(async O=>{if(!O){console.error("Aucun ID d'lve fourni"),y("Aucun ID d'lve fourni dans l'URL"),j(!1);return}try{j(!0),y(null),console.log("Chargement des donnes pour l'lve ID:",O);let L;try{L=await Yt.getById(O)}catch(F){throw console.error("Erreur API lors du chargement de l'lve:",F),new Error("Impossible de charger les donnes de l'lve. Vrifiez votre connexion.")}let M;if(L&&L.success===!1)throw new Error(L.message||"lve non trouv");if(L&&L.data)M=L.data;else if(L&&L.id)M=L;else if(L)M=L;else throw new Error("Rponse invalide du serveur");if(console.log("Rponse lve:",L),console.log("Donnes lve:",M),!M||!M.id&&M.id!==0){console.error("lve non trouv ou donnes invalides:",L),y("lve non trouv ou donnes invalides"),j(!1);return}if(r(M),M){try{const F=await jn.getByEleve(O),R=(F==null?void 0:F.data)||F||[],B=Array.isArray(R)?R.find(z=>z.statut==="Active"||z.statut==="active"):R&&R.statut==="Active"?R:null;if(B&&B.bus_id)try{const z=await Pr.getById(B.bus_id),I=(z==null?void 0:z.data)||z;if(I&&I.id){if(s(I),I.trajet_id)try{const X=await ha.getById(I.trajet_id),re=(X==null?void 0:X.data)||X;re&&o(re)}catch(X){console.warn("Erreur lors du chargement du trajet:",X)}if(I.chauffeur_id)try{const X=await an.getById(I.chauffeur_id),re=(X==null?void 0:X.data)||X;re&&c(re)}catch(X){console.warn("Erreur lors du chargement du chauffeur:",X)}if(I.responsable_id)try{const X=await Fa.getById(I.responsable_id),re=(X==null?void 0:X.data)||X;re&&f(re)}catch(X){console.warn("Erreur lors du chargement du responsable:",X)}}}catch(z){console.warn("Erreur lors du chargement du bus:",z)}}catch(F){console.warn("Erreur lors du chargement des inscriptions:",F)}try{const F=new Date().toISOString().split("T")[0],R=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],B=await ua.getByEleve(O,R,F),z=(B==null?void 0:B.data)||B||[],I=Array.isArray(z)?z.sort((X,re)=>new Date(re.date||0)-new Date(X.date||0)):[];b(I),m(I.slice(0,7))}catch(F){console.warn("Prsences non disponibles:",F),m([]),b([])}}}catch(L){console.error("Erreur lors du chargement:",L);const M=L.message||"Erreur inconnue lors du chargement des donnes";y(M),t||j(!1)}finally{j(!1)}},[]);if(N.useEffect(()=>{try{if(!localStorage.getItem("tuteur_session")){e(ke("TuteurLogin"));return}const L=new URLSearchParams(window.location.search),M=L.get("eleveId")||L.get("eleveld")||L.get("id");console.log("TuteurEleveDetails - Paramtres URL:",{eleveId:M,search:window.location.search,eleveIdParam:L.get("eleveId"),eleveldParam:L.get("eleveld"),idParam:L.get("id"),allParams:Object.fromEntries(L.entries()),fullUrl:window.location.href}),M?(console.log("TuteurEleveDetails - Appel de loadData avec eleveId:",M),_(M).catch(F=>{console.error("TuteurEleveDetails - Erreur dans loadData:",F),y(F.message||"Erreur lors du chargement des donnes"),j(!1)})):(console.error("TuteurEleveDetails - Aucun ID d'lve trouv dans l'URL"),y("Aucun ID d'lve fourni dans l'URL. Veuillez slectionner un lve depuis le tableau de bord."),j(!1))}catch(O){console.error("TuteurEleveDetails - Erreur dans useEffect:",O),y("Erreur lors de l'initialisation: "+(O.message||"Erreur inconnue")),j(!1)}},[e,_]),h)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Chargement des dtails de l'lve..."})]})})});if(p&&!t)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(qe,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur"}),a.jsx("p",{className:"text-red-600 mb-4",children:p}),a.jsx(te,{onClick:()=>e(ke("TuteurDashboard")),className:"bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-6 py-2",children:"Retour au tableau de bord"})]})})});if(!t)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ft,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"lve non trouv"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Impossible de charger les informations de l'lve. Vrifiez que l'ID est correct."}),a.jsx(te,{onClick:()=>e(ke("TuteurDashboard")),className:"bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-6 py-2",children:"Retour au tableau de bord"})]})})});const P=O=>({Actif:"bg-green-100 text-green-700",Inactif:"bg-amber-100 text-amber-700",Suspendu:"bg-red-100 text-red-700"})[O]||"bg-gray-100 text-gray-700",C=N.useMemo(()=>{if(!g||g.length===0)return[];const O=new Date;let L,M;switch(x){case"jour":const F=new Date(w);return L=Jf(F),M=qv(F),g.filter(R=>{const B=new Date(R.date);return B>=L&&B<=M});case"semaine":return L=Xs(O,6),M=O,g.filter(R=>{const B=new Date(R.date);return B>=L&&B<=M}).slice(0,7);case"mois":return L=Xs(O,29),M=O,g.filter(R=>{const B=new Date(R.date);return B>=L&&B<=M});default:return g.slice(0,7)}},[g,x,w]),$=N.useMemo(()=>{if(!C||C.length===0)return[];const O={};return C.forEach(L=>{const M=je(new Date(L.date),"dd/MM",{locale:Xt});O[M]||(O[M]={date:M,absents:0,presents:0}),L.present_matin?O[M].presents++:O[M].absents++,L.present_soir?O[M].presents++:O[M].absents++}),Object.values(O).sort((L,M)=>{try{const[F,R]=L.date.split("/"),[B,z]=M.date.split("/"),I=new Date().getFullYear(),X=new Date(I,parseInt(R)-1,parseInt(F)),re=new Date(I,parseInt(z)-1,parseInt(B));return X-re}catch(F){return console.error("Erreur lors du tri des dates:",F),0}})},[C]);N.useEffect(()=>{t&&t.id&&m(C)},[x,w,C,t]);const T=(O=>{const L=je(new Date(O),"yyyy-MM-dd"),M=g.find(F=>je(new Date(F.date),"yyyy-MM-dd")===L);return M?{absent:!M.present_matin||!M.present_soir,matin:!M.present_matin,soir:!M.present_soir}:{absent:!1,matin:!1,soir:!1}})(w);if(!t&&!h)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(qe,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de chargement"}),a.jsx("p",{className:"text-red-600 mb-4",children:p})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(ft,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Aucune donne disponible"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"Impossible de charger les informations de l'lve."})]}),a.jsx(te,{onClick:()=>e(ke("TuteurDashboard")),className:"bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-6 py-2",children:"Retour au tableau de bord"})]})})});if(!t)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Chargement des donnes..."})]})})});if(!t)return a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(qe,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur"}),a.jsx("p",{className:"text-red-600 mb-4",children:p||"Impossible de charger les donnes de l'lve."}),a.jsx(te,{onClick:()=>e(ke("TuteurDashboard")),className:"bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-6 py-2",children:"Retour au tableau de bord"})]})})});try{return a.jsx(Ma,{title:`Dtails - ${(t==null?void 0:t.prenom)||""} ${(t==null?void 0:t.nom)||""}`,children:a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("button",{onClick:()=>e(ke("TuteurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-lime-600 mb-6 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),p&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:p}),a.jsx("button",{onClick:()=>y(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsx("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:a.jsx("div",{className:"p-6 bg-gradient-to-r from-lime-500 to-lime-600",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/20 flex items-center justify-center",children:a.jsx(hr,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{className:"flex-1 text-white",children:[a.jsxs("h1",{className:"text-2xl font-bold",children:[(t==null?void 0:t.prenom)||""," ",(t==null?void 0:t.nom)||""]}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("p",{className:"text-lg opacity-90",children:(t==null?void 0:t.classe)||"N/A"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${P((t==null?void 0:t.statut)||"Inactif")}`,children:(t==null?void 0:t.statut)||"Inactif"})]})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-lime-500"}),"Informations personnelles"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Classe"}),a.jsx("span",{className:"font-medium text-gray-800",children:(t==null?void 0:t.classe)||"N/A"})]}),(t==null?void 0:t.date_naissance)&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Date de naissance"}),a.jsx("span",{className:"font-medium text-gray-800",children:je(new Date(t.date_naissance),"dd/MM/yyyy",{locale:Xt})})]}),(t==null?void 0:t.adresse)&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Adresse"}),a.jsx("span",{className:"font-medium text-gray-800 text-right max-w-[200px]",children:t.adresse})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-lime-500"}),"Informations de transport"]}),n&&(t==null?void 0:t.statut)==="Actif"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"bg-lime-50 rounded-2xl p-4 border border-lime-100",children:[a.jsx("p",{className:"text-sm text-lime-600 font-medium mb-1",children:"Bus assign"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.numero?n.numero.toString().replace(/^#\s*/,""):"N/A"}),n.immatriculation&&a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:n.immatriculation})]}),n.marque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Marque/Modle"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.marque," ",n.modele||""]})]}),n.capacite&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Capacit"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[n.capacite," places"]})]}),n.plaque&&a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:"Plaque d'immatriculation"}),a.jsx("span",{className:"font-medium text-gray-800",children:n.plaque})]}),l&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Chauffeur"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Nom"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[l.prenom," ",l.nom]})]}),l.telephone&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone"}),a.jsx("span",{className:"font-medium text-gray-800",children:l.telephone})]})]})]}),u&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Responsable bus"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Nom"}),a.jsxs("span",{className:"font-medium text-gray-800",children:[u.prenom," ",u.nom]})]}),u.telephone&&a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-gray-600",children:"Tlphone"}),a.jsx("span",{className:"font-medium text-gray-800",children:u.telephone})]})]})]}),i&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[a.jsxs("div",{className:"flex justify-between py-2 mb-3",children:[a.jsx("span",{className:"text-gray-600",children:"Trajet"}),a.jsx("span",{className:"font-medium text-gray-800",children:i.nom||"N/A"})]}),i.heure_depart_matin_a&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Horaires:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Matin"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_matin_a," - ",i.heure_arrivee_matin_a]})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-3",children:[a.jsx("p",{className:"text-xs text-orange-600 mb-1",children:"Soir"}),a.jsxs("p",{className:"font-semibold text-gray-800 text-sm",children:[i.heure_depart_soir_a," - ",i.heure_arrivee_soir_a]})]})]})]})]})]}):a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-medium",children:"Aucun bus affect"}),a.jsx("p",{className:"text-sm mt-1",children:"L'affectation sera faite aprs validation"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(el,{className:"w-5 h-5 text-lime-500"}),"Historique des absences"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs($e,{value:x,onValueChange:S,children:[a.jsxs(Me,{className:"w-40 rounded-xl",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),a.jsx(De,{})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"jour",children:"Jour"}),a.jsx(H,{value:"semaine",children:"Semaine"}),a.jsx(H,{value:"mois",children:"Mois"})]})]}),x==="jour"&&a.jsx(le,{type:"date",value:w,onChange:O=>v(O.target.value),className:"w-40 rounded-xl"})]})]}),x==="jour"&&a.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-xl border-2 border-lime-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-1",children:["tat pour le ",je(new Date(w),"EEEE d MMMM yyyy",{locale:Xt})]}),T.absent?a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[a.jsx("span",{className:"text-red-600 font-semibold",children:"Absent"}),T.matin&&a.jsx("span",{className:"text-sm text-red-600",children:"Matin"}),T.soir&&a.jsx("span",{className:"text-sm text-red-600",children:"Soir"})]}):a.jsx("span",{className:"text-green-600 font-semibold",children:"Prsent (matin et soir)"})]}),a.jsx("div",{className:`px-4 py-2 rounded-lg font-semibold ${T.absent?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:T.absent?"Absent":"Prsent"})]})}),$.length>0?a.jsx("div",{className:"mb-6",children:a.jsx(Eo,{width:"100%",height:300,children:a.jsxs(zc,{data:$,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Us,{dataKey:"date",tick:{fontSize:12},angle:-45,textAnchor:"end",height:80}),a.jsx(Ws,{}),a.jsx(qr,{}),a.jsx(wa,{}),a.jsx(on,{dataKey:"absents",fill:"#EF4444",name:"Absences"}),a.jsx(on,{dataKey:"presents",fill:"#10B981",name:"Prsences"})]})})}):a.jsxs("div",{className:"text-center py-8 text-gray-400 mb-6",children:[a.jsx(el,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune donne de prsence disponible pour cette priode"})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-md font-semibold text-gray-700 mb-4",children:["Dtail des prsences ",x==="jour"?"du jour":x==="semaine"?"de la semaine":"du mois"]}),d.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(Gs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun historique de prsence"})]}):a.jsx("div",{className:"space-y-2",children:d.map((O,L)=>{const M=new Date(O.date),F=je(M,"yyyy-MM-dd")===je(new Date,"yyyy-MM-dd"),R=x==="jour"&&je(M,"yyyy-MM-dd")===w;return a.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl transition-colors ${R?"bg-lime-100 border-2 border-lime-300":"bg-gray-50 hover:bg-gray-100"}`,children:[a.jsxs("span",{className:"font-medium text-gray-700",children:[je(M,"EEEE d MMMM",{locale:Xt}),F&&a.jsx("span",{className:"ml-2 text-xs text-lime-600",children:"(Aujourd'hui)"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Matin:"}),a.jsx("span",{className:`text-sm font-medium ${O.present_matin?"text-green-600":"text-red-600"}`,children:O.present_matin?"Prsent":"Absent"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Soir:"}),a.jsx("span",{className:`text-sm font-medium ${O.present_soir?"text-green-600":"text-red-600"}`,children:O.present_soir?"Prsent":"Absent"})]})]})]},O.id||L)})})]})]})]})})})}catch(O){return console.error("Erreur lors du rendu:",O),a.jsx(Ma,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(qe,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Erreur de rendu"}),a.jsx("p",{className:"text-red-600 mb-4",children:O.message||"Une erreur est survenue lors de l'affichage de la page."}),a.jsx(te,{onClick:()=>e(ke("TuteurDashboard")),className:"bg-lime-500 hover:bg-lime-600 text-white rounded-xl px-6 py-2",children:"Retour au tableau de bord"})]})})})}}const Ig=({className:e="",children:t,...r})=>a.jsx("div",{className:`rounded-2xl bg-white shadow-lg border border-gray-100 ${e}`,...r,children:t});function Wue(){const e=at(),[t,r]=N.useState(!0),[n,s]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState(""),[u,f]=N.useState(null),[d,m]=N.useState({show:!1,demandeId:null}),[g,b]=N.useState({show:!1,message:"",type:"info"}),[h,j]=N.useState({}),p={Primaire:["1AP","2AP","3AP","4AP","5AP","6AP"],Collge:["1AC","2AC","3AC"],Lyce:["TC","1BAC","2BAC"]},y=h.niveau?p[h.niveau]||[]:[];N.useEffect(()=>{const A=localStorage.getItem("tuteur_session");if(!A){e(ke("TuteurLogin"));return}const T=JSON.parse(A);o(T);const O=T.type_id||T.id;x(O)},[e]),N.useEffect(()=>{if(n.length>0&&!u){const T=new URLSearchParams(window.location.search).get("demandeId");if(T){const O=n.find(L=>L.id===parseInt(T));O&&(console.log("Ouverture automatique du formulaire d'dition pour la demande:",T),v(O),window.history.replaceState({},"",window.location.pathname))}}},[n,u]);const x=async A=>{try{r(!0);const T=await cr.getByTuteur(A);if(T.success){const O=(T.data||[]).filter(L=>L.type_demande==="inscription");s(O)}else c("Erreur lors du chargement des demandes")}catch(T){console.error("Erreur:",T),c("Erreur lors du chargement des demandes")}finally{r(!1)}},S=A=>{m({show:!0,demandeId:A})},w=async()=>{if(d.demandeId)try{const A=await cr.delete(d.demandeId);A.success?(await x(i.id),await lt.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Demande supprime",message:"Votre demande a t supprime avec succs.",type:"info"}),m({show:!1,demandeId:null})):(b({show:!0,message:A.message||"Erreur lors de la suppression",type:"error"}),m({show:!1,demandeId:null}))}catch(A){console.error("Erreur:",A),b({show:!0,message:"Erreur lors de la suppression de la demande",type:"error"}),m({show:!1,demandeId:null})}},v=async A=>{f(A.id);let T={};if(A.eleve_id)try{const L=await Yt.getById(A.eleve_id);(L!=null&&L.success&&L.data||L!=null&&L.data)&&(T=L.data)}catch(L){console.error("Erreur lors du chargement de l'lve:",L)}let O={};if(A.description)try{O=typeof A.description=="string"?JSON.parse(A.description):A.description}catch(L){console.error("Erreur parsing description:",L)}j({nom:A.eleve_nom||T.nom||"",prenom:A.eleve_prenom||T.prenom||"",date_naissance:A.eleve_date_naissance||T.date_naissance||"",sexe:O.sexe||T.sexe||"",classe:A.eleve_classe||T.classe||"",niveau:O.niveau||"",adresse:T.adresse||"",zone_geographique:A.zone_geographique||O.zone||"",type_transport:O.type_transport||"",abonnement:O.abonnement||"",groupe:O.groupe||""})},_=async(A,T)=>{T&&setTimeout(()=>T.blur(),0);try{const O=n.find(F=>F.id===A);if(!O||!O.eleve_id){b({show:!0,message:"Erreur: lve introuvable",type:"error"});return}await Yt.update(O.eleve_id,{nom:h.nom,prenom:h.prenom,date_naissance:h.date_naissance||null,classe:h.classe,adresse:h.adresse});const L={type_transport:h.type_transport,abonnement:h.abonnement,groupe:h.groupe,zone:h.zone_geographique,niveau:h.niveau,sexe:h.sexe},M=await cr.update(A,{zone_geographique:h.zone_geographique,description:JSON.stringify(L)});M.success?(f(null),await x(i.type_id||i.id),await lt.create({destinataire_id:i.id,destinataire_type:"tuteur",titre:"Demande modifie",message:"Votre demande a t modifie avec succs.",type:"info"})):b({show:!0,message:M.message||"Erreur lors de la modification",type:"error"})}catch(O){console.error("Erreur:",O),b({show:!0,message:"Erreur lors de la modification de la demande: "+(O.message||"Erreur inconnue"),type:"error"})}},P=A=>{switch(A){case"En attente":return a.jsx(Gs,{className:"w-5 h-5 text-lime-500"});case"En cours de traitement":return a.jsx(ya,{className:"w-5 h-5 text-blue-500"});case"En attente de paiement":return a.jsx(Ar,{className:"w-5 h-5 text-orange-500"});case"Valide":case"Inscrit":return a.jsx(ct,{className:"w-5 h-5 text-green-500"});case"Refuse":return a.jsx(Dr,{className:"w-5 h-5 text-red-500"});default:return a.jsx(Gs,{className:"w-5 h-5 text-gray-500"})}},C=A=>{switch(A){case"En attente":return"bg-lime-50 border-lime-200 text-lime-800";case"En cours de traitement":return"bg-blue-50 border-blue-200 text-blue-800";case"En attente de paiement":return"bg-orange-50 border-orange-200 text-orange-800";case"Valide":case"Inscrit":return"bg-green-50 border-green-200 text-green-800";case"Refuse":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},$=A=>A?new Date(A).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return t?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:[a.jsx("div",{className:"max-w-6xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("button",{onClick:()=>e(ke("TuteurDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[a.jsx(ya,{className:"w-8 h-8 text-lime-500"}),"Mes Demandes d'Inscription"]}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Suivez l'tat de vos demandes d'inscription et grez vos demandes en attente"})]}),l&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl text-red-600 flex items-center gap-2",children:[a.jsx(qe,{className:"w-5 h-5"}),l]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:["En attente","En cours de traitement","En attente de paiement","Inscrit","Refuse"].map(A=>{const T=n.filter(O=>O.statut===A).length;return a.jsxs(Ig,{className:"p-4 text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-800",children:T}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:A})]},A)})}),n.length===0?a.jsxs(Ig,{className:"p-12 text-center",children:[a.jsx(ya,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucune demande"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Vous n'avez pas encore de demandes d'inscription."}),a.jsx(te,{onClick:()=>e(ke("TuteurInscription")),className:"bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white",children:"Crer une nouvelle demande"})]}):a.jsx("div",{className:"space-y-4",children:n.map(A=>a.jsxs(Ig,{className:"p-6 hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[P(A.statut),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:[A.eleve_prenom," ",A.eleve_nom]}),a.jsx("p",{className:"text-sm text-gray-500",children:A.type_demande==="inscription"?"Demande d'inscription":A.type_demande})]})]}),a.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium mb-4 ${C(A.statut)}`,children:[P(A.statut),A.statut]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[A.zone_geographique&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Rt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Zone: ",A.zone_geographique]})]}),A.eleve_classe&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(ft,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Classe: ",A.eleve_classe]})]}),A.bus_numero&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[a.jsx(tt,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm font-medium",children:["Bus: ",A.bus_numero]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Jr,{className:"w-4 h-4"}),a.jsxs("span",{className:"text-sm",children:["Cre le: ",$(A.date_creation)]})]})]}),A.type_transport&&a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-4",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Transport:"})," ",A.type_transport," |",a.jsx("span",{className:"font-medium ml-2",children:"Abonnement:"})," ",A.abonnement," |",a.jsx("span",{className:"font-medium ml-2",children:"Groupe:"})," ",A.groupe]})}),(A.statut==="En attente"||A.statut==="En cours de traitement")&&a.jsxs("div",{className:"flex gap-2 mt-4",children:[a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>v(A),className:"flex items-center gap-2",children:[a.jsx(Vn,{className:"w-4 h-4"}),"Modifier"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:T=>{T.currentTarget.blur(),S(A.id)},className:"flex items-center gap-2 text-red-600 hover:text-red-700 hover:border-red-300",children:[a.jsx(Ut,{className:"w-4 h-4"}),"Supprimer"]})]}),A.statut==="En attente de paiement"&&a.jsxs(te,{onClick:()=>e(ke(`TuteurPaiement?demandeId=${A.id}`)),className:"mt-4 bg-gradient-to-r from-lime-500 to-lime-600 hover:from-lime-600 hover:to-lime-700 text-white",children:[a.jsx(Ar,{className:"w-4 h-4 mr-2"}),"Payer"]})]})}),u===A.id&&a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Modifier les informations"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Nom"}),a.jsx(le,{value:h.nom||"",onChange:T=>j({...h,nom:T.target.value}),className:"rounded-xl",placeholder:"Nom de l'lve"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Prnom"}),a.jsx(le,{value:h.prenom||"",onChange:T=>j({...h,prenom:T.target.value}),className:"rounded-xl",placeholder:"Prnom de l'lve"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Date de naissance"}),a.jsx(le,{type:"date",value:h.date_naissance||"",onChange:T=>j({...h,date_naissance:T.target.value}),className:"rounded-xl"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Sexe"}),a.jsxs($e,{value:h.sexe||"",onValueChange:T=>j({...h,sexe:T}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Masculin",children:"Masculin"}),a.jsx(H,{value:"Fminin",children:"Fminin"})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Niveau"}),a.jsxs($e,{value:h.niveau||"",onValueChange:T=>{j({...h,niveau:T,classe:""})},children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Primaire",children:"Primaire"}),a.jsx(H,{value:"Collge",children:"Collge"}),a.jsx(H,{value:"Lyce",children:"Lyce"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Classe"}),a.jsxs($e,{value:h.classe||"",onValueChange:T=>j({...h,classe:T}),disabled:!h.niveau,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:h.niveau?"Slectionnez":"Slectionnez d'abord le niveau"})}),a.jsx(Te,{children:y.length>0?y.map(T=>a.jsx(H,{value:T,children:T},T)):a.jsx(H,{value:"",disabled:!0,children:"Aucune classe disponible"})})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Adresse"}),a.jsx(le,{value:h.adresse||"",onChange:T=>j({...h,adresse:T.target.value}),className:"rounded-xl",placeholder:"Adresse complte"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Zone gographique"}),a.jsxs($e,{value:h.zone_geographique||"",onValueChange:T=>j({...h,zone_geographique:T}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez une zone"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Medina",children:"Medina"}),a.jsx(H,{value:"Hay Sina",children:"Hay Sina"}),a.jsx(H,{value:"Hay El Fath",children:"Hay El Fath"}),a.jsx(H,{value:"Souissi",children:"Souissi"}),a.jsx(H,{value:"Akkari",children:"Akkari"}),a.jsx(H,{value:"Manal",children:"Manal"}),a.jsx(H,{value:"Agdal",children:"Agdal"}),a.jsx(H,{value:"Nahda-Takkadoum",children:"Nahda-Takkadoum"}),a.jsx(H,{value:"Temara",children:"Temara"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Type de transport"}),a.jsxs($e,{value:h.type_transport||"",onValueChange:T=>j({...h,type_transport:T}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Aller",children:"Aller uniquement"}),a.jsx(H,{value:"Retour",children:"Retour uniquement"}),a.jsx(H,{value:"Aller-Retour",children:"Aller-Retour"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Type d'abonnement"}),a.jsxs($e,{value:h.abonnement||"",onValueChange:T=>j({...h,abonnement:T}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Mensuel",children:"Mensuel"}),a.jsx(H,{value:"Annuel",children:"Annuel"})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Groupe horaire"}),a.jsxs($e,{value:h.groupe||"",onValueChange:T=>j({...h,groupe:T}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Slectionnez"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"A",children:"Groupe A"}),a.jsx(H,{value:"B",children:"Groupe B"})]})]})]})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx(te,{onClick:T=>_(A.id,T.currentTarget),className:"flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl",children:"Enregistrer"}),a.jsx(te,{variant:"outline",onClick:()=>f(null),className:"flex-1 rounded-xl",children:"Annuler"})]})]})]})]},A.id))})]})}),a.jsx(zr,{isOpen:d.show,title:"Supprimer la demande",message:"tes-vous sr de vouloir supprimer cette demande ? Cette action est irrversible.",onConfirm:w,onCancel:()=>m({show:!1,demandeId:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(vp,{isOpen:g.show,message:g.message,type:g.type,onClose:()=>b({show:!1,message:"",type:"info"})})]})}function Hue(){const e=at(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all"),[u,f]=N.useState("all"),[d,m]=N.useState(!1);N.useEffect(()=>{const v=localStorage.getItem("tuteur_session");if(!v){e(ke("TuteurLogin"));return}const _=JSON.parse(v);r(_),g(_.id)},[e]);const g=async v=>{o(!0);try{const _=await lt.getByUser(v,"tuteur"),C=(Array.isArray(_==null?void 0:_.data)?_.data:Array.isArray(_)?_:[]).sort(($,A)=>{const T=new Date($.date||$.date_creation||0);return new Date(A.date||A.date_creation||0)-T});s(C)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{o(!1)}},b=async v=>{try{await lt.marquerLue(v),s(_=>_.map(P=>P.id===v?{...P,lue:!0}:P))}catch(_){console.error("Erreur lors de la mise  jour:",_)}},h=async v=>{try{await lt.delete(v),s(_=>_.filter(P=>P.id!==v))}catch(_){console.error("Erreur lors de la suppression:",_)}},j=async()=>{if(t)try{await lt.deleteAll(t.id,"tuteur"),s([])}catch(v){console.error("Erreur lors de la suppression de toutes les notifications:",v)}},p=v=>{if(!v)return"";const _=new Date(v),C=new Date-_,$=Math.floor(C/6e4),A=Math.floor(C/36e5),T=Math.floor(C/864e5);return $<1?" l'instant":$<60?`Il y a ${$} min`:A<24?`Il y a ${A}h`:T<7?`Il y a ${T}j`:_.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},y=(v,_)=>{const P=(_==null?void 0:_.toLowerCase())||"",C=(v==null?void 0:v.toLowerCase())||"";return C==="alerte"||P.includes("accident")||P.includes("urgent")?a.jsx(qe,{className:"w-5 h-5 text-red-500"}):C==="warning"||P.includes("attention")||P.includes("avertissement")?a.jsx(Es,{className:"w-5 h-5 text-orange-500"}):P.includes("message")||P.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):P.includes("rapport")||P.includes("rapports")?a.jsx(ya,{className:"w-5 h-5 text-purple-500"}):C==="success"||P.includes("confirm")||P.includes("valid")?a.jsx(ct,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},x=(v,_)=>{const P=(v==null?void 0:v.toLowerCase())||"",C=(_==null?void 0:_.toLowerCase())||"";return P==="alerte"||C.includes("accident")||C.includes("urgent")?"bg-red-50 border-red-200":P==="warning"||C.includes("attention")?"bg-orange-50 border-orange-200":P==="success"||C.includes("confirm")||C.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},S=n.filter(v=>{var _;return!(l==="unread"&&v.lue||l==="read"&&!v.lue||u!=="all"&&((_=v.type)==null?void 0:_.toLowerCase())!==u.toLowerCase())}),w=n.filter(v=>!v.lue).length;return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-lime-50 via-white to-lime-50",children:a.jsx("div",{className:"w-12 h-12 border-4 border-lime-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-lime-50 via-white to-lime-50 p-4 md:p-8",children:[a.jsxs("div",{className:"max-w-5xl mx-auto",children:[a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Ff,{to:ke("TuteurDashboard"),children:a.jsxs(te,{variant:"ghost",size:"sm",className:"rounded-xl",children:[a.jsx(rr,{className:"w-5 h-5 mr-2"}),"Retour"]})}),a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-lime-400 to-lime-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:w>0?`${w} notification${w>1?"s":""} non lue${w>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par statut"]}),a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes"}),a.jsxs(H,{value:"unread",children:["Non lues (",n.filter(v=>!v.lue).length,")"]}),a.jsxs(H,{value:"read",children:["Lues (",n.filter(v=>v.lue).length,")"]})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par type"]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les types"}),a.jsx(H,{value:"info",children:"Informations"}),a.jsx(H,{value:"alerte",children:"Alertes"}),a.jsx(H,{value:"warning",children:"Avertissements"}),a.jsx(H,{value:"success",children:"Succs"})]})]})]})]}),n.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200",children:[w>0&&a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{n.filter(v=>!v.lue).forEach(v=>b(v.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50 rounded-xl",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les notifications"]})]})]}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:S.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:l==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${l==="unread"?"non lue":"lue"} trouve.`})]}):S.map((v,_)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${v.lue?"border-gray-300 opacity-75":"border-lime-500"} ${x(v.type,v.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${v.lue?"opacity-50":""}`,children:y(v.type,v.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${v.lue?"line-through":""}`,children:v.titre}),!v.lue&&a.jsx("span",{className:"px-2 py-1 bg-lime-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:v.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:p(v.date||v.date_creation)}),v.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:v.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!v.lue&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>b(v.id),className:"rounded-xl text-lime-600 hover:text-lime-700 hover:bg-lime-50",title:"Marquer comme lu",children:a.jsx(ct,{className:"w-5 h-5"})}),a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>h(v.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})})},v.id))})]}),a.jsx(zr,{isOpen:d,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{j(),m(!1)},onCancel:()=>m(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function que(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(""),i=(l,c)=>{var f;if(((f=l==null?void 0:l.response)==null?void 0:f.status)===401||(c==null?void 0:c.status)===401)return"Email ou mot de passe incorrect.";const u=((c==null?void 0:c.message)||(l==null?void 0:l.message)||"").toLowerCase();return u.includes("credentials")||u.includes("invalid")||u.includes("incorrect")?"Email ou mot de passe incorrect.":u.includes("network")||u.includes("fetch")||u.includes("connexion au serveur")?"Impossible de joindre le serveur. Vrifiez votre connexion.":"Email ou mot de passe incorrect."},o=async l=>{r(!0),s("");try{const c=await es.login(l.email,l.password,"admin");c.success?(es.saveUser(c.user),localStorage.setItem("admin_session",JSON.stringify(c.user)),e(ke("AdminDashboard"))):s(i(null,c))}catch(c){console.error("Erreur de connexion:",c),s(i(c,null))}finally{r(!1)}};return a.jsx(Nh,{title:"Espace Administrateur",icon:Di,onLogin:o,showRegister:!1,loading:t,error:n})}function Gue({admin:e,notifications:t=[],newItemsCount:r={inscriptions:0,accidents:0,problemes:0},onLogout:n,onNotificationClick:s}){var h,j;const i=at(),o=fn(),[l,c]=N.useState(!1),[u,f]=N.useState(!1);N.useEffect(()=>{const p=()=>{window.innerWidth>=1024&&f(!1)};return window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const d=[{title:"Dashboard",icon:Di,link:"AdminDashboard",path:"/AdminDashboard"},{title:"Statistiques",icon:el,link:"AdminStats",path:"/AdminStats"},{title:"lves",icon:hr,link:"AdminEleves",path:"/AdminEleves"},{title:"Inscriptions",icon:Mx,link:"AdminInscriptions",path:"/AdminInscriptions"},{title:"Bus",icon:tt,link:"AdminBus",path:"/AdminBus"},{title:"Chauffeur & Responsable Bus",icon:zt,link:"AdminChauffeurs",path:"/AdminChauffeurs"},{title:"Paiements",icon:Ar,link:"AdminPaiements",path:"/AdminPaiements"},{title:"Zones",icon:Rt,link:"AdminZones",path:"/AdminZones"},{title:"Accidents",icon:qe,link:"AdminAccidents",path:"/AdminAccidents"},{title:"Problmes",icon:Zn,link:"AdminProblemes",path:"/AdminProblemes"},{title:"Essence",icon:tn,link:"AdminEssence",path:"/AdminEssence"},{title:"Profil",icon:ft,link:"AdminProfile",path:"/AdminProfile"},{title:"Notifications",icon:zn,link:"AdminNotifications",path:"/AdminNotifications"}],m=p=>{p.path?i(p.path):i(ke(p.link)),f(!1)},g=p=>o.pathname===p||o.pathname.startsWith(p+"/"),b=t.filter(p=>!p.lue).length;return a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>f(!u),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-amber-500 text-white rounded-xl shadow-lg hover:bg-amber-600 transition-colors",children:u?a.jsx(Ze,{className:"w-6 h-6"}):a.jsx(tl,{className:"w-6 h-6"})}),a.jsx(Br,{children:u&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>f(!1),className:"lg:hidden fixed inset-0 bg-black/50 z-40"})}),a.jsxs(ee.aside,{initial:!1,animate:{width:l?"80px":"280px",x:u?0:typeof window<"u"&&window.innerWidth<1024?"-100%":0},transition:{duration:.3,ease:"easeInOut"},className:`
          fixed left-0 top-0 h-full bg-gradient-to-b from-amber-50 to-white
          border-r-2 border-amber-200 shadow-2xl z-40
          flex flex-col
          ${l?"items-center":""}
        `,children:[a.jsx("div",{className:"p-4 border-b border-amber-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[!l&&a.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(Di,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-gray-800 text-sm",children:"Mohammed 5"}),a.jsx("p",{className:"text-xs text-gray-500",children:"School Bus"})]})]}),l&&a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg mx-auto",children:a.jsx(Di,{className:"w-6 h-6 text-white"})}),a.jsx("button",{onClick:()=>c(!l),className:"hidden lg:block p-2 hover:bg-amber-100 rounded-lg transition-colors text-gray-600 hover:text-amber-600",children:l?a.jsx(tl,{className:"w-5 h-5"}):a.jsx(Ze,{className:"w-5 h-5"})})]})}),!l&&e&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 border-b border-amber-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-amber-500 rounded-full flex items-center justify-center text-white font-bold",children:((h=e.prenom)==null?void 0:h[0])||((j=e.nom)==null?void 0:j[0])||"A"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"font-semibold text-gray-800 text-sm truncate",children:[e.prenom," ",e.nom]}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:e.email})]})]})}),a.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-2",children:a.jsx("div",{className:"space-y-1",children:d.map((p,y)=>{const x=g(p.path),S=p.icon;let w=0;p.link==="AdminNotifications"?w=b:p.link==="AdminInscriptions"?w=r.inscriptions||0:p.link==="AdminAccidents"?w=r.accidents||0:p.link==="AdminProblemes"&&(w=r.problemes||0);const v=w>0;return a.jsxs(ee.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.05},onClick:()=>m(p),className:`
                    w-full flex items-center gap-3 px-4 py-3 rounded-xl
                    transition-all duration-200
                    ${x?"bg-gradient-to-r from-amber-500 to-yellow-500 text-white shadow-lg":"text-gray-700 hover:bg-amber-100 hover:text-amber-700"}
                    ${l?"justify-center":""}
                  `,title:l?p.title:"",children:[a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:`w-5 h-5 ${x?"text-white":"text-gray-600"}`}),v&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold",children:w>99?"99+":w})]}),!l&&a.jsx("span",{className:"font-medium text-sm flex-1 text-left",children:p.title})]},p.link)})})}),a.jsx("div",{className:"p-4 border-t border-amber-200 space-y-2",children:a.jsxs(ee.button,{onClick:n,className:`
              w-full flex items-center gap-3 px-4 py-3 rounded-xl
              text-red-600 hover:bg-red-50 transition-all
              ${l?"justify-center":""}
            `,title:l?"Dconnexion":"",children:[a.jsx(Mi,{className:"w-5 h-5"}),!l&&a.jsx("span",{className:"font-medium text-sm",children:"Dconnexion"})]})})]}),a.jsx("div",{className:`
          hidden lg:block transition-all duration-300
          ${l?"ml-[80px]":"ml-[280px]"}
        `})]})}function Bt({children:e,title:t="Administration"}){const r=at(),n=fn(),[s,i]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState({inscriptions:0,accidents:0,problemes:0});N.useEffect(()=>{const h=localStorage.getItem("admin_session");if(!h){r(ke("AdminLogin"));return}const j=JSON.parse(h);i(j),m(j.id),g(),u(!1)},[r]),N.useEffect(()=>{s&&n.pathname==="/AdminNotifications"&&m(s.id)},[n.pathname,s]),N.useEffect(()=>{if(!s)return;const h=async()=>{await m(s.id),await g()};h();const j=setInterval(h,3e4);return()=>clearInterval(j)},[s]);const m=async h=>{try{const j=await lt.getByUser(h,"admin"),p=(j==null?void 0:j.data)||j||[];l(p.sort((y,x)=>new Date(x.date||0)-new Date(y.date||0)))}catch(j){console.warn("Erreur lors du chargement des notifications:",j),l([])}},g=async()=>{try{const h=await cr.getAll(),p=((h==null?void 0:h.data)||h||[]).filter(P=>P.type_demande==="inscription"&&(P.statut==="En attente"||P.statut==="En cours de traitement")).length,y=await vn.getAll(),S=((y==null?void 0:y.data)||y||[]).filter(P=>P.statut==="En attente").length,w=await da.getAll(),_=((w==null?void 0:w.data)||w||[]).filter(P=>P.statut==="En attente"||P.statut==="En cours").length;d({inscriptions:p,accidents:S,problemes:_})}catch(h){console.warn("Erreur lors du chargement des compteurs:",h),d({inscriptions:0,accidents:0,problemes:0})}},b=()=>{localStorage.removeItem("admin_session"),localStorage.removeItem("token"),localStorage.removeItem("user"),r(ke("Home"))};return c?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-yellow-50",children:[a.jsx(Gue,{admin:s,notifications:o,newItemsCount:f,onLogout:b,onNotificationClick:()=>{}}),a.jsx("main",{className:"lg:ml-[280px] min-h-screen p-4 md:p-8",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:e})})]})}function Kue(){return a.jsx(Bt,{title:"Tableau de bord",children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-amber-500 to-orange-600 rounded-3xl flex items-center justify-center shadow-xl mx-auto mb-6",children:a.jsx(Di,{className:"w-12 h-12 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bienvenue dans l'espace administrateur"}),a.jsx("p",{className:"text-gray-500",children:"Utilisez le menu latral pour accder aux diffrentes sections"})]})})})}function Yue(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState("buses"),[g,b]=N.useState(!1),[h,j]=N.useState(!1),[p,y]=N.useState(null),[x,S]=N.useState(null),[w,v]=N.useState(null),[_,P]=N.useState([]),[C,$]=N.useState({show:!1,id:null}),[A,T]=N.useState({show:!1,id:null}),[O,L]=N.useState({numero:"",capacite:"",chauffeur_id:"",responsable_id:"",trajet_id:"",statut:"Actif"}),[M,F]=N.useState({nom:"",zones:[],heure_depart_matin_a:"07:30",heure_arrivee_matin_a:"08:00",heure_depart_soir_a:"17:00",heure_arrivee_soir_a:"17:30",heure_depart_matin_b:"08:00",heure_arrivee_matin_b:"08:30",heure_depart_soir_b:"17:30",heure_arrivee_soir_b:"18:00"});N.useEffect(()=>{B(),R()},[]);const R=async()=>{try{const D=await Ps.getAll(),G=((D==null?void 0:D.data)||D||[]).filter(ie=>ie.actif!==!1).map(ie=>ie.nom);P(G)}catch(D){console.error("Erreur lors du chargement des zones:",D)}},B=async()=>{f(!0),v(null);try{const[D,Y,G,ie]=await Promise.all([Pr.getAll(),ha.getAll(),an.getAll(),Fa.getAll()]),pe=Array.isArray(D==null?void 0:D.data)?D.data:Array.isArray(D)?D:[],xe=Array.isArray(Y==null?void 0:Y.data)?Y.data:Array.isArray(Y)?Y:[],q=Array.isArray(G==null?void 0:G.data)?G.data:Array.isArray(G)?G:[],oe=Array.isArray(ie==null?void 0:ie.data)?ie.data:Array.isArray(ie)?ie:[];r(pe),s(xe),o(q),c(oe)}catch(D){console.error("Erreur lors du chargement:",D),v("Erreur lors du chargement des donnes")}finally{f(!1)}},z=async D=>{D.preventDefault(),v(null);try{if(O.chauffeur_id){const G=t.find(ie=>ie.chauffeur_id===parseInt(O.chauffeur_id)&&(!p||ie.id!==p.id));if(G){v(`Ce chauffeur est dj affect au bus ${G.numero}. Veuillez d'abord retirer son affectation de ce bus avant de l'affecter  un autre bus.`);return}}if(O.responsable_id){const G=t.find(ie=>ie.responsable_id===parseInt(O.responsable_id)&&(!p||ie.id!==p.id));if(G){v(`Ce responsable est dj affect au bus ${G.numero}. Veuillez d'abord retirer son affectation de ce bus avant de l'affecter  un autre bus.`);return}}const Y={numero:O.numero,capacite:parseInt(O.capacite),chauffeur_id:O.chauffeur_id||null,responsable_id:O.responsable_id||null,trajet_id:O.trajet_id||null,statut:O.statut||"Actif"};p?await Pr.update(p.id,Y):await Pr.create(Y),Ae(),await B()}catch(Y){console.error("Erreur lors de l'enregistrement:",Y),v("Erreur lors de l'enregistrement du bus: "+(Y.message||"Erreur inconnue"))}},I=async D=>{D.preventDefault(),v(null);try{if(M.zones.length===0){v("Veuillez slectionner au moins une zone");return}if(M.zones.length>2){v("Vous ne pouvez slectionner au maximum que 2 zones");return}const Y={...M,zones:M.zones};x?await ha.update(x.id,Y):await ha.create(Y),Be(),await B()}catch(Y){console.error("Erreur lors de l'enregistrement:",Y),v("Erreur lors de l'enregistrement du trajet")}},X=D=>{$({show:!0,id:D})},re=async()=>{if(C.id)try{await Pr.delete(C.id),await B(),$({show:!1,id:null})}catch(D){console.error("Erreur lors de la suppression:",D),v("Erreur lors de la suppression du bus"),$({show:!1,id:null})}},W=D=>{T({show:!0,id:D})},de=async()=>{if(A.id)try{await ha.delete(A.id),await B(),T({show:!1,id:null})}catch(D){console.error("Erreur lors de la suppression:",D),v("Erreur lors de la suppression du trajet"),T({show:!1,id:null})}},Ae=()=>{L({numero:"",capacite:"",chauffeur_id:"",responsable_id:"",trajet_id:"",statut:"Actif"}),y(null),b(!1)},Be=()=>{F({nom:"",zones:[],heure_depart_matin_a:"07:30",heure_arrivee_matin_a:"08:00",heure_depart_soir_a:"17:00",heure_arrivee_soir_a:"17:30",heure_depart_matin_b:"08:00",heure_arrivee_matin_b:"08:30",heure_depart_soir_b:"17:30",heure_arrivee_soir_b:"18:00"}),S(null),j(!1)},K=D=>{var Y,G,ie,pe;L({numero:D.numero||"",capacite:((Y=D.capacite)==null?void 0:Y.toString())||"",chauffeur_id:((G=D.chauffeur_id)==null?void 0:G.toString())||"",responsable_id:((ie=D.responsable_id)==null?void 0:ie.toString())||"",trajet_id:((pe=D.trajet_id)==null?void 0:pe.toString())||"",statut:D.statut||"Actif"}),y(D),b(!0)},U=D=>{let Y=[];Array.isArray(D.zones)?Y=D.zones:typeof D.zones=="string"&&D.zones.trim()&&(Y=D.zones.split(",").map(G=>G.trim()).filter(G=>G)),F({...D,zones:Y}),S(D),j(!0)},J=D=>{v(null),M.zones.includes(D)?F({...M,zones:M.zones.filter(Y=>Y!==D)}):M.zones.length<2&&F({...M,zones:[...M.zones,D]})};return u?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des Bus et Trajets",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),w&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:w})}),a.jsxs("div",{className:"flex gap-3 mb-8",children:[a.jsxs(te,{variant:d==="buses"?"default":"outline",onClick:()=>m("buses"),className:`rounded-xl font-semibold transition-all duration-300 ${d==="buses"?"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white shadow-lg shadow-amber-200":"border-2 border-amber-200 hover:border-amber-300 text-amber-700 hover:bg-amber-50"}`,children:[a.jsx(tt,{className:"w-5 h-5 mr-2"}),"Bus (",t.length,")"]}),a.jsxs(te,{variant:d==="trajets"?"default":"outline",onClick:()=>m("trajets"),className:`rounded-xl font-semibold transition-all duration-300 ${d==="trajets"?"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white shadow-lg shadow-amber-200":"border-2 border-amber-200 hover:border-amber-300 text-amber-700 hover:bg-amber-50"}`,children:[a.jsx(No,{className:"w-5 h-5 mr-2"}),"Trajets (",n.length,")"]})]}),d==="buses"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-amber-700 via-amber-800 to-amber-700 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(tt,{className:"w-7 h-7 text-white"})}),"Gestion des Bus"]}),a.jsxs(te,{onClick:()=>b(!0),className:"bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-700 hover:to-amber-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(va,{className:"w-5 h-5 mr-2"}),"Ajouter un bus"]})]}),g&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-amber-50 via-white to-amber-50 border-b-2 border-amber-200",children:a.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-amber-900 font-semibold mb-2 block",children:"Numro du bus"}),a.jsx(le,{value:O.numero,onChange:D=>L({...O,numero:D.target.value}),placeholder:"Ex: BUS-001",className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-amber-900 font-semibold mb-2 block",children:"Capacit"}),a.jsx(le,{type:"number",value:O.capacite,onChange:D=>L({...O,capacite:D.target.value}),placeholder:"Ex: 40",className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-amber-900 font-semibold mb-2 block",children:"Chauffeur"}),a.jsxs($e,{value:O.chauffeur_id,onValueChange:D=>L({...O,chauffeur_id:D}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un chauffeur"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"",children:"Aucun"}),i.filter(D=>!t.some(G=>G.chauffeur_id===D.id&&(!p||G.id!==p.id))||p&&p.chauffeur_id===D.id).map(D=>{const Y=p&&p.chauffeur_id===D.id?p:null;return a.jsxs(H,{value:D.id.toString(),children:[D.prenom," ",D.nom,Y&&` (bus ${Y.numero})`]},D.id)})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-amber-900 font-semibold mb-2 block",children:"Responsable"}),a.jsxs($e,{value:O.responsable_id,onValueChange:D=>L({...O,responsable_id:D}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un responsable"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"",children:"Aucun"}),l.filter(D=>!t.some(G=>G.responsable_id===D.id&&(!p||G.id!==p.id))||p&&p.responsable_id===D.id).map(D=>{const Y=p&&p.responsable_id===D.id?p:null;return a.jsxs(H,{value:D.id.toString(),children:[D.prenom," ",D.nom,Y&&` (bus ${Y.numero})`]},D.id)})]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-amber-900 font-semibold mb-2 block",children:"Trajet"}),a.jsxs($e,{value:O.trajet_id,onValueChange:D=>L({...O,trajet_id:D}),children:[a.jsx(Me,{className:"mt-1 rounded-xl border-2 border-amber-200 focus:border-amber-500 focus:ring-2 focus:ring-amber-200 h-12",children:a.jsx(De,{placeholder:"Slectionnez un trajet"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"",children:"Aucun"}),n.map(D=>a.jsx(H,{value:D.id.toString(),children:D.nom},D.id))]})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-amber-200",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:Ae,className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 font-semibold px-6",children:[a.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),p?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-amber-100",children:[t.map(D=>{const Y=i.find(pe=>pe.id===D.chauffeur_id),G=l.find(pe=>pe.id===D.responsable_id),ie=n.find(pe=>pe.id===D.trajet_id);return a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-amber-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(tt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-amber-900 mb-3",children:D.numero}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold shadow-md",children:[D.capacite," places"]}),Y&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md",children:[Y.prenom," ",Y.nom]}),G&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:["Resp: ",G.prenom," ",G.nom]}),ie&&a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white rounded-xl font-semibold shadow-md",children:ie.nom})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{variant:"outline",size:"icon",onClick:()=>K(D),className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 hover:border-amber-400 w-11 h-11 shadow-md",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>X(D.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})},D.id)}),t.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(tt,{className:"w-10 h-10 text-amber-600 opacity-60"})}),a.jsx("p",{className:"text-amber-700 font-semibold text-lg",children:"Aucun bus enregistr"}),a.jsx("p",{className:"text-amber-600 text-sm mt-2",children:'Cliquez sur "Ajouter un bus" pour commencer'})]})]})]}),d==="trajets"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-gray-700 via-gray-800 to-gray-700 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(No,{className:"w-7 h-7 text-white"})}),"Gestion des Trajets"]}),a.jsxs(te,{onClick:()=>j(!0),className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(va,{className:"w-5 h-5 mr-2"}),"Ajouter un trajet"]})]}),h&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-gray-50 via-white to-gray-50 border-b-2 border-gray-200",children:a.jsxs("form",{onSubmit:I,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-900 font-semibold mb-2 block",children:"Nom du trajet"}),a.jsx(le,{value:M.nom,onChange:D=>F({...M,nom:D.target.value}),placeholder:"Ex: Trajet Nord",className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-900 font-semibold flex items-center gap-2 mb-2",children:[a.jsx(Rt,{className:"w-5 h-5 text-gray-600"}),"Zones desservies (max 2)"]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[M.zones.length>0&&a.jsx("div",{className:"flex flex-wrap gap-3 mb-4",children:M.zones.map((D,Y)=>a.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl text-sm font-semibold shadow-md",children:[a.jsx(Rt,{className:"w-4 h-4"}),D,a.jsx("button",{type:"button",onClick:()=>J(D),className:"ml-1 hover:bg-gray-800 rounded-full p-0.5 transition-colors",children:a.jsx(Ze,{className:"w-4 h-4"})})]},Y))}),a.jsxs($e,{value:"",onValueChange:D=>{D&&D!==""&&J(D)},disabled:M.zones.length>=2,children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12",children:a.jsx(De,{placeholder:M.zones.length>=2?"Maximum 2 zones slectionnes":"Slectionnez une zone"})}),a.jsx(Te,{children:_.filter(D=>!M.zones.includes(D)).map(D=>a.jsx(H,{value:D,children:D},D))})]}),a.jsxs("p",{className:"text-xs text-gray-500",children:[M.zones.length,"/2 zones slectionnes"]})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Groupe A"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Matin"}),a.jsx(le,{type:"time",value:M.heure_depart_matin_a,onChange:D=>F({...M,heure_depart_matin_a:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Matin"}),a.jsx(le,{type:"time",value:M.heure_arrivee_matin_a,onChange:D=>F({...M,heure_arrivee_matin_a:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Soir"}),a.jsx(le,{type:"time",value:M.heure_depart_soir_a,onChange:D=>F({...M,heure_depart_soir_a:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Soir"}),a.jsx(le,{type:"time",value:M.heure_arrivee_soir_a,onChange:D=>F({...M,heure_arrivee_soir_a:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border-2 border-gray-200 shadow-sm",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Groupe B"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Matin"}),a.jsx(le,{type:"time",value:M.heure_depart_matin_b,onChange:D=>F({...M,heure_depart_matin_b:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Matin"}),a.jsx(le,{type:"time",value:M.heure_arrivee_matin_b,onChange:D=>F({...M,heure_arrivee_matin_b:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Dpart Soir"}),a.jsx(le,{type:"time",value:M.heure_depart_soir_b,onChange:D=>F({...M,heure_depart_soir_b:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-800 font-semibold mb-2 block",children:"Arrive Soir"}),a.jsx(le,{type:"time",value:M.heure_arrivee_soir_b,onChange:D=>F({...M,heure_arrivee_soir_b:D.target.value}),className:"mt-1 rounded-xl border-2 border-gray-200 focus:border-gray-500 focus:ring-2 focus:ring-gray-200 h-12"})]})]})]}),a.jsxs("div",{className:"flex gap-4 justify-end pt-4 border-t-2 border-amber-200",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:Be,className:"rounded-xl border-2 border-amber-300 text-amber-700 hover:bg-amber-50 font-semibold px-6",children:[a.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-gradient-to-r from-amber-700 to-amber-800 hover:from-amber-800 hover:to-amber-900 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),x?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-gray-100",children:[n.map(D=>{const Y=Array.isArray(D.zones)?D.zones:[];return a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-600 to-gray-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(No,{className:"w-9 h-9 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:D.nom})]}),a.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:Y.map((G,ie)=>a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl text-sm font-semibold shadow-md flex items-center gap-2",children:[a.jsx(Rt,{className:"w-4 h-4"}),G]},ie))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-5 rounded-xl border-2 border-blue-200 shadow-sm",children:[a.jsx("p",{className:"text-blue-900 font-bold text-lg mb-3",children:"Groupe A"}),a.jsxs("div",{className:"space-y-2 text-gray-900",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Matin:"})," ",D.heure_depart_matin_a," - ",D.heure_arrivee_matin_a]}),a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Soir:"})," ",D.heure_depart_soir_a," - ",D.heure_arrivee_soir_a]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-5 rounded-xl border-2 border-indigo-200 shadow-sm",children:[a.jsx("p",{className:"text-indigo-900 font-bold text-lg mb-3",children:"Groupe B"}),a.jsxs("div",{className:"space-y-2 text-gray-900",children:[a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Matin:"})," ",D.heure_depart_matin_b," - ",D.heure_arrivee_matin_b]}),a.jsxs("p",{className:"font-semibold",children:[a.jsx("span",{className:"text-gray-700",children:"Soir:"})," ",D.heure_depart_soir_b," - ",D.heure_arrivee_soir_b]})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 ml-6",children:[a.jsx(te,{variant:"outline",size:"icon",onClick:()=>U(D),className:"rounded-xl border-2 border-gray-300 text-gray-700 hover:bg-gray-50 hover:border-gray-400 w-11 h-11 shadow-md",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>W(D.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})},D.id)}),n.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(No,{className:"w-10 h-10 text-gray-600 opacity-60"})}),a.jsx("p",{className:"text-gray-700 font-semibold text-lg",children:"Aucun trajet enregistr"}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:'Cliquez sur "Ajouter un trajet" pour commencer'})]})]})]}),a.jsx(zr,{isOpen:C.show,title:"Supprimer le bus",message:"tes-vous sr de vouloir supprimer ce bus ? Cette action est irrversible.",onConfirm:re,onCancel:()=>$({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(zr,{isOpen:A.show,title:"Supprimer le trajet",message:"tes-vous sr de vouloir supprimer ce trajet ? Cette action est irrversible.",onConfirm:de,onCancel:()=>T({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function Xue(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState("chauffeurs"),[d,m]=N.useState(!1),[g,b]=N.useState(!1),[h,j]=N.useState(null),[p,y]=N.useState(null),[x,S]=N.useState({}),[w,v]=N.useState(null),[_,P]=N.useState({show:!1,id:null}),[C,$]=N.useState({show:!1,id:null}),[A,T]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:"",date_embauche:""}),[O,L]=N.useState({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:""});N.useEffect(()=>{M()},[]);const M=async()=>{c(!0),v(null);try{const[K,U,J]=await Promise.all([an.getAll(),Fa.getAll(),Pr.getAll()]),D=(K==null?void 0:K.data)||K||[],Y=(U==null?void 0:U.data)||U||[],G=(J==null?void 0:J.data)||J||[],ie=Array.isArray(D)?D.map(xe=>{const q=Array.isArray(G)?G.find(oe=>oe.chauffeur_id===xe.id):null;return{...xe,bus:q}}):[],pe=Array.isArray(Y)?Y.map(xe=>{const q=Array.isArray(G)?G.find(oe=>oe.responsable_id===xe.id):null;return{...xe,bus:q}}):[];r(ie),s(pe),o(Array.isArray(G)?G:[])}catch(K){console.error("Erreur lors du chargement:",K),v("Erreur lors du chargement des donnes")}finally{c(!1)}},F=async K=>{K.preventDefault(),v(null);try{let U;h?(U={email:A.email,telephone:A.telephone},A.mot_de_passe&&(U.mot_de_passe=A.mot_de_passe),A.salaire!==""&&A.salaire!==null&&A.salaire!==void 0&&(U.salaire=parseFloat(A.salaire)||0)):U={nom:A.nom,prenom:A.prenom,email:A.email,telephone:A.telephone,mot_de_passe:A.mot_de_passe,salaire:parseInt(A.salaire)||0,date_embauche:A.date_embauche||null,nombre_accidents:0,statut:"Actif"},h?await an.update(h.id,U):await an.create(U),re(),await M()}catch(U){console.error("Erreur lors de l'enregistrement:",U),v("Erreur lors de l'enregistrement du chauffeur: "+(U.message||"Erreur inconnue"))}},R=async K=>{K.preventDefault(),v(null);try{let U;p?(U={email:O.email,telephone:O.telephone},O.mot_de_passe&&(U.mot_de_passe=O.mot_de_passe),O.salaire!==""&&O.salaire!==null&&O.salaire!==void 0&&(U.salaire=parseFloat(O.salaire)||0)):U={nom:O.nom,prenom:O.prenom,email:O.email,telephone:O.telephone,mot_de_passe:O.mot_de_passe,salaire:parseFloat(O.salaire)||0,role:"responsable",statut:"Actif"},p?await Fa.update(p.id,U):await Fa.create(U),W(),await M()}catch(U){console.error("Erreur lors de l'enregistrement:",U),v("Erreur lors de l'enregistrement du responsable: "+(U.message||"Erreur inconnue"))}},B=K=>{P({show:!0,id:K})},z=async()=>{if(_.id)try{await an.delete(_.id),await M(),P({show:!1,id:null})}catch(K){console.error("Erreur lors de la suppression:",K),v("Erreur lors de la suppression du chauffeur"),P({show:!1,id:null})}},I=K=>{$({show:!0,id:K})},X=async()=>{if(C.id)try{await Fa.delete(C.id),await M(),$({show:!1,id:null})}catch(K){console.error("Erreur lors de la suppression:",K),v("Erreur lors de la suppression du responsable"),$({show:!1,id:null})}},re=()=>{T({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:"",date_embauche:""}),j(null),m(!1)},W=()=>{L({nom:"",prenom:"",email:"",telephone:"",mot_de_passe:"",salaire:""}),y(null),b(!1)},de=K=>{T({nom:K.nom||"",prenom:K.prenom||"",email:K.email||"",telephone:K.telephone||"",mot_de_passe:"",salaire:K.salaire!==null&&K.salaire!==void 0?K.salaire.toString():""}),j(K),m(!0)},Ae=K=>{L({nom:K.nom||"",prenom:K.prenom||"",email:K.email||"",telephone:K.telephone||"",mot_de_passe:"",salaire:K.salaire!==null&&K.salaire!==void 0?K.salaire.toString():""}),y(K),b(!0)},Be=K=>{S(U=>({...U,[K]:!U[K]}))};return l?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Chauffeur & Responsable Bus",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),w&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:w})}),a.jsxs("div",{className:"flex gap-3 mb-8",children:[a.jsxs(te,{variant:u==="chauffeurs"?"default":"outline",onClick:()=>f("chauffeurs"),className:`rounded-xl font-semibold transition-all duration-300 ${u==="chauffeurs"?"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white shadow-lg shadow-emerald-200":"border-2 border-emerald-200 hover:border-emerald-300 text-emerald-700 hover:bg-emerald-50"}`,children:[a.jsx(zt,{className:"w-5 h-5 mr-2"}),"Chauffeurs (",t.length,")"]}),a.jsxs(te,{variant:u==="responsables"?"default":"outline",onClick:()=>f("responsables"),className:`rounded-xl font-semibold transition-all duration-300 ${u==="responsables"?"bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-700 hover:to-violet-800 text-white shadow-lg shadow-violet-200":"border-2 border-violet-200 hover:border-violet-300 text-violet-700 hover:bg-violet-50"}`,children:[a.jsx(yc,{className:"w-5 h-5 mr-2"}),"Responsables Bus (",n.length,")"]})]}),u==="chauffeurs"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-emerald-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-emerald-600 via-emerald-700 to-emerald-600 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(zt,{className:"w-7 h-7 text-white"})}),"Gestion des Chauffeurs"]}),a.jsxs(te,{onClick:()=>m(!0),className:"bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(va,{className:"w-5 h-5 mr-2"}),"Ajouter un chauffeur"]})]}),d&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-emerald-50 via-white to-emerald-50 border-b-2 border-emerald-200",children:a.jsxs("form",{onSubmit:F,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[!h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Nom"}),a.jsx(le,{value:A.nom,onChange:K=>T({...A,nom:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Prnom"}),a.jsx(le,{value:A.prenom,onChange:K=>T({...A,prenom:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Email"}),a.jsx(le,{type:"email",value:A.email,onChange:K=>T({...A,email:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(le,{value:A.telephone,onChange:K=>T({...A,telephone:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Date d'embauche"}),a.jsx(le,{type:"date",value:A.date_embauche,onChange:K=>T({...A,date_embauche:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Mot de passe"}),a.jsx(le,{type:"password",value:A.mot_de_passe,onChange:K=>T({...A,mot_de_passe:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(le,{type:"number",value:A.salaire,onChange:K=>T({...A,salaire:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]})]}),h&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Email"}),a.jsx(le,{type:"email",value:A.email,onChange:K=>T({...A,email:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(le,{value:A.telephone,onChange:K=>T({...A,telephone:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(le,{type:"number",value:A.salaire,onChange:K=>T({...A,salaire:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-emerald-900 font-semibold mb-2 block",children:"Mot de passe (laisser vide pour ne pas changer)"}),a.jsx(le,{type:"password",value:A.mot_de_passe,onChange:K=>T({...A,mot_de_passe:K.target.value}),className:"mt-1 rounded-xl border-2 border-emerald-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 h-12"})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-emerald-200",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:re,className:"rounded-xl border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 font-semibold px-6",children:[a.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),h?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-emerald-100",children:[t.map(K=>a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-600 to-emerald-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-emerald-900 mb-3",children:[K.prenom," ",K.nom]}),a.jsx("p",{className:"text-gray-500 mb-2",children:K.telephone}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md",children:[K.salaire!==null&&K.salaire!==void 0?parseFloat(K.salaire).toLocaleString("fr-FR"):"0"," DH"]}),K.bus&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),K.bus.numero]}),a.jsxs("span",{className:`px-4 py-2 rounded-xl font-semibold shadow-md ${K.nombre_accidents>=3?"bg-gradient-to-r from-red-500 to-red-600 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 text-white"}`,children:[K.nombre_accidents||0," accident(s)"]}),K.nombre_accidents>=3&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(qe,{className:"w-4 h-4"}),"Licenciement"]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mot de passe:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-xs border border-gray-200 break-all max-w-md",children:x[K.id]?K.mot_de_passe_plain||K.user_password||K.mot_de_passe||"N/A":""}),a.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>Be(K.id),className:"rounded-lg border-gray-300 hover:bg-gray-100 flex-shrink-0",children:x[K.id]?a.jsx(zf,{className:"w-4 h-4 text-gray-700"}):a.jsx(_a,{className:"w-4 h-4 text-gray-700"})})]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{variant:"outline",size:"icon",onClick:()=>de(K),className:"rounded-xl border-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50 hover:border-emerald-400 w-11 h-11 shadow-md",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>B(K.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})},K.id)),t.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(zt,{className:"w-10 h-10 text-emerald-600 opacity-60"})}),a.jsx("p",{className:"text-emerald-700 font-semibold text-lg",children:"Aucun chauffeur enregistr"}),a.jsx("p",{className:"text-emerald-600 text-sm mt-2",children:'Cliquez sur "Ajouter un chauffeur" pour commencer'})]})]})]}),u==="responsables"&&a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-violet-100",children:[a.jsxs("div",{className:"p-8 bg-gradient-to-r from-violet-600 via-violet-700 to-violet-600 flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(yc,{className:"w-7 h-7 text-white"})}),"Gestion des Responsables Bus"]}),a.jsxs(te,{onClick:()=>b(!0),className:"bg-gradient-to-r from-violet-500 to-violet-600 hover:from-violet-600 hover:to-violet-700 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6 py-3",children:[a.jsx(va,{className:"w-5 h-5 mr-2"}),"Ajouter un responsable"]})]}),g&&a.jsx("div",{className:"p-8 bg-gradient-to-br from-violet-50 via-white to-violet-50 border-b-2 border-violet-200",children:a.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[!p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Nom"}),a.jsx(le,{value:O.nom,onChange:K=>L({...O,nom:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Prnom"}),a.jsx(le,{value:O.prenom,onChange:K=>L({...O,prenom:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Email"}),a.jsx(le,{type:"email",value:O.email,onChange:K=>L({...O,email:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(le,{value:O.telephone,onChange:K=>L({...O,telephone:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(le,{type:"number",value:O.salaire,onChange:K=>L({...O,salaire:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Mot de passe"}),a.jsx(le,{type:"password",value:O.mot_de_passe,onChange:K=>L({...O,mot_de_passe:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]})]}),p&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Email"}),a.jsx(le,{type:"email",value:O.email,onChange:K=>L({...O,email:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Tlphone"}),a.jsx(le,{value:O.telephone,onChange:K=>L({...O,telephone:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Salaire (DH)"}),a.jsx(le,{type:"number",value:O.salaire,onChange:K=>L({...O,salaire:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-violet-900 font-semibold mb-2 block",children:"Mot de passe (laisser vide pour ne pas changer)"}),a.jsx(le,{type:"password",value:O.mot_de_passe,onChange:K=>L({...O,mot_de_passe:K.target.value}),className:"mt-1 rounded-xl border-2 border-violet-200 focus:border-violet-500 focus:ring-2 focus:ring-violet-200 h-12"})]})]}),a.jsxs("div",{className:"md:col-span-3 flex gap-4 justify-end pt-4 border-t-2 border-violet-200",children:[a.jsxs(te,{type:"button",variant:"outline",onClick:W,className:"rounded-xl border-2 border-violet-300 text-violet-700 hover:bg-violet-50 font-semibold px-6",children:[a.jsx(Ze,{className:"w-5 h-5 mr-2"}),"Annuler"]}),a.jsxs(te,{type:"submit",className:"bg-gradient-to-r from-violet-600 to-violet-700 hover:from-violet-700 hover:to-violet-800 text-white rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 px-6",children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),p?"Modifier":"Enregistrer"]})]})]})}),a.jsxs("div",{className:"divide-y divide-violet-100",children:[n.map(K=>{const U=x[K.id]||!1,J=K.mot_de_passe_plain||K.user_password||K.mot_de_passe||"N/A",D=U?J:"";return a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-violet-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-violet-600 to-violet-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(yc,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-2xl font-bold text-violet-900 mb-3",children:[K.prenom," ",K.nom]}),a.jsx("p",{className:"text-gray-500 mb-2",children:K.telephone}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2",children:[a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:K.id}),K.salaire!==null&&K.salaire!==void 0&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-violet-500 to-violet-600 text-white rounded-xl font-semibold shadow-md",children:[parseFloat(K.salaire).toLocaleString("fr-FR")," DH"]}),K.bus&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),K.bus.numero]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Mot de passe:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 px-3 py-2 bg-gray-50 rounded-lg text-gray-700 font-mono text-xs border border-gray-200 break-all max-w-md",children:D}),a.jsx(te,{type:"button",variant:"outline",size:"sm",onClick:()=>Be(K.id),className:"rounded-lg border-gray-300 hover:bg-gray-100 flex-shrink-0",children:U?a.jsx(zf,{className:"w-4 h-4 text-gray-700"}):a.jsx(_a,{className:"w-4 h-4 text-gray-700"})})]})]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{variant:"outline",size:"icon",onClick:()=>Ae(K),className:"rounded-xl border-2 border-violet-300 text-violet-700 hover:bg-violet-50 hover:border-violet-400 w-11 h-11 shadow-md",children:a.jsx(Vn,{className:"w-5 h-5"})}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>I(K.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})},K.id)}),n.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-violet-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(yc,{className:"w-10 h-10 text-violet-600 opacity-60"})}),a.jsx("p",{className:"text-violet-700 font-semibold text-lg",children:"Aucun responsable enregistr"}),a.jsx("p",{className:"text-violet-600 text-sm mt-2",children:'Cliquez sur "Ajouter un responsable" pour commencer'})]})]})]}),a.jsx(zr,{isOpen:_.show,title:"Supprimer le chauffeur",message:"tes-vous sr de vouloir supprimer ce chauffeur ? Cette action est irrversible.",onConfirm:z,onCancel:()=>P({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(zr,{isOpen:C.show,title:"Supprimer le responsable",message:"tes-vous sr de vouloir supprimer ce responsable ? Cette action est irrversible.",onConfirm:X,onCancel:()=>$({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function Jue(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState(""),[d,m]=N.useState("all"),[g,b]=N.useState("all"),[h,j]=N.useState("all"),[p,y]=N.useState("all"),[x,S]=N.useState("all"),[w,v]=N.useState("all"),[_,P]=N.useState(null),[C,$]=N.useState(null),[A,T]=N.useState(!1),[O,L]=N.useState({show:!1,eleve:null}),[M,F]=N.useState({nom:"",prenom:"",classe:"",adresse:"",zone:""});N.useEffect(()=>{R()},[]);const R=async()=>{var U,J,D,Y,G,ie,pe;c(!0),P(null);try{const xe=await Promise.allSettled([Yt.getAll(),ri.getAll(),jn.getAll(),Pr.getAll(),ha.getAll(),cr.getAll(),Ps.getAll()]),q=xe[0].status==="fulfilled"?Array.isArray((U=xe[0].value)==null?void 0:U.data)?xe[0].value.data:Array.isArray(xe[0].value)?xe[0].value:[]:[],oe=xe[1].status==="fulfilled"?Array.isArray((J=xe[1].value)==null?void 0:J.data)?xe[1].value.data:Array.isArray(xe[1].value)?xe[1].value:[]:[],Oe=xe[2].status==="fulfilled"?Array.isArray((D=xe[2].value)==null?void 0:D.data)?xe[2].value.data:Array.isArray(xe[2].value)?xe[2].value:[]:[],_e=xe[3].status==="fulfilled"?Array.isArray((Y=xe[3].value)==null?void 0:Y.data)?xe[3].value.data:Array.isArray(xe[3].value)?xe[3].value:[]:[],Ce=xe[4].status==="fulfilled"?Array.isArray((G=xe[4].value)==null?void 0:G.data)?xe[4].value.data:Array.isArray(xe[4].value)?xe[4].value:[]:[],Fe=xe[5].status==="fulfilled"?Array.isArray((ie=xe[5].value)==null?void 0:ie.data)?xe[5].value.data:Array.isArray(xe[5].value)?xe[5].value:[]:[],ye=xe[6].status==="fulfilled"?Array.isArray((pe=xe[6].value)==null?void 0:pe.data)?xe[6].value.data:Array.isArray(xe[6].value)?xe[6].value:[]:[],Re=Array.isArray(Fe)?Fe.filter(et=>et.type_demande==="inscription"):[],ht=(Array.isArray(q)?q.filter(et=>{const Ke=Array.isArray(Oe)?Oe.find(Ft=>Ft.eleve_id===et.id&&Ft.statut==="Active"):null,Ye=Array.isArray(Re)?Re.filter(Ft=>Ft.eleve_id===et.id).sort((Ft,ze)=>new Date(ze.date_creation||0)-new Date(Ft.date_creation||0))[0]:null;return(Ye==null?void 0:Ye.statut)==="Refuse"?!1:Ke!==null||Ye&&["Inscrit","Valide","Paye","En attente de paiement","En cours de traitement"].includes(Ye.statut)}):[]).map(et=>{const Ke=Array.isArray(oe)?oe.find(Qe=>Qe.id===et.tuteur_id):null,Ye=Array.isArray(Oe)?Oe.find(Qe=>Qe.eleve_id===et.id&&Qe.statut==="Active"):null,kt=Ye!=null&&Ye.bus_id&&Array.isArray(_e)?_e.find(Qe=>Qe.id===Ye.bus_id):null,Ft=kt!=null&&kt.trajet_id&&Array.isArray(Ce)?Ce.find(Qe=>Qe.id===kt.trajet_id):null,ze=Array.isArray(Re)?Re.filter(Qe=>Qe.eleve_id===et.id).sort((Qe,Qt)=>new Date(Qt.date_creation||0)-new Date(Qe.date_creation||0))[0]:null,Nt=(ze==null?void 0:ze.statut)==="Inscrit"?"Inscrit":(Ye==null?void 0:Ye.statut)||et.statut;return{...et,tuteur:Ke,inscription:Ye,bus:kt,trajet:Ft,demande_inscription:ze,statut_affichage:Nt,type_transport:(ze==null?void 0:ze.type_transport)||(Ye==null?void 0:Ye.type_transport)||"Non spcifi",type_abonnement:(ze==null?void 0:ze.abonnement)||(Ye==null?void 0:Ye.type_abonnement)||"Non spcifi",groupe:(ze==null?void 0:ze.groupe)||(Ye==null?void 0:Ye.groupe)||et.groupe||"Non spcifi",zone:(ze==null?void 0:ze.zone_geographique)||null}});r(ht),s(oe),o(ye.filter(et=>et.actif!==!1))}catch(xe){console.error("Erreur lors du chargement:",xe),P("Erreur lors du chargement des donnes: "+(xe.message||"Erreur de connexion au serveur"))}finally{c(!1)}},B=t.filter(U=>{var q,oe,Oe,_e,Ce,Fe,ye,Re,rt,ht,et,Ke,Ye,kt,Ft,ze,Nt;const J=u===""||((q=U.id)==null?void 0:q.toString().includes(u))||((oe=U.nom)==null?void 0:oe.toLowerCase().includes(u.toLowerCase()))||((Oe=U.prenom)==null?void 0:Oe.toLowerCase().includes(u.toLowerCase()))||((_e=U.classe)==null?void 0:_e.toLowerCase().includes(u.toLowerCase()))||((Ce=U.adresse)==null?void 0:Ce.toLowerCase().includes(u.toLowerCase()))||((Fe=U.zone)==null?void 0:Fe.toLowerCase().includes(u.toLowerCase()))||((Re=(ye=U.tuteur)==null?void 0:ye.nom)==null?void 0:Re.toLowerCase().includes(u.toLowerCase()))||((ht=(rt=U.tuteur)==null?void 0:rt.prenom)==null?void 0:ht.toLowerCase().includes(u.toLowerCase()))||((Ke=(et=U.tuteur)==null?void 0:et.telephone)==null?void 0:Ke.toLowerCase().includes(u.toLowerCase())),D=d==="all"||((Ye=U.inscription)==null?void 0:Ye.statut)===d||U.statut_affichage===d,Y=g==="all"||U.zone===g||((kt=U.demande_inscription)==null?void 0:kt.zone_geographique)===g,G=h==="all"||U.classe===h,ie=p==="all"||U.groupe===p||((Ft=U.demande_inscription)==null?void 0:Ft.groupe)===p,pe=x==="all"||U.type_transport===x||((ze=U.demande_inscription)==null?void 0:ze.type_transport)===x,xe=w==="all"||U.type_abonnement===w||((Nt=U.demande_inscription)==null?void 0:Nt.abonnement)===w;return J&&D&&Y&&G&&ie&&pe&&xe}),z=[...new Set(t.map(U=>U.classe).filter(Boolean))].sort(),I=[...new Set(t.map(U=>{var J;return U.groupe||((J=U.demande_inscription)==null?void 0:J.groupe)}).filter(Boolean))].sort(),X=[...new Set(t.map(U=>{var J;return U.type_transport||((J=U.demande_inscription)==null?void 0:J.type_transport)}).filter(Boolean))].sort(),re=[...new Set(t.map(U=>{var J;return U.type_abonnement||((J=U.demande_inscription)==null?void 0:J.abonnement)}).filter(Boolean))].sort(),W=U=>({Active:"bg-green-100 text-green-700",Suspendue:"bg-orange-100 text-orange-700",Termine:"bg-gray-100 text-gray-700",Actif:"bg-green-100 text-green-700",Inactif:"bg-yellow-100 text-yellow-700",Inscrit:"bg-emerald-100 text-emerald-700"})[U]||"bg-gray-100 text-gray-700",de=U=>{var J;$(U),F({nom:U.nom||"",prenom:U.prenom||"",classe:U.classe||"",adresse:U.adresse||"",zone:U.zone||((J=U.demande_inscription)==null?void 0:J.zone_geographique)||""}),T(!0)},Ae=async()=>{if(C){P(null);try{await Yt.update(C.id,{nom:M.nom,prenom:M.prenom,classe:M.classe,adresse:M.adresse}),T(!1),$(null),await R()}catch(U){console.error("Erreur lors de la modification:",U),P("Erreur lors de la modification de l'lve: "+(U.message||"Erreur inconnue"))}}},Be=async()=>{if(O.eleve){P(null);try{await Yt.delete(O.eleve.id),L({show:!1,eleve:null}),await R()}catch(U){console.error("Erreur lors de la suppression:",U),P("Erreur lors de la suppression de l'lve: "+(U.message||"Erreur inconnue")),L({show:!1,eleve:null})}}},K=U=>{L({show:!0,eleve:U})};return l?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des lves",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),_&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:_}),a.jsx("button",{onClick:()=>P(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-indigo-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(hr,{className:"w-7 h-7"}),"Liste des lves"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:[t.length," lve(s) inscrit(s) au total"]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(le,{placeholder:"Rechercher par ID, nom, prnom...",value:u,onChange:U=>f(U.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[a.jsxs($e,{value:d,onValueChange:m,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Statut"})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les statuts"}),a.jsx(H,{value:"Active",children:"Active"}),a.jsx(H,{value:"Suspendue",children:"Suspendue"}),a.jsx(H,{value:"Termine",children:"Termine"}),a.jsx(H,{value:"Inscrit",children:"Inscrit"})]})]}),a.jsxs($e,{value:g,onValueChange:b,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(Rt,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Zone"})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les zones"}),i.map(U=>a.jsx(H,{value:U.nom,children:U.nom},U.id))]})]}),a.jsxs($e,{value:h,onValueChange:j,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(hr,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Classe"})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les classes"}),z.map(U=>a.jsx(H,{value:U,children:U},U))]})]}),a.jsxs($e,{value:p,onValueChange:y,children:[a.jsx(Me,{className:"h-12 rounded-xl",children:a.jsx(De,{placeholder:"Groupe"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les groupes"}),I.map(U=>a.jsx(H,{value:U,children:U},U))]})]}),a.jsxs($e,{value:x,onValueChange:S,children:[a.jsxs(Me,{className:"h-12 rounded-xl",children:[a.jsx(tt,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Transport"})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les types"}),X.map(U=>a.jsx(H,{value:U,children:U},U))]})]}),a.jsxs($e,{value:w,onValueChange:v,children:[a.jsx(Me,{className:"h-12 rounded-xl",children:a.jsx(De,{placeholder:"Abonnement"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les abonnements"}),re.map(U=>a.jsx(H,{value:U,children:U},U))]})]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:B.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(hr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun lve trouv"})]}):B.map(U=>{var J,D,Y,G,ie;return a.jsx("div",{className:"p-6 hover:bg-blue-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(ft,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[U.nom," ",U.prenom]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(hr,{className:"w-4 h-4 text-blue-500"}),a.jsx("span",{className:"font-medium",children:"Classe:"}),a.jsx("span",{children:U.classe||"Non spcifi"}),U.groupe&&U.groupe!=="Non spcifi"&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{className:"font-medium",children:"Groupe:"}),a.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded-md",children:U.groupe})]})]}),U.adresse&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Rt,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"font-medium",children:"Adresse:"}),a.jsx("span",{children:U.adresse})]}),U.zone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Rt,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-medium",children:"Zone:"}),a.jsx("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 rounded-md",children:U.zone})]}),U.tuteur&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(ft,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"font-medium",children:"Tuteur:"}),a.jsxs("span",{children:[U.tuteur.prenom," ",U.tuteur.nom]})]}),U.tuteur.telephone&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(ou,{className:"w-4 h-4 text-indigo-500"}),a.jsx("span",{className:"font-medium",children:"Tl:"}),a.jsx("span",{children:U.tuteur.telephone})]})]}),U.bus&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(tt,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-medium",children:"Bus:"}),a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 rounded-md font-semibold",children:U.bus.numero||U.bus.immatriculation})]}),U.type_transport&&U.type_transport!=="Non spcifi"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Transport:"}),a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 rounded-md",children:U.type_transport})]}),U.type_abonnement&&U.type_abonnement!=="Non spcifi"&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Abonnement:"}),a.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded-md",children:U.type_abonnement})]}),((J=U.inscription)==null?void 0:J.date_debut)&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Jr,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"font-medium",children:"Inscription depuis:"}),a.jsx("span",{children:je(new Date(U.inscription.date_debut),"dd/MM/yyyy")})]}),((D=U.demande_inscription)==null?void 0:D.code_verification)&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(XD,{className:"w-4 h-4 text-teal-500"}),a.jsx("span",{className:"font-medium",children:"Code de vrification:"}),a.jsx("span",{className:"px-2 py-0.5 bg-teal-100 text-teal-700 rounded-md font-mono font-semibold",children:U.demande_inscription.code_verification})]})]})]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-3",children:[a.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-medium ${W(U.statut_affichage||((Y=U.inscription)==null?void 0:Y.statut)||U.statut)}`,children:U.statut_affichage||((G=U.inscription)==null?void 0:G.statut)||U.statut}),((ie=U.inscription)==null?void 0:ie.montant_mensuel)&&a.jsxs("span",{className:"text-sm text-gray-600 font-semibold",children:[U.inscription.montant_mensuel," DH/mois"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(te,{onClick:()=>de(U),className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(te,{onClick:()=>K(U),className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})},U.id)})})]}),A&&C&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-amber-500 to-yellow-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Vn,{className:"w-6 h-6"}),"Modifier l'lve"]}),a.jsx("button",{onClick:()=>{T(!1),$(null)},className:"text-white hover:text-amber-100 transition-colors",children:a.jsx(Dr,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Nom"}),a.jsx(le,{value:M.nom,onChange:U=>F({...M,nom:U.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Prnom"}),a.jsx(le,{value:M.prenom,onChange:U=>F({...M,prenom:U.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Classe"}),a.jsx(le,{value:M.classe,onChange:U=>F({...M,classe:U.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Adresse"}),a.jsx(le,{value:M.adresse,onChange:U=>F({...M,adresse:U.target.value}),className:"rounded-xl border-2 border-gray-200 focus:border-amber-500"})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-semibold mb-2 block",children:"Zone gographique"}),a.jsxs($e,{value:M.zone,onValueChange:U=>F({...M,zone:U}),children:[a.jsx(Me,{className:"rounded-xl border-2 border-gray-200 focus:border-amber-500",children:a.jsx(De,{placeholder:"Slectionner une zone"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"",children:"Aucune zone"}),i.map(U=>a.jsx(H,{value:U.nom,children:U.nom},U.id))]})]})]})]}),_&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl",children:_}),a.jsxs("div",{className:"flex gap-3 justify-end pt-4",children:[a.jsx(te,{onClick:()=>{T(!1),$(null)},variant:"outline",className:"rounded-xl",children:"Annuler"}),a.jsx(te,{onClick:Ae,className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:"Enregistrer"})]})]})]})}),a.jsx(zr,{isOpen:O.show,title:"Supprimer l'lve",message:O.eleve?`tes-vous sr de vouloir supprimer l'lve ${O.eleve.prenom} ${O.eleve.nom} ?`:"",onConfirm:Be,onCancel:()=>L({show:!1,eleve:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function Zue(){var J,D,Y,G,ie,pe,xe;const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState(!0),[g,b]=N.useState(""),[h,j]=N.useState("all"),[p,y]=N.useState(null),[x,S]=N.useState(!1),[w,v]=N.useState(!1),[_,P]=N.useState([]),[C,$]=N.useState(null),[A,T]=N.useState(null),[O,L]=N.useState(null),[M,F]=N.useState({date_debut:je(new Date,"yyyy-MM-dd"),date_fin:"2026-02-01"}),[R,B]=N.useState(null);N.useEffect(()=>{const q=localStorage.getItem("admin_session");if(q)try{const oe=JSON.parse(q);L(oe)}catch(oe){console.warn("Erreur parsing admin session:",oe)}z()},[]);const z=async()=>{var q,oe,Oe,_e,Ce,Fe;m(!0),$(null);try{const ye=await Promise.allSettled([Yt.getAll(),Pr.getAll(),ha.getAll(),jn.getAll(),ri.getAll(),cr.getAll()]),Re=ye[0].status==="fulfilled"?Array.isArray((q=ye[0].value)==null?void 0:q.data)?ye[0].value.data:Array.isArray(ye[0].value)?ye[0].value:[]:[],rt=ye[1].status==="fulfilled"?Array.isArray((oe=ye[1].value)==null?void 0:oe.data)?ye[1].value.data:Array.isArray(ye[1].value)?ye[1].value:[]:[],ht=ye[2].status==="fulfilled"?Array.isArray((Oe=ye[2].value)==null?void 0:Oe.data)?ye[2].value.data:Array.isArray(ye[2].value)?ye[2].value:[]:[],et=ye[3].status==="fulfilled"?Array.isArray((_e=ye[3].value)==null?void 0:_e.data)?ye[3].value.data:Array.isArray(ye[3].value)?ye[3].value:[]:[],Ke=ye[4].status==="fulfilled"?Array.isArray((Ce=ye[4].value)==null?void 0:Ce.data)?ye[4].value.data:Array.isArray(ye[4].value)?ye[4].value:[]:[],Ye=ye[5].status==="fulfilled"?Array.isArray((Fe=ye[5].value)==null?void 0:Fe.data)?ye[5].value.data:Array.isArray(ye[5].value)?ye[5].value:[]:[],kt=Array.isArray(Ye)?Ye.filter(Nt=>Nt.type_demande==="inscription"):[],Ft=Array.isArray(Re)?Re.filter(Nt=>kt.some(Qe=>Qe.eleve_id===Nt.id)).map(Nt=>{const Qe=Array.isArray(Ke)?Ke.find(Mt=>Mt.id===Nt.tuteur_id):null,Qt=Array.isArray(et)?et.find(Mt=>Mt.eleve_id===Nt.id&&Mt.statut!=="Termine"):null,Vr=Qt!=null&&Qt.bus_id&&Array.isArray(rt)?rt.find(Mt=>Mt.id===Qt.bus_id):null,Ur=Array.isArray(kt)?kt.filter(Mt=>Mt.eleve_id===Nt.id).sort((Mt,Oa)=>new Date(Oa.date_creation||0)-new Date(Mt.date_creation||0))[0]:null;return{...Nt,tuteur:Qe,inscription:Qt,bus:Vr,demande_inscription:Ur,statut_demande:(Ur==null?void 0:Ur.statut)||"En attente"}}):[];r(Ft),s(rt),o(ht),c(et),f(Ke);const ze=ye.filter(Nt=>Nt.status==="rejected").length;ze>0&&console.warn(`${ze} appel(s) API ont chou`)}catch(ye){console.error("Erreur lors du chargement:",ye),$("Erreur lors du chargement des donnes: "+(ye.message||"Erreur de connexion au serveur"))}finally{m(!1)}},I=q=>{const oe=new Date,Oe=je(oe,"yyyy-MM-dd");let _e;if(q==="Annuel")_e="2026-06-30";else{const Ce=new Date(oe);Ce.setMonth(Ce.getMonth()+1),_e=je(Ce,"yyyy-MM-dd")}return{dateDebut:Oe,dateFin:_e}},X=async q=>{var Ce,Fe;y(q),$(null);let oe="Mensuel";if((Ce=q.demande_inscription)!=null&&Ce.description)try{oe=(typeof q.demande_inscription.description=="string"?JSON.parse(q.demande_inscription.description):q.demande_inscription.description).abonnement||"Mensuel"}catch(ye){console.warn("Erreur parsing description:",ye)}const{dateDebut:Oe,dateFin:_e}=I(oe);F({date_debut:Oe,date_fin:_e});try{const ye=((Fe=q.demande_inscription)==null?void 0:Fe.zone_geographique)||q.zone;if(ye){const Re=await Pr.getByZone(ye);if(console.log(' Rponse getByZone pour zone "'+ye+'":',Re),Re.debug&&(T(Re.debug),console.log(" Informations de dbogage:",Re.debug)),Re.success&&Re.data&&Re.data.length>0){const rt=Re.data.map(ht=>{const et=i.find(Ke=>Ke.id===ht.trajet_id);return{...ht,trajet:et,placesRestantes:ht.places_restantes||0,elevesInscrits:ht.eleves_inscrits||0}});P(rt),$(null)}else P([]),$(Re.message||`Aucun bus disponible pour la zone "${ye}"`)}else P([]),$("Aucune zone gographique dfinie pour cet lve")}catch(ye){console.error("Erreur lors du chargement des bus:",ye),P([]),$("Erreur lors du chargement des bus disponibles: "+(ye.message||"Erreur inconnue"))}v(!0)},re=async()=>{var q;if(!p||!((q=p.demande_inscription)!=null&&q.id)){$("lve ou demande d'inscription manquant.");return}if(!(O!=null&&O.type_id)){$("Session administrateur invalide. Veuillez vous reconnecter.");return}$(null);try{const oe=await cr.traiter(p.demande_inscription.id,"En attente de paiement","Inscription valide par l'administrateur",null,O.type_id);if(!oe||!oe.success)throw new Error((oe==null?void 0:oe.message)||"Erreur lors du traitement de la demande");v(!1),y(null);const Oe=new Date,_e=new Date(Oe);_e.setMonth(_e.getMonth()+1),F({date_debut:je(Oe,"yyyy-MM-dd"),date_fin:je(_e,"yyyy-MM-dd")}),await z()}catch(oe){console.error("Erreur lors de la validation:",oe),$("Erreur lors de la validation de l'inscription: "+(oe.message||"Erreur inconnue"))}},W=async(q,oe)=>{var Oe;if(oe){if(!(O!=null&&O.type_id)){$("Session administrateur invalide. Veuillez vous reconnecter.");return}$(null);try{(Oe=q.demande_inscription)!=null&&Oe.id&&await cr.traiter(q.demande_inscription.id,"Refuse",`Inscription refuse: ${oe}`,oe,O.type_id),q.inscription&&await jn.update(q.inscription.id,{statut:"Termine"}),await z()}catch(_e){console.error("Erreur lors du refus:",_e),$("Erreur lors du refus de l'inscription: "+_e.message)}}},de=async q=>{var oe;y(q),$(null);try{let Oe=[];const _e=((oe=q.demande_inscription)==null?void 0:oe.zone_geographique)||q.zone;if(!_e){$("Aucune zone gographique dfinie pour cet lve");return}try{const Ce=await Pr.getByZone(_e);Ce.success&&Ce.data&&Ce.data.length>0&&(Oe=Ce.data.map(Fe=>{const ye=i.find(Re=>Re.id===Fe.trajet_id);return{...Fe,trajet:ye,placesRestantes:Fe.places_restantes||0,elevesInscrits:Fe.eleves_inscrits||0}}))}catch(Ce){console.error("Erreur lors du chargement des bus par zone:",Ce),$("Erreur lors du chargement des bus disponibles pour cette zone");return}if(Oe.length===0){$(`Aucun bus disponible pour la zone "${_e}"`);return}P(Oe),S(!0)}catch(Oe){console.error("Erreur lors de la prparation de l'affectation:",Oe),$("Erreur lors du chargement des bus disponibles")}},Ae=async q=>{var oe,Oe,_e;if(p){$(null);try{const Ce=n.find(Ke=>Ke.id===q);if(!Ce){$("Bus non trouv");return}let Fe=500;if((oe=p.demande_inscription)!=null&&oe.description){const Ke=wy(p.demande_inscription.description),Ye=ej(Ke.type_transport,Ke.abonnement);Fe=Ke.abonnement==="Annuel"?Ye/10:Ye}let ye="Mensuel";(Oe=p.demande_inscription)!=null&&Oe.description&&(ye=wy(p.demande_inscription.description).abonnement||"Mensuel");const{dateDebut:Re,dateFin:rt}=I(ye),ht={eleve_id:p.id,bus_id:q,date_debut:Re,date_fin:rt,montant_mensuel:Fe,statut:"Active"},et=await jn.create(ht);if(!et||!et.success)throw new Error((et==null?void 0:et.message)||"Erreur lors de la cration de l'inscription");if((_e=p.demande_inscription)!=null&&_e.id)try{await cr.traiter(p.demande_inscription.id,"Inscrit","lve affect  un bus",null,O==null?void 0:O.type_id)}catch(Ke){console.warn("Erreur lors de la mise  jour du statut de la demande:",Ke)}try{await Yt.update(p.id,{statut:"Actif"})}catch(Ke){console.warn("Erreur lors de l'activation de l'lve:",Ke)}if(p.tuteur_id)try{await lt.create({destinataire_id:p.tuteur_id,destinataire_type:"tuteur",titre:"Affectation au bus",message:`${p.prenom} ${p.nom} a t affect(e) au bus ${Ce.numero}.`,type:"info",date:new Date().toISOString()})}catch(Ke){console.warn("Erreur lors de l'envoi de la notification:",Ke)}S(!1),y(null),await z()}catch(Ce){console.error("Erreur lors de l'affectation:",Ce),$("Erreur lors de l'affectation au bus: "+(Ce.message||"Erreur inconnue"))}}},Be=t.filter(q=>{var _e,Ce,Fe,ye;const oe=((_e=q.nom)==null?void 0:_e.toLowerCase().includes(g.toLowerCase()))||((Ce=q.prenom)==null?void 0:Ce.toLowerCase().includes(g.toLowerCase()))||((Fe=q.adresse)==null?void 0:Fe.toLowerCase().includes(g.toLowerCase()))||((ye=q.classe)==null?void 0:ye.toLowerCase().includes(g.toLowerCase())),Oe=h==="all"||q.statut_demande===h;return oe&&Oe}),K=q=>({"En attente":"bg-yellow-100 text-yellow-700","En cours de traitement":"bg-blue-100 text-blue-700","En attente de paiement":"bg-orange-100 text-orange-700",Paye:"bg-amber-100 text-amber-700",Valide:"bg-green-100 text-green-700",Inscrit:"bg-emerald-100 text-emerald-700",Refuse:"bg-red-100 text-red-700",Active:"bg-emerald-100 text-emerald-700",Suspendue:"bg-orange-100 text-orange-700",Termine:"bg-gray-100 text-gray-700"})[q]||"bg-gray-100 text-gray-700",U=async(q,oe)=>{try{await navigator.clipboard.writeText(q),B(oe),setTimeout(()=>B(null),2e3)}catch(Oe){console.error("Erreur lors de la copie:",Oe)}};return d?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des Inscriptions",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),C&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:C}),a.jsx("button",{onClick:()=>$(null),className:"text-red-500 hover:text-red-700",children:a.jsx(Dr,{className:"w-5 h-5"})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-cyan-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Mx,{className:"w-7 h-7"}),"Gestion des Inscriptions des lves"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["Inscriptions envoyes par les tuteurs  ",t.length," lve(s)  ",l.filter(q=>q.statut==="Active").length," inscription(s) active(s)"]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(le,{placeholder:"Rechercher par nom, prnom, adresse ou classe...",value:g,onChange:q=>b(q.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs($e,{value:h,onValueChange:j,children:[a.jsxs(Me,{className:"w-full md:w-48 h-12 rounded-xl",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),a.jsx(De,{placeholder:"Statut"})]}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les statuts"}),a.jsx(H,{value:"En attente",children:"En attente"}),a.jsx(H,{value:"En cours de traitement",children:"En cours de traitement"}),a.jsx(H,{value:"En attente de paiement",children:"En attente de paiement"}),a.jsx(H,{value:"Paye",children:"Paye"}),a.jsx(H,{value:"Valide",children:"Valide"}),a.jsx(H,{value:"Inscrit",children:"Inscrit"}),a.jsx(H,{value:"Refuse",children:"Refuse"})]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:Be.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Mx,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune inscription trouve"})]}):Be.map(q=>{var oe,Oe,_e;return a.jsx("div",{className:"p-6 hover:bg-amber-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(ft,{className:"w-7 h-7 text-blue-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg",children:[q.nom," ",q.prenom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-sm text-gray-500",children:[a.jsx("span",{children:q.classe}),q.date_naissance&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:je(new Date(q.date_naissance),"dd/MM/yyyy")})]}),q.adresse&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Rt,{className:"w-3 h-3"}),q.adresse]})]})]}),q.tuteur&&a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Tuteur: ",q.tuteur.prenom," ",q.tuteur.nom,"  ",q.tuteur.telephone||q.tuteur.email]}),q.bus&&a.jsxs("p",{className:"text-sm text-blue-600 mt-1 flex items-center gap-1",children:[a.jsx(tt,{className:"w-3 h-3"}),"Bus: ",q.bus.numero]}),q.inscription&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Inscription du ",je(new Date(q.inscription.date_inscription),"dd/MM/yyyy")," ",q.inscription.montant_mensuel," DH/mois"]}),((oe=q.demande_inscription)==null?void 0:oe.montant_facture)&&(()=>{try{const Ce=typeof q.demande_inscription.description=="string"?JSON.parse(q.demande_inscription.description):q.demande_inscription.description||{},Fe=Ce.taux_reduction||0,ye=Ce.montant_avant_reduction,Re=Ce.montant_reduction||0;return Fe>0&&ye?a.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[a.jsxs("span",{className:"text-xs font-medium text-green-700 bg-green-50 px-2 py-1 rounded-lg border border-green-200",children:["Rduction ",Math.round(Fe*100),"%"]}),a.jsxs("span",{className:"text-xs text-gray-500 line-through",children:[parseFloat(ye).toFixed(2)," DH"]}),a.jsxs("span",{className:"text-xs font-bold text-amber-600",children:[" ",parseFloat(q.demande_inscription.montant_facture).toFixed(2)," DH"]})]}):null}catch{return null}})(),((Oe=q.demande_inscription)==null?void 0:Oe.code_verification)&&(q.statut_demande==="En attente de paiement"||q.statut_demande==="Paye"||q.statut_demande==="Valide"||q.statut_demande==="Inscrit")&&a.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Code de vrification:"}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-amber-100 text-amber-800 rounded-lg border border-amber-200",children:[a.jsx("span",{className:"font-mono font-bold text-sm",children:q.demande_inscription.code_verification}),a.jsx("button",{onClick:()=>U(q.demande_inscription.code_verification,q.id),className:"p-1 hover:bg-amber-200 rounded transition-colors",title:"Copier le code",children:R===q.id?a.jsx(Bs,{className:"w-3 h-3 text-green-600"}):a.jsx(Sw,{className:"w-3 h-3 text-amber-700"})})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsx("span",{className:`px-4 py-2 rounded-xl text-sm font-medium ${K(q.statut_demande||"En attente")}`,children:q.statut_demande||"En attente"}),a.jsxs(te,{variant:"outline",onClick:()=>{var Ce;if(y(q),(q.statut_demande==="En attente"||q.statut_demande==="En cours de traitement")&&!q.inscription){let Fe="Mensuel";if((Ce=q.demande_inscription)!=null&&Ce.description)try{Fe=(typeof q.demande_inscription.description=="string"?JSON.parse(q.demande_inscription.description):q.demande_inscription.description).abonnement||"Mensuel"}catch(rt){console.warn("Erreur parsing description:",rt)}const{dateDebut:ye,dateFin:Re}=I(Fe);F({date_debut:ye,date_fin:Re})}v(!0)},className:"rounded-xl",children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"Dtails"]}),(q.statut_demande==="En attente"||q.statut_demande==="En cours de traitement")&&!q.inscription&&a.jsxs(a.Fragment,{children:[a.jsxs(te,{onClick:()=>X(q),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Valider"]}),a.jsxs(te,{onClick:()=>{const Ce=prompt("Motif du refus:");Ce&&W(q,Ce)},className:"bg-red-500 hover:bg-red-600 text-white rounded-xl",children:[a.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Refuser"]})]}),q.statut_demande==="Paye"&&!((_e=q.inscription)!=null&&_e.bus_id)&&a.jsxs(te,{onClick:()=>de(q),className:"bg-amber-500 hover:bg-amber-600 text-white rounded-xl",children:[a.jsx(tt,{className:"w-4 h-4 mr-2"}),"Affecter un bus"]})]})]})},q.id)})})]}),w&&p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[a.jsx(_a,{className:"w-5 h-5"}),"Dtails de l'inscription"]}),a.jsxs("p",{className:"text-gray-500 mt-1",children:[p.prenom," ",p.nom]})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-blue-500"}),"Informations de l'lve"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("p",{className:"text-gray-800",children:p.nom})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Prnom"}),a.jsx("p",{className:"text-gray-800",children:p.prenom})]}),p.date_naissance&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de naissance"}),a.jsx("p",{className:"text-gray-800",children:je(new Date(p.date_naissance),"dd/MM/yyyy",{locale:Xt})})]}),p.classe&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Classe"}),a.jsx("p",{className:"text-gray-800",children:p.classe})]}),p.adresse&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-1",children:[a.jsx(Rt,{className:"w-4 h-4"}),"Adresse"]}),a.jsx("p",{className:"text-gray-800",children:p.adresse})]}),((J=p.demande_inscription)==null?void 0:J.zone_geographique)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Zone gographique"}),a.jsx("p",{className:"text-gray-800",children:p.demande_inscription.zone_geographique})]})]})]}),p.tuteur&&a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5 text-green-500"}),"Informations du tuteur"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nom"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.nom})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Prnom"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.prenom})]}),p.tuteur.telephone&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Tlphone"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.telephone})]}),p.tuteur.email&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Email"}),a.jsx("p",{className:"text-gray-800",children:p.tuteur.email})]})]})]}),p.demande_inscription&&(()=>{let q={};try{q=typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{}}catch(oe){console.warn("Erreur parsing description:",oe)}return a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ya,{className:"w-5 h-5 text-amber-500"}),"Informations de l'inscription"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[q.type_transport&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de transport"}),a.jsx("p",{className:"text-gray-800",children:q.type_transport})]}),q.abonnement&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type d'abonnement"}),a.jsx("p",{className:"text-gray-800 font-semibold",children:q.abonnement})]}),q.groupe&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Groupe horaire"}),a.jsx("p",{className:"text-gray-800",children:q.groupe})]}),q.niveau&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Niveau"}),a.jsx("p",{className:"text-gray-800",children:q.niveau})]}),q.lien_parente&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Lien de parent"}),a.jsx("p",{className:"text-gray-800",children:q.lien_parente})]}),p.demande_inscription.date_creation&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de la demande"}),a.jsx("p",{className:"text-gray-800",children:je(new Date(p.demande_inscription.date_creation),"dd/MM/yyyy  HH:mm",{locale:Xt})})]}),p.demande_inscription.code_verification&&(p.statut_demande==="En attente de paiement"||p.statut_demande==="Paye"||p.statut_demande==="Valide"||p.statut_demande==="Inscrit")&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Code de vrification du paiement"}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"flex-1 px-4 py-3 bg-amber-50 border-2 border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Code  donner au tuteur pour valider le paiement:"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono font-bold text-xl text-amber-800",children:p.demande_inscription.code_verification}),a.jsx("button",{onClick:()=>U(p.demande_inscription.code_verification,p.id),className:"p-2 hover:bg-amber-100 rounded-lg transition-colors",title:"Copier le code",children:R===p.id?a.jsx(Bs,{className:"w-5 h-5 text-green-600"}):a.jsx(Sw,{className:"w-5 h-5 text-amber-700"})})]}),R===p.id&&a.jsx("p",{className:"text-xs text-green-600 mt-1",children:" Code copi dans le presse-papiers"})]})})]}),p.demande_inscription.montant_facture&&(()=>{try{const oe=typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{},Oe=oe.montant_avant_reduction,_e=oe.taux_reduction||0,Ce=oe.montant_reduction||0,Fe=parseFloat(p.demande_inscription.montant_facture);return _e>0&&Oe?a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Dtails de la facture"}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 space-y-2 border border-gray-200",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Prix initial:"}),a.jsxs("span",{className:"text-sm text-gray-400 line-through",children:[parseFloat(Oe).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium text-green-600",children:["Rduction (",Math.round(_e*100),"%):"]}),a.jsxs("span",{className:"text-sm font-medium text-green-600",children:["-",parseFloat(Ce).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]}),a.jsxs("div",{className:"border-t border-gray-300 pt-2 flex justify-between items-center",children:[a.jsx("span",{className:"text-base font-semibold text-gray-800",children:"Prix final  payer:"}),a.jsxs("span",{className:"text-xl font-bold text-amber-600",children:[Fe.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})]})]}):a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Montant de la facture"}),a.jsxs("p",{className:"text-gray-800 font-semibold text-lg",children:[Fe.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}catch{return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Montant de la facture"}),a.jsxs("p",{className:"text-gray-800 font-semibold text-lg",children:[parseFloat(p.demande_inscription.montant_facture).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}})()]})]})})(),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(tt,{className:"w-5 h-5 text-blue-500"}),"Bus disponibles pour cette zone"]}),C&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl text-red-700 text-sm",children:C}),_.length===0?a.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4",children:[a.jsxs("p",{className:"text-sm text-yellow-800 font-medium mb-2",children:[' Aucun bus disponible pour la zone "',((D=p.demande_inscription)==null?void 0:D.zone_geographique)||p.zone||"non spcifie",'"']}),a.jsx("p",{className:"text-xs text-yellow-700 mb-3",children:"Vrifiez que des trajets couvrent cette zone et que des bus actifs y sont assigns avant de valider l'inscription."}),A&&a.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg border border-yellow-300",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Informations de diagnostic:"}),a.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[a.jsxs("li",{children:[" Total bus actifs: ",A.total_bus_actifs]}),a.jsxs("li",{children:[" Bus sans trajet assign: ",A.bus_sans_trajet]}),a.jsxs("li",{children:[" Trajets sans zones dfinies: ",A.bus_trajets_vides]}),a.jsxs("li",{children:[" Bus avec zones ne correspondant pas: ",A.bus_zones_non_match]}),A.bus_pleins>0&&a.jsxs("li",{children:[" Bus trouvs mais pleins (pas de places): ",A.bus_pleins]})]}),A.exemples_trajets_zones&&A.exemples_trajets_zones.length>0&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-yellow-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Exemples de zones dans les trajets:"}),A.exemples_trajets_zones.map((q,oe)=>a.jsxs("div",{className:"text-xs text-gray-600 mb-2 p-2 bg-gray-50 rounded",children:[a.jsxs("p",{className:"font-medium",children:["Bus ",q.bus_numero," - ",q.trajet_nom,":"]}),a.jsxs("p",{className:"text-gray-500",children:["Zones: ",Array.isArray(q.zones)?q.zones.join(", "):q.zones]}),a.jsxs("p",{className:"text-gray-500",children:["Places restantes: ",q.places_restantes]})]},oe))]})]})]}):a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200",children:[a.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Zone de l'lve: ",a.jsx("span",{className:"font-bold",children:((Y=p.demande_inscription)==null?void 0:Y.zone_geographique)||p.zone||"Non spcifie"})]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[_.length," bus disponible(s) pour cette zone (donnes relles de la base de donnes)"]})]}),_.map(q=>{var Oe;let oe=[];if(q.trajet_zones)try{const _e=JSON.parse(q.trajet_zones);oe=Array.isArray(_e)?_e:[q.trajet_zones]}catch{oe=typeof q.trajet_zones=="string"?q.trajet_zones.split(",").map(_e=>_e.trim()):[]}return a.jsx("div",{className:"p-4 rounded-2xl border-2 border-gray-200 hover:border-blue-300 transition-colors bg-white",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:q.numero}),q.statut==="Actif"&&a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-lg",children:"Actif"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Marque/Modle:"})," ",q.marque||"N/A"," ",q.modele||""]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[a.jsx("span",{className:"font-medium",children:"Plaque:"})," ",q.plaque||"N/A"]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Trajet:"})," ",((Oe=q.trajet)==null?void 0:Oe.nom)||q.trajet_nom||"Non assign"]}),oe.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Zones couvertes:"}),oe.map((_e,Ce)=>{var Fe;return a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${_e.trim().toLowerCase()===(((Fe=p==null?void 0:p.demande_inscription)==null?void 0:Fe.zone_geographique)||(p==null?void 0:p.zone)||"").toLowerCase()?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-600"}`,children:_e.trim()},Ce)})]}),a.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm",children:[a.jsxs("span",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"Capacit:"})," ",q.capacite||"N/A"," places"]}),a.jsxs("span",{className:"text-gray-600",children:[a.jsx("span",{className:"font-medium",children:"lves inscrits:"})," ",q.elevesInscrits||q.eleves_inscrits||0]})]})]}),a.jsxs("div",{className:"text-right ml-4",children:[a.jsx("p",{className:`text-3xl font-bold ${(q.placesRestantes||q.places_restantes||0)>5?"text-green-600":(q.placesRestantes||q.places_restantes||0)>0?"text-orange-500":"text-red-500"}`,children:q.placesRestantes||q.places_restantes||0}),a.jsx("p",{className:"text-xs text-gray-500",children:"places restantes"})]})]})},q.id)})]})]}),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx(ct,{className:"w-5 h-5 text-green-500"}),"Valider l'inscription"]}),_.length===0&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-2 border-red-200 rounded-xl",children:[a.jsx("p",{className:"text-sm text-red-800 font-medium mb-1",children:" Validation impossible"}),a.jsxs("p",{className:"text-xs text-red-700",children:[`Vous ne pouvez pas valider cette inscription car aucun bus n'est disponible pour la zone "`,((G=p.demande_inscription)==null?void 0:G.zone_geographique)||p.zone||"non spcifie",`". Veuillez d'abord crer un trajet couvrant cette zone et y affecter un bus actif.`]})]}),_.length>0&&a.jsx("div",{className:"mb-4 p-4 bg-green-50 border-2 border-green-200 rounded-xl",children:a.jsxs("p",{className:"text-sm text-green-800 font-medium",children:[" ",_.length," bus disponible(s) pour cette zone. Vous pouvez valider l'inscription."]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jr,{className:"w-4 h-4 inline mr-1"}),"Date de dbut"]}),a.jsx(le,{type:"date",value:M.date_debut,disabled:!0,className:"rounded-xl bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Date automatique (date courante)"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Jr,{className:"w-4 h-4 inline mr-1"}),"Date de fin"]}),a.jsx(le,{type:"date",value:M.date_fin,disabled:!0,className:"rounded-xl bg-gray-50 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:(()=>{var oe;let q="Mensuel";if((oe=p.demande_inscription)!=null&&oe.description)try{q=(typeof p.demande_inscription.description=="string"?JSON.parse(p.demande_inscription.description):p.demande_inscription.description||{}).abonnement||"Mensuel"}catch{}return q==="Annuel"?"Date automatique (30/06/2026 pour abonnement annuel)":"Date automatique (date de dbut + 1 mois pour abonnement mensuel)"})()})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex gap-3 justify-end",children:[a.jsx(te,{variant:"outline",onClick:()=>{v(!1),y(null)},className:"rounded-xl",children:"Fermer"}),(p.statut_demande==="En attente"||p.statut_demande==="En cours de traitement")&&!p.inscription&&a.jsxs(te,{onClick:re,disabled:_.length===0,className:`rounded-xl ${_.length===0?"bg-gray-400 hover:bg-gray-400 cursor-not-allowed opacity-60":"bg-green-500 hover:bg-green-600"} text-white`,title:_.length===0?"Aucun bus disponible pour cette zone. Impossible de valider l'inscription.":"",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Valider l'inscription"]})]})]})}),x&&p&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Affectation de bus"}),a.jsxs("div",{className:"mt-2 space-y-1",children:[a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Nom:"})," ",p.nom]}),a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Prnom:"})," ",p.prenom]}),((ie=p.demande_inscription)==null?void 0:ie.zone_geographique)&&a.jsxs("p",{className:"text-gray-700",children:[a.jsx("span",{className:"font-medium",children:"Zone:"})," ",p.demande_inscription.zone_geographique]}),p.adresse&&a.jsxs("p",{className:"text-gray-700 flex items-center gap-1",children:[a.jsx(Rt,{className:"w-4 h-4"}),a.jsx("span",{className:"font-medium",children:"Adresse:"})," ",p.adresse]})]})]}),a.jsx("div",{className:"p-6",children:_.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-400",children:[a.jsx(tt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"font-semibold text-gray-600",children:"Aucun bus disponible"}),a.jsxs("p",{className:"text-sm mt-1",children:[`Aucun bus avec des places disponibles n'est assign  un trajet couvrant la zone "`,((pe=p==null?void 0:p.demande_inscription)==null?void 0:pe.zone_geographique)||(p==null?void 0:p.zone)||"inconnue",'"']}),a.jsx("p",{className:"text-xs mt-2 text-gray-500",children:"Vrifiez que des trajets couvrent cette zone et que des bus actifs y sont assigns"})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-3 border border-blue-200 mb-4",children:[a.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Zone de l'lve: ",a.jsx("span",{className:"font-bold",children:((xe=p==null?void 0:p.demande_inscription)==null?void 0:xe.zone_geographique)||(p==null?void 0:p.zone)||"Non spcifie"})]}),a.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Seuls les bus dont le trajet couvre cette zone sont affichs"})]}),a.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[_.length," bus disponible(s) pour cette zone:"]}),_.map(q=>{var Oe;let oe=[];if(q.trajet_zones)try{const _e=JSON.parse(q.trajet_zones);oe=Array.isArray(_e)?_e:[q.trajet_zones]}catch{oe=q.trajet_zones.split(",").map(_e=>_e.trim())}return a.jsx("div",{className:"p-4 rounded-2xl border-2 border-gray-100 hover:border-amber-200 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:q.numero}),a.jsxs("p",{className:"text-sm text-gray-400",children:["Trajet: ",((Oe=q.trajet)==null?void 0:Oe.nom)||q.trajet_nom||"Non assign"]}),oe.length>0&&a.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Zones couvertes:"}),oe.map((_e,Ce)=>{var Fe;return a.jsx("span",{className:`text-xs px-2 py-1 rounded-lg ${_e.trim().toLowerCase()===(((Fe=p==null?void 0:p.demande_inscription)==null?void 0:Fe.zone_geographique)||(p==null?void 0:p.zone)||"").toLowerCase()?"bg-green-100 text-green-700 font-medium":"bg-gray-100 text-gray-600"}`,children:_e.trim()},Ce)})]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Capacit: ",q.elevesInscrits||q.eleves_inscrits||0,"/",q.capacite]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:`text-2xl font-bold ${(q.placesRestantes||q.places_restantes||0)>5?"text-green-500":"text-orange-500"}`,children:q.placesRestantes||q.places_restantes||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"places restantes"}),a.jsx(te,{onClick:()=>Ae(q.id),className:"mt-2 bg-amber-500 hover:bg-amber-600 text-white rounded-xl",size:"sm",children:"Affecter"})]})]})},q.id)})]})}),a.jsx("div",{className:"p-6 border-t border-gray-100 flex justify-end",children:a.jsx(te,{variant:"outline",onClick:()=>{S(!1),y(null)},className:"rounded-xl",children:"Fermer"})})]})})]})}function Que(){const e=at(),[t,r]=N.useState(!0),[n,s]=N.useState(je(Vo(new Date,1),"yyyy-MM-dd")),[i,o]=N.useState(je(new Date,"yyyy-MM-dd")),[l,c]=N.useState("mois"),[u,f]=N.useState("all"),[d,m]=N.useState("all"),[g,b]=N.useState("all"),[h,j]=N.useState({eleves:[],presences:[],paiements:[],accidents:[],inscriptions:[],buses:[],demandes:[],signalements:[],essence:[],tuteurs:[]}),p=["#F59E0B","#3B82F6","#10B981","#EF4444","#8B5CF6","#EC4899"];N.useEffect(()=>{S();const D=setInterval(S,3e4);return()=>clearInterval(D)},[]);const[y,x]=N.useState(!0);N.useEffect(()=>{if(y){x(!1);return}if(n&&i){const D=setTimeout(()=>{S()},500);return()=>clearTimeout(D)}},[n,i]),N.useEffect(()=>{const D=new Date;switch(l){case"aujourdhui":s(je(D,"yyyy-MM-dd")),o(je(D,"yyyy-MM-dd"));break;case"hier":s(je(Xs(D,1),"yyyy-MM-dd")),o(je(Xs(D,1),"yyyy-MM-dd"));break;case"semaine":s(je(AR(D),"yyyy-MM-dd")),o(je(D,"yyyy-MM-dd"));break;case"mois":s(je(Vo(D,1),"yyyy-MM-dd")),o(je(D,"yyyy-MM-dd"));break;case"annee":s(je(PR(D),"yyyy-MM-dd")),o(je(D,"yyyy-MM-dd"));break}},[l]);const S=async()=>{var D,Y,G,ie,pe,xe,q,oe,Oe;r(!0);try{const[_e,Ce,Fe,ye,Re,rt,ht,et,Ke]=await Promise.allSettled([Yt.getAll(),Fo.getAll(),vn.getAll(),Pr.getAll(),jn.getAll(),cr.getAll(),ri.getAll(),da.getAll(),Oc.getAll()]),Ye=_e.status==="fulfilled"?((D=_e.value)==null?void 0:D.data)||_e.value||[]:[],kt=Ce.status==="fulfilled"?((Y=Ce.value)==null?void 0:Y.data)||Ce.value||[]:[],Ft=Fe.status==="fulfilled"?((G=Fe.value)==null?void 0:G.data)||Fe.value||[]:[],ze=ye.status==="fulfilled"?((ie=ye.value)==null?void 0:ie.data)||ye.value||[]:[],Nt=Re.status==="fulfilled"?((pe=Re.value)==null?void 0:pe.data)||Re.value||[]:[],Qe=rt.status==="fulfilled"?((xe=rt.value)==null?void 0:xe.data)||rt.value||[]:[],Qt=ht.status==="fulfilled"?((q=ht.value)==null?void 0:q.data)||ht.value||[]:[],Vr=et.status==="fulfilled"?((oe=et.value)==null?void 0:oe.data)||et.value||[]:[],Ur=Ke.status==="fulfilled"?((Oe=Ke.value)==null?void 0:Oe.data)||Ke.value||[]:[],Mt=Array.isArray(Qe)?Qe.filter(E=>E.type_demande==="inscription"):[],Oa=Array.isArray(Ye)?Ye.filter(E=>{const Q=Array.isArray(Mt)?Mt.filter(Ne=>Ne.eleve_id===E.id).sort((Ne,ve)=>new Date(ve.date_creation||0)-new Date(Ne.date_creation||0))[0]:null;return(Q==null?void 0:Q.statut)==="Refuse"?!1:(Array.isArray(Nt)?Nt.find(Ne=>Ne.eleve_id===E.id&&Ne.statut==="Active"):null)!==null||Q&&["Inscrit","Valide","Paye","En attente de paiement","En cours de traitement"].includes(Q.statut)}):[],gt=Array.isArray(kt)?kt:[],Ht=Array.isArray(Mt)?Mt.filter(E=>E.statut==="Paye"&&E.montant_facture).map(E=>{let Q=E.date_traitement||E.date_creation;return Q?typeof Q=="string"&&Q.includes(" ")&&(Q=Q.split(" ")[0]):Q=new Date().toISOString().split("T")[0],{id:`demande_${E.id}`,montant:parseFloat(E.montant_facture)||0,date_paiement:Q,statut:"Pay",type_paiement:"initial"}}):[],en=[...gt,...Ht];let Ta=[];try{const E=new Date(n),Q=new Date(i),he=[];for(let Ne=new Date(E);Ne<=Q;Ne.setDate(Ne.getDate()+1)){const ve=je(Ne,"yyyy-MM-dd");he.push(ua.getByDate(ve).catch(()=>({data:[]})))}Ta=(await Promise.allSettled(he)).filter(Ne=>Ne.status==="fulfilled").flatMap(Ne=>{var ue;const ve=((ue=Ne.value)==null?void 0:ue.data)||Ne.value||[];return Array.isArray(ve)?ve:[]})}catch(E){console.warn("Prsences non disponibles:",E)}j({eleves:Oa,presences:Ta,paiements:en,accidents:Ft,inscriptions:Nt,buses:ze,demandes:Qe,tuteurs:Qt,signalements:Array.isArray(Vr)?Vr:[],essence:Array.isArray(Ur)?Ur:[]})}catch(_e){console.error("Erreur lors du chargement des statistiques:",_e),j({eleves:[],presences:[],paiements:[],accidents:[],inscriptions:[],buses:[],demandes:[],tuteurs:[],signalements:[],essence:[]})}finally{r(!1)}},w=(D,Y="date")=>D.filter(G=>{const ie=G[Y]||G.date_creation;if(!ie)return!1;const pe=new Date(ie);return pe>=new Date(n)&&pe<=new Date(i+"T23:59:59")}),v=["1AP","2AP","3AP","4AP","5AP","6AP","1AC","2AC","3AC","TC","1BAC","2BAC"],_=["Primaire","Collge","Lyce"],P=D=>{const Y=(D||"").toUpperCase();return["1AP","2AP","3AP","4AP","5AP","6AP"].includes(Y)?"Primaire":["1AC","2AC","3AC"].includes(Y)?"Collge":["TC","1BAC","2BAC"].includes(Y)?"Lyce":null},C=h.eleves.filter(D=>{var q;const Y=h.inscriptions.find(oe=>oe.eleve_id===D.id),G=u==="all"||((q=Y==null?void 0:Y.bus_id)==null?void 0:q.toString())===u,ie=d==="all"||D.classe&&D.classe.toUpperCase()===d.toUpperCase(),pe=P(D.classe);return G&&ie&&(g==="all"||pe===g)}),A=(D=>D.filter(Y=>{var Oe;const G=h.eleves.find(_e=>_e.id===Y.eleve_id);if(!G)return!0;const ie=h.inscriptions.find(_e=>_e.eleve_id===G.id),pe=u==="all"||((Oe=ie==null?void 0:ie.bus_id)==null?void 0:Oe.toString())===u,xe=d==="all"||G.classe&&G.classe.toUpperCase()===d.toUpperCase(),q=P(G.classe);return pe&&xe&&(g==="all"||q===g)}))(w(h.presences)),T=w(h.paiements,"date_paiement"),O=w(h.accidents,"date"),L=w(h.inscriptions,"date_inscription"),M=T.filter(D=>D.statut==="Pay").reduce((D,Y)=>D+(parseFloat(Y.montant)||0),0),F=A.filter(D=>!D.present_matin).length,R=A.filter(D=>!D.present_soir).length,B=A.filter(D=>D.present_matin).length,z=A.filter(D=>D.present_soir).length,I=C.filter(D=>{const Y=(D.classe||"").toUpperCase();return["1AP","2AP","3AP","4AP","5AP","6AP"].includes(Y)}).length,X=C.filter(D=>{const Y=(D.classe||"").toUpperCase();return["1AC","2AC","3AC"].includes(Y)}).length,re=C.filter(D=>{const Y=(D.classe||"").toUpperCase();return["TC","1BAC","2BAC"].includes(Y)}).length,W={};A.forEach(D=>{(!D.present_matin||!D.present_soir)&&(W[D.eleve_id]=(W[D.eleve_id]||0)+(D.present_matin?0:1)+(D.present_soir?0:1))});const de=Object.entries(W).sort(([,D],[,Y])=>Y-D).slice(0,5).map(([D,Y])=>{const G=h.eleves.find(ie=>ie.id===parseInt(D));return{name:G?`${G.prenom} ${G.nom}`:"Inconnu",absences:Y}}),Ae={};A.forEach(D=>{(D.present_matin||D.present_soir)&&(Ae[D.eleve_id]=(Ae[D.eleve_id]||0)+(D.present_matin?1:0)+(D.present_soir?1:0))});const Be=Object.entries(Ae).sort(([,D],[,Y])=>Y-D).slice(0,5).map(([D,Y])=>{const G=C.find(ie=>ie.id===parseInt(D));return{name:G?`${G.prenom} ${G.nom}`:"Inconnu",presences:Y}}),K=[{name:"Primaire",value:I},{name:"Collge",value:X},{name:"Lyce",value:re}],U=[{name:"Matin",Prsents:B,Absents:F},{name:"Soir",Prsents:z,Absents:R}],J={};return C.forEach(D=>{if(D.tuteur_id){const Y=D.tuteur_id;J[Y]=(J[Y]||0)+1}}),Object.entries(J).sort(([,D],[,Y])=>Y-D).slice(0,5).map(([D,Y])=>{const G=Array.isArray(h.tuteurs)?h.tuteurs.find(ie=>ie.id===parseInt(D)):null;return{name:G&&`${G.prenom||""} ${G.nom||""}`.trim()||"Inconnu",inscriptions:Y}}),t?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Statistiques",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 mb-6",children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2 mb-6",children:[a.jsx(el,{className:"w-7 h-7 text-indigo-500"}),"Statistiques & Historiques"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Priode"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"aujourdhui",children:"Aujourd'hui"}),a.jsx(H,{value:"hier",children:"Hier"}),a.jsx(H,{value:"semaine",children:"Semaine dernire"}),a.jsx(H,{value:"mois",children:"Mois dernier"}),a.jsx(H,{value:"annee",children:"Anne dernire"}),a.jsx(H,{value:"custom",children:"Personnalis"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4 text-gray-400"}),a.jsx(le,{type:"date",value:n,onChange:D=>{s(D.target.value),c("custom")},className:"rounded-xl"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-400",children:""}),a.jsx(le,{type:"date",value:i,onChange:D=>{o(D.target.value),c("custom")},className:"rounded-xl"})]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Bus"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les bus"}),h.buses.map(D=>a.jsx(H,{value:D.id.toString(),children:D.numero},D.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mt-4",children:[a.jsxs($e,{value:g,onValueChange:b,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Niveau"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les niveaux"}),_.map(D=>a.jsx(H,{value:D,children:D},D))]})]}),a.jsxs($e,{value:d,onValueChange:m,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{placeholder:"Classe"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les classes"}),v.map(D=>a.jsx(H,{value:D,children:D},D))]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:a.jsx(zt,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total lves"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:C.length})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(Ar,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Paiements"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:T.filter(D=>D.statut==="Pay").length}),a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:a.jsx(qe,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Accidents"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:O.length})]})]})}),a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center",children:a.jsx(lu,{className:"w-6 h-6 text-amber-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Inscriptions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:L.length})]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Prsences vs Absences"}),a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(zc,{data:U,children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Us,{dataKey:"name"}),a.jsx(Ws,{allowDecimals:!1}),a.jsx(qr,{}),a.jsx(wa,{}),a.jsx(on,{dataKey:"Prsents",fill:"#10B981"}),a.jsx(on,{dataKey:"Absents",fill:"#EF4444"})]})})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Rpartition par Niveau"}),a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(Oue,{children:[a.jsx(ds,{data:K,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,dataKey:"value",label:({name:D,value:Y})=>`${D}: ${Y}`,children:K.map((D,Y)=>a.jsx(Gh,{fill:p[Y%p.length]},`cell-${Y}`))}),a.jsx(qr,{}),a.jsx(wa,{})]})})})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"lves les plus absents"}),de.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Aucune absence enregistre"}):a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(zc,{data:de,layout:"vertical",children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Us,{type:"number",allowDecimals:!1}),a.jsx(Ws,{dataKey:"name",type:"category",width:100}),a.jsx(qr,{}),a.jsx(on,{dataKey:"absences",fill:"#EF4444"})]})})})]})]}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"lves les plus prsents"}),Be.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"Aucune prsence enregistre"}):a.jsx("div",{className:"h-64",children:a.jsx(Eo,{width:"100%",height:"100%",children:a.jsxs(zc,{data:Be,layout:"vertical",children:[a.jsx(qo,{strokeDasharray:"3 3"}),a.jsx(Us,{type:"number",allowDecimals:!1}),a.jsx(Ws,{dataKey:"name",type:"category",width:100}),a.jsx(qr,{}),a.jsx(on,{dataKey:"presences",fill:"#10B981"})]})})})]})]})]})}function ede(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState(!0),[d,m]=N.useState(null),[g,b]=N.useState(""),[h,j]=N.useState("all"),[p,y]=N.useState(""),[x,S]=N.useState(null),[w,v]=N.useState(!1),[_,P]=N.useState(!1),[C,$]=N.useState({montant:"",mois:"",annee:"",date_paiement:"",mode_paiement:"Espces"}),[A,T]=N.useState(!1);N.useEffect(()=>{O()},[]);const O=async()=>{f(!0),m(null);try{const[W,de,Ae,Be]=await Promise.all([Fo.getAll(),Yt.getAll(),ri.getAll(),jn.getAll()]),K=(W==null?void 0:W.data)||W||[],U=(de==null?void 0:de.data)||de||[],J=(Ae==null?void 0:Ae.data)||Ae||[],D=(Be==null?void 0:Be.data)||Be||[],Y=Array.isArray(K)?K.filter(G=>G.type_paiement==="mensuel"||!G.type_paiement).map(G=>{const ie=Array.isArray(D)?D.find(q=>q.id===G.inscription_id):null,pe=ie&&Array.isArray(U)?U.find(q=>q.id===ie.eleve_id):null,xe=pe&&Array.isArray(J)?J.find(q=>q.id===pe.tuteur_id):null;return{...G,montant:parseFloat(G.montant)||0,eleve:pe,tuteur:xe,inscription:ie,type_paiement:"mensuel"}}):[];Y.sort((G,ie)=>{const pe=new Date(G.date_paiement||0);return new Date(ie.date_paiement||0)-pe}),r(Y),s(Array.isArray(U)?U:[]),o(Array.isArray(J)?J:[]),c(Array.isArray(D)?D:[])}catch(W){console.error("Erreur lors du chargement des paiements:",W),m("Erreur lors du chargement des paiements. Veuillez ressayer."),r([]),s([]),o([]),c([])}finally{f(!1)}},L=t.filter(W=>{var K,U,J,D,Y,G,ie,pe,xe;const de=g===""||((U=(K=W.eleve)==null?void 0:K.nom)==null?void 0:U.toLowerCase().includes(g.toLowerCase()))||((D=(J=W.eleve)==null?void 0:J.prenom)==null?void 0:D.toLowerCase().includes(g.toLowerCase()))||((G=(Y=W.tuteur)==null?void 0:Y.nom)==null?void 0:G.toLowerCase().includes(g.toLowerCase()))||((pe=(ie=W.tuteur)==null?void 0:ie.prenom)==null?void 0:pe.toLowerCase().includes(g.toLowerCase())),Ae=h==="all"||W.statut===h,Be=!p||((xe=W.date_paiement)==null?void 0:xe.startsWith(p));return de&&Ae&&Be}),M=L.filter(W=>W.statut==="Pay").reduce((W,de)=>W+(parseFloat(de.montant)||0),0),F=W=>({"En attente":"bg-yellow-100 text-yellow-700",Pay:"bg-green-100 text-green-700",chou:"bg-red-100 text-red-700"})[W]||"bg-gray-100 text-gray-700",R=W=>({Espces:"bg-blue-100 text-blue-700",Virement:"bg-purple-100 text-purple-700","Carte bancaire":"bg-teal-100 text-teal-700",Chque:"bg-orange-100 text-orange-700"})[W]||"bg-gray-100 text-gray-700",B=W=>{if(!W)return"";try{const de=new Date(W);return isNaN(de.getTime())?W:je(de,"dd MMM yyyy",{locale:Xt})}catch(de){return console.error("Erreur de formatage de date:",de),W}},z=W=>{S(W),$({montant:W.montant||"",mois:W.mois||"",annee:W.annee||"",date_paiement:W.date_paiement?W.date_paiement.split("T")[0]:"",mode_paiement:W.mode_paiement||"Espces"}),v(!0)},I=W=>{S(W),P(!0)},X=async()=>{if(x){T(!0),m(null);try{const W=await Fo.update(x.id,C);W.success?(v(!1),S(null),await O()):m(W.message||"Erreur lors de la mise  jour du paiement")}catch(W){console.error("Erreur lors de la mise  jour:",W),m("Erreur lors de la mise  jour du paiement. Veuillez ressayer.")}finally{T(!1)}}},re=async()=>{if(x){T(!0),m(null);try{const W=await Fo.delete(x.id);W.success?(P(!1),S(null),await O()):m(W.message||"Erreur lors de la suppression du paiement")}catch(W){console.error("Erreur lors de la suppression:",W),m("Erreur lors de la suppression du paiement. Veuillez ressayer.")}finally{T(!1)}}};return u?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des Paiements",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),d&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:d}),a.jsx("button",{onClick:()=>m(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-teal-500 to-cyan-500 rounded-3xl p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Total des paiements valids"}),a.jsxs("p",{className:"opacity-90",children:["Priode: ",p||"Tous"]})]}),a.jsxs("div",{className:"text-4xl font-bold mt-4 md:mt-0",children:[M.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]})]})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center gap-2 mb-4",children:[a.jsx(Ar,{className:"w-6 h-6 text-teal-500"}),"Historique des Paiements"]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Nv,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx(le,{placeholder:"Rechercher...",value:g,onChange:W=>b(W.target.value),className:"pl-10 h-12 rounded-xl"})]}),a.jsxs($e,{value:h,onValueChange:j,children:[a.jsx(Me,{className:"w-full md:w-40 h-12 rounded-xl",children:a.jsx(De,{placeholder:"Statut"})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous"}),a.jsx(H,{value:"Pay",children:"Pays"}),a.jsx(H,{value:"En attente",children:"En attente"}),a.jsx(H,{value:"chou",children:"chous"})]})]}),a.jsx(le,{type:"date",value:p,onChange:W=>y(W.target.value),className:"w-full md:w-48 h-12 rounded-xl"})]})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:L.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Ar,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucun paiement trouv"})]}):L.map(W=>a.jsx("div",{className:"p-6 hover:bg-teal-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-xl flex items-center justify-center",children:a.jsx(Ar,{className:"w-6 h-6 text-teal-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-800",children:W.eleve?`${W.eleve.nom} ${W.eleve.prenom}`:"lve inconnu"}),W.tuteur&&a.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[a.jsx(ft,{className:"w-3 h-3"}),"Tuteur: ",W.tuteur.prenom," ",W.tuteur.nom]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-sm",children:[a.jsx("span",{className:`px-2 py-1 rounded-lg ${R(W.mode_paiement)}`,children:W.mode_paiement}),W.mois&&W.annee&&a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-lg",children:[W.mois,"/",W.annee]})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row items-end md:items-center gap-4",children:[a.jsxs("div",{className:"text-right flex-1",children:[a.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[W.montant.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})," DH"]}),a.jsxs("span",{className:`inline-block mt-2 px-3 py-1 rounded-full text-sm font-medium ${F(W.statut)}`,children:[W.statut==="Pay"&&a.jsx(ct,{className:"w-3 h-3 inline mr-1"}),W.statut]}),a.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center justify-end gap-1",children:[a.jsx(Jr,{className:"w-3 h-3"}),B(W.date_paiement)]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(te,{onClick:()=>z(W),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-xl",size:"sm",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(te,{onClick:()=>I(W),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-xl",size:"sm",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})]})},W.id))})]}),w&&x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Modifier le paiement"}),a.jsx("button",{onClick:()=>{v(!1),S(null)},className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ze,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Montant (DH)"}),a.jsx(le,{type:"number",step:"0.01",value:C.montant,onChange:W=>$({...C,montant:W.target.value}),className:"mt-1"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{children:"Mois"}),a.jsx(le,{type:"number",min:"1",max:"12",value:C.mois,onChange:W=>$({...C,mois:W.target.value}),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Anne"}),a.jsx(le,{type:"number",min:"2020",max:"2100",value:C.annee,onChange:W=>$({...C,annee:W.target.value}),className:"mt-1"})]})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Date de paiement"}),a.jsx(le,{type:"date",value:C.date_paiement,onChange:W=>$({...C,date_paiement:W.target.value}),className:"mt-1"})]}),a.jsxs("div",{children:[a.jsx(ne,{children:"Mode de paiement"}),a.jsxs($e,{value:C.mode_paiement,onValueChange:W=>$({...C,mode_paiement:W}),children:[a.jsx(Me,{className:"mt-1",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"Espces",children:"Espces"}),a.jsx(H,{value:"Virement",children:"Virement"}),a.jsx(H,{value:"Carte bancaire",children:"Carte bancaire"}),a.jsx(H,{value:"Chque",children:"Chque"})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx(te,{onClick:()=>{v(!1),S(null)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800",disabled:A,children:"Annuler"}),a.jsx(te,{onClick:X,className:"flex-1 bg-teal-500 hover:bg-teal-600 text-white",disabled:A,children:A?"Enregistrement...":"Enregistrer"})]})]})}),_&&x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Confirmer la suppression"}),a.jsx("button",{onClick:()=>{P(!1),S(null)},className:"text-gray-400 hover:text-gray-600",disabled:A,children:a.jsx(Ze,{className:"w-5 h-5"})})]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["tes-vous sr de vouloir supprimer ce paiement de ",x.montant," DH ? Cette action est irrversible."]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{onClick:()=>{P(!1),S(null)},className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800",disabled:A,children:"Annuler"}),a.jsx(te,{onClick:re,className:"flex-1 bg-red-500 hover:bg-red-600 text-white",disabled:A,children:A?"Suppression...":"Supprimer"})]})]})})]})}function tde(){const e=at(),[t,r]=N.useState(!1),[n,s]=N.useState(!1),[i,o]=N.useState(""),[l,c]=N.useState(null),[u,f]=N.useState("");N.useEffect(()=>{const m=localStorage.getItem("admin_session");if(!m){e(ke("AdminLogin"));return}const g=JSON.parse(m);c(g),f(g.adresse||"")},[e]);const d=async m=>{m.preventDefault(),r(!0),o("");try{const b={...JSON.parse(localStorage.getItem("admin_session")),adresse:u};localStorage.setItem("admin_session",JSON.stringify(b)),c(b),s(!0),setTimeout(()=>s(!1),3e3)}catch(g){console.error("Erreur lors de la sauvegarde:",g),o("Erreur lors de la sauvegarde de l'adresse. Veuillez ressayer.")}r(!1)};return l?a.jsxs(Bt,{title:"Mon Profil",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-r from-amber-500 to-yellow-500",children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Di,{className:"w-7 h-7"}),"Mon Profil Administrateur"]}),a.jsx("p",{className:"text-amber-100 mt-1",children:"Informations personnelles (en lecture seule)"})]}),a.jsxs("div",{className:"p-6",children:[n&&a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-xl flex items-center gap-2 text-green-700",children:[a.jsx(ct,{className:"w-5 h-5"}),"Adresse mise  jour avec succs !"]}),i&&a.jsxs(ee.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-xl flex items-center gap-2 text-red-600",children:[a.jsx(qe,{className:"w-5 h-5"}),i]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Nom",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(le,{value:l.nom||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Prnom",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(le,{value:l.prenom||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Email",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(le,{type:"email",value:l.email||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{children:[a.jsxs(ne,{className:"text-gray-700 font-medium flex items-center gap-2",children:["Tlphone",a.jsx(Td,{className:"w-4 h-4 text-gray-400",title:"En lecture seule"})]}),a.jsx(le,{value:l.telephone||"",disabled:!0,className:"mt-1 h-12 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Ce champ ne peut pas tre modifi"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Adresse"}),a.jsx(le,{value:u,onChange:m=>f(m.target.value),placeholder:"Entrez votre adresse",className:"mt-1 h-12 rounded-xl"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Vous pouvez modifier votre adresse"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx(te,{type:"button",variant:"outline",onClick:()=>e(ke("AdminDashboard")),className:"rounded-xl",children:"Annuler"}),a.jsx(te,{type:"submit",disabled:t,className:"flex-1 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white rounded-xl font-semibold shadow-lg",children:t?a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(ts,{className:"w-5 h-5 mr-2"}),"Enregistrer l'adresse"]})})]})]})]})]})]}):a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})})}function rde(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState(null),[u,f]=N.useState(null),[d,m]=N.useState({show:!1,id:null}),g=["Rabat","Sal","Temara"],[b,h]=N.useState({nom:"",ville:"",description:"",actif:!0});N.useEffect(()=>{j()},[]);const j=async()=>{s(!0),f(null);try{const v=await Ps.getAll(),_=(v==null?void 0:v.data)||v||[];r(Array.isArray(_)?_:[])}catch(v){console.error("Erreur lors du chargement:",v),f("Erreur lors du chargement des zones")}finally{s(!1)}},p=async v=>{v.preventDefault(),f(null);try{l?await Ps.update({id:l.id,nom:b.nom,ville:b.ville,description:b.description,actif:b.actif}):await Ps.create({nom:b.nom,ville:b.ville,description:b.description,actif:b.actif}),w(),await j()}catch(_){console.error("Erreur lors de la sauvegarde:",_),f(_.message||"Erreur lors de la sauvegarde de la zone")}},y=async()=>{if(d.id)try{await Ps.delete(d.id),m({show:!1,id:null}),await j()}catch(v){console.error("Erreur lors de la suppression:",v),f(v.message||"Erreur lors de la suppression de la zone"),m({show:!1,id:null})}},x=v=>{m({show:!0,id:v})},S=v=>{c(v),h({nom:v.nom||"",ville:v.ville||"",description:v.description||"",actif:v.actif!==void 0?v.actif:!0}),o(!0)},w=()=>{h({nom:"",ville:"",description:"",actif:!0}),c(null),o(!1),f(null)};return n?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des Zones",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),u&&a.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[a.jsx("span",{children:u}),a.jsx("button",{onClick:()=>f(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-500 to-indigo-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx(Rt,{className:"w-7 h-7"}),"Gestion des Zones"]}),a.jsxs("p",{className:"text-blue-100 mt-1",children:[t.length," zone(s) au total"]})]}),a.jsxs(te,{onClick:()=>{w(),o(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(va,{className:"w-4 h-4 mr-2"}),"Ajouter une zone"]})]})}),i&&a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gray-50",children:a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Nom de la zone *"}),a.jsx(le,{value:b.nom,onChange:v=>h({...b,nom:v.target.value}),className:"mt-1 h-12 rounded-xl",required:!0})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Ville *"}),a.jsxs("select",{value:b.ville,onChange:v=>h({...b,ville:v.target.value}),className:"mt-1 h-12 rounded-xl w-full px-3 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Slectionner une ville"}),g.map(v=>a.jsx("option",{value:v,children:v},v))]})]})]}),a.jsxs("div",{children:[a.jsx(ne,{className:"text-gray-700 font-medium",children:"Description"}),a.jsx(le,{value:b.description,onChange:v=>h({...b,description:v.target.value}),className:"mt-1 h-12 rounded-xl"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:"actif",checked:b.actif,onChange:v=>h({...b,actif:v.target.checked}),className:"w-4 h-4 text-blue-600 rounded"}),a.jsx(ne,{htmlFor:"actif",className:"text-gray-700 font-medium cursor-pointer",children:"Zone active"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs(te,{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(ts,{className:"w-4 h-4 mr-2"}),l?"Modifier":"Ajouter"]}),a.jsxs(te,{type:"button",variant:"outline",onClick:w,className:"rounded-xl",children:[a.jsx(Ze,{className:"w-4 h-4 mr-2"}),"Annuler"]})]})]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:t.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(Rt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Aucune zone trouve"})]}):t.map(v=>a.jsx("div",{className:"p-6 hover:bg-blue-50/50 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center flex-shrink-0",children:a.jsx(Rt,{className:"w-6 h-6 text-blue-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-semibold text-gray-800 text-lg flex items-center gap-2",children:[v.nom,v.ville&&a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:v.ville}),v.actif&&a.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[a.jsx(ct,{className:"w-3 h-3 inline mr-1"}),"Active"]}),!v.actif&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:"Inactive"})]}),v.description&&a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.description})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(te,{onClick:()=>S(v),variant:"outline",className:"rounded-xl",children:[a.jsx(Vn,{className:"w-4 h-4 mr-2"}),"Modifier"]}),a.jsxs(te,{onClick:()=>x(v.id),variant:"outline",className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer"]})]})]})},v.id))})]}),a.jsx(zr,{isOpen:d.show,title:"Supprimer la zone",message:"tes-vous sr de vouloir supprimer cette zone ?",onConfirm:y,onCancel:()=>m({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function nde(){const e=at(),[t,r]=N.useState(null),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("all"),[u,f]=N.useState("all"),[d,m]=N.useState(!1);N.useEffect(()=>{const v=localStorage.getItem("admin_session");if(!v){e(ke("AdminLogin"));return}const _=JSON.parse(v);r(_),g(_.id)},[e]);const g=async v=>{o(!0);try{const _=await lt.getByUser(v,"admin"),C=(Array.isArray(_==null?void 0:_.data)?_.data:Array.isArray(_)?_:[]).sort(($,A)=>{const T=new Date($.date||$.date_creation||0);return new Date(A.date||A.date_creation||0)-T});s(C)}catch(_){console.error("Erreur lors du chargement des notifications:",_)}finally{o(!1)}},b=async v=>{try{await lt.marquerLue(v),s(_=>_.map(P=>P.id===v?{...P,lue:!0}:P))}catch(_){console.error("Erreur lors de la mise  jour:",_)}},h=async v=>{try{await lt.delete(v),s(_=>_.filter(P=>P.id!==v))}catch(_){console.error("Erreur lors de la suppression:",_)}},j=async()=>{if(t)try{await lt.deleteAll(t.id,"admin"),s([])}catch(v){console.error("Erreur lors de la suppression de toutes les notifications:",v)}},p=v=>{if(!v)return"";const _=new Date(v),C=new Date-_,$=Math.floor(C/6e4),A=Math.floor(C/36e5),T=Math.floor(C/864e5);return $<1?" l'instant":$<60?`Il y a ${$} min`:A<24?`Il y a ${A}h`:T<7?`Il y a ${T}j`:_.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},y=(v,_)=>{const P=(_==null?void 0:_.toLowerCase())||"",C=(v==null?void 0:v.toLowerCase())||"";return C==="alerte"||P.includes("accident")||P.includes("urgent")||P.includes("requis")?a.jsx(qe,{className:"w-5 h-5 text-red-500"}):C==="warning"||P.includes("attention")||P.includes("avertissement")?a.jsx(Es,{className:"w-5 h-5 text-orange-500"}):P.includes("message")||P.includes("contact")?a.jsx(Ui,{className:"w-5 h-5 text-blue-500"}):P.includes("rapport")||P.includes("rapports")?a.jsx(ya,{className:"w-5 h-5 text-purple-500"}):C==="success"||P.includes("confirm")||P.includes("valid")?a.jsx(ct,{className:"w-5 h-5 text-green-500"}):a.jsx(Qu,{className:"w-5 h-5 text-blue-500"})},x=(v,_)=>{const P=(v==null?void 0:v.toLowerCase())||"",C=(_==null?void 0:_.toLowerCase())||"";return P==="alerte"||C.includes("accident")||C.includes("urgent")||C.includes("requis")?"bg-red-50 border-red-200":P==="warning"||C.includes("attention")?"bg-orange-50 border-orange-200":P==="success"||C.includes("confirm")||C.includes("valid")?"bg-green-50 border-green-200":"bg-blue-50 border-blue-200"},S=n.filter(v=>{var _;return!(l==="unread"&&v.lue||l==="read"&&!v.lue||u!=="all"&&((_=v.type)==null?void 0:_.toLowerCase())!==u.toLowerCase())}),w=n.filter(v=>!v.lue).length;return i?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Mes Notifications",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-600 transition-colors",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsx(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl p-6 mb-8",children:a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-amber-500 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(zn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Mes Notifications"}),a.jsx("p",{className:"text-gray-500",children:w>0?`${w} notification${w>1?"s":""} non lue${w>1?"s":""}`:"Aucune notification non lue"})]})]})})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl shadow-lg p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par statut"]}),a.jsxs($e,{value:l,onValueChange:c,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes"}),a.jsxs(H,{value:"unread",children:["Non lues (",n.filter(v=>!v.lue).length,")"]}),a.jsxs(H,{value:"read",children:["Lues (",n.filter(v=>v.lue).length,")"]})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 inline mr-1"}),"Filtrer par type"]}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les types"}),a.jsx(H,{value:"info",children:"Informations"}),a.jsx(H,{value:"alerte",children:"Alertes"}),a.jsx(H,{value:"warning",children:"Avertissements"}),a.jsx(H,{value:"success",children:"Succs"})]})]})]})]}),n.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-2 pt-4 border-t border-gray-200",children:[w>0&&a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{n.filter(v=>!v.lue).forEach(v=>b(v.id))},className:"text-green-600 hover:text-green-700 hover:bg-green-50 rounded-xl",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Tout marquer comme lu"]}),a.jsxs(te,{variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-red-600 hover:text-red-700 hover:bg-red-50 rounded-xl",children:[a.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Supprimer toutes les notifications"]})]})]}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"space-y-4",children:S.length===0?a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[a.jsx(zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Aucune notification"}),a.jsx("p",{className:"text-gray-500",children:l==="all"?"Vous n'avez aucune notification pour le moment.":`Aucune notification ${l==="unread"?"non lue":"lue"} trouve.`})]}):S.map((v,_)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.05},className:`bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 ${v.lue?"border-gray-300 opacity-75":"border-amber-500"} ${x(v.type,v.titre)}`,children:a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`mt-1 ${v.lue?"opacity-50":""}`,children:y(v.type,v.titre)}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[a.jsx("h3",{className:`font-semibold text-gray-800 ${v.lue?"line-through":""}`,children:v.titre}),!v.lue&&a.jsx("span",{className:"px-2 py-1 bg-amber-500 text-white text-xs font-semibold rounded-full whitespace-nowrap",children:"Nouveau"})]}),a.jsx("p",{className:"text-gray-700 mb-3 whitespace-pre-wrap",children:v.message}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsx("span",{children:p(v.date||v.date_creation)}),v.type&&a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded-lg text-xs font-medium",children:v.type})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[!v.lue&&a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>b(v.id),className:"rounded-xl text-green-600 hover:text-green-700 hover:bg-green-50",title:"Marquer comme lu",children:a.jsx(ct,{className:"w-5 h-5"})}),a.jsx(te,{variant:"ghost",size:"sm",onClick:()=>h(v.id),className:"rounded-xl text-red-500 hover:text-red-600 hover:bg-red-50",title:"Supprimer",children:a.jsx(Ut,{className:"w-5 h-5"})})]})]})})},v.id))}),a.jsx(zr,{isOpen:d,title:"Supprimer toutes les notifications",message:"tes-vous sr de vouloir supprimer toutes les notifications ? Cette action est irrversible.",onConfirm:()=>{j(),m(!1)},onCancel:()=>m(!1),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"})]})}function ade(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,m]=N.useState([]),[g,b]=N.useState(!0),[h,j]=N.useState(null),[p,y]=N.useState(!1),[x,S]=N.useState(null),[w,v]=N.useState(null),[_,P]=N.useState(!1),[C,$]=N.useState(null),[A,T]=N.useState({show:!1,message:"",type:"success"}),[O,L]=N.useState({statut:"all",gravite:"all",bus:"all",dateDebut:"",dateFin:""});N.useEffect(()=>{M()},[]);const M=async()=>{b(!0),S(null);try{const[I,X,re,W,de,Ae]=await Promise.all([vn.getAll(),Pr.getAll(),an.getAll(),Yt.getAll(),jn.getAll(),ri.getAll()]),Be=(I==null?void 0:I.data)||I||[],K=(X==null?void 0:X.data)||X||[],U=(re==null?void 0:re.data)||re||[],J=(W==null?void 0:W.data)||W||[],D=(de==null?void 0:de.data)||de||[],Y=(Ae==null?void 0:Ae.data)||Ae||[],G=Array.isArray(Be)?Be.sort((ie,pe)=>new Date(pe.date||0)-new Date(ie.date||0)):[];r(G),s(Array.isArray(K)?K:[]),o(Array.isArray(U)?U:[]),c(Array.isArray(J)?J:[]),f(Array.isArray(D)?D:[]),m(Array.isArray(Y)?Y:[])}catch(I){console.error("Erreur lors du chargement:",I),S("Erreur lors du chargement des donnes")}finally{b(!1)}},F=async I=>{try{await vn.validate(I),await M(),T({show:!0,message:"Accident marqu comme lu avec succs",type:"success"})}catch(X){console.error("Erreur lors de la validation:",X),S("Erreur lors du marquage comme lu"),T({show:!0,message:"Erreur lors du marquage comme lu",type:"error"})}},R=async I=>{try{await an.licencier(I),await M(),P(!1),$(null),T({show:!0,message:"Chauffeur licenci avec succs. Le responsable a t notifi.",type:"success"})}catch(X){console.error("Erreur lors du licenciement:",X),S("Erreur lors du licenciement du chauffeur"),T({show:!0,message:"Erreur lors du licenciement du chauffeur",type:"error"})}},B=async I=>{if(!I.bus_id){S("Aucun bus associ  cet accident");return}try{const X=u.filter(J=>J.bus_id===I.bus_id&&J.statut==="Active"),re=l.filter(J=>X.some(D=>D.eleve_id===J.id)),W=[...new Set(re.map(J=>J.tuteur_id).filter(Boolean))],de=d.filter(J=>W.includes(J.id));if(de.length===0){S("Aucun tuteur trouv pour les lves de ce bus");return}const Ae=n.find(J=>J.id===I.bus_id),Be=(Ae==null?void 0:Ae.numero)||"Inconnu";let K=`Un accident a t dclar concernant le bus ${Be}.

`;K+=`Date: ${je(new Date(I.date),"dd/MM/yyyy",{locale:Xt})}`,I.heure&&(K+=`  ${I.heure}`),K+=`
Lieu: ${I.lieu||"Non spcifi"}
`,K+=`Gravit: ${I.gravite}

`,K+=`Description: ${I.description}
`,I.degats&&(K+=`Dgts: ${I.degats}
`),I.nombre_eleves!==null&&I.nombre_eleves!==void 0&&(K+=`Nombre d'lves dans le bus: ${I.nombre_eleves}
`),I.nombre_blesses!==null&&I.nombre_blesses!==void 0&&I.nombre_blesses>0&&(K+=`Nombre de blesss: ${I.nombre_blesses}
`),I.eleves_concernees&&Array.isArray(I.eleves_concernees)&&I.eleves_concernees.length>0&&(K+=`
lves prsents dans le bus:
`,I.eleves_concernees.forEach((J,D)=>{const Y=typeof J=="object"&&J.nom?`${J.prenom} ${J.nom}`:J;K+=`- ${Y}
`})),K+=`
Veuillez contacter l'cole pour plus d'informations.`;const U=de.map(J=>{const D=J.utilisateur_id||J.id;return lt.create({destinataire_id:D,destinataire_type:"tuteur",titre:"Accident dclar - Bus "+Be,message:K,type:"alerte"})});await Promise.all(U),T({show:!0,message:`Notifications envoyes  ${de.length} tuteur(s)`,type:"success"})}catch(X){console.error("Erreur lors de l'envoi des notifications:",X),S("Erreur lors de l'envoi des notifications aux tuteurs"),T({show:!0,message:"Erreur lors de l'envoi des notifications aux tuteurs",type:"error"})}},z=I=>({Lgre:"bg-yellow-100 text-yellow-700",Moyenne:"bg-orange-100 text-orange-700",Grave:"bg-red-100 text-red-700"})[I]||"bg-gray-100 text-gray-700";return g?a.jsx(Bt,{children:a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{children:[a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-yellow-50 p-4 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-4 flex justify-between items-center",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),x&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4 flex items-center justify-between",children:[a.jsx("span",{children:x}),a.jsx("button",{onClick:()=>S(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6"}),"Rapports d'Accidents"]}),a.jsx("p",{className:"text-red-100 mt-1",children:"Rapports reus des chauffeurs et responsables bus"})]}),a.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(sa,{className:"w-5 h-5 text-gray-600"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtres"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),a.jsxs($e,{value:O.statut,onValueChange:I=>L({...O,statut:I}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les statuts"}),a.jsx(H,{value:"En attente",children:"En attente"}),a.jsx(H,{value:"Valid",children:"Valid"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gravit"}),a.jsxs($e,{value:O.gravite,onValueChange:I=>L({...O,gravite:I}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les gravits"}),a.jsx(H,{value:"Lgre",children:"Lgre"}),a.jsx(H,{value:"Moyenne",children:"Moyenne"}),a.jsx(H,{value:"Grave",children:"Grave"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bus"}),a.jsxs($e,{value:O.bus,onValueChange:I=>L({...O,bus:I}),children:[a.jsx(Me,{className:"rounded-xl",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les bus"}),n.map(I=>a.jsx(H,{value:I.id.toString(),children:I.numero},I.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date dbut"}),a.jsx(le,{type:"date",value:O.dateDebut,onChange:I=>L({...O,dateDebut:I.target.value}),className:"rounded-xl"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date fin"}),a.jsx(le,{type:"date",value:O.dateFin,onChange:I=>L({...O,dateFin:I.target.value}),className:"rounded-xl"})]})]}),(O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin)&&a.jsx(te,{variant:"outline",onClick:()=>L({statut:"all",gravite:"all",bus:"all",dateDebut:"",dateFin:""}),className:"mt-4 rounded-xl",children:"Rinitialiser les filtres"})]}),a.jsx("div",{className:"divide-y divide-gray-100",children:filteredAccidents.length===0?a.jsxs("div",{className:"p-12 text-center text-gray-400",children:[a.jsx(qe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsxs("p",{children:["Aucun accident dclar",O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin?" (aprs filtrage)":""]})]}):a.jsxs(a.Fragment,{children:[(O.statut!=="all"||O.gravite!=="all"||O.bus!=="all"||O.dateDebut||O.dateFin)&&a.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:filteredAccidents.length})," accident(s) trouv(s)",filteredAccidents.length!==t.length&&a.jsxs("span",{children:[" sur ",t.length," total"]})]})}),filteredAccidents.map(I=>{const X=n.find(Ae=>Ae.id===I.bus_id),re=I.chauffeur_id?i.find(Ae=>Ae.id===I.chauffeur_id):null,de=(I.chauffeur_id?t.filter(Ae=>Ae.chauffeur_id===I.chauffeur_id):[]).length>=3;return a.jsx("div",{className:"p-6 hover:bg-red-50/50 transition-colors",children:a.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3 flex-wrap",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${z(I.gravite)}`,children:I.gravite}),I.statut==="En attente"&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-700",children:"En attente"}),I.statut==="Valid"&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-700",children:"Valid"}),I.blesses&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-700",children:"Blesss"}),de&&I.chauffeur_id&&a.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-red-500 text-white font-bold",children:"  LICENCIER (3 accidents)"})]}),a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Jr,{className:"w-4 h-4 text-gray-400"}),je(new Date(I.date),"dd MMMM yyyy",{locale:Xt}),I.heure&&`  ${I.heure}`]}),X&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(tt,{className:"w-4 h-4 text-amber-500"}),X.numero]}),(I.chauffeur_prenom||I.chauffeur_nom)&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ft,{className:"w-4 h-4 text-green-500"}),I.chauffeur_prenom||""," ",I.chauffeur_nom||""]}),(I.responsable_prenom||I.responsable_nom)&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ft,{className:"w-4 h-4 text-blue-500"}),I.responsable_prenom||""," ",I.responsable_nom||""," (Responsable)"]}),I.lieu&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Rt,{className:"w-4 h-4 text-red-500"}),I.lieu]}),I.nombre_eleves!==null&&I.nombre_eleves!==void 0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(zt,{className:"w-4 h-4 text-blue-500"}),I.nombre_eleves," lve(s)"]}),I.nombre_blesses!==null&&I.nombre_blesses!==void 0&&I.nombre_blesses>0&&a.jsxs("div",{className:"flex items-center gap-1 text-red-600 font-semibold",children:[a.jsx(qe,{className:"w-4 h-4"}),I.nombre_blesses," bless(s)"]})]}),a.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:I.description}),I.degats&&a.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[a.jsx("strong",{children:"Dgts:"})," ",I.degats]}),I.photos&&(()=>{try{let Ae=!1;if(Array.isArray(I.photos)&&I.photos.length>0)Ae=!0;else if(typeof I.photos=="string"&&I.photos.trim()!=="")if(I.photos.startsWith("data:image"))Ae=!0;else try{const Be=JSON.parse(I.photos);Ae=Array.isArray(Be)&&Be.length>0}catch{Ae=!1}return Ae?a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-sm mt-2",children:[a.jsx(Od,{className:"w-4 h-4"}),a.jsx("span",{children:"Photos disponibles"})]}):null}catch{return null}})()]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(te,{variant:"outline",onClick:()=>{j(I),y(!0)},className:"rounded-xl",children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"Dtails"]}),I.statut==="En attente"&&a.jsxs(te,{onClick:()=>F(I.id),className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(Nw,{className:"w-4 h-4 mr-2"}),"Marquer comme lu"]}),I.bus_id&&a.jsxs(te,{onClick:()=>B(I),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Informer les tuteurs"]}),de&&I.chauffeur_id&&a.jsxs(te,{onClick:()=>{$({id:I.chauffeur_id,nom:I.chauffeur_nom||(re==null?void 0:re.nom)||"",prenom:I.chauffeur_prenom||(re==null?void 0:re.prenom)||""}),P(!0)},className:"bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold",children:[a.jsx(qe,{className:"w-4 h-4 mr-2"}),"Licencier"]})]})]})},I.id)})]})})]})]})}),_&&C&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(qe,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Licencier le chauffeur"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Cette action est irrversible"})]})]}),a.jsxs("div",{className:"mb-6 p-4 bg-red-50 rounded-xl border border-red-200",children:[a.jsxs("p",{className:"text-gray-800 mb-2",children:[a.jsx("strong",{children:"Chauffeur:"})," ",C.prenom," ",C.nom]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Le chauffeur sera supprim de la base de donnes, le bus sera dsaffect et le responsable sera notifi."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(te,{onClick:()=>{P(!1),$(null)},variant:"outline",className:"flex-1 rounded-xl",children:"Annuler"}),a.jsx(te,{onClick:()=>R(C.id),className:"flex-1 bg-red-600 hover:bg-red-700 text-white rounded-xl font-semibold",children:"Confirmer le licenciement"})]})]})}),p&&h&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-red-500 to-rose-500",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(qe,{className:"w-6 h-6"}),"Dtails de l'Accident"]}),a.jsx("button",{onClick:()=>{y(!1),j(null)},className:"text-white hover:text-red-100 transition-colors",children:""})]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date"}),a.jsxs("p",{className:"text-gray-800",children:[je(new Date(h.date),"dd MMMM yyyy",{locale:Xt}),h.heure&&`  ${h.heure}`]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Gravit"}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium inline-block ${z(h.gravite)}`,children:h.gravite})]}),h.lieu&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Lieu"}),a.jsx("p",{className:"text-gray-800",children:h.lieu})]}),(()=>{const I=n.find(X=>X.id===h.bus_id);return I?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Bus"}),a.jsx("p",{className:"text-gray-800",children:I.numero})]}):null})(),(h.chauffeur_prenom||h.chauffeur_nom||h.chauffeur_id)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Chauffeur"}),a.jsxs("p",{className:"text-gray-800",children:[h.chauffeur_prenom||""," ",h.chauffeur_nom||"",!h.chauffeur_prenom&&!h.chauffeur_nom&&h.chauffeur_id&&"Chauffeur ID: "+h.chauffeur_id]})]}),(h.responsable_prenom||h.responsable_nom||h.responsable_id)&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Responsable"}),a.jsxs("p",{className:"text-gray-800",children:[h.responsable_prenom||""," ",h.responsable_nom||"",!h.responsable_prenom&&!h.responsable_nom&&h.responsable_id&&"Responsable ID: "+h.responsable_id]})]}),h.nombre_eleves!==null&&h.nombre_eleves!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre d'lves"}),a.jsx("p",{className:"text-gray-800",children:h.nombre_eleves})]}),h.nombre_blesses!==null&&h.nombre_blesses!==void 0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nombre de blesss"}),a.jsx("p",{className:"text-red-600 font-semibold",children:h.nombre_blesses})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-800",children:h.description})]}),h.degats&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Dgts"}),a.jsx("p",{className:"text-gray-800",children:h.degats})]}),h.eleves_concernees&&Array.isArray(h.eleves_concernees)&&h.eleves_concernees.length>0&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(zt,{className:"w-4 h-4"}),"lves prsents dans le bus"]}),a.jsx("div",{className:"bg-blue-50 rounded-xl p-4",children:a.jsx("ul",{className:"space-y-2",children:h.eleves_concernees.map((I,X)=>a.jsx("li",{className:"text-gray-800",children:typeof I=="object"&&I.nom?`${I.prenom} ${I.nom}`:I},X))})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(Od,{className:"w-4 h-4"}),"Photos"]}),(()=>{try{let I=[];const X=h.photos;if(!X)return a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[a.jsx(Od,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune photo disponible"})]});if(Array.isArray(X))I=X;else if(typeof X=="string"&&X.trim()!=="")try{if(X.trim().startsWith("[")||X.trim().startsWith("{")){const W=JSON.parse(X);Array.isArray(W)?I=W:W&&typeof W=="object"&&(Array.isArray(W.photos)?I=W.photos:W.data&&Array.isArray(W.data)?I=W.data:(W.data||W.src||W.url)&&(I=[W.data||W.src||W.url]))}else X.startsWith("data:image")&&(I=[X])}catch(W){console.error("Erreur parsing photos:",W,X),X.startsWith("data:image")&&(I=[X])}const re=I.map((W,de)=>typeof W=="string"?W.trim()!==""&&(W.startsWith("data:image")||W.startsWith("http"))?W:null:W&&typeof W=="object"&&(W.data||W.src||W.url||W.base64)||null).filter(W=>W&&typeof W=="string"&&W.trim()!==""&&(W.startsWith("data:image")||W.startsWith("http")));return re.length===0?a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 text-center",children:[a.jsx(Od,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune photo valide"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Les photos peuvent tre corrompues ou dans un format non support"})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:re.map((W,de)=>a.jsx(ee.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group cursor-pointer",onClick:()=>v(W),children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-gray-200 group-hover:border-red-400 transition-colors bg-gray-100",children:[a.jsx("img",{src:W,alt:`Photo ${de+1}`,className:"w-full h-32 object-cover",onError:Ae=>{console.error("Erreur chargement image:",de,W==null?void 0:W.substring(0,50)),Ae.target.parentElement.style.display="none"},onLoad:()=>{console.log("Image charge avec succs:",de)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(_i,{className:"w-5 h-5 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),a.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:["Photo ",de+1]})]})},de))})}catch(I){return console.error("Erreur traitement photos:",I,h.photos),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Erreur lors du chargement des photos"}),a.jsx("p",{className:"text-red-500 text-xs mt-1",children:I.message})]})}})()]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3",children:[a.jsx(te,{variant:"outline",onClick:()=>{y(!1),j(null)},className:"rounded-xl",children:"Fermer"}),h.statut==="En attente"&&a.jsxs(te,{onClick:()=>{F(h.id),y(!1),j(null)},className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(Nw,{className:"w-4 h-4 mr-2"}),"Marquer comme lu"]}),h.bus_id&&a.jsxs(te,{onClick:()=>B(h),className:"bg-blue-500 hover:bg-blue-600 text-white rounded-xl",children:[a.jsx(Ui,{className:"w-4 h-4 mr-2"}),"Informer les tuteurs"]})]})]})}),a.jsx(Br,{children:w&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[60] p-4",onClick:()=>v(null),children:a.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:I=>I.stopPropagation(),children:[a.jsx("button",{onClick:()=>v(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsx("img",{src:w,alt:"Photo accident",className:"w-full h-auto rounded-lg shadow-2xl"})]})})}),a.jsx(vp,{isOpen:A.show,message:A.message,type:A.type,onClose:()=>T({show:!1,message:"",type:"success"})})]})}function sde(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState(null),[d,m]=N.useState(!1),[g,b]=N.useState(null),[h,j]=N.useState("all"),[p,y]=N.useState("all"),[x,S]=N.useState(null),[w,v]=N.useState({show:!1,id:null}),[_,P]=N.useState({show:!1,message:"",type:"success"});N.useEffect(()=>{C()},[]);const C=async()=>{c(!0),b(null);try{const[R,B,z]=await Promise.all([da.getAll(),Pr.getAll(),an.getAll()]),I=(R==null?void 0:R.data)||R||[],X=(B==null?void 0:B.data)||B||[],re=(z==null?void 0:z.data)||z||[];r(Array.isArray(I)?I.sort((W,de)=>new Date(de.date_creation||0)-new Date(W.date_creation||0)):[]),s(Array.isArray(X)?X:[]),o(Array.isArray(re)?re:[])}catch(R){console.error("Erreur lors du chargement:",R),b("Erreur lors du chargement des donnes")}finally{c(!1)}},$=async(R,B)=>{try{await da.update(R,{statut:B}),await C(),P({show:!0,message:`Signalement marqu comme ${B==="resolu"?"rsolu":B==="en_cours"?"en cours":"en attente"}`,type:"success"})}catch(z){console.error("Erreur lors de la mise  jour:",z),b("Erreur lors de la mise  jour du statut"),P({show:!0,message:"Erreur lors de la mise  jour du statut",type:"error"})}},A=R=>{v({show:!0,id:R})},T=async()=>{if(w.id)try{await da.delete(w.id),await C(),v({show:!1,id:null})}catch(R){console.error("Erreur lors de la suppression:",R),b("Erreur lors de la suppression du signalement"),v({show:!1,id:null})}},O=R=>{switch(R){case"haute":return"bg-red-100 text-red-700 border-red-300";case"moyenne":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"faible":return"bg-green-100 text-green-700 border-green-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},L=R=>{switch(R){case"resolu":return"bg-green-100 text-green-700 border-green-300";case"en_cours":return"bg-blue-100 text-blue-700 border-blue-300";case"en_attente":return"bg-yellow-100 text-yellow-700 border-yellow-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},M=R=>({mecanique:"Mcanique",eclairage:"clairage",portes:"Portes",climatisation:"Climatisation",pneus:"Pneus",autre:"Autre"})[R]||R,F=t.filter(R=>!(h!=="all"&&R.statut!==h||p!=="all"&&R.urgence!==p));return l?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion des Problmes de Maintenance",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),g&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 text-red-700 px-6 py-4 rounded-lg mb-6 shadow-sm",children:a.jsx("p",{className:"font-medium",children:g})}),a.jsxs("div",{className:"mb-6 flex gap-4 items-center",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par statut"}),a.jsxs($e,{value:h,onValueChange:j,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les statuts"}),a.jsx(H,{value:"en_attente",children:"En attente"}),a.jsx(H,{value:"en_cours",children:"En cours"}),a.jsx(H,{value:"resolu",children:"Rsolu"})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par urgence"}),a.jsxs($e,{value:p,onValueChange:y,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Toutes les urgences"}),a.jsx(H,{value:"haute",children:"Haute"}),a.jsx(H,{value:"moyenne",children:"Moyenne"}),a.jsx(H,{value:"faible",children:"Faible"})]})]})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-orange-600 via-orange-700 to-orange-600 flex justify-between items-center",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Zn,{className:"w-7 h-7 text-white"})}),"Gestion des Problmes de Maintenance"]})}),a.jsxs("div",{className:"divide-y divide-orange-100",children:[F.map(R=>{const B=n.find(I=>I.id===R.bus_id),z=i.find(I=>I.id===R.chauffeur_id);return a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-orange-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-start gap-6 flex-1",children:[a.jsx("div",{className:`w-20 h-20 rounded-2xl flex items-center justify-center shadow-lg ${R.urgence==="haute"?"bg-gradient-to-br from-red-600 to-red-700":R.urgence==="moyenne"?"bg-gradient-to-br from-yellow-600 to-yellow-700":"bg-gradient-to-br from-green-600 to-green-700"}`,children:a.jsx(Zn,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:M(R.type_probleme)}),a.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold border-2 ${O(R.urgence)}`,children:R.urgence==="haute"?"URGENT":R.urgence==="moyenne"?"Moyenne":"Faible"}),a.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold border-2 ${L(R.statut)}`,children:R.statut==="resolu"?"Rsolu":R.statut==="en_cours"?"En cours":"En attente"})]}),a.jsx("p",{className:"text-gray-700 mb-4",children:R.description}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[B&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),B.numero]}),z&&a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(ft,{className:"w-4 h-4"}),z.prenom," ",z.nom]}),a.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl font-semibold shadow-md flex items-center gap-2",children:[a.jsx(Jr,{className:"w-4 h-4"}),je(new Date(R.date_creation),"dd/MM/yyyy HH:mm",{locale:Xt})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 ml-6",children:[a.jsx(te,{variant:"outline",size:"icon",onClick:()=>{f(R),m(!0)},className:"rounded-xl border-2 border-orange-300 text-orange-700 hover:bg-orange-50 hover:border-orange-400 w-11 h-11 shadow-md",children:a.jsx(_a,{className:"w-5 h-5"})}),R.statut!=="resolu"&&a.jsx(te,{variant:"outline",size:"icon",onClick:()=>$(R.id,"resolu"),className:"rounded-xl border-2 border-green-300 text-green-700 hover:bg-green-50 hover:border-green-400 w-11 h-11 shadow-md",children:a.jsx(ct,{className:"w-5 h-5"})}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>A(R.id),className:"rounded-xl border-2 border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 w-11 h-11 shadow-md",children:a.jsx(Ze,{className:"w-5 h-5"})})]})]})},R.id)}),F.length===0&&a.jsxs("div",{className:"p-16 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Zn,{className:"w-10 h-10 text-orange-600 opacity-60"})}),a.jsx("p",{className:"text-orange-700 font-semibold text-lg",children:"Aucun problme signal"}),a.jsx("p",{className:"text-orange-600 text-sm mt-2",children:"Les signalements de maintenance apparatront ici"})]})]})]}),d&&u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsx(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-3xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(Zn,{className:"w-8 h-8 text-orange-600"}),"Dtails du Signalement"]}),a.jsx(te,{variant:"outline",size:"icon",onClick:()=>{m(!1),f(null)},className:"rounded-xl",children:a.jsx(Ze,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Type de problme"}),a.jsx("p",{className:"text-gray-800 font-semibold",children:M(u.type_probleme)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Urgence"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-lg font-semibold ${O(u.urgence)}`,children:u.urgence==="haute"?"URGENT":u.urgence==="moyenne"?"Moyenne":"Faible"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Statut"}),a.jsx("span",{className:`inline-block px-3 py-1 rounded-lg font-semibold ${L(u.statut)}`,children:u.statut==="resolu"?"Rsolu":u.statut==="en_cours"?"En cours":"En attente"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de signalement"}),a.jsx("p",{className:"text-gray-800",children:je(new Date(u.date_creation),"dd/MM/yyyy  HH:mm",{locale:Xt})})]})]}),u.bus_id&&(()=>{const R=n.find(B=>B.id===u.bus_id);return R?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-2",children:[a.jsx(tt,{className:"w-4 h-4"}),"Bus concern"]}),a.jsx("p",{className:"text-gray-800 font-semibold",children:R.numero})]}):null})(),u.chauffeur_id&&(()=>{const R=i.find(B=>B.id===u.chauffeur_id);return R?a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-1 flex items-center gap-2",children:[a.jsx(ft,{className:"w-4 h-4"}),"Chauffeur"]}),a.jsxs("p",{className:"text-gray-800",children:[R.prenom," ",R.nom]})]}):null})(),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("p",{className:"text-gray-800 bg-gray-50 p-4 rounded-xl",children:u.description})]}),u.photos&&(()=>{try{let R=[];if(Array.isArray(u.photos)?R=u.photos:typeof u.photos=="string"&&(R=JSON.parse(u.photos)),Array.isArray(R)&&R.length>0)return a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[a.jsx(La,{className:"w-4 h-4"}),"Photos (",R.length,")"]}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:R.map((B,z)=>{const I=typeof B=="string"?B:(B==null?void 0:B.data)||(B==null?void 0:B.src)||B;return I?a.jsx("div",{className:"relative group cursor-pointer",onClick:()=>S(I),children:a.jsxs("div",{className:"relative overflow-hidden rounded-lg border-2 border-gray-200 group-hover:border-orange-400 transition-colors",children:[a.jsx("img",{src:I,alt:`Photo problme ${z+1}`,className:"w-full h-32 object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center",children:a.jsx(_i,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]})},z):null})})]})}catch(R){console.error("Erreur parsing photos:",R)}return null})(),u.date_resolution&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Date de rsolution"}),a.jsx("p",{className:"text-gray-800",children:je(new Date(u.date_resolution),"dd/MM/yyyy  HH:mm",{locale:Xt})})]})]}),a.jsxs("div",{className:"p-6 border-t border-gray-100 flex justify-end gap-3 mt-6",children:[a.jsx(te,{variant:"outline",onClick:()=>{m(!1),f(null)},className:"rounded-xl",children:"Fermer"}),u.statut!=="resolu"&&a.jsxs(te,{onClick:()=>{$(u.id,"resolu"),m(!1),f(null)},className:"bg-green-500 hover:bg-green-600 text-white rounded-xl",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Marquer comme rsolu"]})]})]})})}),x&&a.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>S(null),children:a.jsxs(ee.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative max-w-5xl max-h-[90vh] w-full",onClick:R=>R.stopPropagation(),children:[a.jsx("button",{onClick:()=>S(null),className:"absolute top-4 right-4 z-10 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 shadow-lg transition-colors",children:a.jsx(Ze,{className:"w-6 h-6"})}),a.jsx("img",{src:x,alt:"Photo problme",className:"w-full h-auto rounded-lg shadow-2xl"})]})}),a.jsx(zr,{isOpen:w.show,title:"Supprimer le signalement",message:"tes-vous sr de vouloir supprimer ce signalement ? Cette action est irrversible.",onConfirm:T,onCancel:()=>v({show:!1,id:null}),confirmText:"Supprimer",cancelText:"Annuler",variant:"destructive"}),a.jsx(vp,{isOpen:_.show,message:_.message,type:_.type,onClose:()=>P({show:!1,message:"",type:"success"})})]})}function ide(){const e=at(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(!0),[u,f]=N.useState("all"),[d,m]=N.useState(""),[g,b]=N.useState("mois");N.useEffect(()=>{h();const x=setInterval(h,3e4);return()=>clearInterval(x)},[]);const h=async()=>{c(!0);try{const[x,S,w]=await Promise.all([Oc.getAll(),Pr.getAll(),an.getAll()]),v=(x==null?void 0:x.data)||x||[],_=(S==null?void 0:S.data)||S||[],P=(w==null?void 0:w.data)||w||[];r(Array.isArray(v)?v:[]),s(Array.isArray(_)?_:[]),o(Array.isArray(P)?P:[])}catch(x){console.error("Erreur lors du chargement:",x)}finally{c(!1)}},j=N.useMemo(()=>{let x=t;u!=="all"&&(x=x.filter(w=>w.bus_id===parseInt(u))),d&&(x=x.filter(w=>w.date===d));const S=new Date;if(g==="jour"){const w=je(S,"yyyy-MM-dd");x=x.filter(v=>v.date===w)}else if(g==="semaine"){const w=new Date(S);w.setDate(w.getDate()-7),x=x.filter(v=>new Date(v.date)>=w)}else if(g==="mois"){const w=new Date(S.getFullYear(),S.getMonth(),1);x=x.filter(v=>new Date(v.date)>=w)}return x},[t,u,d,g]),p=N.useMemo(()=>{const x={};return j.forEach(S=>{const w=S.bus_id;x[w]||(x[w]={bus_numero:S.bus_numero,bus_marque:S.bus_marque,bus_modele:S.bus_modele,totalLitres:0,totalCout:0,nombrePrises:0,prixMoyenLitre:0}),x[w].totalLitres+=parseFloat(S.quantite_litres||0),x[w].totalCout+=parseFloat(S.prix_total||0),x[w].nombrePrises+=1}),Object.keys(x).forEach(S=>{const w=x[S];w.totalLitres>0&&(w.prixMoyenLitre=w.totalCout/w.totalLitres)}),Object.values(x).sort((S,w)=>w.totalLitres-S.totalLitres)},[j]),y=N.useMemo(()=>{const x=j.reduce((_,P)=>_+parseFloat(P.quantite_litres||0),0),S=j.reduce((_,P)=>_+parseFloat(P.prix_total||0),0),w=j.length,v=x>0?S/x:0;return{totalLitres:x,totalCout:S,nombrePrises:w,prixMoyenLitre:v}},[j]);return l?a.jsx(Bt,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:a.jsx("div",{className:"w-12 h-12 border-4 border-amber-700 border-t-transparent rounded-full animate-spin"})})}):a.jsxs(Bt,{title:"Gestion de la Consommation d'Essence",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>e(ke("AdminDashboard")),className:"flex items-center gap-2 text-gray-600 hover:text-amber-800 transition-colors font-medium",children:[a.jsx(rr,{className:"w-4 h-4"}),"Retour au tableau de bord"]})}),a.jsxs("div",{className:"mb-6 flex gap-4 items-end",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrer par bus"}),a.jsxs($e,{value:u,onValueChange:f,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"all",children:"Tous les bus"}),n.map(x=>a.jsxs(H,{value:x.id.toString(),children:[x.numero," - ",x.marque," ",x.modele]},x.id))]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priode"}),a.jsxs($e,{value:g,onValueChange:b,children:[a.jsx(Me,{className:"w-full rounded-xl border-2 border-amber-200",children:a.jsx(De,{})}),a.jsxs(Te,{children:[a.jsx(H,{value:"tous",children:"Toutes les priodes"}),a.jsx(H,{value:"jour",children:"Aujourd'hui"}),a.jsx(H,{value:"semaine",children:"7 derniers jours"}),a.jsx(H,{value:"mois",children:"Ce mois"})]})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date spcifique"}),a.jsx(le,{type:"date",value:d,onChange:x=>m(x.target.value),className:"rounded-xl border-2 border-amber-200"})]}),a.jsx("div",{})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(tn,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total litres"}),a.jsxs("p",{className:"text-3xl font-bold",children:[y.totalLitres.toFixed(1)," L"]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(lu,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Cot total"}),a.jsxs("p",{className:"text-3xl font-bold",children:[y.totalCout.toFixed(2)," DH"]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(Jr,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Nombre de prises"}),a.jsx("p",{className:"text-3xl font-bold",children:y.nombrePrises})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-2xl p-6 text-white shadow-lg",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx(QD,{className:"w-8 h-8 opacity-80"})}),a.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Prix moyen /L"}),a.jsxs("p",{className:"text-3xl font-bold",children:[y.prixMoyenLitre.toFixed(2)," DH"]})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-amber-100 mb-6",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-amber-600 via-amber-700 to-amber-600",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(tt,{className:"w-7 h-7 text-white"})}),"Consommation par Bus"]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:p.length===0?a.jsxs("div",{className:"p-16 text-center",children:[a.jsx(tn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-semibold",children:"Aucune consommation enregistre"})]}):p.map((x,S)=>a.jsx(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:S*.1},className:"p-8 hover:bg-gradient-to-r hover:from-amber-50 hover:to-white transition-all duration-300",children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-600 to-amber-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(tt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-amber-900 mb-3",children:x.bus_numero}),a.jsxs("p",{className:"text-gray-600 mb-4",children:[x.bus_marque," ",x.bus_modele]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total litres"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[x.totalLitres.toFixed(1)," L"]})]}),a.jsxs("div",{className:"bg-green-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Cot total"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[x.totalCout.toFixed(2)," DH"]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Nombre de prises"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:x.nombrePrises})]}),a.jsxs("div",{className:"bg-orange-50 rounded-xl p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Prix moyen /L"}),a.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[x.prixMoyenLitre.toFixed(2)," DH"]})]})]})]})]})})},x.bus_numero))})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-200",children:[a.jsx("div",{className:"p-8 bg-gradient-to-r from-gray-700 via-gray-800 to-gray-700",children:a.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:a.jsx(Jr,{className:"w-7 h-7 text-white"})}),"Historique des Prises d'Essence"]})}),a.jsx("div",{className:"divide-y divide-gray-100",children:j.length===0?a.jsxs("div",{className:"p-16 text-center",children:[a.jsx(tn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 font-semibold",children:"Aucune prise d'essence enregistre"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Les remplissages d'essence effectus par les chauffeurs apparatront ici"})]}):j.map(x=>a.jsx(ee.div,{className:"p-8 hover:bg-gradient-to-r hover:from-gray-50 hover:to-white transition-all duration-300",whileHover:{x:4},children:a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{className:"flex items-start gap-6",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-blue-700 rounded-2xl flex items-center justify-center shadow-lg",children:a.jsx(tn,{className:"w-8 h-8 text-white"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:[je(new Date(x.date),"dd MMMM yyyy",{locale:Xt}),"  ",x.heure]}),x.bus_numero&&a.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white rounded-xl font-semibold shadow-md",children:x.bus_numero})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Quantit"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[x.quantite_litres," L"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prix total"}),a.jsxs("p",{className:"text-lg font-semibold text-green-600",children:[parseFloat(x.prix_total).toFixed(2)," DH"]})]}),x.kilometrage_actuel&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Kilomtrage"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[x.kilometrage_actuel," km"]})]}),x.station_service&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Station"}),a.jsx("p",{className:"text-lg font-semibold text-gray-800",children:x.station_service})]}),x.chauffeur_prenom&&a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Chauffeur"}),a.jsxs("p",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[a.jsx(ft,{className:"w-4 h-4"}),x.chauffeur_prenom," ",x.chauffeur_nom]})]})]})]})]})})},x.id))})]})]})}function ode(){return a.jsx(FD,{children:a.jsxs(MD,{children:[a.jsx(dt,{path:"/",element:a.jsx(C1,{})}),a.jsx(dt,{path:"/Home",element:a.jsx(C1,{})}),a.jsx(dt,{path:"/ChauffeurLogin",element:a.jsx(xL,{})}),a.jsx(dt,{path:"/ChauffeurDashboard",element:a.jsx(s8,{})}),a.jsx(dt,{path:"/ChauffeurNotifications",element:a.jsx(i8,{})}),a.jsx(dt,{path:"/ResponsableLogin",element:a.jsx(o8,{})}),a.jsx(dt,{path:"/ResponsableDashboard",element:a.jsx(c8,{})}),a.jsx(dt,{path:"/ResponsableEleveDetails",element:a.jsx(Tue,{})}),a.jsx(dt,{path:"/TuteurLogin",element:a.jsx(kue,{})}),a.jsx(dt,{path:"/TuteurRegister",element:a.jsx(Lue,{})}),a.jsx(dt,{path:"/TuteurDashboard",element:a.jsx(Iue,{})}),a.jsx(dt,{path:"/TuteurProfile",element:a.jsx(Rue,{})}),a.jsx(dt,{path:"/TuteurInscription",element:a.jsx(zue,{})}),a.jsx(dt,{path:"/TuteurPaiement",element:a.jsx(Vue,{})}),a.jsx(dt,{path:"/TuteurEleveDetails",element:a.jsx(Uue,{})}),a.jsx(dt,{path:"/TuteurDemandes",element:a.jsx(Wue,{})}),a.jsx(dt,{path:"/TuteurNotifications",element:a.jsx(Hue,{})}),a.jsx(dt,{path:"/AdminLogin",element:a.jsx(que,{})}),a.jsx(dt,{path:"/AdminDashboard",element:a.jsx(Kue,{})}),a.jsx(dt,{path:"/AdminEleves",element:a.jsx(Jue,{})}),a.jsx(dt,{path:"/AdminBus",element:a.jsx(Yue,{})}),a.jsx(dt,{path:"/AdminChauffeurs",element:a.jsx(Xue,{})}),a.jsx(dt,{path:"/AdminInscriptions",element:a.jsx(Zue,{})}),a.jsx(dt,{path:"/AdminStats",element:a.jsx(Que,{})}),a.jsx(dt,{path:"/AdminPaiements",element:a.jsx(ede,{})}),a.jsx(dt,{path:"/AdminZones",element:a.jsx(rde,{})}),a.jsx(dt,{path:"/AdminProfile",element:a.jsx(tde,{})}),a.jsx(dt,{path:"/AdminNotifications",element:a.jsx(nde,{})}),a.jsx(dt,{path:"/AdminAccidents",element:a.jsx(ade,{})}),a.jsx(dt,{path:"/AdminProblemes",element:a.jsx(sde,{})}),a.jsx(dt,{path:"/AdminEssence",element:a.jsx(ide,{})}),a.jsx(dt,{path:"*",element:a.jsx(TD,{to:"/",replace:!0})})]})})}Lg.createRoot(document.getElementById("root")).render(a.jsx(V.StrictMode,{children:a.jsx(ode,{})}));
